/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
(self.webpackChunkcommunity = self.webpackChunkcommunity || []).push([
  [9349],
  {
    1761: (e) => {
      e.exports = {
        countdownCtn: "awreXjcc0rPHZpdJamPTz",
        Closed: "_26nqfWJ137qnlZJ_bySm1Z",
        CountDownCtn: "_7do5RK--3j5r01z5uVM9s",
        CountDownTime: "_3wwxFvsBvHT1vBtwz70Ce1",
        CountDownText: "_6MmR7HgOeFT1Tivr4_Lnb",
        LearnMore: "kL9GFLwPY-Nz2VUeeupXl",
        Throbber: "_318ndTUunWAEdKDT--3b3Z",
        WinnerInfo: "_2iyxC5L1orrcLxvPeAESPJ",
        WinnerCount: "_2cdseN_ICa1JO4Dfi0Hj7v",
        WinnerText: "_2s2hb0IkJwofc11QW8qTr9",
      };
    },
    29229: (e) => {
      e.exports = { DialogCtn: "_2LwQUmGZ5SmNkVTSzGuq4J" };
    },
    32364: (e) => {
      e.exports = {
        DisplaySectionHeaderContainer: "_1xnIXWjdhCoRxuorR33Hja",
        DisplaySectionHeader: "_34f0ckwUpFDCDFOre5vKKc",
        DisplaySectionSubHeader: "_23nhJsiCnqk1JbRY4BqQYI",
        DisplaySectionEmpty: "_2BmSNGrjP-OITpT0J86b8v",
        EventDashboardDataCtn: "_1uPNGB9kdIqm4bvA3MWImI",
        LoadMoreEventsCtn: "_2asU2ngzNsnuUiOXlnE9gs",
        EventDashboardCtn: "_2WqPrwl1Lj6NrDCl6PxxBM",
        EventDashAdminToolsCtn: "_1OMO4Lb3thfoiLCtomeJ5l",
        EventDashboardSearchCtn: "_2Xt1OEvVr8cLVtuc0pJgwh",
        MainLists: "_2Yhqn7VDJjxvfEh06aKUZr",
        ManageButton: "_230VZeyDMcnXTFGA7wbiRz",
        Edit: "pvLmXgZ5uK2ammqFQVDtK",
        Delete: "_9SG7g0HWSikC38CnZUZPa",
        Clone: "_21_l8F0r9GZ8oNHQawRql9",
        View: "_3xhNUX1f66dkbO0jpbcrUB",
        Publish: "_2ewSqivponp2ZnRx--ccH",
        Section: "_16BNVQTv5mM5n7gkZtksG1",
        Unpublished: "_2MUzvx5CleYIyyUnHga8ex",
        AuditInfoItem: "_3zF56_7Le3QZgMK6daAhiC",
        AuditItemStatsCtn: "_2is7FNTYDmGf8I2LvURouk",
      };
    },
    1323: (e) => {
      e.exports = {
        TileContainer: "_1eeyC5eleIewWdIjFUHKZF",
        ShowEventMetaDataSizes: "EU0bQ6RzkpH7YEV3PqpFi",
        EventStateUpcoming: "qfpNtFPUJlNjLktoUvJ0k",
        EventStateActive: "_3F1Bjy-j37LMI3EtJA1h2Q",
        EventStateRecent: "_2ge3pkXyDOZWz8-ARJz8UM",
        TileStats: "GZhweiVUpwbzoIjDE7u-Z",
        Spacer: "Lux3qW8DzWm72y25tK65P",
        TileImageCtn: "_1vi2yQBaJNZnrkCvcAkYPu",
        TileImage: "_5NjHVepJ-MpagvcelrrLe",
        TileTextContainer: "_31yesbrR3TY0eFzQ5LMPfu",
        TileTextAppName: "_3x6bHYqsfNw0nz_4TDuSxI",
        TileTextEventType: "_2DMSloKwrNjr6coAQd8ZiI",
        TileHasSale: "_1trq1cVOPKvVg7fFpo7i1j",
        TileTextStartsIn: "_3jRSO6lxpLL9G3wo0SR_bn",
        TileTextSubTitle: "_3Sc1E4dUzfzO6of2iXaKtc",
        TileDescriptionContainer: "_2yxWDPnwMaM08JNkzITkA2",
        TileButtonContainer: "_1JNbDS8V61g_7Wpc_xtkEQ",
        TileAgeNotAppropriate: "_1EyzXBq7ZEaS5rLANMjygs",
        ManageButton: "_60IytO_Ke7DCDgSXKUCxJ",
        Edit: "_2h3YfZsHYE19rH00uHNKVS",
        Delete: "_8zmLUr-qx1Bzu4WqzkSj2",
        Clone: "_1QJ8IfR50ZDSYZqiwaHD6Z",
        View: "_1IvY3uUm_10hrO9weWkZ3L",
        Publish: "_1szIuk73YkbLwAB0TblZQB",
        CloneLangAlert: "_2U-5yBEKxtzmhHMrEKXA09",
        CloneLangListCtn: "_3Nj5xHseX0-Ki-jpnVPZzP",
        CloneCheckBox: "_28WRJt_EhqnDXXoRbzDKHq",
        MetaDataCtn: "_3EXNJZmBWQbV9eSwfrVIgH",
      };
    },
    82227: (e, t, n) => {
      "use strict";
      n.d(t, { M: () => D, q: () => b });
      var a = n(85556),
        l = n(47427),
        i = n(27605),
        r = n(37563),
        o = n(77936),
        s = n(35427),
        c = n(31959),
        d = n(74257),
        m = n(94621),
        u = n(18538),
        E = n(49513),
        v = n(32144),
        p = n(45167),
        h = n(10162),
        _ = n(91494),
        g = n(73941);
      let S = class extends l.Component {
        constructor() {
          super(...arguments), (this.m_clanSteamID = new s.K(r.JA.CLANSTEAMID));
        }
        componentDidMount() {
          d.wk.GetEditModel() &&
            "view" === this.props.mode &&
            d.wk.GetEditModel().ClearDirty();
        }
        componentDidUpdate(e) {
          d.wk.GetEditModel() &&
            "view" === this.props.mode &&
            d.wk.GetEditModel().ClearDirty();
        }
        render() {
          const { mode: e } = this.props;
          if ("view" === e) {
            let e = d.wk.GetEditModel().GetEventModel(),
              t = (0, o.jM)(r.De.LANGUAGE);
            return e.BHasSaleEnabled()
              ? l.createElement(
                  h.SV,
                  null,
                  l.createElement(_.oS, {
                    eventModel: e,
                    bIsPreview: !0,
                    language: t,
                  }),
                )
              : l.createElement(
                  l.Fragment,
                  null,
                  l.createElement(c.TY, {
                    event: e,
                    lang: t,
                    partnerEventStore: d.wk,
                    emoticonStore: p.F,
                    adminPanel: l.createElement(E.H, {
                      eventModel: e,
                      partnerEventStore: d.wk,
                    }),
                    otherEventRow: l.createElement(v._G, {
                      clanAccountID: e.clanSteamID.GetAccountID(),
                      trackingLocation: 6,
                      gidAnnouncement: e.AnnouncementGID,
                      partnerEventStore: d.wk,
                      bViewAllShowInfiniteScroll: !e.BIsOGGEvent(),
                    }),
                  }),
                );
          }
          return l.createElement(m.H, {
            editModel: d.wk.GetEditModel(),
            appid_or_vanity_str: this.props.match.params.appid_or_vanity_str,
            gid: this.props.match.params.gid,
            bDisplaySale: "previewsale" === e,
          });
        }
      };
      S = (0, a.gn)([i.Pi], S);
      const b = (0, u.M)(S),
        D = (e) =>
          l.createElement(
            g.R0,
            Object.assign({}, e, {
              key: e.match.params.oldAnnouncementGID,
              bClearDirty: !0,
              bPreview: !1,
              bPreventRedirect: !0,
            }),
          );
    },
    76552: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { default: () => _t });
      var a = n(760),
        l = n(74257),
        i = n(47527),
        r = n(85556),
        o = n(80751),
        s = n.n(o),
        c = n(27605),
        d = n(47427),
        m = n(28017),
        u = n(77936),
        E = n(86878),
        v = n(35427),
        p = n(93243),
        h = n(88397),
        _ = n(84400),
        g = n(71741),
        S = n.n(g),
        b = n(91830),
        D = n(50898),
        C = n(90069),
        y = n(46882),
        I = n(62210),
        w = n(13129),
        k = n(31846),
        A = n(16649),
        f = n(20417),
        T = n(37563),
        x = n(18538),
        M = n(32364),
        L = n.n(M),
        N = n(49162),
        G = n(1485),
        P = n(1323);
      function B(e) {
        const { eventModel: t, fnOnGotoPage: n } = e;
        return t.bOldAnnouncement
          ? null
          : d.createElement(
              "div",
              {
                className: (0, w.Z)(P.ManageButton, P.Clone),
                onClick: (e) =>
                  (function (e, t, n) {
                    t.stopPropagation(),
                      l.wk
                        .LoadEditorModel(e.clanSteamID, e.GID)
                        .then((e) => {
                          const t = (0, N.HJ)(e, !0, !0, !0),
                            a = t.GetLanguagesWithTokens();
                          a.length > 1
                            ? (a.sort((e, t) =>
                                (0, k.Xx)(
                                  "#Language_" + (0, u.j_)(e),
                                ).localeCompare(
                                  (0, k.Xx)("#Language_" + (0, u.j_)(t)),
                                ),
                              ),
                              (0, C.AM)(
                                d.createElement(X, {
                                  langs: a,
                                  locData: t,
                                  fnOnGotoPage: n,
                                }),
                                window,
                              ))
                            : O(n, t);
                        })
                        .catch((e) => {
                          let t = (0, A.l)(e);
                          (0, C.AM)(
                            d.createElement(D.JX, {
                              strTitle: (0, k.Xx)("#EventEditor_CloneError"),
                              bAlertDialog: !0,
                              bDestructiveWarning: !0,
                              strDescription: (0, k.Xx)(
                                "#EventEditor_CloneError_Desc",
                                t.strErrorMsg,
                              ),
                            }),
                            window,
                            { strTitle: (0, k.Xx)("#EventEditor_CloneError") },
                          );
                        });
                  })(t, e, n),
              },
              (0, k.Xx)("#Button_Clone"),
            );
      }
      function O(e, t, n) {
        const a = l.wk.CreateClone();
        if (n && n.length > 0) {
          const e = t.GetLanguagesWithTokens();
          t.ClearLanguagesTokens(n),
            (a.GetEventModel().jsondata.bSaleEnabled = !0),
            (0, N.XS)(a, t, e),
            (a.GetEventModel().jsondata.bSaleEnabled = !1);
        }
        e(null, "clone");
      }
      function X(e) {
        const { langs: t, locData: n, closeModal: a, fnOnGotoPage: l } = e,
          i = (0, u.jM)(T.De.LANGUAGE),
          [r, o] = d.useState(new Set(t.filter((e) => e != i)));
        return d.createElement(
          D.uH,
          {
            strTitle: (0, k.Xx)("#Button_Clone"),
            onOK: () => O(l, n, Array.from(r)),
            strDescription: (0, k.Xx)("#EventEditor_Clone_MultiLanguages"),
            closeModal: a,
          },
          d.createElement(
            "div",
            { className: P.CloneLangAlert },
            (0, k.Xx)("#EventEditor_Clone_Alert"),
          ),
          d.createElement(
            "div",
            { className: P.CloneLangListCtn },
            t.map((e) =>
              d.createElement(G.ji, {
                key: e,
                className: P.CloneCheckBox,
                onChange: (t) => {
                  const n = new Set(r);
                  t ? n.delete(e) : n.add(e), o(n);
                },
                label: (0, k.Xx)("#Language_" + (0, u.j_)(e)),
                checked: !r.has(e),
              }),
            ),
          ),
          d.createElement(
            G.zx,
            { onClick: () => o(new Set()) },
            (0, k.Xx)("#EventEditor_Clone_SelectAll"),
          ),
          d.createElement(
            G.zx,
            { onClick: () => o(new Set(t)) },
            (0, k.Xx)("#EventEditor_Clone_DeSelectAll"),
          ),
        );
      }
      var U = n(45118),
        V = n(8285),
        W = n(64936),
        j = n(34310),
        z = n(10162),
        R = n(4151),
        F = n(81913),
        H = n(31659),
        J = n(24827),
        Z = n(83421),
        q = n(50423),
        Q = n(80445),
        K = n(65015);
      let Y = class extends d.Component {
        constructor(e) {
          super(e),
            (this.bRedirectUsed = !1),
            (this.state = { redirectTarget: null, bDeleting: !1 });
        }
        OnFallbackClick(e) {
          e.target instanceof HTMLButtonElement ||
            e.target instanceof HTMLAnchorElement ||
            this.OnGotoPage(e, "edit");
        }
        OnGotoPage(e, t) {
          (this.bRedirectUsed = !1),
            this.setState({ redirectTarget: t }),
            e && e.stopPropagation();
        }
        OnIgnoreFallbackClick(e) {
          e.stopPropagation();
        }
        render() {
          var e;
          const {
            eventModel: t,
            appid_or_vanity_str: n,
            bShowGameName: l,
            bShowEventMetaDataSizes: i,
          } = this.props;
          let r = t.GID,
            o = t.bOldAnnouncement;
          if (this.state.redirectTarget && !this.bRedirectUsed)
            switch (((this.bRedirectUsed = !0), this.state.redirectTarget)) {
              case "clone":
                return d.createElement(V.l_, {
                  push: !0,
                  to: a.rQ.Edit(n, ""),
                });
              case "edit":
                return (0, F.Ij)(this.props.eventModel, F.Ue.k_eCommunityEdit);
              case "view":
                return t.BIsVisibleEvent()
                  ? (0, F.Ij)(this.props.eventModel, F.Ue.k_eView)
                  : (0, F.Ij)(this.props.eventModel, F.Ue.k_eCommunityPreview);
              default:
                console.log(
                  "EventDisplayTile - Unexpected Case - " +
                    this.state.redirectTarget,
                );
            }
          let s = (0, u.jM)(T.De.LANGUAGE);
          t.BIsLanguageValidForRealms(s) || (s = t.BInRealmGlobal() ? 0 : 29);
          let c,
            m,
            v = [t.GetImageURLWithFallback("capsule", s)],
            _ = t.GetNameWithFallback(s),
            S = t.BHasSubTitle(s),
            b = t.BHasSaleEnabled(),
            D = t.visibility_state != E.ac.k_EEventStateUnpublished,
            C = t.visibility_state != E.ac.k_EEventStateVisible;
          if (
            (C &&
              D &&
              (c =
                t.visibilityStartTime == t.startTime
                  ? d.createElement(
                      "div",
                      { className: P.TileTextStartsIn },
                      (0, k.Xx)("#EventEditor_Status_WillBeVisible_EventStart"),
                    )
                  : d.createElement(
                      "div",
                      { className: P.TileTextStartsIn },
                      (0, k.kQ)(
                        "#EventEditor_Status_WillBeVisible_At",
                        d.createElement(J.H6, {
                          dateAndTime:
                            t.GetVisibilityStartTimeAndDateUnixSeconds(),
                          bSingleLine: !0,
                        }),
                      ),
                    )),
            !C && D)
          ) {
            let e = W.JW.GetTimeNowWithOverride();
            t.GetStartTimeAndDateUnixSeconds() > e
              ? (m = d.createElement(
                  "span",
                  { className: P.EventStateUpcoming },
                  (0, k.Xx)("#EventDisplay_Upcoming"),
                ))
              : (0, Q.G1)(t.type) && t.GetEndTimeAndDateUnixSeconds() > e
                ? (m = d.createElement(
                    "span",
                    { className: P.EventStateActive },
                    (0, k.Xx)("#EventDisplay_Active"),
                  ))
                : t.GetStartTimeAndDateUnixSeconds() > e + 3600 &&
                  (m = d.createElement(
                    "span",
                    { className: P.EventStateRecent },
                    (0, k.Xx)("#EventDisplay_RecentlyActive"),
                  ));
          }
          l &&
            (_ =
              ((null === (e = j.Z.Get().GetApp(t.appid)) || void 0 === e
                ? void 0
                : e.GetName()) || "") +
              ": " +
              _);
          let y =
              t.BIsPartnerEvent() &&
              t.BIsVisibleEvent() &&
              h.h4.GetStatsFor(t.clanSteamID, r),
            I = p.sV.GetOGGClanInfo(t.appid),
            A = Boolean(
              o &&
                I &&
                I.is_ogg &&
                I.clanAccountID != t.announcementClanSteamID.GetAccountID(),
            );
          return d.createElement(
            z.SV,
            null,
            d.createElement(
              "div",
              {
                className: (0, w.Z)({
                  [P.TileContainer]: !0,
                  [P.TileAgeAppropriate]: true,
                  [P.TileAgeNotAppropriate]: !1,
                  [P.ShowEventMetaDataSizes]: i,
                }),
              },
              d.createElement(
                "div",
                {
                  className: P.TileImageCtn,
                  onClick: (e) => this.OnFallbackClick(e),
                },
                d.createElement(H.J, { className: P.TileImage, srcs: v }),
              ),
              d.createElement(
                "div",
                {
                  className: P.TileTextContainer,
                  onClick: (e) => this.OnFallbackClick(e),
                },
                d.createElement(
                  "div",
                  { className: P.TileDescriptionContainer },
                  d.createElement(
                    "div",
                    { style: { display: "flex" } },
                    d.createElement("div", { className: P.TileTextAppName }, _),
                    d.createElement(
                      "div",
                      { className: P.TileTextEventType },
                      t.GetCategoryAsString(),
                      b &&
                        d.createElement(
                          "span",
                          { className: P.TileHasSale },
                          " | ",
                          (0, k.Xx)("#EventEditor_Status_HasSale"),
                        ),
                    ),
                  ),
                  S && !1,
                  d.createElement(
                    "div",
                    { className: g.ContainerSpaceBetween },
                    d.createElement(
                      "div",
                      { className: P.TileTextStartsIn },
                      d.createElement(J.H6, {
                        dateAndTime: t.GetStartTimeAndDateUnixSeconds(),
                        bSingleLine: !0,
                      }),
                      m,
                      t.BHasTag("auto_rssfeed") &&
                        d.createElement(
                          d.Fragment,
                          null,
                          d.createElement("br", null),
                          d.createElement(
                            "a",
                            {
                              href:
                                T.De.STORE_BASE_URL +
                                "curator/" +
                                t.clanSteamID.GetAccountID() +
                                "/admin/manage_rss/",
                            },
                            " " + (0, k.Xx)("#EventEditor_Status_FromRSSFeed"),
                          ),
                        ),
                      d.createElement(K.bv, {
                        eventModel: t,
                        bAllowUpdate: !1,
                      }),
                    ),
                    Boolean(y) &&
                      d.createElement(
                        "div",
                        { className: P.TileStats },
                        (0, k.kQ)(
                          "#EventDashBoard_Summary_Tile_Impressions",
                          d.createElement(
                            "span",
                            null,
                            y.m_stats.total_showm.toLocaleString(),
                          ),
                        ),
                        d.createElement("br", null),
                        (0, k.kQ)(
                          "#EventDashBoard_Summary_Tile_Read",
                          d.createElement(
                            "span",
                            null,
                            y.m_stats.total_read.toLocaleString(),
                          ),
                        ),
                      ),
                  ),
                  c,
                  A
                    ? d.createElement(
                        "div",
                        {
                          className: P.TileButtonContainer,
                          onClick: (e) => this.OnIgnoreFallbackClick(e),
                        },
                        d.createElement(
                          "div",
                          null,
                          (0, k.Xx)("#EventEditor_DataFromConnectAnnouncement"),
                        ),
                        d.createElement(
                          F.JW,
                          {
                            className: (0, w.Z)(P.ManageButton, P.Edit),
                            eventModel: t,
                            route: F.Ue.k_eView,
                          },
                          (0, k.Xx)("#Button_ViewPage"),
                        ),
                      )
                    : d.createElement(
                        $,
                        Object.assign(
                          { fnOnGotoPage: this.OnGotoPage },
                          this.props,
                        ),
                      ),
                  i &&
                    d.createElement(
                      Z.s,
                      { requireAdmin: !0, clanSteamID: t.clanSteamID },
                      d.createElement(te, { eventModel: t }),
                    ),
                ),
              ),
            ),
          );
        }
      };
      (0, r.gn)([f.ak], Y.prototype, "OnFallbackClick", null),
        (0, r.gn)([f.ak], Y.prototype, "OnGotoPage", null),
        (0, r.gn)([f.ak], Y.prototype, "OnIgnoreFallbackClick", null),
        (Y = (0, r.gn)([c.Pi], Y));
      let $ = class extends d.Component {
        OnIgnoreFallbackClick(e) {
          e.stopPropagation();
        }
        OnPublishEvent(e) {
          e.stopPropagation();
          const { eventModel: t } = this.props;
          l.wk
            .LoadEditorModel(t.clanSteamID, t.GID)
            .then(() => {
              (0, C.AM)(
                d.createElement(U.b, {
                  editModel: l.wk.GetEditModel(),
                  OnPublishSuccess: this.OnPublishSuccess,
                }),
                window,
              );
            })
            .catch((e) => {
              let t = (0, A.l)(e);
              (0, C.AM)(
                d.createElement(D.JX, {
                  strTitle: (0, k.Xx)("#EventEditor_PublishingError"),
                  bAlertDialog: !0,
                  bDestructiveWarning: !0,
                  strDescription: (0, k.Xx)(
                    "#EventEditor_PublishingError_Desc",
                    t.strErrorMsg,
                  ),
                }),
                window,
                { strTitle: (0, k.Xx)("#EventEditor_PublishingError") },
              );
            });
        }
        OnPublishSuccess() {
          this.setState({ redirectTarget: "view" });
        }
        StopPropagation(e) {
          e.stopPropagation();
        }
        OnDeleteClickAndVerify(e) {
          e.stopPropagation(),
            (0, C.AM)(
              d.createElement(R.n, {
                eventModel: this.props.eventModel,
                partnerEventStore: l.wk,
              }),
              (0, q.RA)(e),
            );
        }
        render() {
          const { eventModel: e, fnOnGotoPage: t } = this.props;
          let n = e.bOldAnnouncement,
            a = e.visibility_state != E.ac.k_EEventStateVisible,
            l = e.visibility_state != E.ac.k_EEventStateUnpublished;
          return d.createElement(
            "div",
            {
              className: P.TileButtonContainer,
              onClick: (e) => this.OnIgnoreFallbackClick(e),
            },
            !n &&
              d.createElement(
                F.JW,
                {
                  className: (0, w.Z)(P.ManageButton, P.Edit),
                  eventModel: e,
                  route: F.Ue.k_eCommunityEdit,
                  onClick: this.StopPropagation,
                },
                (0, k.Xx)("#Button_Edit"),
              ),
            n &&
              d.createElement(
                F.JW,
                {
                  className: (0, w.Z)(P.ManageButton, P.Edit),
                  "data-tooltip-text": (0, k.Xx)(
                    "#EventEditor_Button_MigrateAndEdit_Announcement_ttip",
                  ),
                  eventModel: e,
                  route: F.Ue.k_eCommunityMigrate,
                  onClick: this.StopPropagation,
                },
                (0, k.Xx)("#EventEditor_Button_MigrateAndEdit"),
              ),
            a &&
              d.createElement(
                F.JW,
                {
                  className: (0, w.Z)(P.ManageButton, P.View),
                  "data-tooltip-text": (0, k.Xx)(
                    "#EventEditor_Button_PreviewButton_ttip",
                  ),
                  eventModel: e,
                  route: F.Ue.k_eCommunityPreview,
                  onClick: this.StopPropagation,
                },
                (0, k.Xx)("#EventDisplay_Preview"),
              ),
            !a &&
              d.createElement(
                F.JW,
                {
                  className: (0, w.Z)(P.ManageButton, P.View),
                  eventModel: e,
                  route: F.Ue.k_eView,
                  onClick: this.StopPropagation,
                },
                (0, k.Xx)("#EventDisplay_View"),
              ),
            !l &&
              !n &&
              d.createElement(
                "div",
                {
                  className: (0, w.Z)(P.ManageButton, P.Publish),
                  onClick: this.OnPublishEvent,
                },
                (0, k.Xx)("#EventDisplay_Publish"),
              ),
            d.createElement("div", { className: P.Spacer }, " "),
            d.createElement(B, { eventModel: e, fnOnGotoPage: t }),
            d.createElement(
              "div",
              {
                className: (0, w.Z)(P.ManageButton, P.Delete),
                "data-tooltip-text": (0, k.Xx)(
                  "#EventEditor_Button_DeleteButton_ttip",
                ),
                onClick: this.OnDeleteClickAndVerify,
              },
              (0, k.Xx)("#Button_Delete"),
            ),
          );
        }
      };
      function ee(e, t) {
        if (!e || t <= 0) return [];
        const n = new Array();
        return (
          Object.keys(e).forEach((a) => {
            var l;
            const i = e[a],
              r =
                (null === (l = JSON.stringify(i)) || void 0 === l
                  ? void 0
                  : l.length) || 0;
            n.push({ key: a, size: r }),
              i &&
                "object" == typeof i &&
                r > 100 &&
                ee(i, t - 1).forEach((e) => {
                  n.push({ key: a + ":" + e.key, size: e.size });
                });
          }),
          n
        );
      }
      (0, r.gn)([f.ak], $.prototype, "OnIgnoreFallbackClick", null),
        (0, r.gn)([f.ak], $.prototype, "OnPublishEvent", null),
        (0, r.gn)([f.ak], $.prototype, "OnPublishSuccess", null),
        (0, r.gn)([f.ak], $.prototype, "StopPropagation", null),
        (0, r.gn)([f.ak], $.prototype, "OnDeleteClickAndVerify", null),
        ($ = (0, r.gn)([c.Pi], $));
      const te = (e) => {
        var t, n;
        const { eventModel: a } = e;
        if (!(null == a ? void 0 : a.jsondata)) return null;
        const l = ee(a.jsondata, 3);
        l.sort((e, t) => t.size - e.size);
        return d.createElement(
          "div",
          { className: P.MetaDataCtn },
          d.createElement(
            "div",
            null,
            "Total Size: ",
            null ===
              (n =
                null === (t = JSON.stringify(a.jsondata)) || void 0 === t
                  ? void 0
                  : t.length) || void 0 === n
              ? void 0
              : n.toLocaleString(),
          ),
          l
            .slice(0, 10)
            .map((e) =>
              d.createElement(
                "div",
                { key: e.key },
                e.key,
                ": ",
                e.size.toLocaleString(),
              ),
            ),
        );
      };
      var ne = n(68085),
        ae = n(86617),
        le = n(56164);
      const ie = (e) => {
          const { closeModal: t } = e,
            n = (0, ne.V)(T.JA.CLANACCOUNTID);
          return d.createElement(
            D.uH,
            {
              strTitle: "Publishing Audit History",
              bAlertDialog: !0,
              onOK: t,
              onCancel: t,
              className: "auditContents",
              strDescription:
                "Here are the publishing audit history. Recorded starting from mid-June 2021",
            },
            Boolean(null == n)
              ? d.createElement(y.V, {
                  string: (0, k.Xx)("#Loading"),
                  position: "center",
                  size: "medium",
                })
              : Boolean(0 == n.length)
                ? d.createElement(
                    "div",
                    null,
                    "No Publishing History available",
                  )
                : n.map((e) =>
                    d.createElement(re, { key: e.clan_event_gid, record: e }),
                  ),
          );
        },
        re = (e) => {
          var t;
          const { record: n } = e,
            a = d.useMemo(() => v.K.InitFromClanID(T.JA.CLANACCOUNTID), []);
          return d.createElement(
            "div",
            { className: M.AuditInfoItem },
            d.createElement(
              "div",
              null,
              "Clan Event GID:",
              d.createElement(
                "a",
                {
                  href: `${T.De.COMMUNITY_BASE_URL}gid/${a.ConvertTo64BitString()}/partnerevents/edit/${n.clan_event_gid}`,
                  target: "_blank",
                },
                n.clan_event_gid,
              ),
            ),
            d.createElement("div", null, "Type: ", (0, Q.Sq)(n.event_type)),
            d.createElement(
              "div",
              null,
              "Publish Time: ",
              d.createElement(J.H6, {
                dateAndTime: n.publish_time,
                bSingleLine: !0,
              }),
            ),
            d.createElement(
              "div",
              null,
              d.createElement(ae.K, {
                accountID: n.publish_account_id,
                locToken: "#EventDashbard_PublishingAccount",
              }),
            ),
            d.createElement(
              "div",
              null,
              "tags: ",
              null === (t = n.tags) || void 0 === t ? void 0 : t.join(", "),
            ),
            d.createElement(
              "div",
              { className: M.AuditItemStatsCtn },
              d.createElement(
                le.ug,
                { title: "Show Event Stats", bStartMinimized: !0 },
                d.createElement(oe, { clanSteamID: a, record: n }),
              ),
            ),
            d.createElement("hr", null),
          );
        };
      function oe(e) {
        const { clanSteamID: t, record: n } = e,
          a = (0, h.yt)(t, n.clan_event_gid);
        return d.createElement(
          "div",
          null,
          null == a &&
            d.createElement(y.V, {
              string: "loading",
              position: "center",
              size: "medium",
            }),
          null == a &&
            d.createElement("div", null, "Failed to load events stats"),
          Boolean(a) && d.createElement(b.y, { summary: a }),
        );
      }
      var se = n(82071),
        ce = n(92012),
        de = n(88408),
        me = n(46984),
        ue = n(29229),
        Ee = n.n(ue);
      function ve(e) {
        const { clanInfo: t, closeModal: n } = e,
          [a, l] = d.useState(!0),
          [i, o] = d.useState(!0),
          c = 1063339200,
          m = W.JW.GetTimeNowWithOverride(),
          [E, v] = d.useState(m - me._H.PerMonth),
          [p, _] = d.useState(m),
          [g, S] = d.useState(-1),
          b = g >= 0;
        return d.createElement(
          D.uH,
          {
            strTitle: (0, k.Xx)("#EventDashboard_Stats_title"),
            strDescription: (0, k.Xx)("#EventDashboard_Stats_desc"),
            closeModal: n,
            bDisableBackgroundDismiss: !0,
            bOKDisabled: b,
            onOK: () =>
              (function (e, t, n, a) {
                return (0, r.mG)(this, void 0, void 0, function* () {
                  const l = new Array(),
                    i = s().CancelToken.source();
                  let r = 0;
                  a(r);
                  const o = 100;
                  let c,
                    d = 0,
                    m = new Array();
                  const E = (0, u.jM)(T.De.LANGUAGE);
                  do {
                    if (
                      ((d += 1),
                      (m = yield se.j1.LoadAdjacentPartnerEvents(
                        c,
                        e.clanSteamID,
                        void 0,
                        0,
                        o,
                        { rtime_oldestevent: t },
                        i,
                      )),
                      (null == m ? void 0 : m.length) > 0)
                    ) {
                      (r += m.length), a(r), (c = m[m.length - 1].GID);
                      const t = m
                        .filter((e) => e.startTime <= n && e.BIsVisibleEvent())
                        .map((e) => e.GID);
                      t.length > 0 &&
                        (yield h.h4.LoadStatsForEvents(e.clanSteamID, t, i),
                        (r += t.length),
                        a(r),
                        t.forEach((t) => {
                          const n = h.h4.GetStatsFor(e.clanSteamID, t),
                            a = se.j1.GetClanEventModel(t);
                          l.push(
                            Object.assign(
                              Object.assign(
                                { event_name: a.GetNameWithFallback(E) },
                                n.m_stats,
                              ),
                              { event_gid: "'" + t },
                            ),
                          );
                        }));
                    }
                  } while (m.length == o && d < 100);
                  return (
                    de.K.WriteCSVToFile(
                      l,
                      "event_stats_" +
                        e.group_name.toLocaleLowerCase().replace(/\s/g, "_") +
                        ".csv",
                    ),
                    !0
                  );
                });
              })(t, a ? c : E, i ? Number.MAX_SAFE_INTEGER : p, S).then(() =>
                n(),
              ),
          },
          d.createElement(
            "div",
            { className: Ee().DialogCtn },
            d.createElement(
              "div",
              { className: "DialogLabel" },
              (0, k.Xx)("#EventDashboard_Stats_Oldest_Title"),
            ),
            d.createElement(
              "div",
              { className: "_DialogInputContainer _DialogLayout" },
              d.createElement(G.ji, {
                label: (0, k.Xx)("#EventDashboard_Stats_Oldest"),
                onChange: l,
                checked: a,
                disabled: b,
              }),
              !a &&
                d.createElement(
                  "div",
                  null,
                  (0, k.Xx)("#EventDashboard_Stats_Oldest_Override"),
                  d.createElement(ce.A, {
                    nEarliestTime: c,
                    nLatestTime: i ? void 0 : p,
                    bShowTimeZone: !0,
                    fnGetTimeToUpdate: () => E,
                    fnSetTimeToUpdate: v,
                    disabled: b,
                  }),
                ),
            ),
            d.createElement(
              "div",
              { className: "DialogLabel" },
              (0, k.Xx)("#EventDashboard_Stats_Newest_Title"),
            ),
            d.createElement(
              "div",
              { className: "_DialogInputContainer _DialogLayout" },
              d.createElement(G.ji, {
                label: (0, k.Xx)("#EventDashboard_Stats_Newest"),
                onChange: o,
                checked: i,
                disabled: b,
              }),
              !i &&
                d.createElement(
                  "div",
                  null,
                  (0, k.Xx)("#EventDashboard_Stats_Newest_Override"),
                  d.createElement(ce.A, {
                    nEarliestTime: a ? c : E,
                    bShowTimeZone: !0,
                    fnGetTimeToUpdate: () => p,
                    fnSetTimeToUpdate: _,
                    disabled: b,
                  }),
                ),
            ),
            b &&
              d.createElement(y.V, {
                position: "center",
                size: "medium",
                string: (0, k.Xx)("#EventDashboard_Stats_Progress", g),
              }),
          ),
        );
      }
      var pe = n(45492);
      let he = class extends d.Component {
        constructor(e) {
          super(e),
            (this.state = {
              bInitialLoadComplete: !1,
              bInfiniteScrollLoading: !1,
              bExhaustedEventList: !1,
              bErrorOnInfiniteScrollRequest: !1,
              nLastFetchRequestedMS: 0,
              bShowEventMetaDataSizes: !1,
              strSearch: "",
              strSearchQuery: "",
            }),
            (this.m_refScroll = d.createRef()),
            (this.m_cancelSignal = s().CancelToken.source()),
            (this.m_clanSteamID = new v.K(T.JA.CLANSTEAMID)),
            (this.k_nMaxPerDirection = 10),
            (this.m_IntervalTimer = void 0),
            (this.m_searchTimer = new pe.Ar()),
            T.JA.CLANACCOUNTID == E.sq && (this.k_nMaxPerDirection = 2);
        }
        EnsureEventsAreLoaded() {
          l.wk
            .LoadClanEventsForPartnerDashboard(
              this.m_clanSteamID,
              this.m_cancelSignal,
            )
            .then((e) => {
              this.EventLoaded(), this.setState({ bInitialLoadComplete: !0 });
            })
            .catch(this.HandleErrorWithDialog);
        }
        EventLoaded() {
          return (0, r.mG)(this, void 0, void 0, function* () {
            let e = l.wk.GetClanEventGIDs(this.m_clanSteamID).filter((e) => {
              let t = l.wk.GetClanEventModel(e);
              return Boolean(t && t.BIsVisibleEvent() && t.BIsPartnerEvent());
            });
            e.length > 0 &&
              h.h4.LoadStatsForEvents(
                this.m_clanSteamID,
                e,
                this.m_cancelSignal,
              );
          });
        }
        HandleErrorWithDialog(e) {
          let t = (0, A.l)(e);
          (0, C.AM)(
            d.createElement(
              D.JX,
              null,
              (0, k.Xx)("#Error_Description", t.errorCode, t.strErrorMsg),
            ),
            window,
          );
        }
        componentDidMount() {
          this.EnsureEventsAreLoaded(),
            l.wk.GetEditModel() && l.wk.ResetModel(),
            window.addEventListener("scroll", this.OnScroll, !0);
        }
        componentDidUpdate(e) {
          this.props.match.params.appid_or_vanity_str !=
            e.match.params.appid_or_vanity_str && this.EnsureEventsAreLoaded(),
            this.m_refScroll && this.m_refScroll.current && this.OnScroll();
        }
        componentWillUnmount() {
          window.removeEventListener("scroll", this.OnScroll),
            this.m_cancelSignal.cancel("EventListView to unload"),
            this.ClearTimer();
        }
        ClearTimer() {
          this.m_IntervalTimer &&
            (window.clearInterval(this.m_IntervalTimer),
            (this.m_IntervalTimer = void 0));
        }
        CreateTiles(e, t) {
          let n = [],
            a = l.wk.GetClanEventGIDs(e);
          if ((null == a ? void 0 : a.length) > 0) {
            (a = a.slice().filter((e) => {
              var n;
              const a = l.wk.GetClanEventModel(e);
              return (
                !!a &&
                a.visibility_state === t &&
                !(
                  Boolean(this.state.strSearchQuery) &&
                  !(null ===
                    (n = a.GetNameWithFallback((0, u.jM)(T.De.LANGUAGE))) ||
                  void 0 === n
                    ? void 0
                    : n.toLocaleLowerCase().includes(this.state.strSearchQuery))
                )
              );
            })),
              (a = a.sort((e, t) => {
                (0, I.X)(
                  e !== t,
                  `Unexpected duplicates in the list: ${e} ${t}`,
                );
                const n = l.wk.GetClanEventModel(e);
                return l.wk.GetClanEventModel(t).startTime - n.startTime;
              }));
            for (const e of a) {
              const t = l.wk.GetClanEventModel(e);
              n.push(
                d.createElement(Y, {
                  key: e,
                  appid_or_vanity_str:
                    this.props.match.params.appid_or_vanity_str,
                  gid: e,
                  eventModel: t,
                  bShowEventMetaDataSizes: this.state.bShowEventMetaDataSizes,
                }),
              );
            }
          }
          return n;
        }
        OnScroll() {
          if (!this.m_refScroll || !this.m_refScroll.current) return;
          let e = this.m_refScroll.current;
          e &&
            (this.state.bExhaustedEventList ||
              this.state.bErrorOnInfiniteScrollRequest ||
              this.state.bInfiniteScrollLoading ||
              (e.getBoundingClientRect().bottom <= window.innerHeight + 50 &&
                (this.state.nLastFetchRequestedMS > 0 &&
                this.state.nLastFetchRequestedMS + 500 < Date.now()
                  ? this.setState(
                      {
                        bInfiniteScrollLoading: !0,
                        nLastFetchRequestedMS: Date.now(),
                      },
                      this.LoadMorePublicEvents,
                    )
                  : this.setState(
                      {
                        bInfiniteScrollLoading: !0,
                        nLastFetchRequestedMS: Date.now(),
                      },
                      this.LoadMorePublicEventWithDelay,
                    ))));
        }
        LoadMorePublicEventWithDelay() {
          return (0, r.mG)(this, void 0, void 0, function* () {
            this.m_IntervalTimer = window.setInterval(
              this.LoadMorePublicEvents,
              500,
            );
          });
        }
        LoadMorePublicEvents() {
          return (0, r.mG)(this, void 0, void 0, function* () {
            if ((this.ClearTimer(), !this.state.bInfiniteScrollLoading)) return;
            let e = null;
            l.wk.GetAllClanEvents(this.m_clanSteamID).forEach((t) => {
              t.BIsVisibleEvent() &&
                (!e || t.startTime <= e.startTime) &&
                (e = t);
            });
            let t = !1,
              n = !1;
            try {
              let n;
              (n =
                e && e.bOldAnnouncement
                  ? yield l.wk.LoadAdjacentPartnerEventsByAnnouncement(
                      e.AnnouncementGID,
                      this.m_clanSteamID,
                      void 0,
                      0,
                      this.k_nMaxPerDirection,
                    )
                  : yield l.wk.LoadAdjacentPartnerEvents(
                      e ? e.GID : void 0,
                      this.m_clanSteamID,
                      void 0,
                      0,
                      this.k_nMaxPerDirection,
                    )),
                (t = n.length < this.k_nMaxPerDirection);
            } catch (e) {
              console.log("EventListView: " + (0, A.l)(e).strErrorMsg),
                (n = !0);
            }
            this.setState(
              {
                bExhaustedEventList: t,
                bInfiniteScrollLoading: !1,
                bErrorOnInfiniteScrollRequest: n,
              },
              this.EventLoaded,
            );
          });
        }
        UpdateShowEventMetaDataSizes(e) {
          this.setState({ bShowEventMetaDataSizes: e });
        }
        ApplySearch(e) {
          this.setState({ strSearchQuery: e });
        }
        OnUpdateSearch(e) {
          this.setState({ strSearch: e });
          this.m_searchTimer.Schedule(200, () =>
            this.ApplySearch(null == e ? void 0 : e.trim().toLocaleLowerCase()),
          );
        }
        render() {
          const e = new v.K(T.JA.CLANSTEAMID);
          let t = this.CreateTiles(
              this.m_clanSteamID,
              E.ac.k_EEventStateUnpublished,
            ),
            n = this.CreateTiles(this.m_clanSteamID, E.ac.k_EEventStateStaged),
            a = this.CreateTiles(this.m_clanSteamID, E.ac.k_EEventStateVisible),
            l =
              !this.state.bInitialLoadComplete ||
              this.state.bInfiniteScrollLoading;
          return d.createElement(
            "div",
            { ref: this.m_refScroll },
            d.createElement(
              "div",
              { className: (0, w.Z)("maincontent", L().EventDashboardCtn) },
              d.createElement(_e, {
                appid_or_vanity_str:
                  this.props.match.params.appid_or_vanity_str,
              }),
              d.createElement(
                Z.s,
                { requireAdmin: !0, clanSteamID: e },
                d.createElement(
                  "div",
                  {
                    className: (0, w.Z)(
                      "maincontent",
                      L().EventDashboardCtn,
                      L().EventDashAdminToolsCtn,
                      S().FlexRowContainer,
                    ),
                  },
                  d.createElement(G.ji, {
                    label: "Show Event Metadata Size",
                    tooltip:
                      "Surfaces the size of the biggest sections in the event's metadata",
                    onChange: this.UpdateShowEventMetaDataSizes,
                    checked: this.state.bShowEventMetaDataSizes,
                  }),
                  d.createElement(
                    G.zx,
                    {
                      onClick: (e) => {
                        (0, C.AM)(d.createElement(ie, null), (0, q.RA)(e));
                      },
                    },
                    "Show Publishing Audit History",
                  ),
                ),
                d.createElement(
                  "div",
                  {
                    className: (0, w.Z)(
                      L().EventDashboardCtn,
                      L().EventDashAdminToolsCtn,
                      L().EventDashboardSearchCtn,
                    ),
                  },
                  d.createElement(G.II, {
                    type: "text",
                    label: "Search",
                    value: this.state.strSearch,
                    onChange: (e) => this.OnUpdateSearch(e.target.value),
                  }),
                ),
              ),
            ),
            d.createElement(
              "div",
              { className: L().MainLists },
              t.length > 0 &&
                d.createElement(
                  "div",
                  { className: (0, w.Z)(L().Section, L().Unpublished) },
                  d.createElement(
                    "div",
                    {
                      className: (0, w.Z)(
                        "maincontent",
                        "eventlist",
                        L().EventDashboardCtn,
                      ),
                    },
                    d.createElement(
                      "div",
                      { className: L().DisplaySectionHeader },
                      (0, k.Xx)("#EventDisplay_Unpublished_Title"),
                      " ",
                      d.createElement(
                        "span",
                        {
                          "data-tooltip-text": (0, k.Xx)(
                            "#EventDisplay_Unpublished_SubTitle",
                          ),
                        },
                        " (?)",
                      ),
                    ),
                    t.length > 0 && t,
                  ),
                ),
              n.length > 0 &&
                d.createElement(
                  "div",
                  { className: (0, w.Z)(L().Section, L().Staged) },
                  d.createElement(
                    "div",
                    {
                      className: (0, w.Z)(
                        "maincontent",
                        "eventlist",
                        L().EventDashboardCtn,
                      ),
                    },
                    d.createElement(
                      "div",
                      { className: L().DisplaySectionHeader },
                      (0, k.Xx)("#EventDisplay_Stage_Title"),
                      " ",
                      d.createElement(
                        "span",
                        {
                          "data-tooltip-text": (0, k.Xx)(
                            "#EventDisplay_Stage_SubTitle",
                          ),
                        },
                        " (?)",
                      ),
                    ),
                    n.length > 0 && n,
                  ),
                ),
              d.createElement(
                "div",
                {
                  className: (0, w.Z)(
                    L().Section,
                    L().DisplaySectionHeaderContainer,
                    L().Visible,
                  ),
                },
                d.createElement(
                  "div",
                  {
                    className: (0, w.Z)(
                      "maincontent",
                      "eventlist",
                      L().EventDashboardCtn,
                    ),
                  },
                  d.createElement(
                    "div",
                    { className: L().DisplaySectionHeader },
                    (0, k.Xx)("#EventDisplay_Visible_Title"),
                  ),
                  d.createElement(
                    "div",
                    { className: L().DisplaySectionSubHeader },
                    (0, k.Xx)("#EventDisplay_Visible_Title_WithRange"),
                  ),
                  a && a,
                  !l &&
                    !a &&
                    d.createElement(
                      "div",
                      null,
                      (0, k.Xx)("#EventDisplay_NoPublic"),
                    ),
                  l &&
                    d.createElement(y.V, {
                      position: "center",
                      string: (0, k.Xx)("#Loading"),
                    }),
                  this.state.bExhaustedEventList &&
                    d.createElement(
                      "div",
                      null,
                      (0, k.Xx)("#EventDisplay_AllPublicShown"),
                    ),
                  this.state.bErrorOnInfiniteScrollRequest &&
                    d.createElement(
                      "div",
                      null,
                      (0, k.Xx)("#EventDisplay_HitErrorInfiniteScroll"),
                    ),
                ),
              ),
            ),
          );
        }
      };
      (0, r.gn)([f.ak], he.prototype, "OnScroll", null),
        (0, r.gn)([f.ak], he.prototype, "LoadMorePublicEventWithDelay", null),
        (0, r.gn)([f.ak], he.prototype, "LoadMorePublicEvents", null),
        (0, r.gn)([f.ak], he.prototype, "UpdateShowEventMetaDataSizes", null),
        (0, r.gn)([f.ak], he.prototype, "ApplySearch", null),
        (0, r.gn)([f.ak], he.prototype, "OnUpdateSearch", null),
        (he = (0, r.gn)([c.Pi], he));
      const _e = (0, c.Pi)((e) => {
          const t = new v.K(T.JA.CLANSTEAMID),
            n = p.sV.GetClanInfoByClanAccountID(t.GetAccountID()),
            { appid_or_vanity_str: i } = e;
          let r = h.h4.GetTotalStats(t);
          return d.createElement(
            "div",
            { className: S().EventDashboardHeader },
            d.createElement(_.Cu, { identifier: i, partnerEventStore: l.wk }),
            d.createElement(
              "div",
              { className: S().EventDashboardTitles },
              d.createElement(
                "div",
                { className: S().maintitle },
                (0, k.Xx)("#EventDisplay_Events"),
                d.createElement(
                  "div",
                  { className: S().subtitle },
                  (0, k.Xx)("#EventDisplay_Edit_Desc"),
                ),
              ),
              d.createElement(
                "div",
                { className: S().EventDashboardActions },
                d.createElement(
                  m.rU,
                  {
                    className: (0, w.Z)(S().Button, S().Primary),
                    to: a.rQ.Create(i),
                    onClick: () => l.wk.ResetModel(),
                  },
                  (0, k.Xx)("#EventDisplay_CreateNewEvent"),
                ),
                d.createElement(
                  G.zx,
                  {
                    onClick: (e) =>
                      (0, C.AM)(
                        d.createElement(ve, { clanInfo: n }),
                        (0, q.RA)(e),
                      ),
                  },
                  (0, k.Xx)("#EventDashboard_Stats_export"),
                ),
              ),
            ),
            d.createElement(
              "div",
              { className: S().EventDashboardStatsCtn },
              d.createElement(b.y, {
                summary: r.m_stats,
                bIsAllowedInLibrary: null == n ? void 0 : n.is_ogg,
                bIncludeDescription: !0,
              }),
            ),
          );
        }),
        ge = (0, x.M)(he);
      var Se = n(82227),
        be = n(53010),
        De = n(73941),
        Ce = n(77581),
        ye = n(45944),
        Ie = n(42855),
        we = n(29525);
      class ke {
        GetCounts() {
          return this.m_counts;
        }
        LoadCounts() {
          return (0, r.mG)(this, void 0, void 0, function* () {
            return Boolean(this.m_counts)
              ? this.m_counts
              : (this.m_promise || (this.m_promise = this.LoadInternalCount()),
                this.m_promise);
          });
        }
        LoadInternalCount() {
          var e, t;
          return (0, r.mG)(this, void 0, void 0, function* () {
            let n = null;
            try {
              const a =
                  T.De.STORE_BASE_URL +
                  "saleaction/ajaxgetuserdeckcompatcounts",
                l = yield s().get(a, {});
              if (
                200 == (null == l ? void 0 : l.status) &&
                1 ==
                  (null === (e = l.data) || void 0 === e
                    ? void 0
                    : e.success) &&
                (null === (t = l.data) || void 0 === t ? void 0 : t.counts)
              )
                return (this.m_counts = l.data.counts), this.m_counts;
              n = (0, A.l)(l);
            } catch (e) {
              n = (0, A.l)(e);
            }
            return (
              console.error(
                "CDeckCompCountStore.LoadInternalCount failed: " +
                  (null == n ? void 0 : n.strErrorMsg),
                n,
              ),
              null
            );
          });
        }
        static Get() {
          return (
            ke.s_globalSingletonStore ||
              ((ke.s_globalSingletonStore = new ke()),
              ("dev" != T.De.WEB_UNIVERSE && "beta" != T.De.WEB_UNIVERSE) ||
                (window.g_DeckCompatCountStores = ke.s_globalSingletonStore)),
            ke.s_globalSingletonStore
          );
        }
        constructor() {
          if (
            ((this.m_counts = null),
            document.getElementById("application_config"))
          ) {
            let e = (0, T.kQ)("deckcompatcount", "application_config");
            ke.ValidateListCompat(e) && (this.m_counts = e);
          }
        }
        static ValidateListCompat(e) {
          const t = e;
          return (
            t &&
            "number" == typeof t.verified &&
            "number" == typeof t.unsupported &&
            "number" == typeof t.playable
          );
        }
      }
      var Ae = n(59777),
        fe = n(17634),
        Te = n(7081),
        xe = n(87635),
        Me = n(11448),
        Le = n(54154),
        Ne = n(1761);
      function Ge(e) {
        return e < 10 ? "0" + e : e;
      }
      function Pe(e) {
        const { giveawayid: t } = e,
          n = (0, Le.J)(t),
          {
            bLoadingGiveawayInfo: a,
            winner_count: l,
            closed: i,
            seconds_until_drawing: r,
          } = n;
        return a
          ? null
          : d.createElement(
              "div",
              { className: Ne.countdownCtn },
              Boolean(i) &&
                d.createElement(
                  "div",
                  { className: Ne.Closed },
                  l > 0
                    ? (0, k.Xx)("#Giveaway_Closed", l.toLocaleString())
                    : (0, k.Xx)("#Giveaway_Closed_NoWinnerInfo"),
                ),
              Boolean(!i) &&
                d.createElement(
                  d.Fragment,
                  null,
                  Boolean(r <= 0)
                    ? d.createElement(
                        "div",
                        { className: Ne.Throbber },
                        d.createElement(y.V, { size: "small" }),
                        d.createElement(
                          "div",
                          null,
                          (0, k.Xx)("#Giveaway_RandomDraw"),
                        ),
                      )
                    : d.createElement(
                        "div",
                        { className: Ne.CountDownCtn },
                        d.createElement(
                          "div",
                          { className: Ne.CountDownTime },
                          Ge(Math.floor(r / 60)) + ":" + Ge(r % 60),
                        ),
                        d.createElement(
                          "div",
                          { className: Ne.CountDownText },
                          (0, k.Xx)("#Giveaway_CountDown2"),
                          " ",
                          (0, k.Xx)("#Giveaway_KeepWatching"),
                        ),
                      ),
                  Boolean(l > 0) &&
                    d.createElement(
                      "div",
                      { className: Ne.WinnerInfo },
                      d.createElement(
                        "div",
                        { className: Ne.WinnerCount },
                        l.toLocaleString(),
                      ),
                      d.createElement(
                        "div",
                        { className: Ne.WinnerText },
                        (0, k.Xx)("#Giveaway_Congratulation"),
                      ),
                    ),
                ),
            );
      }
      var Be = n(84823),
        Oe = n(88276),
        Xe = n(62613),
        Ue = n(80212),
        Ve = n(91494),
        We = n(63493),
        je = n(49026),
        ze = n(94005),
        Re = n(74840);
      function Fe(e) {
        const { eventModel: t, nEventBadgeID: n } = e,
          a = (0, Oe.oS)(n);
        if ((null == a ? void 0 : a.level) > 0) {
          let e = a.level;
          if (null == t ? void 0 : t.BHasSaleEnabled()) {
            const a = t.GetSaleSectionsByType("badge_progress");
            if (1 == (null == a ? void 0 : a.length)) {
              const l = a[0].badge_progress;
              if (
                (null == l ? void 0 : l.event_badgeid) == n &&
                (null == l ? void 0 : l.granted_by_discovery_queue)
              ) {
                const n = l.levels[l.levels.length - 1].level;
                return d.createElement(He, {
                  eventModel: t,
                  nBadgeLevel: e,
                  nMaxLevel: n,
                });
              }
            }
          }
          return d.createElement(
            "span",
            { className: "DisplayBadgeProgress" },
            e.toLocaleString(),
          );
        }
        return null;
      }
      function He(e) {
        const { eventModel: t, nBadgeLevel: n, nMaxLevel: a } = e,
          l = d.useMemo(() => {
            const e = t
              .GetSaleSections()
              .filter((e) => "discoveryqueue" == e.section_type);
            return (null == e ? void 0 : e.length) > 0 ? e[0] : null;
          }, [t]),
          { storePageFilter: i, eStoreDiscoveryQueueType: r } = d.useMemo(
            () => (0, ze.N)(t, l),
            [t, l],
          ),
          o = (0, Re.GD)(r, i),
          s = Math.min(n + o, a);
        return d.createElement(
          "span",
          { className: "DisplayBadgeProgress" },
          s.toLocaleString(),
        );
      }
      function Je(e) {
        const { event: t } = e.context,
          n = Number.parseInt((0, we.im)(e.args, "eventid"));
        return T.L7.logged_in && n
          ? d.createElement(Fe, { nEventBadgeID: n, eventModel: t })
          : null;
      }
      function Ze(e) {
        const { nDoorIndex: t, children: n } = e,
          a = (0, Te._4)(t),
          { fnOpenDoor: l } = (0, Te.Qr)(),
          [i, r] = d.useState(!1),
          [o, s] = d.useState(!1);
        return d.createElement(
          G.zx,
          {
            disabled: a,
            onClick: (e) => {
              i ||
                (T.L7.logged_in
                  ? (r(!0),
                    l(t, !0, null, !1)
                      .then((e) => {
                        e || s(!0), r(!1);
                      })
                      .catch(() => {
                        s(!0), r(!1);
                      }))
                  : (0, Ue.Xt)());
            },
          },
          Boolean(o)
            ? d.createElement("div", null, (0, k.Xx)("#GrantAwardError_Busy"))
            : d.createElement(
                d.Fragment,
                null,
                Boolean(i) && d.createElement(y.V, { size: "small" }),
                Boolean(a) && d.createElement(Xe.JrY, null),
                n,
              ),
        );
      }
      function qe(e) {
        const t = Number.parseInt((0, we.im)(e.args)) || 0;
        return t >= 0 && t < 32
          ? d.createElement(Ze, { nDoorIndex: t }, e.children)
          : null;
      }
      const Qe = (0, V.EN)(Ve.CZ);
      function Ke(e) {
        var t, n;
        const a = Number.parseInt((0, we.im)(e.args)),
          { event: l, showErrorInfo: i } = e.context;
        if (a) {
          const r =
            null ===
              (n =
                null === (t = null == l ? void 0 : l.jsondata) || void 0 === t
                  ? void 0
                  : t.sale_sections) || void 0 === n
              ? void 0
              : n.findIndex((e) => e.unique_id == a);
          if (r >= 0) {
            const t = l.GetDayIndexFromEventStart();
            return d.createElement(Qe, {
              event: l,
              section: l.jsondata.sale_sections[r],
              activeTab: new je.u(null, t),
              language: e.language,
              bIsPreview: i,
              nSaleDayIndex: t,
              promotionName: "",
              appVisibilityTracker: null,
            });
          }
          if (i)
            return d.createElement(
              "div",
              { className: We.ErrorDiv },
              "Error could not find sale section ",
              a,
            );
        }
        return null;
      }
      var Ye = n(77557),
        $e = n(79873);
      const et = d.Fragment;
      function tt(e) {
        const {
            reservationPackageID: t,
            depositPackageID: n,
            bIsPreview: a,
          } = e,
          l = (0, $e.Jv)(t),
          i = (0, d.useMemo)(
            () => [
              {
                unique_id: "reservation_bbcode_" + t,
                reservation_package: t,
                deposit_package: n,
                localized_reservation_desc: [],
              },
            ],
            [n, t],
          );
        return l
          ? d.createElement(
              z.SV,
              null,
              d.createElement(
                d.Suspense,
                { fallback: null },
                d.createElement(et, { bIsPreview: a, rgReservationDef: i }),
              ),
              Boolean(l.allow_purchase_in_country) &&
                d.createElement(
                  "div",
                  { className: i[0].unique_id },
                  d.createElement(Ye.TN, {
                    reservationDef: i[0],
                    hardwareDetail: l,
                  }),
                  d.createElement(Ye.EU, {
                    reservationDef: i[0],
                    hardwareDetail: l,
                  }),
                ),
            )
          : d.createElement(y.V, {
              string: (0, k.Xx)("#Loading"),
              size: "small",
              position: "center",
            });
      }
      let nt = null;
      function at(e) {
        const { event: t } = e.context,
          n = Number.parseInt((0, we.im)(e.args, "appid")),
          a = Number.parseInt((0, we.im)(e.args, "itemdefid")),
          l = Number.parseInt((0, we.im)(e.args, "maxquantity")),
          i = (0, we.im)(e.args, "calltoaction");
        return (0, fe.$4)(n, a)
          ? d.createElement(xe.t, {
              language: e.language,
              clanAccountID: t.clanSteamID.GetAccountID(),
              itemDefSetting: { nAppID: n, nItemDefID: a, max_quantity: l },
              strCallToAction: i,
            })
          : d.createElement(y.V, {
              size: "small",
              position: "center",
              string: (0, k.Xx)("#Loading"),
            });
      }
      function lt(e) {
        const t = (function () {
          const [e, t] = d.useState(ke.Get().GetCounts());
          return (
            d.useEffect(() => {
              e || ke.Get().LoadCounts().then(t);
            }, []),
            e
          );
        })();
        if (!t) return d.createElement(y.V, { size: "small" });
        const n = Number.parseInt((0, we.im)(e.args));
        let a = t.verified;
        switch (n) {
          case 2:
            a = t.playable;
            break;
          case 1:
            a = t.unsupported;
        }
        return d.createElement("span", null, Number(a).toLocaleString());
      }
      function it(e) {
        var t, n, a, l;
        const i = (0, Ae.V)("library");
        if (!i) return d.createElement(y.V, { size: "small" });
        const r = Number.parseInt((0, we.im)(e.args));
        let o =
          (null === (t = i.verifiedList) || void 0 === t ? void 0 : t.length) ||
          0;
        switch (r) {
          case 2:
            o =
              (null === (n = i.playableList) || void 0 === n
                ? void 0
                : n.length) || 0;
            break;
          case 1:
            o =
              (null === (a = i.unsupportedList) || void 0 === a
                ? void 0
                : a.length) || 0;
            break;
          case 0:
            o =
              (null === (l = i.unknownList) || void 0 === l
                ? void 0
                : l.length) || 0;
        }
        return d.createElement("span", null, Number(o).toLocaleString());
      }
      function rt(e) {
        const t = Number.parseInt((0, we.im)(e.args)),
          n =
            "hide" in e.args &&
            Boolean(Number.parseInt((0, we.im)(e.args, "hide")));
        return t >= 0
          ? d.createElement(ot, { nDoorIndex: t, bHide: n }, e.children)
          : null;
      }
      function ot(e) {
        const { nDoorIndex: t, bHide: n, children: a } = e,
          l = (0, Te._4)(t);
        return null == l
          ? null
          : (l && !n) || (!l && n)
            ? d.createElement(d.Fragment, null, e.children)
            : null;
      }
      function st(e) {
        if (T.L7.logged_in) {
          const t = Number.parseInt((0, we.im)(e.args)),
            n = Number.parseInt((0, we.im)(e.args, "mod"));
          if (n > 0 && t < n && T.L7.accountid % n == t) return e.children;
        }
        return null;
      }
      function ct(e) {
        const t = (0, we.im)(e.args);
        return (null == t ? void 0 : t.trim().length) > 0
          ? d.createElement("div", { className: t.trim() }, e.children)
          : d.createElement(d.Fragment, null, e.children);
      }
      function dt(e) {
        return d.createElement(
          "span",
          { className: Me.LocalizeBlock },
          (0, k.yu)(
            e.children,
            d.createElement("b", null),
            d.createElement("b", null),
            d.createElement("b", null),
            d.createElement("b", null),
          ),
        );
      }
      function mt(e) {
        let t = (0, we.im)(e.args);
        return t
          ? d.createElement(Pe, { giveawayid: t })
          : d.createElement(d.Fragment, null);
      }
      function ut(e) {
        const t = Number.parseInt((0, we.im)(e.args));
        if (t) {
          const n = Number.parseInt((0, we.im)(e.args, "depositpackageid"));
          return d.createElement(tt, {
            reservationPackageID: t,
            depositPackageID: n,
          });
        }
        return d.createElement(d.Fragment, null);
      }
      var Et = n(78356),
        vt = (n(7765), n(34345), n(53512)),
        pt = n(69406),
        ht = n(74031);
      function _t(e) {
        const [t, n] = d.useState(!0),
          { data: r } = (0, ht.NH)("english");
        return (
          d.useEffect(() => {
            ye.Q8.Init(new Ce.J(T.De.WEBAPI_BASE_URL)),
              se.j1.Init(),
              l.wk.Init(),
              Et.d.AddDictionary(
                (null == nt &&
                  (nt = new Map([
                    [
                      "itemdef",
                      {
                        Constructor: at,
                        autocloses: !1,
                        skipInternalNewline: !0,
                        allowWrapTextForCopying: !0,
                      },
                    ],
                    ["wishlist", { Constructor: Be.gq, autocloses: !1 }],
                    ["deckcompatcount", { Constructor: lt, autocloses: !1 }],
                    [
                      "deckcompatuserlibrarycount",
                      { Constructor: it, autocloses: !1 },
                    ],
                    ["giveawayinfo", { Constructor: mt, autocloses: !1 }],
                    ["price", { Constructor: Be.J8, autocloses: !1 }],
                    ["pricesavings", { Constructor: Be.Eu, autocloses: !1 }],
                    [
                      "eventdoorvisibility",
                      { Constructor: rt, autocloses: !1 },
                    ],
                    ["chooseaccount", { Constructor: st, autocloses: !1 }],
                    ["badgecurrentlevel", { Constructor: Je, autocloses: !1 }],
                    ["optindoorquest", { Constructor: qe, autocloses: !1 }],
                    ["classname", { Constructor: ct, autocloses: !1 }],
                    ["localize", { Constructor: dt, autocloses: !1 }],
                    ["salesection", { Constructor: Ke, autocloses: !1 }],
                    ["reservationbutton", { Constructor: ut, autocloses: !1 }],
                  ])),
                nt),
              ),
              Promise.all([Ie.cb.InitGlobal()]).then(() => n(!1));
          }, []),
          t || !r
            ? d.createElement(y.V, {
                position: "center",
                size: "medium",
                string: (0, k.Xx)("#Loading"),
              })
            : d.createElement(
                F.uX.Provider,
                { value: { bCanUseLink: !0 } },
                d.createElement(vt.bE, null),
                d.createElement(
                  V.rs,
                  null,
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Home(":appid_or_vanity_str"),
                    component: ge,
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.List(":appid_or_vanity_str"),
                    component: ge,
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Create(":appid_or_vanity_str"),
                    component: i.k,
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Category(":appid_or_vanity_str", ":gid(\\d+)?"),
                    render: (e) =>
                      d.createElement(
                        i.k,
                        Object.assign({}, e, { key: e.match.params.gid }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.EditRedirectToCategory(":appid_or_vanity_str"),
                    render: (e) => d.createElement(be.Kz, Object.assign({}, e)),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Edit(":appid_or_vanity_str", ":gid(\\d+)?"),
                    render: (e) =>
                      d.createElement(
                        be.IE,
                        Object.assign({}, e, { key: e.match.params.gid }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Publish(":appid_or_vanity_str", ":gid(\\d+)?"),
                    render: (e) =>
                      d.createElement(
                        be.IE,
                        Object.assign({}, e, {
                          key: e.match.params.gid,
                          bInitiatePublishDialog: !0,
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.PreviewSale(
                      ":appid_or_vanity_str",
                      ":gid(\\d+)?",
                    ),
                    render: (e) =>
                      d.createElement(
                        Se.q,
                        Object.assign({}, e, {
                          key: e.match.params.gid,
                          mode: "previewsale",
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Preview(":appid_or_vanity_str", ":gid(\\d+)?"),
                    render: (e) =>
                      d.createElement(
                        Se.q,
                        Object.assign({}, e, {
                          key: e.match.params.gid,
                          mode: "preview",
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.View(":appid_or_vanity_str", ":gid(\\d+)"),
                    render: (e) =>
                      d.createElement(
                        Se.q,
                        Object.assign({}, e, {
                          key: e.match.params.gid,
                          mode: "view",
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.Migrate(
                      ":appid_or_vanity_str",
                      ":oldAnnouncementGID(\\d+)",
                    ),
                    render: (e) =>
                      d.createElement(
                        De.Lc,
                        Object.assign({}, e, {
                          key: e.match.params.oldAnnouncementGID,
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.MigrateCategory(
                      ":appid_or_vanity_str",
                      ":oldAnnouncementGID(\\d+)",
                    ),
                    render: (e) =>
                      d.createElement(
                        De.QU,
                        Object.assign({}, e, {
                          key: e.match.params.oldAnnouncementGID,
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.ViewOldAnnouncement(
                      ":appid_or_vanity_str",
                      ":oldAnnouncementGID(\\d+)",
                    ),
                    render: (e) =>
                      d.createElement(
                        De.R0,
                        Object.assign({}, e, {
                          key: e.match.params.oldAnnouncementGID,
                          bClearDirty: !0,
                          bPreview: !1,
                        }),
                      ),
                  }),
                  d.createElement(V.AW, {
                    exact: !0,
                    path: a.rQ.PreviewOldAnnouncement(
                      ":appid_or_vanity_str",
                      ":oldAnnouncementGID(\\d+)",
                    ),
                    render: (e) =>
                      d.createElement(
                        De.R0,
                        Object.assign({}, e, {
                          key: e.match.params.oldAnnouncementGID,
                          bClearDirty: !0,
                          bPreview: !0,
                        }),
                      ),
                  }),
                  d.createElement(V.AW, { component: pt.R }),
                ),
              )
        );
      }
    },
  },
]);
