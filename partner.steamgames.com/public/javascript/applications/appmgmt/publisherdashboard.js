/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
(self.webpackChunkappmgmt_storeadmin =
  self.webpackChunkappmgmt_storeadmin || []).push([
  [3863],
  {
    15798: (e) => {
      e.exports = { ButtonDailyDealDashboard: "IJS5RTzyM-kkF_NerVv-h" };
    },
    25406: (e) => {
      e.exports = {
        Section: "_1FrGxLLJNyWZswyE9TGS3N",
        Title: "f3pCBilbcCpf8q3EUD2fp",
        Body: "_1CaApUvC8ichAOgldt6XZm",
        BetaCallout: "_3F09B-c90Mi_ABQSFt8qlI",
      };
    },
    94375: (e) => {
      e.exports = {
        ItemContainer: "_1sCXlT55_hE5R_DYWs2qzj",
        ItemNameInfoContainer: "_3sqg0fMDMr7OmDzXzE57W-",
        PageVisible: "_2c0_UJn4Tpz1GL_J-ChdHP",
        ItemImage: "_22wo1MvrX6TPgkDRtkW9sx",
        ItemImageUnavailable: "_2yeWc4Vfpz2Mx_uozaEsss",
        ItemName: "_3_C_TA37Za9oeBg5-B5yEP",
        ReleaseDateLabel: "_3I6UZDLKqv2wS3o6gw2YZ8",
        ReleaseDateText: "_27pclW_hEblq7v3PFdu3fV",
        ItemReleaseInfoContainer: "_16Qw0iB0ORV7o-6_BVm3uq",
        ItemReleaseStatusCtn: "_2NRgF3rgP--686UrLJK65n",
        ItemReleaseStatusLabel: "_1M_-mbiZxdn4NqhpFoKw9f",
        ItemReleaseStatusText: "_2Q5EbM0lY7L2ibqu4FL_qt",
        Released: "_1Sbpo45i_svDxpXZsCF5-K",
        Prerelease: "_387XqcrvQwvpzEA1vJ1wlB",
      };
    },
    42038: (e) => {
      e.exports = {
        SectionContainer: "_1OBXzq4UPq3-gsMTLeYfY9",
        CalendarContainer: "pLKmGv4Xj5TT4QzAiqJbl",
        CalendarMovingRegion: "_3M8uv7MOpPLlcTKvrQA-YQ",
        Sticky: "_31mu_yCc2H6TQWT3IQuIJx",
        MonthPickerContainer: "_3YUZnUph1CrJsggSTF3VIl",
        CalendarPerMonth: "ZDlMHTzEKVfLbowWH_PMU",
        MonthPickerArrow: "_2ht2tj6FCHeu648083Qs2c",
        Inactive: "_3Z-w7oH5-5mlbU3U85VEHA",
        MonthPickerToday: "iHTm_nhWExDmRYj1ZH9wP",
        MonthPickerDate: "_2rZatjHzK7ErWtDXDdkcuX",
        Week: "_2g35MI6SaxueceaSk6XLW3",
        DayName: "PRNbjgB8P-sJzTkJtkOAN",
        Day: "_357j5Ue2p6c9meuGmYfhRQ",
        OtherMonth: "RgAj-iO11EaOOuYbKYbhT",
        Deadline: "_1OK2i1Q0ALzwEnym_uD5VY",
        DeadlineUrgent: "_1icgqDPNBrXFNdLBAlZjCX",
        Today: "_3hEVJV0mh3g3Jj-D7EXcNQ",
        Release: "xCJCORmUF-CpiLFwbOwnf",
        Event: "_2jrTKty-CD5SCc0FFcsuW-",
        Hovered: "jLl9ckcUcEAjaCSnlSjnJ",
        DayTooltipContainer: "_10Y9xUl-lBM0iXXXk3JTG2",
        DayTooltipDate: "_1pcCcxuWCl8D7l8D6fcYCY",
        DayTooltipEvent: "_3-gBe77wkGQK1K_xYgOwbE",
        ListArea: "c0Fj6iwnP09NGMqTBw4pb",
        ListFilterTabsContainer: "_8d4Ab7hW_DuAvpzaBwndV",
        FilterTextArea: "_1ddIHj3KWI6Wpfn2kYMaHW",
        FilterTextInput: "_2_igLJj1mqpdpW15ec_8Tx",
        FilterTextIcon: "_2bk4MK0dTL2BVrzvl9yr9w",
        FilterTextClearButton: "_1n8veXnv5oBHfjG0l5I8-Y",
        ListContainer: "_1sKgklaDRNP7rHtE_6Yff9",
        List: "_1VsjyvH_Qjf3r0bxpSfx3V",
        Overflows: "moY4QzLn4xaOpu2clsn6r",
        Expanded: "_1aIkESy0vIWk6irYOhJ8aZ",
        ListMonthContainer: "_2rUzIpgQG6FxSVIBdtk0xY",
        ListMonthTitle: "_1lMzit4bY9M7NatDkjOYsQ",
        ListMonthCalendar: "_1PgBwG06u7lkqBrHh0lGdh",
        ListMonth: "_2gBsUSd4zPyGk451opeP1k",
        ListDay: "_10JRf2tdkaLJebvk26APzf",
        ListEvent: "_2OvrUC8yEPw0y-ETj60eRx",
        Dimmed: "_384GPMgcGpGAZupvxEFWks",
        BackgroundImage: "_3Yf1aBV0kEJOFF9_9v_Ok1",
        ListEventHeader: "_2JVkFc02Z_gli3Wk58ZdCn",
        ValveOnly: "_1PWl9VImc2pIq7OdlNtrVN",
        Edit: "_34znTi9--bnqLmasQq4rQk",
        ListDayNumber: "_3XINnjVCEbWVyB05BBYltE",
        ListEventType: "_1VxkAwTIvWU2gB-71xXUDP",
        ListEventEventSection: "_2L_1oiBHK2dz3vQ1TBnm9j",
        ExpandButton: "_3BVPhbdEe8mENSA5TF3znJ",
      };
    },
    49622: (e) => {
      e.exports = {
        DeadlineWarning: "KJBbOCy-N47ZdyXKj82el",
        DeadlineWarningUrgent: "_1dMX7vWFF-yQ7CzRaOEooa",
      };
    },
    52631: (e) => {
      e.exports = {
        ItemContainer: "VXok7mKJpXFIBjQBLIvh-",
        HasImage: "_3pWi_px3yJX0azhLcPr_LN",
        ItemNameInfoContainer: "_1n53rAYRtJXXRA-lRajbXF",
        SeasonalSale: "_1yzO7XD_gqqLhc_RcqM5y6",
        BackgroundImage: "_1grQoVDvG8Nr4_coXHDlAv",
        ItemName: "_2VZKTMQCK5Kt-lgquMVK81",
        ItemImage: "_1HOWqt0TzoT_xyD3HtOGgB",
        ItemInfoHeader: "_33ZlQAMhN22Aw902Omlocy",
        InlineDate: "_3dNRuRCyAmnE8DAurBSqFq",
        ReleaseDateText: "_3TiU93n7jVLF7Thhizvvg1",
        ItemDeadlineHeaderText: "zjHNbIk0sNUO47ZDiM6M-",
        ItemWarning: "_3OEQpFpCnwLcs6fDU_N1G7",
        ReleaseInfoCtn: "_3sPVSLfK7h9WoWXk-VgHJf",
        StatusItemBoxContainer: "_31fMYhZb6aTXkVQ030Krza",
        StatusItemBox: "_25vZ86EFjtg3d_5IrgrL-C",
        Hidden: "_898pR7849_yT8ZWFOtC6",
        StatusItemBoxLabel: "_1bBXZX6xtzkudUBnU93lPo",
        StatusItemBoxText: "bSHqtzfCtCAu7QELTy2-t",
        OptInGamesToolTipContainer: "_1aQ19lVLLxNItGzt-UlQ6C",
        OptInGamesToolTipRegistered: "_2FRaD4wbK4aUqJm1pPEfRR",
        LinkButtonContainer: "_1Pd9CgAQME29cQKbCd9qfN",
        LinkButton: "_3qIPl-2rtghu5e6FOR9lV_",
        AssetRequestDateLabel: "_2M_ShTFVade7EwhUk5-irN",
        AssetRequestDate: "_3G-O4ejlDgEhRIwpTIA9wq",
      };
    },
    8069: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { EAppTestType: () => Re, default: () => Ce });
      var a = n(47427),
        i = n(37563),
        r = n(15798),
        l = n(31846),
        s = n(53040),
        o = n(25406);
      const d = a.forwardRef((e, t) => {
        const { title: n, description: i, children: r, beta: s } = e;
        return a.createElement(
          "div",
          { className: o.Section, ref: t },
          a.createElement(
            "div",
            { className: o.Title },
            n,
            " ",
            s &&
              a.createElement(
                "span",
                { className: o.BetaCallout },
                (0, l.Xx)("#NewToolTitleSuffix_Beta"),
              ),
          ),
          i && a.createElement("div", { className: o.Body }, i),
          r,
        );
      });
      function m() {
        return a.createElement(
          d,
          {
            title: (0, l.Xx)("#DailyDeals_PartnerDashboard_Title"),
            description: (0, l.Xx)("#DailyDeals_PartnerDashboard_Invite_Body"),
          },
          a.createElement(
            s.zx,
            {
              className: r.ButtonDailyDealDashboard,
              onClick: () => {
                window.location.assign(
                  `${i.De.PARTNER_BASE_URL}promotion/dailydeals/dashboard`,
                );
              },
            },
            (0, l.Xx)("#DailyDeals_Dashboard"),
          ),
        );
      }
      var c = n(42038),
        p = n(13129),
        v = n(46984),
        _ = n(94375),
        u = n(80886),
        g = n(12251);
      function E(e) {
        const { app: t } = e,
          [n] = (0, u.jk)(t.appid, 0, {
            include_assets: !0,
            include_release: !0,
          }),
          i = !!(null == n ? void 0 : n.GetName());
        return a.createElement(
          a.Fragment,
          null,
          a.createElement(D, { app: t, storeItem: n, hasStoreItem: i }),
          a.createElement(h, { app: t, hasStoreItem: i }),
        );
      }
      function D(e) {
        const { app: t, storeItem: n, hasStoreItem: r } = e,
          s = i.De.PARTNER_BASE_URL + "apps/landing/" + t.appid,
          o = r ? n.GetName() : t.name;
        return a.createElement(
          "div",
          { className: (0, p.Z)(_.ItemContainer, r && _.PageVisible) },
          r &&
            a.createElement(
              "a",
              {
                href: null == n ? void 0 : n.GetStorePageURL(),
                target: "_blank",
              },
              a.createElement(
                "div",
                { className: _.ItemImage },
                a.createElement("img", {
                  src: null == n ? void 0 : n.GetAssets().GetHeaderURL(),
                }),
              ),
            ),
          a.createElement(
            "div",
            { className: _.ItemNameInfoContainer },
            a.createElement(
              "a",
              { className: _.ItemName, href: s, target: "_blank" },
              o,
            ),
            a.createElement(
              "div",
              { className: _.ReleaseInfoCtn },
              t.releaserequest &&
                a.createElement(
                  "div",
                  null,
                  a.createElement(
                    "span",
                    { className: _.ReleaseDateLabel },
                    (0, l.Xx)("#App_Landing_SpecifiedReleaseDate"),
                  ),
                  " ",
                  a.createElement(
                    "span",
                    { className: _.ReleaseDateText },
                    (d = t.releaserequest.release_date)
                      ? `${(0, l.vX)(d)} ${(0, g.Sc)(d, {}, { timeZoneName: "short" })}`
                      : (0, l.Xx)("#App_Landing_UnsetReleaseDate"),
                  ),
                ),
              r &&
                a.createElement(
                  "div",
                  null,
                  a.createElement(
                    "span",
                    { className: _.ReleaseDateLabel },
                    (0, l.Xx)("#App_Landing_CustomersSeeReleaseDate"),
                  ),
                  " ",
                  a.createElement(
                    "span",
                    { className: _.ReleaseDateText },
                    n.GetFormattedSteamReleaseDate(),
                  ),
                ),
            ),
          ),
        );
        var d;
      }
      function h(e) {
        const { app: t, hasStoreItem: n } = e,
          i = {
            sText: "#Dashboard_UpcomingEvents_AppReleaseState_unavailable",
            sTooltip:
              "#Dashboard_UpcomingEvents_AppReleaseState_unavailable_Description",
            classNames: void 0,
          },
          r = {
            sText: "#Dashboard_UpcomingEvents_AppReleaseState_storepagenotlive",
            sTooltip: void 0,
            classNames: void 0,
          },
          s = {
            released: {
              sText: "#Dashboard_UpcomingEvents_AppReleaseState_released",
              sTooltip:
                "#Dashboard_UpcomingEvents_AppReleaseState_released_Description",
              classNames: (0, p.Z)(_.Released),
            },
            prerelease: {
              sText: "#Dashboard_UpcomingEvents_AppReleaseState_prerelease",
              sTooltip:
                "#Dashboard_UpcomingEvents_AppReleaseState_prerelease_Description",
              classNames: (0, p.Z)(_.Prerelease),
            },
            ownersonly: {
              sText: "#Dashboard_UpcomingEvents_AppReleaseState_ownersonly",
              sTooltip:
                "#Dashboard_UpcomingEvents_AppReleaseState_ownersonly_Description",
              classNames: void 0,
            },
            preloadonly: {
              sText: "#Dashboard_UpcomingEvents_AppReleaseState_preloadonly",
              sTooltip:
                "#Dashboard_UpcomingEvents_AppReleaseState_preloadonly_Description",
              classNames: void 0,
            },
            disabled: {
              sText: "#Dashboard_UpcomingEvents_AppReleaseState_disabled",
              sTooltip:
                "#Dashboard_UpcomingEvents_AppReleaseState_disabled_Description",
              classNames: void 0,
            },
          };
        let o = i;
        return (
          t.releasestate in s ? (o = s[t.releasestate]) : n || (o = r),
          a.createElement(
            "div",
            { className: _.ItemReleaseInfoContainer },
            a.createElement(
              "div",
              { className: _.ItemReleaseStatusCtn },
              a.createElement(
                "div",
                { className: _.ItemReleaseStatusLabel },
                (0, l.Xx)("#Dashboard_UpcomingEvents_ReleaseStatusLabel"),
              ),
              a.createElement(
                "div",
                null,
                a.createElement(
                  "span",
                  {
                    className: (0, p.Z)(_.ItemReleaseStatusText, o.classNames),
                  },
                  (0, l.Xx)(o.sText),
                ),
                o.sTooltip &&
                  a.createElement(
                    "span",
                    { "data-tooltip-text": (0, l.Xx)(o.sTooltip) },
                    " (?)",
                  ),
              ),
            ),
          )
        );
      }
      var T = n(85556),
        f = n(20417),
        y = n(52631),
        b = n(1698),
        I = n(77936),
        N = n(59728),
        w = n(33687),
        x = n(81033),
        R = n(4942),
        k = n(29292),
        C = n(62698),
        S = n(45492);
      function P(e) {
        if (!e || 0 == e.trim().length) return null;
        try {
          return JSON.parse(e);
        } catch (e) {
          return null;
        }
      }
      function U(e) {
        const t = new Date(e.getTime());
        return t.setHours(0, 0, 0, 0), t;
      }
      function L(e) {
        const t = new Date(e.getTime());
        return t.setDate(1), t.setHours(0, 0, 0, 0), t;
      }
      function A(e, t) {
        return new Date(e.getTime() + t * v._H.PerDay * 1e3);
      }
      function B(e) {
        return a.useMemo(() => {
          const t = new Date();
          return t.setDate(1), t.setMonth(t.getMonth() + e), t;
        }, [e]);
      }
      function M(e) {
        const { href: t, children: n } = e;
        return t
          ? a.createElement("a", Object.assign({}, e), n)
          : a.createElement(a.Fragment, null, n);
      }
      class F {
        constructor() {
          this.m_rgOptInComputed = new Map();
        }
        static Get() {
          return (
            F.s_Singleton ||
              ((F.s_Singleton = new F()),
              F.s_Singleton.Init(),
              "dev" == i.De.WEB_UNIVERSE &&
                (window.g_UpcomingEventsOptInStore = F.s_Singleton)),
            F.s_Singleton
          );
        }
        Init() {
          (this.m_rgOptIns = (0, i.kQ)("rgOptIns", "application_config")),
            this.m_rgOptIns && F.ExtractOptInDefinitions(this.m_rgOptIns);
        }
        static ExtractOptInDefinitions(e) {
          for (const t of Object.keys(e)) {
            const n = e[t].description,
              a = P(null == n ? void 0 : n.jsondata);
            null == n || delete n.jsondata,
              a && (e[t].description.definition = a);
          }
        }
        GetInfo(e) {
          var t, n, a, i;
          if (!e) return;
          if (this.m_rgOptInComputed.has(e))
            return this.m_rgOptInComputed.get(e);
          const r =
            null === (t = this.m_rgOptIns) || void 0 === t ? void 0 : t[e];
          if (!r) return void this.m_rgOptInComputed.set(e, void 0);
          const l = new Set(r.invited_appids),
            s = r.description.definition.invitation_only
              ? null === (n = r.summary) || void 0 === n
                ? void 0
                : n.apps_eligible.filter((e) => l.has(e.appid))
              : null === (a = r.summary) || void 0 === a
                ? void 0
                : a.apps_eligible,
            o = {
              description: r.description,
              rgEligibleApps: s,
              rgRegisteredApps:
                null === (i = r.summary) || void 0 === i ? void 0 : i.apps_in,
            };
          return this.m_rgOptInComputed.set(e, o), o;
        }
      }
      function X(e, t, n, i) {
        return a.useMemo(() => {
          var a;
          return null !==
            (a =
              null == n
                ? void 0
                : n.flatMap((n) => {
                    if (!n.start_date) return [];
                    const a = F.Get().GetInfo(n.opt_in_id),
                      r = i.get(n.id);
                    let s = t.has(n.id);
                    ("nextfest" != n.type && "themesale" != n.type) ||
                      s ||
                      (s = !a);
                    const o =
                        a &&
                        a.rgEligibleApps &&
                        0 == a.rgEligibleApps.length &&
                        a.rgRegisteredApps &&
                        0 == a.rgRegisteredApps.length,
                      d = new O(
                        e,
                        s,
                        n,
                        r,
                        a,
                        new Date(1e3 * n.start_date),
                        new Date(1e3 * n.end_date),
                        "event",
                        (function (e) {
                          switch (e.type) {
                            case "midweek":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_midweek",
                              );
                            case "weekenddeal":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_weekenddeal",
                              );
                            case "saleevent":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_saleevent",
                              );
                            case "themesale":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_themesale",
                              );
                            case "nextfest":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_nextfest",
                              );
                            case "seasonalsale":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_seasonalsale",
                              );
                            case "informational":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_informational",
                              );
                            case "dailydeal":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_dailydeal",
                              );
                            case "vacation":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_vacation",
                              );
                            case "important":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_important",
                              );
                            case "preload":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_preload",
                              );
                            case "assetrequest":
                              return (0, l.Xx)(
                                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_assetrequest",
                              );
                          }
                        })(n),
                        o,
                      ),
                      m = (function (e) {
                        var t;
                        const n = [];
                        if (
                          "nextfest" == e.m_plan.type &&
                          (null === (t = e.m_optIn) || void 0 === t
                            ? void 0
                            : t.description.definition.optin_deadline_date) &&
                          e.m_optIn.rgEligibleApps &&
                          e.m_optIn.rgRegisteredApps &&
                          e.m_optIn.rgEligibleApps.length > 0
                        ) {
                          const t = new Date(
                            1e3 *
                              e.m_optIn.description.definition
                                .optin_deadline_date,
                          );
                          t &&
                            t > new Date() &&
                            n.push(
                              new O(
                                e.m_partnerId,
                                e.valveOnly,
                                e.m_plan,
                                e.m_assetInput,
                                e.m_optIn,
                                t,
                                t,
                                "deadline",
                                (0, l.Xx)(
                                  "#Dashboard_UpcomingEvents_EventType_PromotionPlan_registration_reminder",
                                ),
                                e.dimmed,
                              ),
                            );
                        }
                        return n;
                      })(d);
                    return (null == m ? void 0 : m.length) > 0 ? [d, ...m] : d;
                  })) && void 0 !== a
            ? a
            : [];
        }, [t, e, n, i]);
      }
      class O {
        constructor(e, t, n, a, r, l, s, o, d, m) {
          (this.m_changedCallbacks = new S.pB()),
            (this.dimmed = !1),
            (this.m_partnerId = e),
            (this.valveOnly = t),
            (this.m_plan = n),
            (this.m_assetInput = a),
            (this.m_optIn = r),
            (this.id = n.id),
            (this.title = "..."),
            (this.startDate = l),
            (this.endDate = s),
            (this.eventType = o),
            (this.eventTypeName = d),
            (this.editURL = `${i.De.PARTNER_BASE_URL}promotion/planning/edit/${this.m_plan.id}`),
            (this.dimmed = m);
        }
        getElement() {
          return a.createElement(G, { eventData: this });
        }
        dataChanged() {
          this.m_changedCallbacks.Dispatch();
        }
        registerForChange(e) {
          return this.m_changedCallbacks.Register(e);
        }
      }
      function G(e) {
        const { eventData: t } = e;
        return "nextfest" == t.m_plan.type || "themesale" === t.m_plan.type
          ? a.createElement(V, { eventData: t })
          : a.createElement(H, { eventData: t });
      }
      function H(e) {
        var t, n;
        const { eventData: r } = e,
          s = r.m_plan,
          { data: o, isLoading: d } = (0, x.n$)(s.discount_event_id),
          [m] = (0, u.jk)(s.store_item_id, s.store_item_type, {
            include_basic_info: !0,
            include_assets: !0,
          }),
          [v] = (0, u.jk)(s.advertising_appid, 0, {
            include_basic_info: !0,
            include_assets: !0,
          }),
          _ = null != m ? m : v,
          g = "seasonalsale" == r.m_plan.type,
          E = J(s),
          D = Y(r, d, [
            null == _ ? void 0 : _.GetName(),
            null == o ? void 0 : o.name,
            E,
          ]);
        let h =
            "seasonalsale" == s.type
              ? `${i.De.PARTNER_BASE_URL}doc/marketing/discounts/seasonalsales`
              : void 0,
          T = null == _ ? void 0 : _.GetAssets().GetHeaderURL();
        null != h || (h = null == _ ? void 0 : _.GetStorePageURL());
        const f = (0, I.jM)(i.De.LANGUAGE),
          { eventModel: b, bLoading: N } = (0, k.Mx)(
            s.sale_clan_account,
            s.sale_clan_event_gid,
          );
        null != T ||
          (T =
            !N &&
            (null == b
              ? void 0
              : b.GetImageURL("capsule", f, C.FN.capsule_main))),
          null != h || (h = !N && (null == b ? void 0 : b.GetSaleURL()));
        const w =
            s.discount_event_id &&
            !(null === (t = r.m_assetInput) || void 0 === t
              ? void 0
              : t.enable_input)
              ? `${i.De.PARTNER_BASE_URL}promotion/discounts/dashboard/?de=${s.discount_event_id}`
              : void 0,
          R = a.createElement(
            a.Fragment,
            null,
            w &&
              a.createElement(
                "button",
                {
                  className: (0, p.Z)(y.LinkButton),
                  onClick: () => window.open(w, "_blank"),
                },
                (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_Button_EnterDiscounts",
                ),
              ),
            g &&
              a.createElement(
                "button",
                {
                  className: (0, p.Z)(y.LinkButton),
                  onClick: () => window.open(h, "_blank"),
                },
                (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_Button_LearnMore",
                ),
              ),
            (null === (n = s.asset_kit_url) || void 0 === n
              ? void 0
              : n.length) > 0 &&
              a.createElement(
                "button",
                {
                  className: (0, p.Z)(y.LinkButton),
                  onClick: () => window.open(s.asset_kit_url, "_blank"),
                },
                (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_Button_AssetKit",
                ),
              ),
          );
        return a.createElement(
          "div",
          {
            className: (0, p.Z)(
              y.ItemContainer,
              y.HasImage,
              g && y.SeasonalSale,
            ),
          },
          T &&
            g &&
            a.createElement("img", {
              className: (0, p.Z)(y.BackgroundImage, c.BackgroundImage),
              src: T,
            }),
          a.createElement(j, {
            eventName: D,
            startTime: s.start_date,
            endTime: s.end_date,
            eventUrl: h,
            imageUrl: T,
            additionalButtons: R,
          }),
          a.createElement(W, { eventData: r }),
        );
      }
      function V(e) {
        var t, n, r, s, o, d, m, v, _;
        const { eventData: u } = e,
          g = (0, I.jM)(i.De.LANGUAGE),
          E = u.m_plan,
          D = u.m_optIn,
          h = J(E),
          T = Y(u, !1, [
            null ===
              (r =
                null ===
                  (n =
                    null === (t = null == D ? void 0 : D.description) ||
                    void 0 === t
                      ? void 0
                      : t.definition) || void 0 === n
                  ? void 0
                  : n.event_title) || void 0 === r
              ? void 0
              : r[i.De.LANGUAGE],
            h,
          ]),
          f = E.opt_in_id
            ? `${i.De.PARTNER_BASE_URL}optin/sale/${null === (s = E.opt_in_id) || void 0 === s ? void 0 : s.replace("sale_", "")}`
            : void 0,
          b = [];
        let N;
        if (
          (u.valveOnly &&
            ((E.sale_clan_account && E.sale_clan_event_gid) ||
              b.push("no sale event"),
            E.opt_in_id || b.push("no opt-in")),
          "nextfest" == E.type && "deadline" == u.eventType)
        ) {
          const e = new Intl.DateTimeFormat(navigator.language, {
            month: "short",
            day: "numeric",
          }).format(
            new Date(
              1e3 * u.m_optIn.description.definition.optin_deadline_date,
            ),
          );
          N = a.createElement(
            a.Fragment,
            null,
            a.createElement(
              "div",
              { className: y.ItemDeadlineHeaderText },
              (0, l.Xx)(
                "#Dashboard_UpcomingEvents_Events_Deadline_RegistrationCloses",
                e,
              ),
            ),
            a.createElement(
              "div",
              null,
              (0, l.Xx)(
                "#Dashboard_UpcomingEvents_Events_Deadline_RegistrationCloses_Description",
              ),
            ),
          );
        }
        const w =
            null !== (o = null == D ? void 0 : D.description.start_date) &&
            void 0 !== o
              ? o
              : E.start_date,
          x =
            null !== (d = null == D ? void 0 : D.description.end_date) &&
            void 0 !== d
              ? d
              : E.end_date,
          k =
            null ===
              (_ =
                null ===
                  (v =
                    null === (m = null == D ? void 0 : D.description) ||
                    void 0 === m
                      ? void 0
                      : m.definition) || void 0 === v
                  ? void 0
                  : v.localized_optin_banner) || void 0 === _
              ? void 0
              : _[i.De.LANGUAGE],
          C =
            (null == D ? void 0 : D.description.opt_in_name) &&
            k &&
            (0, R.I)(null == D ? void 0 : D.description.opt_in_name, g, k);
        return a.createElement(
          "div",
          { className: y.ItemContainer },
          C &&
            a.createElement("img", {
              className: (0, p.Z)(y.BackgroundImage, c.BackgroundImage),
              src: C,
            }),
          a.createElement(j, {
            warnings: b,
            eventName: T,
            eventDescription: N,
            startTime: w,
            endTime: x,
            eventUrl: f,
            inlineDate: !0,
          }),
          D && a.createElement(q, { eventData: u, eventUrl: f, optIn: D }),
        );
      }
      function j(e) {
        const {
          eventName: t,
          eventDescription: n,
          eventUrl: i,
          startTime: r,
          endTime: l,
          warnings: s,
          imageUrl: o,
          additionalButtons: d,
          inlineDate: m,
        } = e;
        return a.createElement(
          a.Fragment,
          null,
          o &&
            a.createElement(
              "div",
              { className: y.ItemImage },
              a.createElement(
                M,
                { href: i, target: "_blank" },
                a.createElement("img", { src: o }),
              ),
            ),
          a.createElement(
            "div",
            { className: y.ItemNameInfoContainer },
            a.createElement(
              "div",
              { className: (0, p.Z)(y.ItemInfoHeader, m && y.InlineDate) },
              a.createElement(
                "span",
                { className: y.ItemName },
                a.createElement(M, { href: i, target: "_blank" }, t),
              ),
              a.createElement(
                "div",
                null,
                a.createElement(Z, { startTimestamp: r, endTimestamp: l }),
              ),
            ),
            n,
            (null == s ? void 0 : s.length) > 0 &&
              a.createElement(
                "div",
                { className: y.ItemWarning },
                s.join(", "),
              ),
          ),
          d && a.createElement("div", { className: y.LinkButtonContainer }, d),
        );
      }
      function Z(e) {
        const { startTimestamp: t, endTimestamp: n } = e,
          i = new Intl.DateTimeFormat(navigator.language, {
            month: "short",
            day: "numeric",
          }),
          r = i.format(new Date(1e3 * t)),
          s = i.format(new Date(1e3 * n)),
          o =
            r === s
              ? r
              : (0, l.Xx)("#Dashboard_UpcomingEvents_Events_TimeRange", r, s);
        return a.createElement("span", { className: y.ReleaseDateText }, o);
      }
      function W(e) {
        var t;
        const { eventData: n } = e;
        if (
          !(null === (t = n.m_assetInput) || void 0 === t
            ? void 0
            : t.enable_input)
        )
          return;
        const r = n.m_plan.id
            ? `${i.De.PARTNER_BASE_URL}promotion/assetportal/request/${n.m_plan.id}`
            : void 0,
          s = new Intl.DateTimeFormat(navigator.language, {
            month: "short",
            day: "numeric",
          }),
          o =
            n.m_plan.start_date && s.format(1e3 * (n.m_plan.start_date - b.hZ));
        return a.createElement(
          "div",
          { className: y.LinkButtonContainer },
          o &&
            a.createElement(
              a.Fragment,
              null,
              a.createElement(
                "div",
                { className: y.AssetRequestDateLabel },
                (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_EventType_PromotionPlan_assetrequest_duedate",
                ),
              ),
              a.createElement("div", { className: y.AssetRequestDate }, o),
            ),
          r &&
            a.createElement(
              "button",
              {
                className: (0, p.Z)(y.LinkButton),
                onClick: () => window.open(r, "_blank"),
              },
              (0, l.Xx)(
                "#Dashboard_UpcomingEvents_EventType_PromotionPlan_assetrequest_button",
              ),
            ),
        );
      }
      function q(e) {
        var t, n, r, s;
        const { eventData: o, eventUrl: d, optIn: m } = e,
          c = o.m_plan,
          _ = (e, t) => {
            var n;
            return null !==
              (n =
                null == e
                  ? void 0
                  : e.map((e) => ({ details: e, bRegistered: t }))) &&
              void 0 !== n
              ? n
              : [];
          },
          u = a.useMemo(
            () =>
              (function (...e) {
                return [...new Set(e.flat())];
              })(_(m.rgEligibleApps, !1), _(m.rgRegisteredApps, !0)),
            [m.rgEligibleApps, m.rgRegisteredApps],
          ),
          g = (function (e, t, n, i) {
            var r;
            const l = (0, w.og)(
              null !== (r = t.map((e) => e.appid)) && void 0 !== r ? r : [],
              !0,
              e,
            );
            return a.useMemo(() => {
              const e =
                  null == t
                    ? void 0
                    : t.reduce((e, t) => e.set(t.appid, t.appName), new Map()),
                a =
                  n && i && l && e
                    ? Array.from(l)
                        .map(([e, t]) => {
                          var a;
                          return {
                            appid: e,
                            discountsDuring:
                              null === (a = null == t ? void 0 : t.discounts) ||
                              void 0 === a
                                ? void 0
                                : a.filter(
                                    (e) =>
                                      n <= e.rtEndDate && e.rtStartDate <= i,
                                  ),
                          };
                        })
                        .filter((e) => {
                          var t;
                          return null === (t = e.discountsDuring) ||
                            void 0 === t
                            ? void 0
                            : t.length;
                        })
                    : void 0;
              return null == a
                ? void 0
                : a.map(({ appid: t, discountsDuring: n }) => ({
                    appid: t,
                    appName: null == e ? void 0 : e.get(t),
                    discountsDuring: n,
                  }));
            }, [t, l, n, i]);
          })(
            o.m_partnerId,
            null ==
              (E = null !== (t = m.rgRegisteredApps) && void 0 !== t ? t : [])
              ? void 0
              : E.map((e) => ({ appid: e.appid, appName: e.app_name })),
            c.start_date,
            c.end_date,
          );
        var E;
        const D = a.useMemo(
            () =>
              (null == g ? void 0 : g.length) &&
              a.createElement(
                "div",
                { className: y.OptInGamesToolTipContainer },
                g
                  .sort((e, t) => e.appName.localeCompare(t.appName))
                  .map((e) =>
                    a.createElement(
                      "div",
                      { key: e.appid },
                      `${e.appName} (${(function (e) {
                        const t = new Intl.DateTimeFormat(navigator.language, {
                          month: "numeric",
                          day: "numeric",
                          year: "2-digit",
                        });
                        return (function (e, t) {
                          const n = new Set();
                          return e.filter((e) => {
                            const a = t(e);
                            return !n.has(a) && (n.add(a), !0);
                          });
                        })(e, (e) => `${e.rtStartDate}_${e.rtEndDate}`)
                          .map(
                            (e) =>
                              `${t.format(new Date(1e3 * e.rtStartDate))} - ${t.format(new Date(1e3 * e.rtEndDate))}`,
                          )
                          .join(", ");
                      })(e.discountsDuring)})`,
                    ),
                  ),
              ),
            [g],
          ),
          h = (null == u ? void 0 : u.length) > 0,
          T =
            c.discount_event_id && h
              ? `${i.De.PARTNER_BASE_URL}promotion/discounts/dashboard/?de=${c.discount_event_id}`
              : void 0,
          f = T && g,
          b = new Intl.DateTimeFormat(navigator.language, {
            month: "short",
            day: "numeric",
          }),
          I =
            "deadline" != o.eventType &&
            m.description.definition.optin_deadline_date &&
            m.description.definition.event_start_date -
              m.description.definition.optin_deadline_date >
              v._H.PerDay &&
            b.format(1e3 * m.description.definition.optin_deadline_date);
        return a.createElement(
          a.Fragment,
          null,
          h &&
            a.createElement(
              "div",
              { className: y.StatusItemBoxContainer },
              a.createElement(Q, {
                text: (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_EligibleGames",
                ),
                count: u.length,
                tooltip: a.createElement(z, { apps: u }),
              }),
              a.createElement(Q, {
                text: (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_RegisteredGames",
                ),
                count:
                  null !==
                    (r =
                      null === (n = m.rgRegisteredApps) || void 0 === n
                        ? void 0
                        : n.length) && void 0 !== r
                    ? r
                    : 0,
                tooltip: a.createElement(z, {
                  apps: _(m.rgRegisteredApps, !1),
                }),
              }),
              a.createElement(Q, {
                text: (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_Discounted",
                ),
                count:
                  null !== (s = null == g ? void 0 : g.length) && void 0 !== s
                    ? s
                    : 0,
                tooltip: D,
                hidden: !f,
              }),
            ),
          a.createElement(
            "div",
            { className: y.LinkButtonContainer },
            I &&
              a.createElement(
                a.Fragment,
                null,
                a.createElement(
                  "div",
                  { className: y.AssetRequestDateLabel },
                  (0, l.Xx)("#Dashboard_UpcomingEvents_Events_OptIn_Deadline"),
                ),
                a.createElement("div", { className: y.AssetRequestDate }, I),
              ),
            d &&
              a.createElement(
                "button",
                {
                  className: (0, p.Z)(y.LinkButton),
                  onClick: () => window.open(d, "_blank"),
                },
                h
                  ? (0, l.Xx)(
                      "#Dashboard_UpcomingEvents_Events_OptIn_Button_EligibleGames",
                    )
                  : (0, l.Xx)(
                      "#Dashboard_UpcomingEvents_Events_OptIn_Button_LearnMore",
                    ),
              ),
            T &&
              a.createElement(
                "button",
                {
                  className: (0, p.Z)(y.LinkButton),
                  onClick: () => window.open(T, "_blank"),
                },
                (0, l.Xx)(
                  "#Dashboard_UpcomingEvents_Events_OptIn_Button_EnterDiscounts",
                ),
              ),
          ),
        );
      }
      function Q(e) {
        const { text: t, count: n, tooltip: i, hidden: r } = e;
        return a.createElement(
          N.HP,
          { toolTipContent: i },
          a.createElement(
            "div",
            { className: (0, p.Z)(y.StatusItemBox, r && y.Hidden) },
            a.createElement("div", { className: y.StatusItemBoxLabel }, t),
            a.createElement("div", { className: y.StatusItemBoxText }, n),
          ),
        );
      }
      function z(e) {
        const { apps: t } = e;
        if (!(null == t ? void 0 : t.length)) return;
        const n = t.sort((e, t) =>
          e.details.app_name.localeCompare(t.details.app_name),
        );
        return a.createElement(
          "div",
          { className: y.OptInGamesToolTipContainer },
          n.map((e) =>
            a.createElement(
              "div",
              { key: e.details.appid },
              e.bRegistered
                ? (0, l.kQ)(
                    "#Dashboard_UpcomingEvents_Events_OptIn_GameRegistered",
                    e.details.app_name,
                    a.createElement(
                      "span",
                      { className: y.OptInGamesToolTipRegistered },
                      (0, l.Xx)(
                        "#Dashboard_UpcomingEvents_Events_OptIn_GameRegisteredText",
                      ),
                    ),
                  )
                : e.details.app_name,
            ),
          ),
        );
      }
      function J(e) {
        const t = ce();
        return ("nextfest" != e.type &&
          "themesale" != e.type &&
          "seasonalsale" != e.type) ||
          t.bShowWarnings
          ? (function (e) {
              const t = [
                "takeover",
                "takeunder",
                "midweek",
                "midweek deal",
                "weekend deal",
              ];
              for (const n of t)
                e = e.replace(new RegExp("^" + n + "\\s*[:-]\\s*", "i"), "");
              return e;
            })(e.name)
          : (0, l.Xx)("#Dashboard_UpcomingEvents_Events_UnknownEventTitle");
      }
      function Y(e, t, n) {
        let i = "...";
        if (!t)
          for (const e of n)
            if (e) {
              i = e;
              break;
            }
        return (
          a.useEffect(() => {
            t || "..." == i || ((e.title = i), e.dataChanged());
          }, [e, t, i]),
          i
        );
      }
      function $(e) {
        switch (e) {
          case "deadline":
          case "deadline-urgent":
            return (
              (0, l.Xx)("#Dashboard_UpcomingEvents_EventType_Deadline") +
              " (Generated)"
            );
          case "release":
            return (
              (0, l.Xx)("#Dashboard_UpcomingEvents_EventType_Release") +
              " (Generated)"
            );
          case "event":
            return (
              (0, l.Xx)("#Dashboard_UpcomingEvents_EventType_Event_Unknown") +
              " (Generated)"
            );
        }
      }
      (0, T.gn)([f.ak], O.prototype, "dataChanged", null);
      var K = n(49622),
        ee = n(47316),
        te = n.n(ee),
        ne = n(46836);
      function ae(e) {
        const t = a.useMemo(() => (e ? Array.from(e.entries()) : []), [e]),
          n = a.useMemo(
            () =>
              t.reduce((e, [t, n]) => {
                const a = U(new Date(1e3 * n.due_date)),
                  i = (function (e) {
                    switch (e) {
                      case 4:
                      case 5:
                        return !0;
                    }
                    return !1;
                  })(n.type),
                  r = i ? "group" : t,
                  l = `${a.getTime()}_${n.type}_${r}`,
                  s = e.has(l) ? e.get(l).deadlines : [];
                return (
                  e.set(l, {
                    dueDate: a,
                    bSupportsGrouping: i,
                    deadlines: [...s, n],
                  }),
                  e
                );
              }, new Map()),
            [t],
          );
        return a.useMemo(() => {
          var e;
          return null !==
            (e = Array.from(n.entries()).flatMap(([e, t]) => {
              const { dueDate: n, bSupportsGrouping: a, deadlines: i } = t,
                r = [];
              return (
                a
                  ? r.push(
                      (function (e) {
                        switch (e[0].type) {
                          case 4:
                          case 5:
                            return ie(e[0]);
                        }
                        return;
                      })(i),
                    )
                  : r.push(...i.map((e) => ie(e))),
                r
                  .filter((e) => !!e)
                  .map((t) => ({
                    title: t.sTitle,
                    startDate: n,
                    endDate: n,
                    eventType: t.bUrgent ? "deadline-urgent" : "deadline",
                    id: e,
                    eventTypeName: t.sHeader,
                    getElement: () => t.element,
                    registerForChange: void 0,
                  }))
              );
            })) && void 0 !== e
            ? e
            : [];
        }, [n]);
      }
      function ie(e) {
        const t = e.description_jsondata
          ? JSON.parse(e.description_jsondata)
          : void 0;
        switch (e.type) {
          case 1:
            return {
              sHeader: "Action Required",
              sTitle: "Test 1",
              bUrgent: !0,
              element: a.createElement(re, { deadline: e, json: t }),
            };
          case 3:
            return {
              sHeader: (0, l.Xx)(
                "#Dashboard_UpcomingEvents_EventType_Deadline",
              ),
              sTitle: (0, l.Xx)(
                "#PartnerDeadline_DailyDeal_InviteExpiring_Title",
              ),
              bUrgent: !0,
              element: a.createElement(le, { deadline: e, json: t }),
            };
          case 4: {
            const n = F.Get().GetInfo(null == t ? void 0 : t.opt_in_name)
              .description.definition.event_title[i.De.LANGUAGE];
            return n
              ? {
                  sHeader: (0, l.Xx)(
                    "#PartnerDeadline_NextFest_PressPreview_Title",
                  ),
                  sTitle: (0, l.Xx)(
                    "#Deadlines_CombinedTitle",
                    (0, l.Xx)("#PartnerDeadline_NextFest_PressPreview_Title"),
                    n,
                  ),
                  element: a.createElement(se, { deadline: e, json: t }),
                }
              : void 0;
          }
          case 5: {
            const n = F.Get().GetInfo(null == t ? void 0 : t.opt_in_name)
              .description.definition.event_title[i.De.LANGUAGE];
            return n
              ? {
                  sHeader: (0, l.Xx)(
                    "#PartnerDeadline_NextFest_DemoBuildReview_Title",
                  ),
                  sTitle: (0, l.Xx)(
                    "#Deadlines_CombinedTitle",
                    (0, l.Xx)(
                      "#PartnerDeadline_NextFest_DemoBuildReview_Title",
                    ),
                    n,
                  ),
                  bUrgent: !0,
                  element: a.createElement(oe, { deadline: e, json: t }),
                }
              : void 0;
          }
        }
      }
      function re(e) {
        const { deadline: t, json: n } = e,
          i = new Intl.DateTimeFormat(navigator.language, {
            month: "short",
            day: "numeric",
          }).format(new Date(1e3 * t.due_date));
        return a.createElement(
          a.Fragment,
          null,
          a.createElement("div", null, "Name: ", n.name),
          a.createElement("div", null, "Due date: ", i),
        );
      }
      function le(e) {
        const { deadline: t } = e,
          [n] = (0, u.jk)(
            null == t ? void 0 : t.store_item_id,
            null == t ? void 0 : t.store_item_type,
            { include_assets: !0 },
          ),
          r = `${i.De.PARTNER_BASE_URL}promotion/dailydeals/invite/${t.gid}`,
          s = (0, ne.eS)(null == t ? void 0 : t.due_date);
        return a.createElement(de, {
          urgent: !0,
          urlImage: null == n ? void 0 : n.GetAssets().GetSmallCapsuleURL(),
          strTitle: (0, l.Xx)(
            "#PartnerDeadline_DailyDeal_InviteExpiring_Title",
          ),
          strBody: (0, l.Xx)(
            "#PartnerDeadline_DailyDeal_InviteExpiring_Body",
            s,
          ),
          url: r,
          strImageTooltip: null == n ? void 0 : n.GetName(),
          rightCol: a.createElement(
            "button",
            {
              className: y.LinkButton,
              onClick: () => {
                window.open(r, "_blank");
              },
            },
            (0, l.Xx)("#DailyDeals_PickDate"),
          ),
        });
      }
      function se(e) {
        const { deadline: t, json: n } = e,
          r = F.Get().GetInfo(n.opt_in_name),
          s = `${i.De.PARTNER_BASE_URL}optin/sale/${n.opt_in_name.replace("sale_", "")}`;
        return a.createElement(de, {
          strTitle: r.description.definition.event_title[i.De.LANGUAGE],
          strBody: (0, l.Xx)("#PartnerDeadline_NextFest_PressPreview_Body"),
          rightCol: a.createElement(
            "button",
            {
              className: y.LinkButton,
              onClick: () => window.open(s, "_blank"),
            },
            (0, l.Xx)("#PartnerDeadline_NextFest_View_Registration"),
          ),
        });
      }
      function oe(e) {
        const { deadline: t, json: n } = e,
          r = F.Get().GetInfo(n.opt_in_name),
          s = `${i.De.PARTNER_BASE_URL}optin/sale/${n.opt_in_name.replace("sale_", "")}`;
        return a.createElement(de, {
          urgent: !0,
          strTitle: r.description.definition.event_title[i.De.LANGUAGE],
          strBody: (0, l.Xx)("#PartnerDeadline_NextFest_DemoBuildReview_Body"),
          rightCol: a.createElement(
            "button",
            {
              className: y.LinkButton,
              onClick: () => window.open(s, "_blank"),
            },
            (0, l.Xx)("#PartnerDeadline_NextFest_View_Registration"),
          ),
        });
      }
      function de(e) {
        const {
          urlImage: t,
          strTitle: n,
          strBody: i,
          strImageTooltip: r,
          url: l,
          rightCol: s,
          urgent: o,
        } = e;
        return a.createElement(
          "div",
          { className: te()(y.ItemContainer, t && y.HasImage) },
          t &&
            a.createElement(
              N.HP,
              { toolTipContent: r },
              t &&
                a.createElement(
                  "div",
                  { className: y.ItemImage },
                  a.createElement(
                    M,
                    { href: l, target: "_blank" },
                    a.createElement("img", { src: t }),
                  ),
                ),
            ),
          a.createElement(
            "div",
            { className: y.ItemNameInfoContainer },
            a.createElement("div", { className: y.ItemName }, n),
            a.createElement(
              "div",
              { className: o ? K.DeadlineWarningUrgent : K.DeadlineWarning },
              i,
            ),
          ),
          s && a.createElement("div", { className: y.LinkButtonContainer }, s),
        );
      }
      const me = a.createContext({ bShowWarnings: !1, bExpanded: !1 });
      function ce() {
        return a.useContext(me);
      }
      function pe(e) {
        const {
            partnerId: t,
            promotionPlans: n,
            promotionPlanAssetInput: i,
            hiddenPromotionPlanIDs: r,
            earliestDataTime: s,
            upcomingReleaseApps: o,
            deadlines: m,
            showWarnings: v,
            testData: _,
            eventIds: u,
          } = e,
          [g, D] = a.useState(0),
          h = B(g),
          T = B(g + 1),
          f = B(0),
          [y, b] = a.useState(""),
          I = a.useMemo(() => {
            const e = new Date();
            e.setHours(0, 0, 0, 0);
            const t = (t) => {
                const n = new Date();
                return n.setDate(e.getDate() + t), n;
              },
              n = [
                {
                  title: "Team Fortress 2",
                  startDate: t(-1),
                  eventType: "release",
                },
                { title: "Dota 2", startDate: t(0), eventType: "event" },
                {
                  title: "Weekend Deal - Portal 2",
                  startDate: t(0),
                  eventType: "deadline",
                },
                {
                  title: "Half Life 2 - Episode One",
                  startDate: t(0),
                  eventType: "release",
                },
                {
                  title: "Capitalism and Economy Fest",
                  startDate: t(1),
                  eventType: "deadline",
                },
                {
                  title: "Dota Underlords",
                  startDate: t(9),
                  eventType: "release",
                },
                {
                  title: "Counter Strike 2",
                  startDate: t(36),
                  eventType: "event",
                },
                {
                  title: "Steam Next Fest June Edition",
                  startDate: t(36),
                  eventType: "event",
                },
                { title: "The Lab", startDate: t(36), eventType: "event" },
              ].map((e) =>
                Object.assign(Object.assign({}, e), {
                  id: "fake_" + e.title,
                  endDate: e.startDate,
                  eventTypeName: $(e.eventType),
                  getElement: () => a.createElement("div", null, e.title),
                }),
              );
            let i = 40;
            for (let e = 0; e < 50; e++) {
              let r;
              switch (Math.floor(3 * Math.random())) {
                case 0:
                  r = "deadline";
                  break;
                case 1:
                  r = "release";
                  break;
                case 2:
                  r = "event";
              }
              i += 3 * Math.random();
              const l = {
                title: "Generated event" + e,
                startDate: t(i),
                endDate: t(i),
                eventType: r,
                id: "fake_" + e.toString(),
                eventTypeName: $(r),
                getElement: () =>
                  a.createElement("div", null, "Generated event" + e),
                registerForChange: void 0,
                dimmed: Math.random() > 0.9,
              };
              n.push(l);
            }
            return n;
          }, []),
          N = X(t, r, n, i),
          w =
            ((x = o),
            a.useMemo(() => {
              var e;
              return null !==
                (e =
                  null == x
                    ? void 0
                    : x.map((e) => {
                        const t = new Date(1e3 * e.releaserequest.release_date);
                        return {
                          title: e.name,
                          startDate: t,
                          endDate: t,
                          eventType: "release",
                          id: e.appid.toString(),
                          eventTypeName: (0, l.Xx)(
                            "#Dashboard_UpcomingEvents_EventType_Release",
                          ),
                          getElement: () => a.createElement(E, { app: e }),
                          registerForChange: void 0,
                        };
                      })) && void 0 !== e
                ? e
                : [];
            }, [x]));
        var x;
        const R = ae(m),
          k = N.concat(w, R, _ ? I : []).filter(
            (e) =>
              (!e.valveOnly || v) && (!u || 0 == u.length || u.includes(e.id)),
          ),
          C = k.filter((e) =>
            (function (e, t) {
              return (
                !t ||
                0 == t.trim().length ||
                ((t = t.trim()),
                !!e.title.toLocaleLowerCase().includes(t.toLocaleLowerCase()) ||
                  !!e.eventTypeName
                    .toLocaleLowerCase()
                    .includes(t.toLocaleLowerCase()))
              );
            })(e, y),
          ),
          S = (function (e, t) {
            const n = new Set(t.map((e) => e.id));
            return new Set(e.filter((e) => n.has(e.id)).map((e) => e.id));
          })(k, C),
          P = a.useMemo(() => new Map(), []),
          [L, A] = a.useState(!1),
          M = a.useRef(),
          F = (function (e, t) {
            const n = a.useRef(),
              i = (a) => {
                e ? a.scrollIntoView() : (t(!0), (n.current = a));
              };
            return (
              a.useEffect(() => {
                e &&
                  n.current &&
                  (n.current.scrollIntoView(), (n.current = void 0));
              }, [e]),
              i
            );
          })(L, A),
          O = (e) => {
            if (U(e).getTime() == U(new Date()).getTime())
              return void M.current.scrollIntoView();
            const t = null == P ? void 0 : P.get(U(e).getTime());
            t && F(t.element);
          },
          [G, H] = a.useState();
        return a.createElement(
          me.Provider,
          { value: { bShowWarnings: v, bExpanded: L } },
          a.createElement(
            d,
            {
              title: (0, l.Xx)("#Dashboard_UpcomingEvents_Title"),
              ref: M,
              beta: !0,
            },
            a.createElement(
              "div",
              { className: c.SectionContainer },
              !L &&
                a.createElement(
                  "div",
                  { className: c.CalendarContainer },
                  a.createElement(
                    "div",
                    {
                      className: (0, p.Z)(
                        c.CalendarMovingRegion,
                        L && c.Sticky,
                      ),
                    },
                    a.createElement(ve, {
                      viewDate: h,
                      fnSetMonthDelta: D,
                      earliestDate: f,
                    }),
                    a.createElement(Ee, null),
                    a.createElement(_e, {
                      viewDate: h,
                      earliestDataTime: s,
                      events: k,
                      filterVisibleEventIds: S,
                      bShowPreceedingWeeks: !0,
                      fnScrollToDay: O,
                      hoverEvent: G,
                    }),
                    a.createElement(ve, { viewDate: T }),
                    a.createElement(Ee, null),
                    a.createElement(_e, {
                      viewDate: T,
                      events: k,
                      filterVisibleEventIds: S,
                      bShowFollowingWeeks: !0,
                      fnScrollToDay: O,
                      hoverEvent: G,
                    }),
                  ),
                ),
              a.createElement(
                "div",
                { className: (0, p.Z)(c.ListArea, L && c.CalendarPerMonth) },
                a.createElement(De, { filterText: y, setFilterText: b }),
                a.createElement(Te, {
                  events: C,
                  filterVisibleEventIds: S,
                  dayRefsToScrollTo: P,
                  fnScrollToDay: O,
                  refSection: M,
                  isExpanded: L,
                  fnSetExpanded: (e) => {
                    A(e), !e && M.current.scrollIntoView();
                  },
                  hoverEvent: G,
                  setHoverEvent: H,
                }),
              ),
            ),
          ),
        );
      }
      function ve(e) {
        const {
            viewDate: t,
            fnSetMonthDelta: n,
            earliestDate: i,
            compact: r,
          } = e,
          s = ce(),
          o = n
            ? () => {
                n(() => 0);
              }
            : null,
          d = new Date(t.getTime() - 14 * v._H.PerDay * 1e3),
          m = n && d > i ? () => n((e) => e - 1) : null,
          _ = n ? () => n((e) => e + 1) : null,
          u = new Intl.DateTimeFormat(navigator.language, {
            year: "numeric",
            month: "short",
          }).format(t);
        return a.createElement(
          "div",
          {
            className: (0, p.Z)(
              c.MonthPickerContainer,
              s.bExpanded && c.CalendarPerMonth,
            ),
          },
          !r &&
            a.createElement(
              "div",
              {
                className: (0, p.Z)(c.MonthPickerToday, !o && c.Inactive),
                onClick: o,
              },
              (0, l.Xx)("#Dashboard_UpcomingEvents_JumpToToday"),
            ),
          !r &&
            a.createElement(
              "div",
              {
                className: (0, p.Z)(c.MonthPickerArrow, !m && c.Inactive),
                onClick: m,
              },
              "<",
            ),
          a.createElement("div", { className: c.MonthPickerDate }, u),
          !r &&
            a.createElement(
              "div",
              {
                className: (0, p.Z)(c.MonthPickerArrow, !_ && c.Inactive),
                onClick: _,
              },
              ">",
            ),
        );
      }
      function _e(e) {
        var t;
        const {
            viewDate: n,
            earliestDataTime: i,
            events: r,
            filterVisibleEventIds: l,
            bShowPreceedingWeeks: s,
            bShowFollowingWeeks: o,
            fnScrollToDay: d,
            hoverEvent: m,
          } = e,
          v = U(new Date()),
          _ = Ie(r, U),
          u = A(n, -n.getDay()),
          g = new Date(n.getFullYear(), n.getMonth() + 1, 0).getDate(),
          E =
            (g +
              n.getDay() +
              ((n.getDay() + g) % 7 != 0 ? 7 - ((n.getDay() + g) % 7) : 0)) /
            7,
          D = new Intl.DateTimeFormat(navigator.language, {
            year: "numeric",
            month: "long",
            day: "numeric",
          }),
          h = [];
        for (let e = 0; e < E; e++) {
          const r = [],
            g = A(u, 7 * e);
          for (let e = 0; e < 7; e++) {
            const u = A(g, e),
              E = U(u),
              h = n.getMonth() === u.getMonth() && (!i || u >= i),
              T =
                n.getMonth() === u.getMonth() || (s && u <= n) || (o && u >= n),
              f = E.getTime() === v.getTime(),
              y =
                null === (t = _.get(E.getTime())) || void 0 === t
                  ? void 0
                  : t.sort(we),
              b = null == y ? void 0 : y.every((e) => l.has(e.id)),
              I = null == y ? void 0 : y.some((e) => "deadline" == e.eventType),
              N =
                null == y
                  ? void 0
                  : y.some((e) => "deadline-urgent" == e.eventType),
              w = null == y ? void 0 : y.some((e) => "release" == e.eventType),
              x = null == y ? void 0 : y.some((e) => "event" == e.eventType),
              R =
                m &&
                E.getTime() >= U(m.startDate).getTime() &&
                E.getTime() <= U(m.endDate).getTime(),
              k = (0, p.Z)(
                c.Day,
                !h && !R && c.OtherMonth,
                !T && c.Inactive,
                f && c.Today,
                I && b && c.Deadline,
                N && b && c.DeadlineUrgent,
                w && b && c.Release,
                x && b && c.Event,
                R && T && c.Hovered,
              );
            r.push(
              a.createElement(
                ue,
                { key: e, date: u, daysEvents: y, tooltipDateFormat: D },
                a.createElement(
                  "div",
                  { className: k, onClick: () => d(u) },
                  u.getDate(),
                ),
              ),
            );
          }
          h.push(a.createElement("div", { key: e, className: c.Week }, r));
        }
        return a.createElement(a.Fragment, null, h);
      }
      function ue(e) {
        const { date: t, daysEvents: n, tooltipDateFormat: i, children: r } = e;
        if (!n) return a.createElement(a.Fragment, null, r);
        const l = a.createElement(
          "div",
          { className: c.DayTooltipContainer },
          a.createElement("div", { className: c.DayTooltipDate }, i.format(t)),
          n.map((e) => a.createElement(ge, { key: e.id, event: e })),
        );
        return a.createElement(N.HP, { toolTipContent: l }, r);
      }
      function ge(e) {
        const { event: t } = e;
        return (
          xe(t),
          a.createElement(
            "div",
            {
              className: (0, p.Z)(
                c.DayTooltipEvent,
                "deadline" == t.eventType && c.Deadline,
                "deadline-urgent" == t.eventType && c.DeadlineUrgent,
                "release" == t.eventType && c.Release,
                "event" == t.eventType && c.Event,
              ),
            },
            t.title,
            t.valveOnly &&
              a.createElement("span", { className: c.ValveOnly }, " (VO)"),
          )
        );
      }
      function Ee(e) {
        const t = new Intl.DateTimeFormat(navigator.language, {
            weekday: "short",
          }),
          n = [...Array(7).keys()].map((e) =>
            t.format(new Date(2024, 0, e + 7)),
          );
        return a.createElement(
          "div",
          { className: c.Week },
          n.map((e) =>
            a.createElement("div", { key: e, className: c.DayName }, e),
          ),
        );
      }
      function De(e) {
        const { filterText: t, setFilterText: n } = e;
        return a.createElement(
          "div",
          { className: c.ListFilterTabsContainer },
          a.createElement(he, { filterText: t, setFilterText: n }),
        );
      }
      function he(e) {
        const { filterText: t, setFilterText: n } = e;
        return a.createElement(
          "div",
          { className: c.FilterTextArea },
          a.createElement("input", {
            className: c.FilterTextInput,
            type: "text",
            value: t,
            onChange: (e) => n(e.target.value),
            placeholder: (0, l.Xx)(
              "#Dashboard_UpcomingEvents_Events_FilterEmpty",
            ),
          }),
          a.createElement(
            "button",
            { className: c.FilterTextClearButton, onClick: () => n("") },
            "✖",
          ),
          a.createElement("span", { className: c.FilterTextIcon }, "🔍"),
        );
      }
      function Te(e) {
        const {
            events: t,
            filterVisibleEventIds: n,
            dayRefsToScrollTo: i,
            fnScrollToDay: r,
            isExpanded: s,
            fnSetExpanded: o,
            hoverEvent: d,
            setHoverEvent: m,
          } = e,
          v = Array.from(Ie(t, L)).sort(Ne),
          [_, u] = a.useState(!1),
          g = a.useRef();
        return (
          a.useEffect(() => {
            const e = () => {
              if (g.current) {
                const e = g.current.scrollHeight > g.current.offsetHeight;
                u(e);
              }
            };
            return (
              e(),
              window.addEventListener("resize", e),
              () => window.removeEventListener("resize", e)
            );
          }),
          a.createElement(
            "div",
            { className: c.ListContainer },
            a.createElement(
              "div",
              {
                className: (0, p.Z)(c.List, s && c.Expanded, _ && c.Overflows),
                ref: g,
              },
              v.map(([e, t], l) =>
                a.createElement(fe, {
                  key: e,
                  date: new Date(e),
                  events: t,
                  filterVisibleEventIds: n,
                  dayRefsToScrollTo: i,
                  fnScrollToDay: r,
                  firstMonth: 0 == l,
                  lastMonth: l == v.length - 1,
                  hoverEvent: d,
                  setHoverEvent: m,
                }),
              ),
            ),
            _ &&
              !s &&
              a.createElement(
                "button",
                { className: c.ExpandButton, onClick: () => o(!0) },
                (0, l.Xx)("#Dashboard_UpcomingEvents_ShowMore"),
              ),
            s &&
              a.createElement(
                "button",
                { className: c.ExpandButton, onClick: () => o(!1) },
                (0, l.Xx)("#Dashboard_UpcomingEvents_ShowLess"),
              ),
          )
        );
      }
      function fe(e) {
        const {
            date: t,
            events: n,
            filterVisibleEventIds: i,
            dayRefsToScrollTo: r,
            fnScrollToDay: l,
            firstMonth: s,
            lastMonth: o,
            hoverEvent: d,
            setHoverEvent: m,
          } = e,
          v = ce(),
          _ = Array.from(Ie(n, U)).sort(Ne),
          u = a.useRef();
        return a.createElement(
          "div",
          {
            className: (0, p.Z)(
              c.ListMonthContainer,
              v.bExpanded && c.CalendarPerMonth,
            ),
          },
          v.bExpanded &&
            a.createElement(
              "div",
              {
                className: (0, p.Z)(
                  c.ListMonthCalendar,
                  v.bExpanded && c.CalendarPerMonth,
                ),
              },
              a.createElement(ve, { viewDate: t, compact: !0 }),
              a.createElement(Ee, null),
              a.createElement(_e, {
                viewDate: t,
                events: n,
                filterVisibleEventIds: i,
                fnScrollToDay: l,
                hoverEvent: d,
                bShowPreceedingWeeks: s,
                bShowFollowingWeeks: o,
              }),
            ),
          a.createElement(
            "div",
            {
              className: (0, p.Z)(
                c.ListMonth,
                v.bExpanded && c.CalendarPerMonth,
              ),
            },
            a.createElement(
              "div",
              { className: c.ListMonthTitle, ref: u },
              ((e) =>
                new Date().getFullYear() == e.getFullYear()
                  ? new Intl.DateTimeFormat(navigator.language, {
                      month: "long",
                    }).format(e)
                  : new Intl.DateTimeFormat(navigator.language, {
                      year: "numeric",
                      month: "long",
                    }).format(e))(new Date(t)),
            ),
            _.map(([e, t]) =>
              a.createElement(ye, {
                key: e,
                events: t,
                refScrollTo: (t) => r.set(e, { element: t, header: u.current }),
                setHoverEvent: m,
              }),
            ),
          ),
        );
      }
      function ye(e) {
        const { events: t, refScrollTo: n, setHoverEvent: i } = e,
          r = t.sort(we);
        return a.createElement(
          "div",
          { ref: n, className: c.ListDay },
          r.map((e) =>
            a.createElement(be, { key: e.id, event: e, setHoverEvent: i }),
          ),
        );
      }
      function be(e) {
        const { event: t, setHoverEvent: n } = e,
          i = ce();
        xe(t);
        const r = "deadline" == t.eventType,
          l = "deadline-urgent" == t.eventType,
          s = "release" == t.eventType,
          o = "event" == t.eventType,
          d = (0, p.Z)(
            c.ListDayNumber,
            r && c.Deadline,
            l && c.DeadlineUrgent,
            s && c.Release,
            o && c.Event,
          ),
          m = (0, p.Z)(
            c.ListEventType,
            r && c.Deadline,
            l && c.DeadlineUrgent,
            s && c.Release,
            o && c.Event,
          ),
          v = t.getElement();
        return (
          v &&
          a.createElement(
            "div",
            {
              className: (0, p.Z)(c.ListEvent, t.dimmed && c.Dimmed),
              onPointerEnter: () => n(t),
              onPointerLeave: () => n(void 0),
            },
            a.createElement(
              "div",
              { className: c.ListEventHeader },
              a.createElement("div", { className: d }, t.startDate.getDate()),
              a.createElement(
                "div",
                { className: m },
                t.eventTypeName,
                t.valveOnly &&
                  a.createElement("span", { className: c.ValveOnly }, "(VO)"),
                i.bShowWarnings &&
                  t.editURL &&
                  a.createElement(
                    "span",
                    { className: c.Edit },
                    a.createElement(
                      "a",
                      { href: t.editURL, target: "_blank" },
                      "edit",
                    ),
                    " (VO)",
                  ),
              ),
            ),
            a.createElement("div", { className: c.ListEventEventSection }, v),
          )
        );
      }
      function Ie(e, t) {
        return e.reduce((e, n) => {
          const a = t(n.startDate),
            i = e.get(a.getTime()) || [];
          return e.set(a.getTime(), [...i, n]), e;
        }, new Map());
      }
      function Ne(e, t) {
        return e[0] - t[0];
      }
      function we(e, t) {
        return e.startDate.getTime() < t.startDate.getTime()
          ? -1
          : e.startDate.getTime() > t.startDate.getTime()
            ? 1
            : e.eventType < t.eventType
              ? -1
              : e.eventType > t.eventType
                ? 1
                : (null == e ? void 0 : e.id) < (null == t ? void 0 : t.id)
                  ? -1
                  : (null == e ? void 0 : e.id) > (null == t ? void 0 : t.id)
                    ? 1
                    : 0;
      }
      function xe(e) {
        const t = (0, f.NW)();
        a.useEffect(() => {
          var n;
          const a =
            null === (n = e.registerForChange) || void 0 === n
              ? void 0
              : n.call(e, () => t());
          return () => (null == a ? void 0 : a.Unregister());
        }, [e, t]);
      }
      var Re,
        ke = n(9781);
      function Ce(e) {
        var t;
        const n = (0, ke.N)(),
          r = (0, i.kQ)("nPartnerId", "application_config"),
          l = (0, i.kQ)("rgDailyDealInvitations", "application_config"),
          s = (0, i.kQ)("rgPartnerPromotions", "application_config"),
          o = (0, i.kQ)("rgUpcomingReleaseApps", "application_config"),
          d = (function (e) {
            return e
              ? Object.keys(e).reduce((t, n) => t.set(n, e[n]), new Map())
              : void 0;
          })((0, i.kQ)("rgDeadlines", "application_config")),
          c = (0, i.kQ)("bShowWarnings", "application_config"),
          p = (0, i.kQ)("bTestData", "application_config"),
          v =
            null === (t = (0, i.kQ)("sEventIds", "application_config")) ||
            void 0 === t
              ? void 0
              : t.split(","),
          _ = a.useMemo(
            () =>
              null == s
                ? void 0
                : s.rgPlans
                    .map((e) => P(e.partner_readonly_jsondata))
                    .filter((e) => e && e.id),
            [null == s ? void 0 : s.rgPlans],
          ),
          u = a.useMemo(
            () =>
              null == s
                ? void 0
                : s.rgPlans
                    .map((e) => ({ plan: e, input: P(e.input_jsondata) }))
                    .filter((e) => !!e.input)
                    .reduce(
                      (e, t) => e.set(t.plan.promotion_id, t.input),
                      new Map(),
                    ),
            [null == s ? void 0 : s.rgPlans],
          ),
          g = a.useMemo(() => {
            var e;
            return new Set(
              null !== (e = null == s ? void 0 : s.rgHiddenPlanIDs) &&
              void 0 !== e
                ? e
                : [],
            );
          }, [null == s ? void 0 : s.rgHiddenPlanIDs]);
        return n
          ? a.createElement(
              a.Fragment,
              null,
              (null == l ? void 0 : l.length) > 0 && a.createElement(m, null),
              ((null == _ ? void 0 : _.length) > 0 ||
                (null == o ? void 0 : o.length) > 0 ||
                (null == d ? void 0 : d.size) > 0) &&
                a.createElement(pe, {
                  partnerId: r,
                  promotionPlans: _,
                  promotionPlanAssetInput: u,
                  hiddenPromotionPlanIDs: g,
                  earliestDataTime: (null == s ? void 0 : s.startTime)
                    ? new Date(1e3 * s.startTime)
                    : void 0,
                  upcomingReleaseApps: o,
                  deadlines: d,
                  showWarnings: c,
                  testData: p,
                  eventIds: v,
                }),
            )
          : null;
      }
      !(function (e) {
        (e[(e.BuildReview = 0)] = "BuildReview"),
          (e[(e.StorePageReview = 1)] = "StorePageReview"),
          (e[(e.SteamChina_BuildReview = 2)] = "SteamChina_BuildReview"),
          (e[(e.SteamChina_StorePageReview = 3)] =
            "SteamChina_StorePageReview"),
          (e[(e.SteamChinaPlatformOperator_StorePageReview = 4)] =
            "SteamChinaPlatformOperator_StorePageReview"),
          (e[(e.SteamChinaPlatformOperator_BuildReview = 5)] =
            "SteamChinaPlatformOperator_BuildReview"),
          (e[(e.SteamDeckCompatibilityReview = 6)] =
            "SteamDeckCompatibilityReview");
      })(Re || (Re = {}));
    },
  },
]);
