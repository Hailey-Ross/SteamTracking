/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
(self.webpackChunkappmgmt_storeadmin =
  self.webpackChunkappmgmt_storeadmin || []).push([
  [2136],
  {
    26564: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        Picker: "addonpicker_Picker_3acyH",
        Tabs: "addonpicker_Tabs_3DjoX",
        Tab: "addonpicker_Tab_1F8Bh",
        Focus: "addonpicker_Focus_3GiAc",
        TabContent: "addonpicker_TabContent_2MluN",
        Active: "addonpicker_Active_2bg1w",
        Content: "addonpicker_Content_1c-qe",
        ItemList: "addonpicker_ItemList_2tnPH",
        Item: "addonpicker_Item_3zgnd",
        SectionedPageTitle: "addonpicker_SectionedPageTitle_1rBPd",
        SectionTitle: "addonpicker_SectionTitle_3ff2f",
        FilterInputContainer: "addonpicker_FilterInputContainer_vzSOl",
        FilterInput: "addonpicker_FilterInput_18mhx",
        AddonPickerMessage: "addonpicker_AddonPickerMessage_LGYf8",
      };
    },
    66818: (e) => {
      e.exports = {
        DragTarget: "bbcodeeditor_DragTarget_2Mg-b",
        DragOnTopOfMe: "bbcodeeditor_DragOnTopOfMe_3-WTT",
        DescriptionCtn: "bbcodeeditor_DescriptionCtn_3uiaP",
        EventEditorLinkInput: "bbcodeeditor_EventEditorLinkInput_2tulF",
        DefaultEditor: "bbcodeeditor_DefaultEditor_36qAa",
        ImportHTMLCtn: "bbcodeeditor_ImportHTMLCtn_3uM5Y",
        ImportHTMLTextArea: "bbcodeeditor_ImportHTMLTextArea_2NOGR",
        ImportHTMLConvertButtons: "bbcodeeditor_ImportHTMLConvertButtons_1nQUA",
        ImportHTMLCheckBoxLine: "bbcodeeditor_ImportHTMLCheckBoxLine_20sWo",
        OptionRow: "bbcodeeditor_OptionRow_14XQ_",
        TextEditorToolBarContainer:
          "bbcodeeditor_TextEditorToolBarContainer_2aKjH",
        EmoteOuter: "bbcodeeditor_EmoteOuter_1DZyi",
        YouTubeInput: "bbcodeeditor_YouTubeInput_20wVy",
        YouTubePreviewInsertOption:
          "bbcodeeditor_YouTubePreviewInsertOption_2yhsl",
        DropDownScroll: "bbcodeeditor_DropDownScroll_3bxky",
        InsertSpeakerCtn: "bbcodeeditor_InsertSpeakerCtn_DC83j",
        TitleGroup: "bbcodeeditor_TitleGroup_2VErp",
        AssociateRowCtn: "bbcodeeditor_AssociateRowCtn_2uHPn",
        PhotoCtn: "bbcodeeditor_PhotoCtn_1B9kW",
        AboutCtn: "bbcodeeditor_AboutCtn_3GgiF",
        PreviewCtn: "bbcodeeditor_PreviewCtn_3C8BW",
        BBCodeEditorInputStyles: "bbcodeeditor_BBCodeEditorInputStyles_1Fpu1",
      };
    },
    58998: (e) => {
      e.exports = {
        BBCode_Toggle: "bbcodesuggestions_BBCode_Toggle_1MrSR",
        Active: "bbcodesuggestions_Active_3tFqQ",
        BBCode: "bbcodesuggestions_BBCode_2DSQu",
      };
    },
    88367: (e) => {
      e.exports = { Image: "clanimagepickandresize_Image_2W_Gz" };
    },
    68436: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        chatEntryControls: "chatentry_chatEntryControls_2gP0D",
        chatTextarea: "chatentry_chatTextarea_pewyB",
        chatEntryActionsGroup: "chatentry_chatEntryActionsGroup_3grea",
        chatEntryActionsContainer: "chatentry_chatEntryActionsContainer_1X1-n",
        minHeightZero: "chatentry_minHeightZero_1IsiN",
        chatSubmitButton: "chatentry_chatSubmitButton_1IEiK",
        EmbedButton: "chatentry_EmbedButton_24xNx",
        EmoticonPickerButton: "chatentry_EmoticonPickerButton_K-lPM",
        disabled: "chatentry_disabled_2GM2k",
        Inactive: "chatentry_Inactive_34suB",
        AudioLines: "chatentry_AudioLines_1Hw30",
        Active: "chatentry_Active_2gzj2",
      };
    },
    2851: (e) => {
      e.exports = { Ctn: "cloudfileuploadbutton_Ctn_MKp7i" };
    },
    59015: (e) => {
      e.exports = {
        UploadPreviewContainer:
          "cloudfileuploadprogress_UploadPreviewContainer_2IhGM",
        SVGIcon_Video: "cloudfileuploadprogress_SVGIcon_Video_2TqYK",
        UploadPreview: "cloudfileuploadprogress_UploadPreview_120Qu",
        FileUploadFileName: "cloudfileuploadprogress_FileUploadFileName_2bbAV",
        FileUploadCancel: "cloudfileuploadprogress_FileUploadCancel_2MPbU",
        SVGIcon_X_Line: "cloudfileuploadprogress_SVGIcon_X_Line_3ad65",
        FileUploadBtn: "cloudfileuploadprogress_FileUploadBtn_3gPV-",
        FileUploadProgressContainer:
          "cloudfileuploadprogress_FileUploadProgressContainer_ZZt3E",
        FileUploadProgressBarContainer:
          "cloudfileuploadprogress_FileUploadProgressBarContainer_1J8k7",
        FileUploadProgressName:
          "cloudfileuploadprogress_FileUploadProgressName_1c12o",
      };
    },
    26679: (e) => {
      e.exports = {
        NewEmoticonIndicator: "emoticon_NewEmoticonIndicator_3B1SU",
        NewEmoticonCircle: "emoticon_NewEmoticonCircle_2ZOlu",
        EmoticonSelector: "emoticon_EmoticonSelector_3vBZ2",
        emoticon: "emoticon_emoticon_316r8",
        large: "emoticon_large_2mWtZ",
        EmoticonSelector_Emoticons: "emoticon_EmoticonSelector_Emoticons_36jkp",
        EmoticonSelector_Separator: "emoticon_EmoticonSelector_Separator_2rHxR",
        EmoticonSelector_SeparatorBackground:
          "emoticon_EmoticonSelector_SeparatorBackground_2VvGx",
        EmoticonSelector_Controls: "emoticon_EmoticonSelector_Controls_2YkoX",
        EmoticonSelector_Item: "emoticon_EmoticonSelector_Item_3y7iJ",
        EmoticonSelector_Item_New: "emoticon_EmoticonSelector_Item_New_gW-jg",
        EffectHeading: "emoticon_EffectHeading_1Lw2A",
        StickerHeading: "emoticon_StickerHeading_1wzP2",
        GetFestive: "emoticon_GetFestive_fSRfS",
        TopDivider: "emoticon_TopDivider_1p-3s",
        BottomDivider: "emoticon_BottomDivider_1dr6q",
        StickerButton: "emoticon_StickerButton_sJoLl",
        EffectButton: "emoticon_EffectButton_1RT9p",
        EmoticonHover: "emoticon_EmoticonHover_1GtsZ",
        Info: "emoticon_Info_1umzU",
        Name: "emoticon_Name_1rQ1e",
        AppName: "emoticon_AppName_1V_rH",
        StickerHoverSticker: "emoticon_StickerHoverSticker_3Cz-2",
        EffectHoverEffect: "emoticon_EffectHoverEffect_2s5VJ",
        PickerTab: "emoticon_PickerTab_Qpqjx",
        Clock: "emoticon_Clock_2a7aO",
        EmoticonItem: "emoticon_EmoticonItem_OfLMJ",
      };
    },
    86321: (e) => {
      e.exports = {
        Emoticon_Toggle: "emoticonsuggestion_Emoticon_Toggle_3XueY",
        Active: "emoticonsuggestion_Active_2JoNK",
        Emoticon: "emoticonsuggestion_Emoticon_3dAJw",
      };
    },
    37866: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        AppPartnerEventsPage: "apppartnereventspage_AppPartnerEventsPage_1m-hJ",
        AppPartnerEventsBanner:
          "apppartnereventspage_AppPartnerEventsBanner_2yR2O",
        AppBannerLinks: "apppartnereventspage_AppBannerLinks_lVbng",
        ControlSection: "apppartnereventspage_ControlSection_1Wu6D",
        NoGameLink: "apppartnereventspage_NoGameLink_2SteG",
        AppPartnerEventsBody: "apppartnereventspage_AppPartnerEventsBody_1nzwr",
        AppBannerGroup: "apppartnereventspage_AppBannerGroup_1GuB8",
        NoEvents: "apppartnereventspage_NoEvents_3YeWG",
        AppBannerCtn: "apppartnereventspage_AppBannerCtn_27-Nn",
        AppBannerBackground: "apppartnereventspage_AppBannerBackground_1zB7W",
        ClanBanner: "apppartnereventspage_ClanBanner_3hX12",
        TallBanner: "apppartnereventspage_TallBanner_2AMvD",
        WideBanner: "apppartnereventspage_WideBanner_T4JRY",
        AppBannerTitle: "apppartnereventspage_AppBannerTitle_3HRBh",
        NewsHubSubTitle: "apppartnereventspage_NewsHubSubTitle_25MMn",
        AppBannerLogoCtn: "apppartnereventspage_AppBannerLogoCtn_3cTtP",
        AppBannerLogo: "apppartnereventspage_AppBannerLogo_29q_J",
        HeaderFollowButton: "apppartnereventspage_HeaderFollowButton_3uk-g",
        AppBannerLink: "apppartnereventspage_AppBannerLink_34PPL",
        AppBannerRSSLink: "apppartnereventspage_AppBannerRSSLink_1QhXd",
        AppPartnerEventsContainer:
          "apppartnereventspage_AppPartnerEventsContainer_1FLIB",
        PartnerEvent: "apppartnereventspage_PartnerEvent_lwprN",
        LibraryViewSubtitle: "apppartnereventspage_LibraryViewSubtitle_IbQRs",
        EventDetailsBody: "apppartnereventspage_EventDetailsBody_AWjK8",
        NoScrollArrows: "apppartnereventspage_NoScrollArrows_1Ewh9",
        ControlSectionWidth: "apppartnereventspage_ControlSectionWidth_2jz0p",
        ControlSectionRightSide:
          "apppartnereventspage_ControlSectionRightSide_1WrR8",
        GameArt: "apppartnereventspage_GameArt_2u-98",
        ScrollButton: "apppartnereventspage_ScrollButton_357Gu",
        Up: "apppartnereventspage_Up_M6aVY",
        Down: "apppartnereventspage_Down_-qQg7",
        CloseButton: "apppartnereventspage_CloseButton_35HbM",
        AnimIn: "apppartnereventspage_AnimIn_bIoyq",
        transitionIn: "apppartnereventspage_transitionIn_1dXPO",
        ClickableBG: "apppartnereventspage_ClickableBG_u8QMP",
        DirectionState: "apppartnereventspage_DirectionState_2IYrn",
        EventTypeAndTimeRow: "apppartnereventspage_EventTypeAndTimeRow_11C0z",
        WithReminder: "apppartnereventspage_WithReminder_1cfFq",
        TimeandPostedBy: "apppartnereventspage_TimeandPostedBy_ElEkK",
        EventType: "apppartnereventspage_EventType_30JUM",
        PostedBy: "apppartnereventspage_PostedBy_3GBGA",
        ReminderContainer: "apppartnereventspage_ReminderContainer_1MsCZ",
        ReadMoreCnt: "apppartnereventspage_ReadMoreCnt_3OLsV",
      };
    },
    24720: (e) => {
      e.exports = { Main: "basicpartnereventrender_Main_2U6-V" };
    },
    12956: (e) => {
      e.exports = {
        ImagesOuterContainer: "clanimagechooser_ImagesOuterContainer_seVYs",
        Hilight: "clanimagechooser_Hilight_1bs5j",
        ImageContainer: "clanimagechooser_ImageContainer_dkWWh",
        Image: "clanimagechooser_Image_2M4oA",
        ImageFilename: "clanimagechooser_ImageFilename_EazUb",
      };
    },
    38695: (e) => {
      e.exports = {
        Container: "discussionwidget_Container_3BVe_",
        VoteContainer: "discussionwidget_VoteContainer_1uhQY",
        DiscussContainer: "discussionwidget_DiscussContainer_3tXYJ",
        ShareContainer: "discussionwidget_ShareContainer_cLK_F",
        InnerContainer: "discussionwidget_InnerContainer_3kQsD",
        DiscussionButton: "discussionwidget_DiscussionButton_wnKan",
        DiscussIcon: "discussionwidget_DiscussIcon_3-isH",
        linkField: "discussionwidget_linkField_1mRpV",
        ShareButtonContainer: "discussionwidget_ShareButtonContainer_3tMDZ",
        LinkInputLabel: "discussionwidget_LinkInputLabel_Gaizo",
        LinkButton: "discussionwidget_LinkButton_q5-pg",
        ShareSteamBtn: "discussionwidget_ShareSteamBtn_3Gc7y",
        ClipboardText: "discussionwidget_ClipboardText_3iQp-",
        LinkInput: "discussionwidget_LinkInput_2IeAw",
        ShareIcon: "discussionwidget_ShareIcon_1kFSv",
        ClipboardIcon: "discussionwidget_ClipboardIcon_sEXEi",
        SteamIcon: "discussionwidget_SteamIcon_3ZAOL",
        share_controls_ctn: "discussionwidget_share_controls_ctn_1PRQm",
        ShareLanguagePicker: "discussionwidget_ShareLanguagePicker_c-WS8",
        LanguageLabel: "discussionwidget_LanguageLabel_GHNBo",
        ShareBtn: "discussionwidget_ShareBtn_1qDAn",
        VoteCount: "discussionwidget_VoteCount_2dVe4",
        DiscussionCount: "discussionwidget_DiscussionCount_1GFRK",
        DiscussionButtonText: "discussionwidget_DiscussionButtonText_1qE1y",
        VoteDownIcon: "discussionwidget_VoteDownIcon_3QPkc",
        VoteDownSelectedIcon: "discussionwidget_VoteDownSelectedIcon_3SLkg",
        VoteUpIcon: "discussionwidget_VoteUpIcon_vRT1W",
        VoteUpSelectedIcon: "discussionwidget_VoteUpSelectedIcon_8WczG",
        VoteUpStaticIcon: "discussionwidget_VoteUpStaticIcon_1g-En",
        VoteButtonSelected: "discussionwidget_VoteButtonSelected_2c_5V",
      };
    },
    91972: (e) => {
      e.exports = {
        sketchfab_play_overlay_image:
          "eventbbcodesketchfab_sketchfab_play_overlay_image_3MwaE",
        sketchfabmodelembedded:
          "eventbbcodesketchfab_sketchfabmodelembedded_2_Smm",
        dynamiclink_box: "eventbbcodesketchfab_dynamiclink_box_2-x_d",
        dynamiclink_preview: "eventbbcodesketchfab_dynamiclink_preview_3d1cc",
        dynamiclink_content: "eventbbcodesketchfab_dynamiclink_content_1HFFK",
        dynamiclink_name: "eventbbcodesketchfab_dynamiclink_name_2NgPQ",
        dynamiclink_type: "eventbbcodesketchfab_dynamiclink_type_t-mzc",
        dynamiclink_author: "eventbbcodesketchfab_dynamiclink_author_e66Tt",
      };
    },
    75223: (e) => {
      e.exports = {
        AppSummaryWidgetCtn:
          "eventdescriptionstorecapsule_AppSummaryWidgetCtn_2WIqq",
      };
    },
    26727: (e) => {
      e.exports = { Ctn: "loyaltyrewarditemembed_Ctn_2di0m" };
    },
    82204: (e) => {
      e.exports = {
        SteamAwardContainer: "nominationandvote_SteamAwardContainer_jBtX5",
        InLibraryView: "nominationandvote_InLibraryView_1G81P",
        SVGIcon_DialogCheck: "nominationandvote_SVGIcon_DialogCheck_1IRgd",
        SteamAwardHeader: "nominationandvote_SteamAwardHeader_2TvWH",
        SteamAwardHeaderImage: "nominationandvote_SteamAwardHeaderImage_3dsTJ",
        SteamAwardMainCtn: "nominationandvote_SteamAwardMainCtn_3CUAM",
        SteamAwardMainTitle: "nominationandvote_SteamAwardMainTitle_6gN_u",
        SteamAwardSubTitle: "nominationandvote_SteamAwardSubTitle_3SuAg",
        SteamAwardLearnMore: "nominationandvote_SteamAwardLearnMore_TqZmn",
        BottomRight: "nominationandvote_BottomRight_3VSBr",
        SteamAwardHeaderText: "nominationandvote_SteamAwardHeaderText_30-fH",
        LinkText: "nominationandvote_LinkText_1dQJW",
        SteamAwardVoteWidget: "nominationandvote_SteamAwardVoteWidget_2-t3v",
        SteamAwardVotePrompt: "nominationandvote_SteamAwardVotePrompt_38kTM",
        SteamAwardCategoryTitle:
          "nominationandvote_SteamAwardCategoryTitle_3hZED",
        VotingTitle: "nominationandvote_VotingTitle_at4wS",
        SteamAwardCategoryDesc:
          "nominationandvote_SteamAwardCategoryDesc_3bu8i",
        SteamAwardVoteButtonArea:
          "nominationandvote_SteamAwardVoteButtonArea_2gvv6",
        SteamAwardVoteButton: "nominationandvote_SteamAwardVoteButton_kTsuK",
        SteamAwardVoteButtonText:
          "nominationandvote_SteamAwardVoteButtonText_Zzla_",
        SteamAwardVoteButtonSubmitted:
          "nominationandvote_SteamAwardVoteButtonSubmitted_39ziF",
        SteamAwardNominateButton:
          "nominationandvote_SteamAwardNominateButton_VcFKW",
        SteamAwardLinkToNominationPage:
          "nominationandvote_SteamAwardLinkToNominationPage_3XWCw",
        SteamAwardVoteCheckBox:
          "nominationandvote_SteamAwardVoteCheckBox_LFbd4",
        SteamAwardModalGameTitle:
          "nominationandvote_SteamAwardModalGameTitle_3hBdP",
        ExpiredEventHeader: "nominationandvote_ExpiredEventHeader_3e-YK",
        AwardCategoriesCtn: "nominationandvote_AwardCategoriesCtn_GCwk0",
      };
    },
    99119: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        EventDetailsPageContainer:
          "partnereventdisplay_EventDetailsPageContainer_3PgWN",
        EventBackgroundBlurCtn:
          "partnereventdisplay_EventBackgroundBlurCtn_2CdA5",
        EventBackgroundBlur: "partnereventdisplay_EventBackgroundBlur_eti5E",
        DetailArtworkAgeAppropriate:
          "partnereventdisplay_DetailArtworkAgeAppropriate_1Oz9X",
        DetailArtworkAgeNotAppropriate:
          "partnereventdisplay_DetailArtworkAgeNotAppropriate_3hUSm",
        EventCoverImageBlr: "partnereventdisplay_EventCoverImageBlr_d3mE9",
        EventBodyCtn: "partnereventdisplay_EventBodyCtn_elmDq",
        EventBodyPosition: "partnereventdisplay_EventBodyPosition_14R9N",
        EventBody: "partnereventdisplay_EventBody_mnHzq",
        EventBroadcastCtn: "partnereventdisplay_EventBroadcastCtn_2S6h-",
        EventColumns: "partnereventdisplay_EventColumns_2exTf",
        EventCoverImageCtn: "partnereventdisplay_EventCoverImageCtn_2vmBm",
        NoTitleArtwork: "partnereventdisplay_NoTitleArtwork_jE6OX",
        ScreenshotInsteadOfCover:
          "partnereventdisplay_ScreenshotInsteadOfCover_13ojN",
        EventCoverImage: "partnereventdisplay_EventCoverImage_2JgmJ",
        EventCoverImageBackground:
          "partnereventdisplay_EventCoverImageBackground_3KoBG",
        InLibraryView: "partnereventdisplay_InLibraryView_3X6U9",
        InEditor: "partnereventdisplay_InEditor_30FDo",
        EventCoverImageFuzz: "partnereventdisplay_EventCoverImageFuzz_2FT4u",
        LibraryEventTitleContainer:
          "partnereventdisplay_LibraryEventTitleContainer_2gdgU",
        CoverImageGradient: "partnereventdisplay_CoverImageGradient_3izb2",
        EventDetailTitleImg: "partnereventdisplay_EventDetailTitleImg_2mX1j",
        EventDetailTitleDesc: "partnereventdisplay_EventDetailTitleDesc_AxPxb",
        EventDetailsSticky: "partnereventdisplay_EventDetailsSticky_2-KJD",
        EventDetailUserType: "partnereventdisplay_EventDetailUserType_3xnQd",
        EventDetailGameCallToAction:
          "partnereventdisplay_EventDetailGameCallToAction_JkS80",
        EventDetailTimeInfo: "partnereventdisplay_EventDetailTimeInfo_3Z41s",
        EventDetailsDescription:
          "partnereventdisplay_EventDetailsDescription_Y1sHn",
        EventDetailsBody: "partnereventdisplay_EventDetailsBody_3v0cw",
        EventDetailsGame: "partnereventdisplay_EventDetailsGame_2iGXx",
        EventDetailsAvatar: "partnereventdisplay_EventDetailsAvatar_3PfOP",
        GameActions: "partnereventdisplay_GameActions_1sOkh",
        ActionButton: "partnereventdisplay_ActionButton_1HIrM",
        Ownership: "partnereventdisplay_Ownership_2nzI3",
        EventDetailsType: "partnereventdisplay_EventDetailsType_2PV9A",
        EventDetailTitle: "partnereventdisplay_EventDetailTitle_2_4FS",
        EventDetailTitleContainer:
          "partnereventdisplay_EventDetailTitleContainer_35gM9",
        EventDetailsSubTitle: "partnereventdisplay_EventDetailsSubTitle_6k4NE",
        LibraryEventBodyContainer:
          "partnereventdisplay_LibraryEventBodyContainer_2ZgLv",
        "lang_zh-cn": "partnereventdisplay_lang_zh-cn_299Pk",
        lang_ko: "partnereventdisplay_lang_ko_3h28O",
        lang_ja: "partnereventdisplay_lang_ja_2WrMm",
        "lang_zh-tw": "partnereventdisplay_lang_zh-tw_3BdFR",
        AppSocialLinksCtn: "partnereventdisplay_AppSocialLinksCtn_VDEod",
        AppSocialLinks: "partnereventdisplay_AppSocialLinks_1VT5_",
        AppSocialLink: "partnereventdisplay_AppSocialLink_Lda0T",
        StartDate: "partnereventdisplay_StartDate_2v1tk",
        EndDate: "partnereventdisplay_EndDate__nCWF",
        MultiDateAndTime: "partnereventdisplay_MultiDateAndTime_jsynt",
        RightSideTitles: "partnereventdisplay_RightSideTitles_2PqSq",
        DisplayAdminPanel_Title:
          "partnereventdisplay_DisplayAdminPanel_Title_3mA--",
        DateAndTime: "partnereventdisplay_DateAndTime_2X9VM",
        NoDateAndTime: "partnereventdisplay_NoDateAndTime_2hmi0",
        AppSummaryCtn: "partnereventdisplay_AppSummaryCtn_1kEXu",
        AppSummaryWidgetTitleCtn:
          "partnereventdisplay_AppSummaryWidgetTitleCtn_19R8i",
        Title: "partnereventdisplay_Title_2Xjut",
        AppSummaryWidgetCtn: "partnereventdisplay_AppSummaryWidgetCtn_2cY3h",
        DisplayAdminPanel: "partnereventdisplay_DisplayAdminPanel_2tK-z",
        DisplayAdminPanel_ctn:
          "partnereventdisplay_DisplayAdminPanel_ctn_3_RH8",
        DisplayAdminPanel_Spacer:
          "partnereventdisplay_DisplayAdminPanel_Spacer_d3tBR",
        AdminButton: "partnereventdisplay_AdminButton_307ys",
        EditorStatsCtn: "partnereventdisplay_EditorStatsCtn_jWmiq",
        VisibilityNote: "partnereventdisplay_VisibilityNote_EP4DQ",
        EditorStatsRow: "partnereventdisplay_EditorStatsRow_BN0_B",
        SteamBlog: "partnereventdisplay_SteamBlog_3JpZt",
        LunarNewYearHeader: "partnereventdisplay_LunarNewYearHeader_3hCjp",
        EnvelopeArea: "partnereventdisplay_EnvelopeArea_1o2eU",
        TokenBalanceContainer:
          "partnereventdisplay_TokenBalanceContainer__bxB9",
        TokenBalance: "partnereventdisplay_TokenBalance_1PrEM",
        EnvelopeContainer: "partnereventdisplay_EnvelopeContainer_2tzMM",
        BackingRect: "partnereventdisplay_BackingRect_2GYms",
        Envelope: "partnereventdisplay_Envelope_1KZOM",
        GiftLabel: "partnereventdisplay_GiftLabel_3_7is",
        OpenState: "partnereventdisplay_OpenState_1MB4P",
        Opened: "partnereventdisplay_Opened_2J2Iy",
        Locked: "partnereventdisplay_Locked_2k7p5",
        Unlocked: "partnereventdisplay_Unlocked_1lSjY",
        NeedLogin: "partnereventdisplay_NeedLogin_2MzBw",
        BottomMessage: "partnereventdisplay_BottomMessage_3Bupu",
        VO: "partnereventdisplay_VO_2yIQ8",
        LunarNewYearOpenEnvelopeVideoDialog:
          "partnereventdisplay_LunarNewYearOpenEnvelopeVideoDialog_qi-8p",
        Container: "partnereventdisplay_Container_GU0r1",
        Column: "partnereventdisplay_Column_2PfQR",
        VideoBox: "partnereventdisplay_VideoBox_3g8bV",
        CoinText: "partnereventdisplay_CoinText_3tOxn",
        Visible: "partnereventdisplay_Visible_2dVnV",
        LunarNewYearOpenEnvelopeVideo:
          "partnereventdisplay_LunarNewYearOpenEnvelopeVideo_2C0eO",
        StoryHeader: "partnereventdisplay_StoryHeader_17xU_",
        StorySubHeader: "partnereventdisplay_StorySubHeader_lnGG0",
        StoryText: "partnereventdisplay_StoryText_2j7gt",
        StoryPicture: "partnereventdisplay_StoryPicture_G_Tvq",
        CheckBackText: "partnereventdisplay_CheckBackText_1W1JL",
        DancingRat: "partnereventdisplay_DancingRat_3bNpM",
        Links: "partnereventdisplay_Links_361ou",
        MarketLink: "partnereventdisplay_MarketLink_3fjva",
        MarketLinkhover: "partnereventdisplay_MarketLinkhover_21osb",
        ReadMoreCnt: "partnereventdisplay_ReadMoreCnt_d_R9N",
        VerticalLocalDateAndTime:
          "partnereventdisplay_VerticalLocalDateAndTime_1QFMN",
      };
    },
    19983: (e) => {
      e.exports = {
        ReferencedApps: "partnereventreferencedapps_ReferencedApps_2xZM7",
      };
    },
    30204: (e) => {
      e.exports = {
        SpeakerOuter: "presenterpopup_SpeakerOuter_3KAg2",
        Speaker: "presenterpopup_Speaker_2B3rV",
        SpeakerPopup: "presenterpopup_SpeakerPopup_ntY3G",
        SpeakerInfoOuter: "presenterpopup_SpeakerInfoOuter_20Ye7",
        SpeakerInfoInner: "presenterpopup_SpeakerInfoInner_2ZeoL",
        SpeakerTitle: "presenterpopup_SpeakerTitle_29hmW",
        SpeakerBio: "presenterpopup_SpeakerBio_1YoXP",
        SpeakerHover: "presenterpopup_SpeakerHover_1ctFc",
      };
    },
    39087: (e) => {
      e.exports = {
        CheckMark: "claimitemshared_CheckMark_3HeHP",
        DialogCtn: "claimitemshared_DialogCtn_ltlR6",
        EquipCtn: "claimitemshared_EquipCtn_2_8bZ",
      };
    },
    31265: (e) => {
      e.exports = {
        Link: "salebanner_Link_26cHo",
        Banner: "salebanner_Banner_2df4N",
        Big: "salebanner_Big_1m7WT",
        Mobile: "salebanner_Mobile_2w3oX",
      };
    },
    99066: (e) => {
      e.exports = {
        Container: "sharewithfriends_Container_8f6EQ",
        SmallAvatar: "sharewithfriends_SmallAvatar_kzjfl",
        ShareDescription: "sharewithfriends_ShareDescription_mhpsV",
        ShareLink: "sharewithfriends_ShareLink_2DzSq",
      };
    },
    21003: (e) => {
      e.exports = { BroadcastCtn: "vodplayer_BroadcastCtn_3YzMi" };
    },
    20730: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        Heading: "managefriends_Heading_1lIY_",
        Body: "managefriends_Body_1JDe7",
        HeaderBlock: "managefriends_HeaderBlock_3n-KU",
        Background: "managefriends_Background_OtPIj",
        DimBackground: "managefriends_DimBackground_2kSJm",
        Input: "managefriends_Input_BRkPz",
        CopyContainer: "managefriends_CopyContainer_2r_KS",
        Text: "managefriends_Text_3NGNC",
        Link: "managefriends_Link_3RoxO",
        Button: "managefriends_Button_1ARlQ",
        GenerateLinkButton: "managefriends_GenerateLinkButton_1TX0d",
        ProfileCard: "managefriends_ProfileCard_2a7rs",
        UserContainer: "managefriends_UserContainer_vSokQ",
        Image: "managefriends_Image_vQTKB",
        ProfileContent: "managefriends_ProfileContent_29EO2",
        ProfileLink: "managefriends_ProfileLink_14jbp",
        Failure: "managefriends_Failure_30nEP",
        Success: "managefriends_Success_1NPlB",
        FriendCodeSelector: "managefriends_FriendCodeSelector_35N5F",
        SendInviteButton: "managefriends_SendInviteButton_3Izq1",
      };
    },
    79629: (e) => {
      e.exports = {
        Label: "importexportdialog_Label_RRbwy",
        ImportLocSampleButtonCtn:
          "importexportdialog_ImportLocSampleButtonCtn_2LkAY",
        SampleTitle: "importexportdialog_SampleTitle_BnzCu",
        ImportButton: "importexportdialog_ImportButton_3JC9N",
      };
    },
    23557: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        mentionDialogPosition: "suggestdialog_mentionDialogPosition_1bkUR",
        mentionDialog: "suggestdialog_mentionDialog_3cYwT",
        mentionSearchText: "suggestdialog_mentionSearchText_3YEqW",
        suggestOption: "suggestdialog_suggestOption_2vKza",
        mentionSearchOption: "suggestdialog_mentionSearchOption_3KZn9",
        manyMatches: "suggestdialog_manyMatches_3Y9oJ",
        selected: "suggestdialog_selected_vuyQs",
        nickname: "suggestdialog_nickname_35J9N",
        mentionSearchMatch: "suggestdialog_mentionSearchMatch_mBrO4",
      };
    },
    2821: (e) => {
      e.exports = {
        BuildNoteCtn: "buildpatchnotes_BuildNoteCtn_cZP-5",
        SplitPanel: "buildpatchnotes_SplitPanel_2TINc",
        DescriptionPanel: "buildpatchnotes_DescriptionPanel_2N1TH",
        RightPanel: "buildpatchnotes_RightPanel_EN_Yg",
        BuildTitle: "buildpatchnotes_BuildTitle_-2I9C",
        BuildSubTitle: "buildpatchnotes_BuildSubTitle_2lG_b",
        InfoText: "buildpatchnotes_InfoText_3-WB4",
        EditTopBar: "buildpatchnotes_EditTopBar_bJHHP",
        LangPicker: "buildpatchnotes_LangPicker_1P7Ac",
        EditTitle: "buildpatchnotes_EditTitle_2o-fI",
        SubmitButtonCtn: "buildpatchnotes_SubmitButtonCtn_Vj8rX",
        BBCodeEditor: "buildpatchnotes_BBCodeEditor_2gIbt",
        ErrorMsg: "buildpatchnotes_ErrorMsg_2yUUH",
        SteamChinaMsg: "buildpatchnotes_SteamChinaMsg_3EFpC",
        PreviewHeader: "buildpatchnotes_PreviewHeader_3GODe",
        SubmitPanel: "buildpatchnotes_SubmitPanel_2WB1w",
        SubmitThrobber: "buildpatchnotes_SubmitThrobber_2rWSm",
        SuccessPanel: "buildpatchnotes_SuccessPanel_3jQwV",
        ViewEventButton: "buildpatchnotes_ViewEventButton_3zUBg",
        FailedPanel: "buildpatchnotes_FailedPanel_1H8CO",
        FailedText: "buildpatchnotes_FailedText_pu4VY",
        FailedButton: "buildpatchnotes_FailedButton_soZLp",
      };
    },
    3737: (e) => {
      e.exports = {
        DashboardCtn: "optin_admin_dashboard_DashboardCtn_24Fut",
        OptInAdminRow: "optin_admin_dashboard_OptInAdminRow_39siH",
        OptinEnabled: "optin_admin_dashboard_OptinEnabled_2yTnl",
        StatsCtn: "optin_admin_dashboard_StatsCtn_3ZKx3",
        Button: "optin_admin_dashboard_Button_27cO9",
        ButtonCtn: "optin_admin_dashboard_ButtonCtn_2oOF5",
        StatRefresh: "optin_admin_dashboard_StatRefresh_2EDoV",
      };
    },
    53134: (e) => {
      e.exports = {
        Header: "optin_admin_dynamic_sections_Header_1DEtC",
        AddSectionCtn: "optin_admin_dynamic_sections_AddSectionCtn_QTymR",
        optionList: "optin_admin_dynamic_sections_optionList_2QQ6j",
      };
    },
    88938: (e) => {
      e.exports = {
        MainBody: "optin_admin_editor_MainBody_3Qmgl",
        MainCol: "optin_admin_editor_MainCol_1Plts",
        RightCol: "optin_admin_editor_RightCol_1hPMJ",
        FlexRowWrapFlexStartContainer:
          "optin_admin_editor_FlexRowWrapFlexStartContainer_2DAMJ",
        InviteButtonRow: "optin_admin_editor_InviteButtonRow_z70Aa",
        ShowAllInvitedRow: "optin_admin_editor_ShowAllInvitedRow_YH0Zz",
        NarrowInputField: "optin_admin_editor_NarrowInputField_3s6tX",
        TopBarContainer: "optin_admin_editor_TopBarContainer_aeUyk",
        BottomBar: "optin_admin_editor_BottomBar_1JwCy",
        EligibleGames: "optin_admin_editor_EligibleGames_1rysV",
        BasicButtonSize: "optin_admin_editor_BasicButtonSize_29w-Z",
        EditorInputPaneContents:
          "optin_admin_editor_EditorInputPaneContents_1EuN8",
        Section: "optin_admin_editor_Section_2yL7J",
        SectionDesc: "optin_admin_editor_SectionDesc_33_oC",
        ManageTable: "optin_admin_editor_ManageTable_2afWv",
        IndentedSubSection: "optin_admin_editor_IndentedSubSection_3zYTc",
        Disabled: "optin_admin_editor_Disabled_2rKAB",
        RightSection: "optin_admin_editor_RightSection_3NiRT",
        EventBBCodeEditor: "optin_admin_editor_EventBBCodeEditor_3UtWX",
        InvitedAppHistoryDialog:
          "optin_admin_editor_InvitedAppHistoryDialog_1OeP6",
        InvitedAppHistoryTable:
          "optin_admin_editor_InvitedAppHistoryTable_Lp1p-",
        InvitedAppRow: "optin_admin_editor_InvitedAppRow_2tiXs",
        StatsCtn: "optin_admin_editor_StatsCtn_3R21M",
        EligibleGamesTable: "optin_admin_editor_EligibleGamesTable_3sBXw",
      };
    },
    31148: (e) => {
      e.exports = {
        EmailTypesCtn: "optin_admin_email_dashboard_EmailTypesCtn_4xCBy",
        EmailAdmin: "optin_admin_email_dashboard_EmailAdmin_2PhkO",
        EmailsCtn: "optin_admin_email_dashboard_EmailsCtn_30DZ2",
        NoWrap: "optin_admin_email_dashboard_NoWrap_3yOHO",
        TileContainer: "optin_admin_email_dashboard_TileContainer_2dKmv",
        EmailType: "optin_admin_email_dashboard_EmailType_2Jicc",
        EmailDesc: "optin_admin_email_dashboard_EmailDesc_1CE8C",
        EmailStatusTodo: "optin_admin_email_dashboard_EmailStatusTodo_3bvme",
        EmailTitle: "optin_admin_email_dashboard_EmailTitle_ZubnX",
        Selected: "optin_admin_email_dashboard_Selected_UaNa5",
      };
    },
    26897: (e) => {
      e.exports = {
        CenterAlign: "optin_admin_email_editor_CenterAlign_30g6t",
        EmailEditorContent: "optin_admin_email_editor_EmailEditorContent_BLEK0",
        Columns: "optin_admin_email_editor_Columns_3dWS0",
        LeftCol: "optin_admin_email_editor_LeftCol_3v4Ve",
        RightCol: "optin_admin_email_editor_RightCol_2XdIS",
        Sticky: "optin_admin_email_editor_Sticky_1JpQa",
        ConfTitle: "optin_admin_email_editor_ConfTitle_1034q",
        EmailSubjectCtn: "optin_admin_email_editor_EmailSubjectCtn_Ky6vQ",
        EmailOptionTitle: "optin_admin_email_editor_EmailOptionTitle_2byFL",
        EmailTemplate: "optin_admin_email_editor_EmailTemplate_4QEkY",
        RightAlign: "optin_admin_email_editor_RightAlign_jGzd4",
        DevEmailTemplate: "optin_admin_email_editor_DevEmailTemplate_1Mnom",
        DevEmail_Content: "optin_admin_email_editor_DevEmail_Content_3Ot-a",
        DevEmail_Headline1: "optin_admin_email_editor_DevEmail_Headline1_3dKOm",
        DevEmail_TopLogo: "optin_admin_email_editor_DevEmail_TopLogo_1cVtv",
        DevEmail_TopHeader: "optin_admin_email_editor_DevEmail_TopHeader_I1TnL",
        DevEmail_Headline2: "optin_admin_email_editor_DevEmail_Headline2_2Jqt0",
        EventCtn: "optin_admin_email_editor_EventCtn_3LekG",
        EventTitle: "optin_admin_email_editor_EventTitle_Zmpp3",
        EventDates: "optin_admin_email_editor_EventDates_300LP",
        DevEmail_SignOff_Img:
          "optin_admin_email_editor_DevEmail_SignOff_Img_3O708",
        DevEmail_Signoff: "optin_admin_email_editor_DevEmail_Signoff_3AVDI",
        DevEmail_Footer_Ctn:
          "optin_admin_email_editor_DevEmail_Footer_Ctn_FpCTM",
        DevEmail_Footer_Reason:
          "optin_admin_email_editor_DevEmail_Footer_Reason_oQkDs",
        DevEmail_Footer_SubSection:
          "optin_admin_email_editor_DevEmail_Footer_SubSection_2fxkC",
        DevEmail_Footer_Bold:
          "optin_admin_email_editor_DevEmail_Footer_Bold_3dqoc",
        DevEmail_Footer_Regular:
          "optin_admin_email_editor_DevEmail_Footer_Regular_pleWj",
        DevEmail_Follow: "optin_admin_email_editor_DevEmail_Follow_1i4xt",
        DevEmail_RecipientTable:
          "optin_admin_email_editor_DevEmail_RecipientTable_wkKaz",
        MetaDataCtn: "optin_admin_email_editor_MetaDataCtn_1-s0h",
        MetaDataSummary: "optin_admin_email_editor_MetaDataSummary_22Gai",
        MetaDataRow: "optin_admin_email_editor_MetaDataRow_1Pb5P",
        MetaDataRowTitle: "optin_admin_email_editor_MetaDataRowTitle_393Gu",
        MaxEventCount: "optin_admin_email_editor_MaxEventCount_1E7zP",
        SectionCtn: "optin_admin_email_editor_SectionCtn_2LeZ2",
        SectionTitle: "optin_admin_email_editor_SectionTitle_Ypz5S",
        SectionEntryTitle: "optin_admin_email_editor_SectionEntryTitle_ScsuE",
        SectionBody: "optin_admin_email_editor_SectionBody_2JTPY",
        ChangeBtnCtn: "optin_admin_email_editor_ChangeBtnCtn_1LZ2L",
        AddSectionCtn: "optin_admin_email_editor_AddSectionCtn_2H_OO",
        StatCtn: "optin_admin_email_editor_StatCtn_3lCM2",
        StatNumber: "optin_admin_email_editor_StatNumber_3gAEw",
        BigButton: "optin_admin_email_editor_BigButton_2d5qK",
      };
    },
    20565: (e) => {
      e.exports = { Preview: "optin_admin_email_sections_Preview_3fMhG" };
    },
    84036: (e) => {
      e.exports = {
        DownloadRow: "optin_admin_manage_dashboard_DownloadRow_3Bo6G",
      };
    },
    20075: (e) => {
      e.exports = {
        StatsCtn: "optin_admin_manage_refresh_StatsCtn_JtiCe",
        Warning: "optin_admin_manage_refresh_Warning_3cDtw",
      };
    },
    19525: (e) => {
      e.exports = {
        SectionTitle: "optin_app_review_SectionTitle_VM14U",
        Row: "optin_app_review_Row_2db7m",
        Pruned: "optin_app_review_Pruned_2-QYp",
        CapsuleImg: "optin_app_review_CapsuleImg_8kkOB",
        Column: "optin_app_review_Column_1r2iO",
        TopSection: "optin_app_review_TopSection_2nKNy",
        ActionsCtn: "optin_app_review_ActionsCtn_2jqGL",
        AppealWordsCtn: "optin_app_review_AppealWordsCtn_3B_85",
        GameInfo: "optin_app_review_GameInfo_3FTQ3",
        Title: "optin_app_review_Title_1Y3gQ",
        Desc: "optin_app_review_Desc_1ICOQ",
        StoreTags: "optin_app_review_StoreTags_3eS-z",
        RowNumber: "optin_app_review_RowNumber_1HUph",
        FilterTagCnt: "optin_app_review_FilterTagCnt_-HWZK",
        TagFilterBar: "optin_app_review_TagFilterBar_sNv3-",
      };
    },
    4323: (e) => {
      e.exports = {
        CollapseableTitle: "optin_app_review_appeal_CollapseableTitle_vvz0t",
      };
    },
    26032: (e) => {
      e.exports = {
        Dummy: "optin_display_appeal_Dummy_XMLkP",
        ButtonCtn: "optin_display_appeal_ButtonCtn_3QVsd",
        AppealResults: "optin_display_appeal_AppealResults_3RoeY",
        Declined: "optin_display_appeal_Declined_3fgI8",
        AppealTitle: "optin_display_appeal_AppealTitle_X7wqW",
        AppealsEntryPointCtn: "optin_display_appeal_AppealsEntryPointCtn_o0-VK",
        AppealSelectedApp: "optin_display_appeal_AppealSelectedApp_2JcBf",
        SelectedApp: "optin_display_appeal_SelectedApp_DZyHh",
      };
    },
    91946: (e) => {
      e.exports = {
        Dummy: "optin_display_appeal_dialog_Dummy_2ezUj",
        AppealTextInput: "optin_display_appeal_dialog_AppealTextInput_2g-Q7",
        AppealsEntryForm: "optin_display_appeal_dialog_AppealsEntryForm_1G49-",
      };
    },
    96230: (e) => {
      e.exports = {
        DynamicSection: "optin_display_dynamic_sections_DynamicSection_-H4oQ",
        ListContainer: "optin_display_dynamic_sections_ListContainer_b77rl",
        ListTitle: "optin_display_dynamic_sections_ListTitle_1vaSC",
        Column: "optin_display_dynamic_sections_Column_1nquN",
        Categorization: "optin_display_dynamic_sections_Categorization_3BNYK",
        VisibilityTable: "optin_display_dynamic_sections_VisibilityTable_2Doz0",
        TextArea: "optin_display_dynamic_sections_TextArea_2GJyI",
      };
    },
    26412: (e, t, n) => {
      "use strict";
      n.d(t, { S6: () => m });
      const a = 20,
        i = /^.*youtube[^v]+v=(.{11}).*/,
        l = /^.*youtu\.be\/(.{11}).*/,
        o = /^.*youtube.*\/embed\/(.{11}).*/,
        r = /^.*[?&]t=([^&]+)(?:&|$)/,
        s = /^(?:(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?|([\d]+))$/;
      function c(e) {
        const t =
          (null == e ? void 0 : e.length) < a
            ? void 0
            : i.exec(e) || l.exec(e) || o.exec(e);
        return null == t ? void 0 : t[1];
      }
      function m(e) {
        const t = c(e);
        if (!t) return;
        const n = (function (e) {
            const t = r.exec(e);
            return null == t ? void 0 : t[1];
          })(e),
          a = n
            ? (function (e) {
                const t = s.exec(e);
                if (
                  !(
                    (null == t ? void 0 : t[1]) ||
                    (null == t ? void 0 : t[2]) ||
                    (null == t ? void 0 : t[3]) ||
                    (null == t ? void 0 : t[4])
                  )
                )
                  return;
                if (null == t ? void 0 : t[4])
                  return parseInt(null == t ? void 0 : t[4]);
                let n = 0;
                return (
                  (null == t ? void 0 : t[1]) && (n += 3600 * parseInt(t[1])),
                  (null == t ? void 0 : t[2]) && (n += 60 * parseInt(t[2])),
                  (null == t ? void 0 : t[3]) && (n += parseInt(t[3])),
                  n
                );
              })(n)
            : void 0;
        return { strVideoID: t, nStartSeconds: a };
      }
    },
    90531: (e, t, n) => {
      "use strict";
      n.d(t, { $: () => s });
      var a = n(33940),
        i = n(32765),
        l = n(50265),
        o = n(52868),
        r = n.n(o);
      const s = new (class {
        constructor() {
          (this.m_mapEmoticonHovers = l.LO.map()),
            (this.m_inflightRequests = {});
        }
        Get(e) {
          return this.m_mapEmoticonHovers.has(e) || this.m_inflightRequests[e]
            ? this.m_mapEmoticonHovers.get(e)
            : (this.Load(e), null);
        }
        BLoaded(e) {
          return !!this.m_mapEmoticonHovers.get(e);
        }
        Load(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const t = `${
              i.De.COMMUNITY_CDN_URL
            }economy/emoticonhoverjson/${encodeURIComponent(
              e,
            )}?l=${encodeURIComponent(i.De.LANGUAGE)}&origin=${(0, i.Kc)()}`;
            this.m_inflightRequests[e] = !0;
            try {
              const { data: n } = yield r().get(t);
              !(function (e) {
                return (
                  e &&
                  "object" == typeof e &&
                  "number" == typeof e.appid &&
                  "string" == typeof e.app_name
                );
              })(n)
                ? this.m_mapEmoticonHovers.set(e, null)
                : this.m_mapEmoticonHovers.set(e, n);
            } catch (t) {
              this.m_mapEmoticonHovers.set(e, null);
            } finally {
              this.m_inflightRequests[e] = !1;
            }
          });
        }
      })();
    },
    20620: (e, t, n) => {
      "use strict";
      n.d(t, { v: () => _, x: () => u });
      var a = n(33940),
        i = n(52868),
        l = n.n(i),
        o = n(89526),
        r = n(42735),
        s = n(23217),
        c = n(85246),
        m = n(4306),
        d = n(32765);
      class p {
        GetRegistration(e) {
          return this.m_mapRegistrations.get(e);
        }
        GetRegistrationChangeCallback(e) {
          return (
            this.m_listChangeCallback.has(e) ||
              this.m_listChangeCallback.set(e, new c.pB()),
            this.m_listChangeCallback.get(e)
          );
        }
        LoadRegistration(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return (
              this.m_mapLoadPromises.has(e) ||
                this.m_mapLoadPromises.set(e, this.InternalLoadRegistration(e)),
              this.m_mapLoadPromises.get(e)
            );
          });
        }
        InternalLoadRegistration(e) {
          var t, n, i, o, c;
          return (0, a.mG)(this, void 0, void 0, function* () {
            let a = null;
            try {
              const m =
                  d.De.STORE_BASE_URL +
                  "saleaction/ajaxgetusergiveawayregistration",
                p = { giveaway_name: e, sessionid: d.De.SESSIONID },
                u = yield l().get(m, { params: p, withCredentials: !0 });
              if (
                200 == (null == u ? void 0 : u.status) &&
                (null === (t = null == u ? void 0 : u.data) || void 0 === t
                  ? void 0
                  : t.success) == r.s.k_EResultOK &&
                (null === (n = null == u ? void 0 : u.data) || void 0 === n
                  ? void 0
                  : n.registration)
              )
                return (
                  this.m_mapRegistrations.set(
                    e,
                    null === (i = null == u ? void 0 : u.data) || void 0 === i
                      ? void 0
                      : i.registration,
                  ),
                  this.GetRegistrationChangeCallback(e).Dispatch(
                    null === (o = null == u ? void 0 : u.data) || void 0 === o
                      ? void 0
                      : o.registration,
                  ),
                  null === (c = null == u ? void 0 : u.data) || void 0 === c
                    ? void 0
                    : c.registration
                );
              a = (0, s.l)(u);
            } catch (e) {
              a = (0, s.l)(e);
            }
            return (
              console.error(
                "CGiveawayRegistrationStore.InternalLoadRegistration failed: on giveawayName " +
                  e +
                  " error: " +
                  (null == a ? void 0 : a.strErrorMsg),
                a,
              ),
              { registered: !1 }
            );
          });
        }
        CreateRegistration(e) {
          return (
            this.m_mapCreatePromises.has(e) ||
              this.m_mapCreatePromises.set(
                e,
                this.InternalCreateRegistration(e),
              ),
            this.m_mapCreatePromises.get(e)
          );
        }
        InternalCreateRegistration(e) {
          var t, n, i, o, c;
          return (0, a.mG)(this, void 0, void 0, function* () {
            let a = null;
            try {
              const m =
                  d.De.STORE_BASE_URL +
                  "saleaction/ajaxupdateusergiveawayregistration",
                p = { giveaway_name: e, sessionid: d.De.SESSIONID },
                u = yield l().get(m, { params: p, withCredentials: !0 });
              if (
                200 == (null == u ? void 0 : u.status) &&
                (null === (t = null == u ? void 0 : u.data) || void 0 === t
                  ? void 0
                  : t.success) == r.s.k_EResultOK &&
                (null === (n = null == u ? void 0 : u.data) || void 0 === n
                  ? void 0
                  : n.registration)
              )
                return (
                  this.m_mapRegistrations.set(
                    e,
                    null === (i = null == u ? void 0 : u.data) || void 0 === i
                      ? void 0
                      : i.registration,
                  ),
                  this.GetRegistrationChangeCallback(e).Dispatch(
                    null === (o = null == u ? void 0 : u.data) || void 0 === o
                      ? void 0
                      : o.registration,
                  ),
                  null === (c = null == u ? void 0 : u.data) || void 0 === c
                    ? void 0
                    : c.registration
                );
              a = (0, s.l)(u);
            } catch (e) {
              a = (0, s.l)(e);
            }
            return (
              console.error(
                "CGiveawayRegistrationStore.InternalCreateRegistration failed: on giveawayName " +
                  e +
                  " error: " +
                  (null == a ? void 0 : a.strErrorMsg),
                a,
              ),
              { registered: !1 }
            );
          });
        }
        static Get() {
          return (
            p.s_Singleton ||
              ((p.s_Singleton = new p()),
              p.s_Singleton.Init(),
              "dev" == d.De.WEB_UNIVERSE &&
                (window.g_SaleMiniGameItemDefStore = p.s_Singleton)),
            p.s_Singleton
          );
        }
        constructor() {
          (this.m_mapRegistrations = new Map()),
            (this.m_mapLoadPromises = new Map()),
            (this.m_mapCreatePromises = new Map()),
            (this.m_listChangeCallback = new Map());
        }
        Init() {}
      }
      function u(e) {
        const [t, n] = (0, o.useState)(p.Get().GetRegistration(e));
        return (
          (0, o.useEffect)(() => {
            void 0 === t && p.Get().LoadRegistration(e).then(n);
          }, [e, t]),
          (0, m.Qg)(p.Get().GetRegistrationChangeCallback(e), n),
          t
        );
      }
      function _() {
        return { fnCreateRegistration: p.Get().CreateRegistration };
      }
      (0, a.gn)([m.ak], p.prototype, "CreateRegistration", null);
    },
    1578: (e, t, n) => {
      "use strict";
      n.d(t, { R: () => Ee });
      var a = n(33940),
        i = n(52868),
        l = n.n(i),
        o = n(89526),
        r = n(42735),
        s = n(23217),
        c = n(32765);
      class m {
        GetFriendLiset() {
          return this.m_rgFriendsList;
        }
        LoadFriendList() {
          var e, t;
          return (0, a.mG)(this, void 0, void 0, function* () {
            let n = null;
            if (this.m_rgFriendsList) return this.m_rgFriendsList;
            if (!c.L7.logged_in) return [];
            try {
              const a = yield l().get(
                c.De.COMMUNITY_BASE_URL + "actions/ajaxlistfriends",
              );
              if (
                200 == (null == a ? void 0 : a.status) &&
                (null === (e = a.data) || void 0 === e ? void 0 : e.success) ==
                  r.s.k_EResultOK &&
                (null === (t = a.data) || void 0 === t ? void 0 : t.friends)
              )
                return (
                  (this.m_rgFriendsList = a.data.friends), this.m_rgFriendsList
                );
              (this.m_rgFriendsList = []), (n = (0, s.l)(a));
            } catch (e) {
              n = (0, s.l)(e);
            }
            return (
              console.error(
                "CSimpleFriendsListStore.LoadFriendList failed: " +
                  (null == n ? void 0 : n.strErrorMsg),
                n,
              ),
              []
            );
          });
        }
        static Get() {
          return (
            m.s_Singleton ||
              ((m.s_Singleton = new m()),
              ("dev" != c.De.WEB_UNIVERSE && "beta" != c.De.WEB_UNIVERSE) ||
                (window.g_DynamicRevealStore = m.s_Singleton)),
            m.s_Singleton
          );
        }
        constructor() {
          this.m_rgFriendsList = null;
        }
      }
      var d = n(88464),
        p = n(24174),
        u = n(40103),
        _ = n(26412),
        h = n(47165),
        g = n(48616),
        E = n(90531),
        v = n(24448),
        S = n(4306),
        f = n(77435),
        D = n(50304),
        y = n(73961),
        I = n(50265),
        C = n(23557),
        b = n.n(C),
        A = n(19304);
      class T extends o.Component {
        constructor(e) {
          super(e),
            (this.m_rgCurrentMatches = []),
            (this.m_mapMatchByKey = new Map()),
            (this.m_hMobxSearchDisposer = (0, I.EH)(() =>
              (0, a.mG)(this, void 0, void 0, function* () {
                yield this.UpdateSearchResults(this.props.strSearch),
                  this.forceUpdate();
              }),
            )),
            (this.state = { selectedIndex: void 0 });
        }
        OnKeyDown(e) {
          this.BHandleKeyPress(e.keyCode) && e.preventDefault();
        }
        BHandleKeyPress(e) {
          switch (e) {
            case f.J.UpArrow:
              this.SetSelectedIndexDelta(-1);
              break;
            case f.J.DownArrow:
              this.SetSelectedIndexDelta(1);
              break;
            case f.J.Home:
              this.SetSelectedIndex(0);
              break;
            case f.J.PageUp:
              this.SetSelectedIndexDelta(-this.GetPageSize());
              break;
            case f.J.End:
              this.SetSelectedIndex(-1);
              break;
            case f.J.PageDown:
              this.SetSelectedIndexDelta(this.GetPageSize());
              break;
            case f.J.Enter:
            case f.J.Tab:
              if (void 0 === this.state.selectedIndex)
                return (
                  this.props.onSuggestionSelected(this.props.strSearch), !1
                );
              this.ChooseSuggestion(
                this.m_rgCurrentMatches[this.state.selectedIndex],
              );
              break;
            case f.J.Escape:
              this.props.onSuggestionSelected(this.props.strSearch);
              break;
            default:
              return !1;
          }
          return !0;
        }
        GetPageSize() {
          let e = y.findDOMNode(this),
            t = e && e.firstElementChild,
            n = this.m_rgCurrentMatches.length;
          if (
            (n > this.getMaxMatches() && (n = this.getMaxMatches()), t && n)
          ) {
            let e = t.scrollHeight / n,
              a = t.clientHeight / e;
            return Math.max(1, Math.floor(a));
          }
          return 5;
        }
        ChooseSuggestion(e) {
          this.props.onSuggestionSelected(
            this.props.strSearch,
            e ? this.getSelection(e) : void 0,
          );
        }
        SetSelectedIndexDelta(e) {
          void 0 !== this.state.selectedIndex
            ? this.SetSelectedIndex(this.state.selectedIndex + e)
            : this.SetSelectedIndex(1 === e ? 0 : e);
        }
        SetSelectedIndex(e) {
          if (!this.m_rgCurrentMatches.length) return;
          let t = this.m_rgCurrentMatches.length;
          t > this.getMaxMatches() && (t = this.getMaxMatches()),
            (e %= t) < 0 && (e += t),
            this.setState({ selectedIndex: e });
        }
        FindKeyIndex(e) {
          if (!this.m_mapMatchByKey.size && this.m_rgCurrentMatches.length)
            for (let e = 0; e < this.m_rgCurrentMatches.length; e++)
              this.m_mapMatchByKey.set(
                this.getKey(this.m_rgCurrentMatches[e]),
                e,
              );
          return this.m_mapMatchByKey.get(e);
        }
        OnClickSuggestion(e) {
          let t = this.FindKeyIndex(e);
          void 0 !== t && this.ChooseSuggestion(this.m_rgCurrentMatches[t]);
        }
        OnMouseOverSuggestion(e) {
          let t = this.FindKeyIndex(e);
          void 0 !== t && this.SetSelectedIndex(t);
        }
        BindSelectedElement(e) {
          let t = y.findDOMNode(this),
            n = y.findDOMNode(e),
            a = t && t.firstElementChild;
          n &&
            a &&
            (a.scrollTop + a.clientHeight < n.offsetTop ||
              n.offsetTop < a.scrollTop) &&
            n.scrollIntoView();
        }
        UpdateSearchResults(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            (this.m_rgCurrentMatches = yield this.performSearch(e)),
              (this.m_strLastSearch = e),
              this.m_mapMatchByKey.clear(),
              this.m_rgCurrentMatches.length
                ? this.state && void 0 !== this.state.selectedIndex
                  ? this.state.selectedIndex >=
                      this.m_rgCurrentMatches.length &&
                    this.setState({ selectedIndex: 0 })
                  : (void 0 ===
                      this.props.nMinimumSearchLengthBeforeAutoSelection ||
                      e.length >=
                        this.props.nMinimumSearchLengthBeforeAutoSelection) &&
                    this.setState({ selectedIndex: 0 })
                : this.state &&
                  void 0 !== this.state.selectedIndex &&
                  this.setState({ selectedIndex: void 0 });
          });
        }
        componentWillUnmount() {
          this.m_hMobxSearchDisposer &&
            (this.m_hMobxSearchDisposer(),
            (this.m_hMobxSearchDisposer = void 0));
        }
        componentDidUpdate(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            this.m_strLastSearch != this.props.strSearch &&
              (yield this.UpdateSearchResults(this.props.strSearch),
              this.forceUpdate());
          });
        }
        render() {
          let e = [];
          if (this.m_rgCurrentMatches.length) {
            let t = this.getMaxMatches();
            for (
              let n = 0;
              n < Math.min(t, this.m_rgCurrentMatches.length);
              n++
            ) {
              let t = this.m_rgCurrentMatches[n],
                a = this.getKey(t),
                i = n === this.state.selectedIndex;
              e.push(
                o.createElement(
                  k,
                  {
                    key: a,
                    matchKey: a,
                    fnOnClick: this.OnClickSuggestion,
                    fnOnMouseOver: this.OnMouseOverSuggestion,
                    bIsSelected: i,
                    ref: i ? this.BindSelectedElement : void 0,
                  },
                  this.renderMatch(t),
                ),
              );
            }
            this.m_rgCurrentMatches.length > t &&
              e.push(
                this.renderTooManyMatchesMessage(
                  this.m_rgCurrentMatches.length - t,
                ),
              );
          } else {
            let t = this.renderNoMatchMessage();
            if (!t) return null;
            e.push(t);
          }
          return o.createElement(
            "div",
            { className: b().mentionDialogPosition },
            o.createElement(
              "div",
              {
                className: b().mentionDialog,
                tabIndex: 0,
                onKeyDown: this.OnKeyDown,
              },
              this.renderHeader(),
              e,
            ),
          );
        }
      }
      (0, a.gn)([S.ak], T.prototype, "OnKeyDown", null),
        (0, a.gn)([S.ak], T.prototype, "OnClickSuggestion", null),
        (0, a.gn)([S.ak], T.prototype, "OnMouseOverSuggestion", null),
        (0, a.gn)([S.ak], T.prototype, "BindSelectedElement", null);
      class k extends o.PureComponent {
        OnMouseOver(e) {
          this.props.fnOnMouseOver(this.props.matchKey);
        }
        OnClick(e) {
          this.props.fnOnClick(this.props.matchKey);
        }
        render() {
          return o.createElement(
            "div",
            {
              className: (0, A.Z)(
                b().suggestOption,
                b().mentionSearchOption,
                this.props.bIsSelected ? b().selected : "",
              ),
              onMouseEnter: this.OnMouseOver,
              onClick: this.OnClick,
            },
            this.props.children,
          );
        }
      }
      (0, a.gn)([S.ak], k.prototype, "OnMouseOver", null),
        (0, a.gn)([S.ak], k.prototype, "OnClick", null);
      const w = T;
      var N = n(86321),
        L = n.n(N);
      const x = class extends w {
        performSearch(e) {
          return this.props.emoticonStore.SearchEmoticons(e, 10, !1);
        }
        getSelection(e) {
          return e.name;
        }
        getKey(e) {
          return e.name;
        }
        renderMatch(e) {
          return o.createElement(
            "div",
            {
              className: (0, A.Z)(
                L().EmoticonSuggestion,
                e.recent ? "Recent" : "",
              ),
            },
            o.createElement(
              "div",
              { className: L().Emoticon },
              o.createElement(D.tk, {
                emoticon: e.name,
                emoticonHoverStore: this.props.emoticonHoverStore,
              }),
              e.new && o.createElement(D.D3, null),
            ),
            ":",
            e.name,
            ":",
          );
        }
        renderNoMatchMessage() {
          return null;
        }
        renderTooManyMatchesMessage(e) {
          return null;
        }
        renderHeader() {
          return null;
        }
        getMaxMatches() {
          return Number.MAX_VALUE;
        }
      };
      var O = n(58998),
        G = n.n(O),
        R = n(14826);
      class B extends w {
        performSearch(e) {
          let t = Array();
          return (
            this.props.supportBBCodes.forEach((n) => {
              n.indexOf(e) >= 0 && t.push({ name: n });
            }),
            t
          );
        }
        getSelection(e) {
          return "[" + e.name + "][/" + e.name + "]";
        }
        getKey(e) {
          return e.name;
        }
        renderMatch(e) {
          return o.createElement(
            "div",
            { key: e.name, className: (0, A.Z)(G().BBCodeSuggestion) },
            o.createElement("div", { className: G().BBCode }, e.name),
            "[",
            e.name,
            "]...[/",
            e.name,
            "]",
          );
        }
        renderNoMatchMessage() {
          return o.createElement(
            "div",
            {
              key: "nomatches",
              className: (0, A.Z)(b().mentionSearchOption, b().noMatches),
            },
            (0, R.Xx)("#Bbcode_No_Match"),
          );
        }
        renderTooManyMatchesMessage(e) {
          return null;
        }
        renderHeader() {
          return null;
        }
        getMaxMatches() {
          return Number.MAX_VALUE;
        }
      }
      class M extends o.Component {
        constructor(e) {
          super(e),
            (this.descTextAreaRef = o.createRef()),
            (this.m_bDisabled = !0),
            (this.state = {
              mentionSearch: void 0,
              activeSuggestSearchType: void 0,
            });
        }
        BindMentionDialog(e) {
          this.m_MentionDialog = e;
        }
        OnKeyDown(e) {
          this.state.activeSuggestSearchType &&
          this.m_MentionDialog &&
          !e.shiftKey &&
          !e.ctrlKey &&
          this.m_MentionDialog.BHandleKeyPress(e.keyCode)
            ? e.preventDefault()
            : (e.keyCode != f.J.Backspace && e.keyCode != f.J.Delete) ||
              (this.m_iMentionSearchCancelledOffset = void 0);
        }
        FindMatchOpener(e, t, n) {
          for (let a = n - 1; a >= 0; a--) {
            if (t[a] == e) return a;
            if (" " == t[a] || "\n" == t[a]) break;
          }
        }
        ReplaceSuggestedText(e, t) {
          let n = this.descTextAreaRef.current.selectionStart,
            a = this.descTextAreaRef.current.value,
            i = this.FindMatchOpener(e, a, n);
          if (
            (void 0 === i && "@" == e && (i = this.FindMatchOpener("＠", a, n)),
            void 0 !== i)
          ) {
            let e = a.substr(0, i);
            (e += t), (n >= a.length || " " != a[n]) && (e += " ");
            let l = e.length;
            (e += a.substr(n)),
              (this.descTextAreaRef.current.value = e),
              (this.descTextAreaRef.current.selectionStart =
                this.descTextAreaRef.current.selectionEnd =
                  l),
              this.props.fnSetText(e),
              this.FocusTextInput();
          }
        }
        OnFocus(e) {
          this.UpdateAutoSearchState();
        }
        OnKeyPress(e) {
          this.UpdateAutoSearchState();
        }
        OnClick(e) {
          this.UpdateAutoSearchState();
        }
        ClearMentionSearchState() {
          (this.m_iMentionSearchStartOffset = void 0),
            this.state.activeSuggestSearchType &&
              this.setState({
                activeSuggestSearchType: void 0,
                mentionSearch: void 0,
              });
        }
        OnEmoticonSuggestionSelected(e, t) {
          if (!t)
            return (
              (this.m_iMentionSearchCancelledOffset =
                this.m_iMentionSearchStartOffset),
              void this.ClearMentionSearchState()
            );
          this.ReplaceSuggestedText(":", ":" + t + ":"),
            this.ClearMentionSearchState();
        }
        OnBBCodeSuggestionSelected(e, t) {
          if (!t)
            return (
              (this.m_iMentionSearchCancelledOffset =
                this.m_iMentionSearchStartOffset),
              void this.ClearMentionSearchState()
            );
          this.ReplaceSuggestedText("[", t), this.ClearMentionSearchState();
        }
        FocusTextInput() {
          this.descTextAreaRef.current && this.descTextAreaRef.current.focus();
        }
        UpdateAutoSearchState() {
          let e = this.descTextAreaRef.current;
          if (!e || this.m_bDisabled) return;
          if (e.selectionStart != e.selectionEnd || !e.selectionStart)
            return void this.ClearMentionSearchState();
          let t,
            n,
            a = e.selectionStart,
            i = e.value;
          for (let e = a - 1; e >= 0; e--) {
            let a = e > 0 ? i[e - 1] : void 0;
            if (this.props.emoticonStore && ":" == i[e] && i.length > 2) {
              (a && " " != a && "\n" != a && ":" != a) ||
                ((t = e), (n = "Emoticon"));
              break;
            }
            if ("[" == i[e] && (e + 1 > i.length || "/" != i[e + 1])) {
              (a && " " != a && "\n" != a && "]" != a) ||
                ((t = e), (n = "BBCode"));
              break;
            }
            if (" " == i[e] || "\n" == i[e]) break;
          }
          if (void 0 === t || t === this.m_iMentionSearchCancelledOffset)
            return void this.ClearMentionSearchState();
          let l = i.substr(t + 1, a - t - 1);
          (this.m_iMentionSearchStartOffset = t),
            this.setState({ activeSuggestSearchType: n, mentionSearch: l });
        }
        GetTextAreaRef() {
          return this.descTextAreaRef;
        }
        GetTextAreaCurrent() {
          return this.descTextAreaRef.current;
        }
        render() {
          let e,
            t = this.props,
            { emoticonStore: n, supportBBCodes: i, fnSetText: l } = t,
            r = (0, a._T)(t, ["emoticonStore", "supportBBCodes", "fnSetText"]);
          switch (this.state.activeSuggestSearchType) {
            case "Emoticon":
              e = o.createElement(x, {
                emoticonStore: n,
                emoticonHoverStore: E.$,
                strSearch: this.state.mentionSearch,
                nMinimumSearchLengthBeforeAutoSelection: 2,
                onSuggestionSelected: this.OnEmoticonSuggestionSelected,
                ref: this.BindMentionDialog,
              });
              break;
            case "BBCode":
              e = o.createElement(B, {
                supportBBCodes: i,
                strSearch: this.state.mentionSearch,
                nMinimumSearchLengthBeforeAutoSelection: 2,
                onSuggestionSelected: this.OnBBCodeSuggestionSelected,
                ref: this.BindMentionDialog,
              });
          }
          return o.createElement(
            o.Fragment,
            null,
            e,
            o.createElement(
              "textarea",
              Object.assign({}, r, {
                ref: this.descTextAreaRef,
                onKeyDown: this.OnKeyDown,
                onKeyUp: this.OnKeyPress,
                onFocus: this.OnFocus,
                onClick: this.OnClick,
              }),
            ),
          );
        }
      }
      (0, a.gn)([S.ak], M.prototype, "BindMentionDialog", null),
        (0, a.gn)([S.ak], M.prototype, "OnKeyDown", null),
        (0, a.gn)([S.ak], M.prototype, "OnFocus", null),
        (0, a.gn)([S.ak], M.prototype, "OnKeyPress", null),
        (0, a.gn)([S.ak], M.prototype, "OnClick", null),
        (0, a.gn)([S.ak], M.prototype, "OnEmoticonSuggestionSelected", null),
        (0, a.gn)([S.ak], M.prototype, "OnBBCodeSuggestionSelected", null),
        (0, a.gn)([S.ak], M.prototype, "FocusTextInput", null),
        (0, a.gn)([S.ak], M.prototype, "GetTextAreaRef", null),
        (0, a.gn)([S.ak], M.prototype, "GetTextAreaCurrent", null);
      var P = n(22444),
        F = n(38278),
        U = n(52629),
        j = n.n(U),
        X = n(67736),
        z = n(57742),
        H = n(14730),
        V = n.n(H),
        W = n(60161);
      var q = n(69159),
        Z = n(77865),
        K = n(3301),
        Y = n(84343),
        Q = n(66818),
        $ = n.n(Q),
        J = n(25125),
        ee = n(75457),
        te = n(12623),
        ne = n(23801),
        ae = n(89220),
        ie = n(17547),
        le = n(12956);
      const oe = (e) => {
          const { clanSteamID: t, fnImageSelectCallBack: n } = e,
            i = (0, o.useRef)(null),
            [r, s] = (0, o.useState)(!g.U8.BHasLoadedClanImages(t)),
            [c, m] = (0, o.useState)("");
          (0, o.useEffect)(() => {
            if (!g.U8.BHasLoadedClanImages(t)) {
              i.current && i.current(), s(!0);
              (() =>
                (0, a.mG)(void 0, void 0, void 0, function* () {
                  const e = l().CancelToken.source();
                  (i.current = e.cancel),
                    yield g.U8.LoadClanImages(t, !1, e),
                    e.token.reason || s(!1);
                }))();
            }
            return () => {
              i.current && i.current("ClanImageChooseDialog: unmounting");
            };
          }, [t]);
          const d = () => e.closeModal && e.closeModal(),
            p = g.U8.GetFilteredClanImages(t, c),
            u = (e) => {
              n(e), d();
            };
          return o.createElement(
            ie.SV,
            null,
            o.createElement(
              X.e1,
              { onEscKeypress: d },
              o.createElement(
                P.VY,
                null,
                o.createElement(
                  P.h4,
                  null,
                  (0, R.Xx)("#ClanImageChooser_Title"),
                ),
                o.createElement(
                  P.uT,
                  null,
                  o.createElement(
                    P.Ac,
                    null,
                    o.createElement(
                      "p",
                      null,
                      (0, R.Xx)("#ClanImageChooser_Desc"),
                    ),
                    o.createElement(P.II, {
                      placeholder: (0, R.Xx)("#ClanImageChooser_Search"),
                      value: c,
                      onChange: (e) => m(e.currentTarget.value),
                    }),
                    o.createElement(
                      "div",
                      { className: le.ImagesOuterContainer },
                      r
                        ? o.createElement(K.V, {
                            size: "medium",
                            string: (0, R.Xx)("#Loading"),
                          })
                        : Boolean(p.length > 0)
                        ? p.map((e) =>
                            o.createElement(re, {
                              key: "ci" + e.image_hash,
                              clanImage: e,
                              searchStringHilight: c,
                              fnImageClick: u,
                            }),
                          )
                        : Boolean(0 == c.trim().length)
                        ? o.createElement(
                            "div",
                            null,
                            (0, R.Xx)("#ClanImageChooser_None"),
                          )
                        : o.createElement(
                            "div",
                            null,
                            (0, R.Xx)("#EventCalendar_GameSearch_NoneFound"),
                          ),
                    ),
                  ),
                ),
                o.createElement(
                  P.$_,
                  null,
                  o.createElement(
                    P.zx,
                    { onClick: d },
                    (0, R.Xx)("#Button_Cancel"),
                  ),
                ),
              ),
            ),
          );
        },
        re = (e) => {
          const { clanImage: t, searchStringHilight: n, fnImageClick: a } = e;
          let i = t.file_name ? t.file_name : "",
            l = (function (e, t, n, a) {
              let i = [];
              if (e.length > 0) {
                let l = t.toLocaleLowerCase();
                for (let r = 0; r < t.length; ) {
                  let s = l.indexOf(e, r);
                  if (s < 0) {
                    i.push(
                      o.createElement(
                        "span",
                        { key: n + "_" + String(r) },
                        t.substring(r),
                      ),
                    );
                    break;
                  }
                  r < s &&
                    i.push(
                      o.createElement(
                        "span",
                        { key: n + "_" + String(r) },
                        t.substring(r, s),
                      ),
                    ),
                    i.push(
                      o.createElement(
                        "span",
                        { key: n + "_" + String(r), className: a },
                        t.substr(s, e.length),
                      ),
                    ),
                    (r = s + e.length);
                }
              } else i.push(o.createElement("span", { key: n + "_null" }, t));
              return i;
            })(n, i, String(t.imageid), le.Hilight);
          return o.createElement(
            "div",
            { className: le.ImageContainer },
            o.createElement("div", {
              className: le.Image,
              style: { backgroundImage: `url( '${t.thumb_url}' )` },
              onDoubleClick: () => a(t),
            }),
            o.createElement(
              "div",
              { className: le.ImageFilename, title: i },
              l,
            ),
          );
        };
      var se = n(88367),
        ce = n(93414),
        me = n(7948),
        de = n(63903),
        pe = n(13345);
      const ue = (0, d.Pi)((e) => {
        const {
            clanSteamID: t,
            inputClanImage: n,
            nWidth: i,
            nHeight: l,
            setImage: s,
          } = e,
          m = o.useMemo(() => ["sale_header"], []),
          d = o.useMemo(() => ({ width: i, height: l }), [i, l]),
          [p, u] = o.useState(void 0),
          [_, E] = o.useState(Boolean(n)),
          [v, S] = o.useState(void 0),
          [f, D] = o.useState(!1),
          [y] = (0, J.SZ)(() => [me.U.Get().GetCurEditLanguage()]),
          I = o.useCallback(
            (e, t) =>
              (0, a.mG)(void 0, void 0, void 0, function* () {
                if (
                  (e.ClearImages(),
                  t &&
                    (E(!0),
                    yield e.AddExistingClanImage(t, ee.Df.k_Lang_English, m)))
                ) {
                  u(t);
                  const a = e.GetUploadImages()[0].IsValidAssetType(m, d);
                  0 != a.error.length ||
                    a.needsCrop ||
                    (n && n.image_hash == t.image_hash) ||
                    s(t);
                }
                E(!1);
              }),
            [n, s, m, d],
          );
        o.useEffect(() => {
          (v &&
            v.GetClanSteamID().ConvertTo64BitString() ==
              t.ConvertTo64BitString()) ||
            S(new ce.S(t));
        }, [v, t]),
          o.useEffect(() => {
            I(v, n);
          }, [I, v, n]);
        let C,
          b = "",
          A = !1;
        if (v && v.GetFilesToUpload().length > 0) {
          C = v.GetUploadImages()[0];
          const e = C.IsValidAssetType(m, d);
          (b = e.error), (A = e.needsCrop);
        }
        return o.createElement(
          o.Fragment,
          null,
          _
            ? o.createElement(K.V, {
                size: "medium",
                string: (0, R.Xx)("#Loading"),
              })
            : Boolean(p) &&
                o.createElement("div", {
                  className: se.Image,
                  style: {
                    backgroundImage: `url( '${C ? C.dataUrl : p.url}' )`,
                    height: `${l}px`,
                    width: `${i}px`,
                  },
                }),
          Boolean(b) && o.createElement("p", null, b),
          A &&
            o.createElement(
              P.zx,
              {
                onClick: (e) => {
                  const t = (0, W.RA)(e);
                  let n = v.GetUploadImages()[0];
                  (0, z.AM)(
                    o.createElement(ae.e, {
                      ownerWin: t,
                      uploadFile: n,
                      forceResolution: { width: i, height: l },
                      fileType: te.ur.k_EClanImageFileType_PNG,
                    }),
                    t,
                  );
                },
              },
              (0, R.Xx)("#BBCode_ResizeImage"),
            ),
          Boolean(C && C.bCropped) &&
            o.createElement(
              o.Fragment,
              null,
              o.createElement(
                "div",
                null,
                (0, R.Xx)("#ClanImagePickAndResize_UploadStatus", C.status),
              ),
              f
                ? o.createElement(K.V, {
                    string: (0, R.Xx)("#Uploading"),
                    size: "small",
                  })
                : o.createElement(
                    P.zx,
                    {
                      onClick: () =>
                        (0, a.mG)(void 0, void 0, void 0, function* () {
                          D(!0);
                          try {
                            const e = yield v.UploadAllImages(
                                [de.IN.k_ESteamRealmGlobal],
                                y,
                                m,
                                d,
                              ),
                              n = Object.values(e);
                            if (
                              n &&
                              n.length > 0 &&
                              ((0, ne.X)(
                                1 == n.length,
                                "ClanImagePickForCertainSize expected size 1, got " +
                                  n.length,
                              ),
                              n[0].success == r.s.k_EResultOK)
                            ) {
                              const e = n[0],
                                a = (0, pe.OL)() + t.GetAccountID() + "/",
                                i = g.aN.GetExtensionStringForFileType(
                                  e.file_type,
                                ),
                                l = a + e.image_hash + i,
                                o = a + e.thumbnail_hash + i,
                                r = {
                                  imageid: -11231412,
                                  image_hash: e.image_hash,
                                  thumbnail_hash: e.thumbnail_hash,
                                  file_type: e.file_type,
                                  file_name: e.file_name,
                                  clanAccountID: t.GetAccountID(),
                                  url: l,
                                  thumb_url: o,
                                  uploaded_time: Date.now() / 1e3,
                                  loc_languages: void 0,
                                  is_loc_group: !1,
                                };
                              u(r), s(r);
                            }
                          } finally {
                            D(!1);
                          }
                        }),
                    },
                    (0, R.Xx)("#ClanImagePickAndResize_UploadImage"),
                  ),
            ),
          o.createElement(
            P.zx,
            {
              onClick: (e) => {
                const t = new h.K(c.JA.CLANSTEAMID);
                (0, z.AM)(
                  o.createElement(oe, {
                    clanSteamID: t,
                    fnImageSelectCallBack: (e) => I(v, e),
                  }),
                  (0, W.RA)(e),
                );
              },
            },
            (0, R.Xx)("#BBCode_ChooseImage", i, l),
          ),
        );
      });
      var _e;
      let he = (_e = class extends o.Component {
        constructor(e) {
          super(e),
            (this.m_cancelSignal = l().CancelToken.source()),
            (this.state = {
              formattingHelp: {
                __html: _e.s_formattingHelp.has(e.formatType)
                  ? _e.s_formattingHelp.get(e.formatType)
                  : "",
              },
            });
        }
        componentDidMount() {
          this.AjaxGetFormattingHelp().catch((e) => {
            this.setState((0, s.l)(e));
          });
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "FormattingHelpWidget component unmounted",
          );
        }
        static GetHelpURL(e, t) {
          return (
            c.De.COMMUNITY_BASE_URL +
            "comment/" +
            e +
            "/formattinghelp" +
            (t ? "?ajax=1" : "")
          );
        }
        AjaxGetFormattingHelp() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if ("" == this.state.formattingHelp.__html) {
              let e,
                t = { sessionid: c.De.SESSIONID };
              (e = yield l().get(_e.GetHelpURL(this.props.formatType, !0), {
                params: t,
                cancelToken: this.m_cancelSignal.token,
              })),
                _e.s_formattingHelp.set(this.props.formatType, e.data),
                this.setState({ formattingHelp: { __html: e.data } });
            }
          });
        }
        render() {
          return this.state.strErrorMsg
            ? o.createElement(
                "div",
                null,
                this.state.strErrorMsg,
                o.createElement("br", null),
                this.state.errorCode,
              )
            : "" == this.state.formattingHelp.__html
            ? o.createElement(K.V, null)
            : o.createElement(
                X.uH,
                {
                  strTitle: (0, R.Xx)(
                    "#EventEditor_FormattingHelp_GetHelpLink",
                  ),
                  strDescription: "",
                  closeModal: this.props.closeModal,
                  onOK: this.props.closeModal,
                  onCancel: this.props.closeModal,
                  bAlertDialog: !0,
                  className: "ModernBBStyles",
                },
                o.createElement("div", {
                  dangerouslySetInnerHTML: this.state.formattingHelp,
                }),
              );
        }
      });
      var ge;
      (he.s_formattingHelp = new Map()), (he = _e = (0, a.gn)([d.Pi], he));
      let Ee = class extends o.Component {
        constructor(e) {
          super(e),
            (this.descAutoTextAreaRef = o.createRef()),
            (this.state = { bShowDragTarget: !1 });
        }
        componentDidMount() {
          g.U8.AddClanImageDragListener(this.ClanImageDragListener);
        }
        componentWillUnmount() {
          g.U8.RemoveClanImageDragListener(this.ClanImageDragListener);
        }
        ClanImageDragListener(e, t) {
          this.state.bShowDragTarget != t &&
            this.setState({ bShowDragTarget: t });
        }
        onFocus(e) {
          e && e.target.select();
        }
        InsertText(e) {
          ve.replaceSelection(this.GetTextAreaRef().current, e);
        }
        OnTextAreaDropListener(e) {
          if (
            (e.preventDefault(),
            e.stopPropagation(),
            e.dataTransfer.items && e.dataTransfer.items[0])
          ) {
            let t = e.dataTransfer.getData("text");
            if (t && t.length > 0) {
              let e = (0, pe.OL)();
              if (t.startsWith(e)) {
                let n = "[img]" + p.A1 + "/" + t.substr(e.length) + "[/img]";
                ve.replaceSelection(this.GetTextAreaRef().current, n);
              }
            }
          }
        }
        GetTextAreaRef() {
          return this.descAutoTextAreaRef && this.descAutoTextAreaRef.current
            ? this.descAutoTextAreaRef.current.GetTextAreaRef()
            : void 0;
        }
        render() {
          return o.createElement(
            o.Fragment,
            null,
            o.createElement(Se, {
              pathToImages:
                c.De.COMMUNITY_CDN_URL + "public/images/sharedfiles/guides/",
              fnTextareaRef: this.GetTextAreaRef,
              emoticonStore: this.props.emoticonStore,
              supportBBCodes: this.props.limitBBCode
                ? this.props.limitBBCode
                : p.yp,
              bSupportHTMLImport: this.props.bSupportHTMLImport,
              showFormatHelp: this.props.showFormatHelp,
              bEmbeddedInDialog: this.props.bEmbeddedInDialog,
              clanSteamID: this.props.clanSteamID,
            }),
            o.createElement(
              "div",
              {
                className: (0, A.Z)(
                  $().DescriptionCtn,
                  $().BBCodeEditorInputStyles,
                  this.state.bShowDragTarget ? $().DragTarget : "",
                ),
              },
              o.createElement(M, {
                cols: 90,
                rows: this.props.nOverridesRows || 22,
                maxLength: 32e3,
                className: (0, A.Z)(
                  $().DefaultEditor,
                  this.props.classNameForTextArea
                    ? this.props.classNameForTextArea
                    : "",
                ),
                placeholder: this.props.strPlaceholder,
                ref: this.descAutoTextAreaRef,
                value: this.props.fnGetCurText(),
                onChange: this.props.fnOnTextChange,
                onDrop: this.OnTextAreaDropListener,
                emoticonStore: this.props.emoticonStore,
                fnSetText: this.props.fnSetText,
                supportBBCodes: this.props.limitBBCode
                  ? this.props.limitBBCode
                  : p.yp,
              }),
            ),
          );
        }
      };
      (0, a.gn)([S.ak], Ee.prototype, "ClanImageDragListener", null),
        (0, a.gn)([S.ak], Ee.prototype, "onFocus", null),
        (0, a.gn)([S.ak], Ee.prototype, "OnTextAreaDropListener", null),
        (0, a.gn)([S.ak], Ee.prototype, "GetTextAreaRef", null),
        (Ee = (0, a.gn)([d.Pi], Ee));
      class ve {
        static BIsFireFox() {
          return Boolean(
            new RegExp(/Firefox\/([0-9\.]+)(?:\s|$)/i).exec(
              navigator.userAgent,
            ),
          );
        }
        static replaceSelection(e, t) {
          let n = e.selectionStart;
          e.focus(),
            ve.InsertTextAtSelect(t, e),
            e.setSelectionRange(n, n + t.length);
        }
        static getSelectedString(e) {
          return e.value.substr(
            e.selectionStart,
            e.selectionEnd - e.selectionStart,
          );
        }
        static wrapBBCode(e, t, n) {
          let a = ve.getSelectedString(n),
            i = "";
          (i =
            0 == a.indexOf(e) && a.lastIndexOf(t) == a.length - t.length
              ? a.substr(e.length, a.length - e.length - t.length)
              : e + a + t),
            ve.replaceSelection(n, i);
        }
        static append(e, t) {
          t &&
            (t.focus(),
            t.setSelectionRange(t.value.length, t.value.length),
            ve.InsertTextAtSelect(e, t));
        }
        static overwrite(e, t) {
          t &&
            (t.focus(),
            document.execCommand("selectAll", !1, e),
            ve.BIsFireFox()
              ? (t.value = "")
              : document.execCommand("delete", !1),
            ve.InsertTextAtSelect(e, t));
        }
        static InsertTextAtSelect(e, t) {
          ve.BIsFireFox() && t.setRangeText
            ? t.setRangeText(e)
            : document.execCommand("insertText", !1, e);
        }
      }
      let Se = class extends o.Component {
        constructor() {
          super(...arguments), (this.m_linkPopupRef = o.createRef());
        }
        onBold() {
          ve.wrapBBCode("[b]", "[/b]", this.props.fnTextareaRef().current);
        }
        onItalics() {
          ve.wrapBBCode("[i]", "[/i]", this.props.fnTextareaRef().current);
        }
        onUnderline() {
          ve.wrapBBCode("[u]", "[/u]", this.props.fnTextareaRef().current);
        }
        onStrikeThrough() {
          ve.wrapBBCode(
            "[strike]",
            "[/strike]",
            this.props.fnTextareaRef().current,
          );
        }
        onHeader() {
          ve.wrapBBCode("[h1]", "[/h1]", this.props.fnTextareaRef().current);
        }
        onHeader2() {
          ve.wrapBBCode("[h2]", "[/h2]", this.props.fnTextareaRef().current);
        }
        onHeader3() {
          ve.wrapBBCode("[h3]", "[/h3]", this.props.fnTextareaRef().current);
        }
        onUnorderedList() {
          this.handleList("list");
        }
        onOrderedList() {
          this.handleList("olist");
        }
        handleList(e) {
          let t = this.props.fnTextareaRef().current,
            n = "[" + e + "]\n",
            a = "[/" + e + "]";
          if (t.selectionStart == t.selectionEnd)
            ve.wrapBBCode(n + "[*]", "\n" + a, t);
          else {
            let e =
              n +
              ve
                .getSelectedString(t)
                .split("\n")
                .map((e) => (e.match(/\*+\s/) ? "[*]" : "[*] ") + e)
                .join("\n") +
              "\n" +
              a;
            ve.replaceSelection(t, e);
          }
        }
        OnAddLink(e) {
          (0, z.BR)(
            o.createElement(ye, { textareaRef: this.props.fnTextareaRef() }),
            (0, W.RA)(e),
          );
        }
        ShowHelpDialog(e) {
          this.props.showFormatHelp &&
            (0, z.BR)(
              o.createElement(he, { formatType: this.props.showFormatHelp }),
              (0, W.RA)(e),
            );
        }
        OnConvertHTMLToBBCodeDialog(e) {
          const t = (0, W.RA)(e);
          (0, z.BR)(
            o.createElement(be, {
              ownerWindow: t,
              textareaRef: this.props.fnTextareaRef(),
            }),
            t,
          );
        }
        OnOpenYoutubeDialog(e) {
          let t = c.De.IMG_URL + "applications/community/";
          (0, z.BR)(
            o.createElement(De, {
              textareaRef: this.props.fnTextareaRef(),
              pathToImages: t,
            }),
            (0, W.RA)(e),
          );
        }
        OnOpenImageDialog(e) {
          (0, z.BR)(
            o.createElement(Ie, { textareaRef: this.props.fnTextareaRef() }),
            (0, W.RA)(e),
          );
        }
        OnOpenSpeakerDialog(e) {
          (0, z.AM)(
            o.createElement(Ce, {
              clanSteamID: this.props.clanSteamID,
              textareaRef: this.props.fnTextareaRef(),
            }),
            (0, W.RA)(e),
          );
        }
        OnEmoticonSelected(e, t = !1) {
          let n = `ː${e}ː`;
          ve.replaceSelection(this.props.fnTextareaRef().current, n),
            this.props.fnTextareaRef().current.focus();
        }
        BSupports(e) {
          return this.props.supportBBCodes.findIndex((t) => t == e) >= 0;
        }
        render() {
          const {
            showFormatHelp: e,
            bEmbeddedInDialog: t,
            bSupportHTMLImport: n,
            pathToImages: a,
          } = this.props;
          let i;
          return (
            e &&
              (i = t
                ? o.createElement(
                    "span",
                    {
                      className: (0, A.Z)("ttip", $().ActionGetHelp),
                      "data-tooltip-text": (0, R.Xx)(
                        "#EventEditor_FormattingHelp_GetHelpLink",
                      ),
                    },
                    o.createElement(
                      "a",
                      {
                        href: he.GetHelpURL(this.props.showFormatHelp, !1),
                        target: c.De.IN_CLIENT ? void 0 : "_blank",
                      },
                      o.createElement("img", { src: a + "/action_help.png" }),
                      " ",
                      (0, R.Xx)("#EventEditor_FormattingHelp_GetHelpLink"),
                    ),
                  )
                : o.createElement(
                    "span",
                    {
                      onClick: this.ShowHelpDialog,
                      className: (0, A.Z)("ttip", $().ActionGetHelp),
                      "data-tooltip-text": (0, R.Xx)(
                        "#EventEditor_FormattingHelp_GetHelpLink",
                      ),
                    },
                    o.createElement("img", { src: a + "/action_help.png" }),
                    " ",
                    (0, R.Xx)("#EventEditor_FormattingHelp_GetHelpLink"),
                  )),
            o.createElement(
              "div",
              { className: $().TextEditorToolBarContainer },
              this.BSupports("b") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onBold,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Bold"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_bold.png",
                  }),
                ),
              this.BSupports("u") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onUnderline,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Underline"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_underline.png",
                  }),
                ),
              this.BSupports("i") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onItalics,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Italics"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_italic.png",
                  }),
                ),
              this.BSupports("strike") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onStrikeThrough,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_StrikeThrough"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_strike.png",
                  }),
                ),
              Boolean(this.BSupports("url") && !t) &&
                o.createElement(
                  "span",
                  {
                    onClick: this.OnAddLink,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Link"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_link.png",
                  }),
                ),
              this.BSupports("list") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onUnorderedList,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Unordered"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_bullet.png",
                  }),
                ),
              this.BSupports("olist") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onOrderedList,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Ordered"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_numbered.png",
                  }),
                ),
              this.BSupports("h1") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onHeader,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Header"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_header1.png",
                  }),
                ),
              this.BSupports("h2") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onHeader2,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Header2"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_header2.png",
                  }),
                ),
              this.BSupports("h3") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.onHeader3,
                    className: "ttip",
                    "data-tooltip-text": (0, R.Xx)("#Editor_Header3"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/format_header3.png",
                  }),
                ),
              this.BSupports("previewyoutube") &&
                o.createElement(
                  "span",
                  {
                    onClick: this.OnOpenYoutubeDialog,
                    "data-tooltip-text": (0, R.Xx)(
                      "#EventEditor_InsertYouTube",
                    ),
                  },
                  o.createElement("img", {
                    src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYyNjlFOEM1MjJEMzExRTJCNTVBQkZGOUQyOTI0ODU5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYyNjlFOEM2MjJEMzExRTJCNTVBQkZGOUQyOTI0ODU5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjI2OUU4QzMyMkQzMTFFMkI1NUFCRkY5RDI5MjQ4NTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjI2OUU4QzQyMkQzMTFFMkI1NUFCRkY5RDI5MjQ4NTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4IrEPeAAABJ0lEQVR42mL8//8/AzmABUScEOZJI1HfLBaoppmk2sh4Ql/r/69HD0jSxCanwMD07eVzhl9ADgz/ZmJikMjOY2CUlEIRR8YgPYzbBLhQQoeJl4/B7uY9hv9//jC8XLWc4UFfD8OPZ08xbGX6CSSQ8XdgKH/79o3h+69fDHwBwQy6ew8ySOYXMfxiZERRx/ILPTqA/K9fv8K5f4EG3Pn5i+EfSB2SWpaf6G6A2vgP6NSrWzYz3J8zk0Hk9SsGVka0ePzLxs7w9ydC+3+gpn29PQzv9uxiEHz7mkEY6ESQPb+QHMbMwcHAwiotw/Dj3h2E6L+/DIyrljKIgCMLGMoMmCmLQ0qagdnh66fn/xgYfP+B9BCJv79/lw5KcrPISKqzGMlN5AABBgBSmY83jVsiQAAAAABJRU5ErkJggg==",
                  }),
                ),
              o.createElement(
                "span",
                {
                  className: "ttip",
                  "data-tooltip-text": (0, R.Xx)("#Editor_Emoticon"),
                },
                this.props.emoticonStore &&
                  o.createElement(F.Z, {
                    title: " ",
                    className: (0, A.Z)($().EmoteOuter),
                    disabled: !1,
                    OnEmoticonSelected: this.OnEmoticonSelected,
                    rtLastAckedNewEmoticons: Number.MAX_VALUE,
                    emoticonStore: this.props.emoticonStore,
                    emoticonHoverStore: E.$,
                    useImg: this.props.pathToImages + "/format_emote.png",
                    contextOptions: {
                      bOverlapHorizontal: !0,
                      bDisablePopTop: !0,
                    },
                  }),
              ),
              Boolean(this.BSupports("img") && !t) &&
                o.createElement(
                  "span",
                  {
                    onClick: this.OnOpenImageDialog,
                    "data-tooltip-text": (0, R.Xx)("#EventEditor_InsertImage"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/insert_img.png",
                  }),
                ),
              Boolean(
                c.L7.is_support &&
                  this.props.clanSteamID &&
                  this.BSupports("speaker"),
              ) &&
                o.createElement(
                  "span",
                  {
                    onClick: this.OnOpenSpeakerDialog,
                    "data-tooltip-text": (0, R.Xx)("#EventEditor_AddSpeaker"),
                  },
                  o.createElement("img", {
                    src: this.props.pathToImages + "/insert_img.png",
                  }),
                ),
              Boolean(n && !t) &&
                o.createElement(
                  "span",
                  {
                    onClick: this.OnConvertHTMLToBBCodeDialog,
                    className: $().ActionImportHTML,
                    "data-tooltip-text": (0, R.Xx)(
                      "#EventEditor_ImportFromHTML_ttip",
                    ),
                  },
                  (0, R.Xx)("#EventEditor_ImportHTML"),
                ),
              i,
            )
          );
        }
      };
      var fe;
      (0, a.gn)([S.ak], Se.prototype, "onBold", null),
        (0, a.gn)([S.ak], Se.prototype, "onItalics", null),
        (0, a.gn)([S.ak], Se.prototype, "onUnderline", null),
        (0, a.gn)([S.ak], Se.prototype, "onStrikeThrough", null),
        (0, a.gn)([S.ak], Se.prototype, "onHeader", null),
        (0, a.gn)([S.ak], Se.prototype, "onHeader2", null),
        (0, a.gn)([S.ak], Se.prototype, "onHeader3", null),
        (0, a.gn)([S.ak], Se.prototype, "onUnorderedList", null),
        (0, a.gn)([S.ak], Se.prototype, "onOrderedList", null),
        (0, a.gn)([S.ak], Se.prototype, "OnAddLink", null),
        (0, a.gn)([S.ak], Se.prototype, "ShowHelpDialog", null),
        (0, a.gn)([S.ak], Se.prototype, "OnConvertHTMLToBBCodeDialog", null),
        (0, a.gn)([S.ak], Se.prototype, "OnOpenYoutubeDialog", null),
        (0, a.gn)([S.ak], Se.prototype, "OnOpenImageDialog", null),
        (0, a.gn)([S.ak], Se.prototype, "OnOpenSpeakerDialog", null),
        (0, a.gn)([S.ak], Se.prototype, "OnEmoticonSelected", null),
        (Se = (0, a.gn)([d.Pi], Se)),
        (function (e) {
          (e.left = "leftthumb"),
            (e.right = "rightthumb"),
            (e.full = "full"),
            (e.summary = "summary");
        })(fe || (fe = {}));
      let De = class extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = { youtubeInput: "", alignment: fe.left });
        }
        OnYoutubeInsertLink() {
          const e =
            this.state.youtubeInput && (0, _.S6)(this.state.youtubeInput);
          if (e) {
            if (this.state.alignment == fe.summary) {
              const t =
                "https://www.youtube.com/watch?v=" +
                e.strVideoID +
                (e.nStartSeconds ? "&t=" + e.nStartSeconds : "");
              ve.wrapBBCode(t, "", this.props.textareaRef.current);
            } else {
              let t =
                "[previewyoutube=" +
                e.strVideoID +
                ";" +
                this.state.alignment +
                "]";
              ve.wrapBBCode(
                t,
                "[/previewyoutube]",
                this.props.textareaRef.current,
              );
            }
            this.setState({ youtubeInput: "", alignment: fe.left });
          } else alert((0, R.Xx)("#EventEditor_InsertYouTube_NoURL"));
        }
        OnUrlChange(e) {
          this.state.youtubeInput != e.target.value &&
            this.setState({ youtubeInput: e.target.value });
        }
        OnLeftSelected() {
          this.setState({ alignment: fe.left });
        }
        OnRightSelected() {
          this.setState({ alignment: fe.right });
        }
        OnFullSelected() {
          this.setState({ alignment: fe.full });
        }
        OnSummarySelected() {
          this.setState({ alignment: fe.summary });
        }
        OnOuterDivClickPassDown(e) {}
        render() {
          return o.createElement(
            X.uH,
            {
              strTitle: (0, R.Xx)("#EventEditor_InsertYouTube"),
              strDescription: "",
              closeModal: this.props.closeModal,
              onCancel: this.props.closeModal,
              onOK: this.OnYoutubeInsertLink,
              strOKButtonText: (0, R.Xx)("#EventEditor_InsertYouTube"),
              className: $().BBCodeEditorInputStyles,
            },
            o.createElement(
              "div",
              { className: $().YouTubeInput },
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "label",
                  null,
                  o.createElement(
                    "div",
                    { className: "DialogLabel" },
                    (0, R.Xx)("#EventEditor_InsertYouTube_URL"),
                  ),
                  o.createElement(
                    "div",
                    { className: "DialogInput_Wrapper" },
                    o.createElement("input", {
                      className: "DialogInput DialogTextInputBase",
                      ref: (e) => e && e.focus(),
                      type: "text",
                      value: this.state.youtubeInput,
                      onChange: this.OnUrlChange,
                      placeholder: (0, R.Xx)(
                        "#EventEditor_InsertYouTube_Placholder",
                      ),
                    }),
                  ),
                ),
              ),
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "div",
                  { className: "DialogLabel" },
                  (0, R.Xx)("#EventEditor_InsertYouTube_Position"),
                ),
                o.createElement(
                  "div",
                  {
                    className: $().YouTubePreviewInsertOption,
                    onClick: this.OnOuterDivClickPassDown,
                  },
                  o.createElement("input", {
                    type: "radio",
                    name: "YouTubePreviewInsertType",
                    id: fe.left,
                    value: fe.left,
                    checked: this.state.alignment == fe.left,
                    onChange: this.OnLeftSelected,
                  }),
                  o.createElement(
                    "label",
                    { htmlFor: fe.left },
                    o.createElement(
                      "span",
                      null,
                      (0, R.Xx)("#EventEditor_InsertYouTube_Left"),
                    ),
                  ),
                ),
                o.createElement(
                  "div",
                  {
                    className: $().YouTubePreviewInsertOption,
                    onClick: this.OnOuterDivClickPassDown,
                  },
                  o.createElement("input", {
                    type: "radio",
                    name: "YouTubePreviewInsertType",
                    id: fe.right,
                    value: fe.right,
                    checked: this.state.alignment == fe.right,
                    onChange: this.OnRightSelected,
                  }),
                  o.createElement(
                    "label",
                    { htmlFor: fe.right },
                    o.createElement(
                      "span",
                      null,
                      (0, R.Xx)("#EventEditor_InsertYouTube_Right"),
                    ),
                  ),
                ),
                o.createElement(
                  "div",
                  {
                    className: $().YouTubePreviewInsertOption,
                    onClick: this.OnOuterDivClickPassDown,
                  },
                  o.createElement("input", {
                    type: "radio",
                    name: "YouTubePreviewInsertType",
                    id: fe.full,
                    value: fe.full,
                    checked: this.state.alignment == fe.full,
                    onChange: this.OnFullSelected,
                  }),
                  o.createElement(
                    "label",
                    { htmlFor: fe.full },
                    o.createElement(
                      "span",
                      null,
                      (0, R.Xx)("#EventEditor_InsertYouTube_Full"),
                    ),
                  ),
                ),
                o.createElement(
                  "div",
                  {
                    className: $().YouTubePreviewInsertOption,
                    onClick: this.OnOuterDivClickPassDown,
                  },
                  o.createElement("input", {
                    type: "radio",
                    name: "YouTubePreviewInsertType",
                    id: fe.summary,
                    value: fe.summary,
                    checked: this.state.alignment == fe.summary,
                    onChange: this.OnSummarySelected,
                  }),
                  o.createElement(
                    "label",
                    { htmlFor: fe.summary },
                    o.createElement(
                      "span",
                      null,
                      (0, R.Xx)("#EventEditor_InsertYouTube_Summary"),
                    ),
                  ),
                ),
              ),
            ),
          );
        }
      };
      (0, a.gn)([S.ak], De.prototype, "OnYoutubeInsertLink", null),
        (0, a.gn)([S.ak], De.prototype, "OnUrlChange", null),
        (0, a.gn)([S.ak], De.prototype, "OnLeftSelected", null),
        (0, a.gn)([S.ak], De.prototype, "OnRightSelected", null),
        (0, a.gn)([S.ak], De.prototype, "OnFullSelected", null),
        (0, a.gn)([S.ak], De.prototype, "OnSummarySelected", null),
        (0, a.gn)([S.ak], De.prototype, "OnOuterDivClickPassDown", null),
        (De = (0, a.gn)([d.Pi], De));
      let ye = (ge = class extends o.Component {
        constructor() {
          super(...arguments), (this.state = { textToDisplay: "", strURL: "" });
        }
        LoadFromTextArea() {
          const { textareaRef: e } = this.props;
          if (e && e.current) {
            let t = ve.getSelectedString(e.current),
              n = ge.m_regExp.exec(t);
            n
              ? this.setState({ strURL: n[1], textToDisplay: n[2] })
              : this.setState({ textToDisplay: t });
          }
        }
        componentDidMount() {
          this.LoadFromTextArea();
        }
        onLinkTitleUpdate(e) {
          this.setState({ textToDisplay: e.target.value });
        }
        onLinkURLUpdate(e) {
          this.setState({ strURL: e.target.value });
        }
        onInsertLink() {
          const { strURL: e, textToDisplay: t } = this.state;
          let n = "[url=" + e + "]" + t + "[/url]";
          ve.replaceSelection(this.props.textareaRef.current, n);
        }
        render() {
          return o.createElement(
            X.uH,
            {
              strTitle: (0, R.Xx)("#Editor_Link"),
              strDescription: "",
              closeModal: this.props.closeModal,
              onOK: this.onInsertLink,
              onCancel: this.props.closeModal,
              strOKButtonText: (0, R.Xx)("#EventEditor_InsertLinkURL"),
              className: $().BBCodeEditorInputStyles,
            },
            o.createElement(
              "div",
              { className: $().EventEditorLinkInput },
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "label",
                  null,
                  o.createElement(
                    "div",
                    { className: "DialogLabel" },
                    (0, R.Xx)("#EventEditor_LinkDescription"),
                  ),
                  o.createElement(
                    "div",
                    { className: "DialogInput_Wrapper" },
                    o.createElement("input", {
                      type: "text",
                      onChange: this.onLinkTitleUpdate,
                      value: this.state.textToDisplay,
                      className: "DialogInput DialogTextInputBase",
                    }),
                  ),
                ),
              ),
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "label",
                  null,
                  o.createElement(
                    "div",
                    { className: "DialogLabel" },
                    (0, R.Xx)("#EventEditor_LinkURL"),
                  ),
                  o.createElement(
                    "div",
                    { className: "DialogInput_Wrapper" },
                    o.createElement("input", {
                      type: "text",
                      onChange: this.onLinkURLUpdate,
                      value: this.state.strURL,
                      className: "DialogInput DialogTextInputBase",
                    }),
                  ),
                ),
              ),
            ),
          );
        }
      });
      (ye.m_regExp = new RegExp(/\[url=([^\]]*)\]([^\[\]]+)\[\/url\]/i)),
        (0, a.gn)([S.ak], ye.prototype, "onLinkTitleUpdate", null),
        (0, a.gn)([S.ak], ye.prototype, "onLinkURLUpdate", null),
        (0, a.gn)([S.ak], ye.prototype, "onInsertLink", null),
        (ye = ge = (0, a.gn)([d.Pi], ye));
      let Ie = class extends o.Component {
        constructor() {
          super(...arguments), (this.state = { imgURL: "", anchorURL: "" });
        }
        componentDidMount() {
          this.refFirstInput && this.refFirstInput.current.focus();
        }
        OnImageInsert() {
          const { anchorURL: e, imgURL: t } = this.state;
          let n = "",
            a = "";
          e && e.length > 0 && ((n += "[url=" + e + "]"), (a = "[/url]" + a)),
            (n += "[img]" + t),
            (a = "[/img]" + a),
            ve.wrapBBCode(n, a, this.props.textareaRef.current);
        }
        OnImageURLChange(e) {
          this.state.imgURL != e.target.value &&
            this.setState({ imgURL: e.target.value });
        }
        OnAnchorURLChange(e) {
          this.state.anchorURL != e.target.value &&
            this.setState({ anchorURL: e.target.value });
        }
        render() {
          const { imgURL: e, anchorURL: t } = this.state;
          return o.createElement(
            X.uH,
            {
              strTitle: (0, R.Xx)("#EventEditor_InsertImage_Title"),
              strDescription: "",
              closeModal: this.props.closeModal,
              onCancel: this.props.closeModal,
              onOK: this.OnImageInsert,
              strOKButtonText: (0, R.Xx)("#EventEditor_InsertImage_Title"),
              className: $().BBCodeEditorInputStyles,
            },
            o.createElement(
              "div",
              { className: $().EventEditorLinkInput },
              o.createElement(
                "p",
                null,
                (0, R.Xx)("#EventEditor_InsertImage_Desc"),
              ),
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "label",
                  null,
                  o.createElement(
                    "div",
                    { className: "DialogLabel" },
                    (0, R.Xx)("#EventEditor_InsertImage_URL"),
                  ),
                  o.createElement(
                    "div",
                    { className: "DialogInput_Wrapper" },
                    o.createElement("input", {
                      className: "DialogInput DialogTextInputBase",
                      type: "text",
                      value: e,
                      onChange: this.OnImageURLChange,
                      placeholder: (0, R.Xx)(
                        "#EventEditor_InsertImage_Placeholder",
                      ),
                      ref: this.refFirstInput,
                    }),
                  ),
                ),
              ),
              o.createElement(
                "div",
                { className: "DialogInputLabelGroup" },
                o.createElement(
                  "label",
                  null,
                  o.createElement(
                    "div",
                    { className: "DialogLabel" },
                    (0, R.Xx)("#EventEditor_InsertImage_Anchor"),
                  ),
                  o.createElement(
                    "div",
                    { className: "DialogInput_Wrapper" },
                    o.createElement("input", {
                      className: "DialogInput DialogTextInputBase",
                      type: "text",
                      value: t,
                      onChange: this.OnAnchorURLChange,
                      placeholder: (0, R.Xx)(
                        "#EventEditor_InsertImage_Placeholder",
                      ),
                    }),
                  ),
                ),
              ),
            ),
          );
        }
      };
      (0, a.gn)([S.ak], Ie.prototype, "OnImageInsert", null),
        (0, a.gn)([S.ak], Ie.prototype, "OnImageURLChange", null),
        (0, a.gn)([S.ak], Ie.prototype, "OnAnchorURLChange", null),
        (Ie = (0, a.gn)([d.Pi], Ie));
      const Ce = (e) => {
        const t = o.useRef(null),
          [n, i] = o.useState(""),
          [r, s] = o.useState(""),
          [d, _] = o.useState(""),
          [E, S] = o.useState(""),
          [f, D] = o.useState(void 0),
          [y, I] = o.useState(void 0),
          [C, b] = o.useState([]),
          [A, T] = o.useState(!0);
        o.useEffect(
          () => (
            (0, a.mG)(void 0, void 0, void 0, function* () {
              const e = l().CancelToken.source();
              t.current = e.cancel;
              const n = yield m.Get().LoadFriendList();
              !e.token.reason &&
                n &&
                (b(n),
                yield v.y$.LoadProfiles([
                  c.L7.steamid,
                  ...n.map((e) => e.steamid),
                ]),
                e.token.reason || T(!1));
            }),
            () => {
              t.current && t.current("InsertSpeakerBBCode: unmounting");
            }
          ),
          [],
        );
        const k = 0 != n.trim().length && 0 != E.trim().length,
          w = o.createElement(
            "div",
            { className: $().DropDownScroll },
            C.map((e) =>
              o.createElement(
                q.Zo,
                { onSelected: () => I(new h.K(e.steamid)), key: e.steamid },
                o.createElement(
                  "div",
                  { style: { display: "flex", alignItems: "center" } },
                  o.createElement("img", {
                    className: V().WhitelistAvatar,
                    src: e.avatar_url,
                  }),
                  e.persona_name,
                ),
              ),
            ),
          ),
          N = y ? v.y$.GetProfileBySteamID(y) : void 0;
        return o.createElement(
          X.uH,
          {
            strTitle: (0, R.Xx)("#EventEditor_AddSpeaker"),
            strDescription: (0, R.Xx)("#EventEditor_AddSpeaker_Desc"),
            closeModal: e.closeModal,
            onCancel: e.closeModal,
            bOKDisabled: !k,
            onOK: () => {
              let t = `[speaker name="${n.trim()}"`;
              if (
                (r.trim().length > 0 && (t += ` title="${r}"`),
                d.trim().length > 0 && (t += ` company="${d}"`),
                f)
              ) {
                t += ` photo="${
                  p.A1 + "/" + f.clanAccountID + "/" + g.aN.GetHashAndExt(f)
                }"`;
              }
              y && (t += ` steamid="${y.ConvertTo64BitString()}"`),
                (t += `]${E}[/speaker]`),
                ve.replaceSelection(e.textareaRef.current, t);
            },
            className: $().BBCodeEditorInputStyles,
          },
          o.createElement(
            "div",
            { className: $().InsertSpeakerCtn },
            o.createElement(P.II, {
              type: "text",
              label: (0, R.Xx)("#EventEditor_AddSpeaker_Name"),
              value: n,
              onChange: (e) => i(e.target.value),
              focusOnMount: !0,
            }),
            o.createElement(
              "div",
              { className: $().TitleGroup },
              o.createElement(P.II, {
                type: "text",
                label: (0, R.Xx)("#EventEditor_AddSpeaker_Title"),
                value: r,
                onChange: (e) => s(e.target.value),
              }),
              o.createElement(P.II, {
                type: "text",
                label: (0, R.Xx)("#EventEditor_AddSpeaker_Company"),
                value: d,
                onChange: (e) => _(e.target.value),
              }),
            ),
            o.createElement(
              Y.HP,
              {
                toolTipContent: (0, R.Xx)(
                  "#EventEditor_AssociateSteamAccount_ttip",
                ),
              },
              o.createElement(
                "div",
                { className: "DialogLabel" },
                (0, R.Xx)("#EventEditor_AssociateSteamAccount"),
                " (?)",
              ),
            ),
            o.createElement(
              "div",
              null,
              A &&
                o.createElement(K.V, {
                  string: (0, R.Xx)("#Loading"),
                  size: "small",
                }),
              Boolean(N) &&
                o.createElement(
                  "a",
                  {
                    href:
                      c.De.COMMUNITY_BASE_URL +
                      "profiles/" +
                      y.ConvertTo64BitString(),
                    target: "_blank",
                  },
                  N
                    ? o.createElement("img", {
                        style: { marginRight: "8px" },
                        src: N.avatar_url,
                      })
                    : null,
                  N ? N.persona_name : null,
                ),
              o.createElement(
                "div",
                { className: $().AssociateRowCtn },
                o.createElement(
                  P.zx,
                  { onClick: () => I(new h.K(c.L7.steamid)) },
                  (0, R.Xx)("#EventEditor_SteamAccount_addme"),
                ),
                o.createElement(
                  P.zx,
                  { onClick: (e) => (0, u.yV)(w, e) },
                  (0, R.Xx)("#EventEditor_SteamAccount_addfriend"),
                ),
                o.createElement(
                  P.zx,
                  { onClick: () => I(void 0) },
                  (0, R.Xx)("#EventEditor_SteamAccount_clear"),
                ),
              ),
            ),
            o.createElement(
              "div",
              { className: $().PhotoCtn },
              o.createElement(
                "div",
                { className: "DialogLabel" },
                (0, R.Xx)("#EventEditor_ChoosePhoto"),
              ),
              o.createElement(ue, {
                clanSteamID: e.clanSteamID,
                inputClanImage: f,
                setImage: D,
                nWidth: 184,
                nHeight: 184,
              }),
            ),
            o.createElement(
              "div",
              { className: $().AboutCtn },
              o.createElement(
                "div",
                { className: "DialogLabel" },
                (0, R.Xx)("#EventEditor_AddSpeaker_About"),
              ),
              o.createElement(P.E0, {
                value: E,
                onChange: (e) => S(e.target.value),
                rows: 8,
                cols: 80,
                nMinHeight: 40,
                placeholder: (0, R.Xx)(
                  "#EventEditor_AddSpeaker_About_Placeholder",
                ),
              }),
            ),
            o.createElement(
              "div",
              { className: $().PreviewCtn },
              o.createElement(
                "div",
                { className: "DialogLabel" },
                (0, R.Xx)("#Button_Preview"),
              ),
              o.createElement(Z.qs, {
                company: d,
                name: n,
                title: r,
                bioString: E,
                photo: f ? f.url : void 0,
              }),
            ),
          ),
        );
      };
      let be = class extends o.Component {
        constructor(e) {
          super(e),
            (this.m_isMounted = !1),
            (this.m_bAppend = !1),
            (this.state = { bPreserveNewLines: !1, strHTMLData: "" });
        }
        componentDidMount() {
          this.m_isMounted = !0;
        }
        componentWillUnmount() {
          this.m_isMounted = !1;
        }
        OnConvertAndOverriteHTML() {
          (this.m_bAppend = !1), this.ConvertBBCode();
        }
        OnConvertAndAppendHTML() {
          (this.m_bAppend = !0), this.ConvertBBCode();
        }
        ConvertHtmlToBBCode(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let n = new URLSearchParams();
            n.append("content", e),
              n.append("preserve_newlines", t ? "1" : "0");
            let a = null;
            return (
              (a = yield l().post(
                c.De.COMMUNITY_BASE_URL + "/actions/ConvertHTMLToBBCode",
                n,
              )),
              a.data.content
            );
          });
        }
        ConvertBBCode() {
          this.setState({ bConverting: !0 }),
            this.ConvertHtmlToBBCode(
              this.state.strHTMLData,
              this.state.bPreserveNewLines,
            )
              .then((e) => {
                this.m_isMounted &&
                  (this.m_bAppend
                    ? ve.append(e, this.props.textareaRef.current)
                    : ve.overwrite(e, this.props.textareaRef.current),
                  this.setState({ bConverting: !1, bFinishedConverting: !0 }));
              })
              .catch((e) => {
                (0, z.AM)(
                  o.createElement(X.JX, {
                    strTitle: (0, R.Xx)("#EventEditor_ConvertHTML_Error"),
                    strDescription: (0, R.Xx)(
                      "#EventEditor_ConvertHTML_Error_Desc",
                      e.response && e.response.data ? e.response.data.msg : e,
                    ),
                    bAlertDialog: !0,
                    bDestructiveWarning: !0,
                  }),
                  this.props.ownerWindow,
                  { strTitle: (0, R.Xx)("#EventEditor_ConvertHTML_Error") },
                );
              });
        }
        OnCheckboxChange(e) {
          let t = e.target.checked;
          t != this.state.bPreserveNewLines &&
            this.setState({ bPreserveNewLines: t });
        }
        OnTextAreaChange(e) {
          this.setState({ strHTMLData: e.currentTarget.value });
        }
        render() {
          const { closeModal: e } = this.props;
          return this.state.bConverting
            ? o.createElement(
                X.uH,
                {
                  strTitle: (0, R.Xx)("#EventEditor_ImportFromHTML"),
                  strDescription: (0, R.Xx)(
                    "#EventEditor_ImportFromHTML_ConversionInProgress",
                  ),
                  closeModal: e,
                  bAlertDialog: !0,
                  onOK: e,
                  onCancel: e,
                },
                o.createElement(K.V, null),
              )
            : this.state.bFinishedConverting
            ? o.createElement(X.uH, {
                strTitle: (0, R.Xx)("#EventEditor_ImportFromHTML"),
                strDescription: (0, R.Xx)(
                  "#EventEditor_ImportFromHTML_ConvertFinished",
                ),
                closeModal: e,
                bAlertDialog: !0,
                onOK: e,
                onCancel: e,
              })
            : o.createElement(
                X.RG,
                {
                  onOK: this.OnConvertAndOverriteHTML,
                  onCancel: e,
                  className: $().BBCodeEditorInputStyles,
                },
                o.createElement(
                  P.h4,
                  null,
                  " ",
                  (0, R.Xx)("#EventEditor_ImportFromHTML"),
                  " ",
                ),
                o.createElement(
                  P.uT,
                  null,
                  o.createElement(
                    P.Ac,
                    null,
                    o.createElement(
                      "div",
                      {
                        className: (0, A.Z)(
                          j().FlexColumnContainer,
                          $().ImportHTMLCtn,
                        ),
                      },
                      o.createElement(
                        "div",
                        { className: j().FlexColumnContainer },
                        (0, R.kQ)(
                          "#EventEditor_ImportFromHTML_ConvertDescription",
                          o.createElement(
                            "a",
                            {
                              target: c.De.IN_CLIENT ? void 0 : "_blank",
                              href: "https://partner.steamgames.com/doc/marketing/event_tools/import",
                            },
                            (0, R.Xx)(
                              "#EventEditor_ImportFromHTML_ConvertLearn",
                            ),
                          ),
                        ),
                      ),
                      o.createElement("textarea", {
                        value: this.state.strHTMLData,
                        placeholder: (0, R.Xx)(
                          "#EventEditor_ImportFromHTML_Instruction",
                        ),
                        className: $().ImportHTMLTextArea,
                        onChange: this.OnTextAreaChange,
                        ref: (e) => e && e.focus(),
                      }),
                      o.createElement(
                        "div",
                        { className: $().ImportHTMLCheckBoxLine },
                        o.createElement("input", {
                          id: "ImportFromHTMLNewLines",
                          type: "checkbox",
                          checked: this.state.bPreserveNewLines,
                          onChange: this.OnCheckboxChange,
                        }),
                        o.createElement(
                          "label",
                          { htmlFor: "ImportFromHTMLNewLines" },
                          (0, R.Xx)(
                            "#EventEditor_ImportFromHTML_PreserveNewlines",
                          ),
                          o.createElement(
                            "span",
                            {
                              className: "ttip",
                              "data-tooltip-text": (0, R.Xx)(
                                "#EventEditor_ImportFromHTML_PreserveNewlines_Hint",
                              ),
                            },
                            "(?)",
                          ),
                        ),
                      ),
                      o.createElement(
                        "div",
                        null,
                        (0, R.Xx)(
                          "#EventEditor_ImportFromHTML_ConvertToBBCode",
                        ),
                      ),
                    ),
                  ),
                  o.createElement(
                    P.$_,
                    null,
                    o.createElement(P.$0, {
                      onCancel: e,
                      strOKText: (0, R.Xx)("#Button_Overwrite"),
                      onUpdate: this.OnConvertAndAppendHTML,
                      strUpdateText: (0, R.Xx)("#Button_Append"),
                    }),
                  ),
                ),
              );
        }
      };
      (0, a.gn)([S.ak], be.prototype, "OnConvertAndOverriteHTML", null),
        (0, a.gn)([S.ak], be.prototype, "OnConvertAndAppendHTML", null),
        (0, a.gn)([S.ak], be.prototype, "OnCheckboxChange", null),
        (0, a.gn)([S.ak], be.prototype, "OnTextAreaChange", null),
        (be = (0, a.gn)([d.Pi], be));
    },
    50304: (e, t, n) => {
      "use strict";
      n.d(t, {
        hp: () => j,
        tk: () => R,
        ag: () => z,
        uC: () => H,
        D3: () => ae,
      });
      var a = n(33940),
        i = n(50265),
        l = n(88464),
        o = n(89526),
        r = n(73961),
        s = n(69206),
        c = n(72329),
        m = n(25871);
      class d extends o.Component {
        constructor(e) {
          super(e);
        }
        render() {
          if (null == this.props.text)
            return o.createElement(o.Fragment, null, this.props.children);
          let e;
          if (
            ((e =
              this.props.text instanceof Array
                ? this.props.text
                    .map((e) => (e ? e.toString() : ""))
                    .filter((e) => e.length > 0)
                    .join("\n")
                : this.props.text.toString()),
            1 == o.Children.count(this.props.children))
          ) {
            let t = o.Children.only(this.props.children);
            return o.cloneElement(t, {
              "data-copystyle": this.props.style,
              "data-copytext": e,
            });
          }
          return (
            console.log(
              `Error: CopyableText must be the parent of exactly one child:\n\tcopystyle=${this.props.style} copytext=${e}`,
            ),
            o.createElement(o.Fragment, null, this.props.children)
          );
        }
      }
      d.defaultProps = { text: "" };
      var p = n(69159),
        u = n(19304),
        _ = n(14826),
        h = n(4306);
      function g(e, t) {
        return e + "economy/sticker/" + t;
      }
      var E = n(32765),
        v = n(22444),
        S = n(51438),
        f = n(8179),
        D = n(26564);
      class y extends o.Component {
        constructor(e) {
          super(e), (this.state = { activeIndex: e.initialActiveIndex || 0 });
        }
        render() {
          const { config: e } = this.props,
            { activeIndex: t } = this.state,
            n = e[t] && e[t].renderContent ? e[t].renderContent() : null,
            a = e.length > 1,
            i = a
              ? ({ detail: { button: t } }) => {
                  t === f.eV.BUMPER_LEFT
                    ? this.setState({
                        activeIndex: Math.max(0, this.state.activeIndex - 1),
                      })
                    : t === f.eV.BUMPER_RIGHT &&
                      this.setState({
                        activeIndex: Math.min(
                          e.length - 1,
                          this.state.activeIndex + 1,
                        ),
                      });
                }
              : void 0;
          return o.createElement(
            S.s,
            { className: D.Picker, onButtonDown: i },
            a && o.createElement(I, null, this.RenderTabs()),
            n,
          );
        }
        RenderTabs() {
          return this.props.config.map(({ renderTab: e }, t) => {
            const n = this.state.activeIndex === t;
            return o.createElement(
              b,
              {
                key: t,
                active: n,
                onClick: () => this.setState({ activeIndex: t }),
              },
              e(n),
            );
          });
        }
      }
      function I(e) {
        return o.createElement(
          S.s,
          { className: D.Tabs, "flow-children": "row" },
          e.children,
        );
      }
      function C(e) {
        return o.createElement("div", { className: D.Content }, e.children);
      }
      function b(e) {
        const { active: t, children: n, onClick: a } = e;
        return o.createElement(
          S.s,
          {
            className: (0, u.Z)(D.Tab, t && D.Active),
            focusClassName: D.Focus,
            onActivate: a,
          },
          o.createElement(
            "div",
            { className: (0, u.Z)(D.TabContent, t && D.Active) },
            n,
          ),
        );
      }
      function A(e) {
        const {
          items: t,
          renderItem: n,
          onItemSelect: a,
          keyExtractor: i,
          renderEmpty: l,
        } = e;
        let r = t.map((e, l) =>
          o.createElement(
            S.s,
            {
              key: i(e),
              className: D.Item,
              onActivate: () => a(t[l]),
              autoFocus: 0 === l,
              focusClassName: D.Focus,
            },
            n(t[l]),
          ),
        );
        return (
          0 === t.length && l && (r = l()),
          o.createElement(
            S.s,
            { "flow-children": "grid", className: D.ItemList },
            r,
          )
        );
      }
      function T(e) {
        const { title: t, onFilterChange: n, filter: i, onSubmit: l } = e,
          r = (0, a._T)(e, ["title", "onFilterChange", "filter", "onSubmit"]);
        return o.createElement(
          o.Fragment,
          null,
          o.createElement(
            C,
            null,
            o.createElement(
              w,
              { title: t },
              o.createElement(A, Object.assign({}, r)),
            ),
          ),
          o.createElement(N, { value: i, onChange: n, onSubmit: l }),
        );
      }
      function k(e) {
        const { onFilterChange: t, filter: n, sections: i, title: l } = e;
        return o.createElement(
          o.Fragment,
          null,
          o.createElement(
            C,
            null,
            l && o.createElement("div", { className: D.SectionedPageTitle }, l),
            i.map((e) => {
              var { title: t } = e,
                n = (0, a._T)(e, ["title"]);
              return o.createElement(
                w,
                { title: t, key: t },
                o.createElement(A, Object.assign({}, n)),
              );
            }),
          ),
          o.createElement(N, { value: n, onChange: t }),
        );
      }
      function w(e) {
        return o.createElement(
          "div",
          { className: D.Section },
          o.createElement("div", { className: D.SectionTitle }, e.title),
          o.createElement("div", { className: D.SectionContent }, e.children),
        );
      }
      function N(e) {
        const { value: t, onChange: n, onSubmit: a } = e;
        return o.createElement(
          "div",
          { className: D.FilterInputContainer },
          o.createElement(v.II, {
            type: "text",
            placeholder: "Search...",
            className: D.FilterInput,
            value: t,
            onChange: (e) => n(e.target.value),
            onSubmit: a,
          }),
        );
      }
      function L(e) {
        const { className: t } = e,
          n = (0, a._T)(e, ["className"]);
        return o.createElement(
          "div",
          Object.assign({ className: (0, u.Z)(t, D.AddonPickerMessage) }, n),
        );
      }
      var x = n(26679),
        O = n.n(x),
        G = n(75962);
      class R extends o.PureComponent {
        constructor() {
          super(...arguments),
            (this.state = { showHover: !1 }),
            (this.m_ref = o.createRef());
        }
        OnMouseEnter(e) {
          this.setState({ showHover: !0 });
        }
        OnMouseLeave(e) {
          this.setState({ showHover: !1 });
        }
        render() {
          const { emoticon: e, large: t, emoticonHoverStore: n } = this.props,
            a = `:${e}:`,
            i = t && n.BLoaded(e) ? n.Get(e).url : c.u.GetEmoticonURL(e, t);
          return o.createElement(
            o.Fragment,
            null,
            o.createElement(
              d,
              { text: a, style: "merge-adjacent" },
              o.createElement("img", {
                src: i,
                className: (0, u.Z)(O().emoticon, t ? O().large : void 0),
                "data-emoticon": e,
                onMouseEnter: this.OnMouseEnter,
                onMouseLeave: this.OnMouseLeave,
                ref: this.m_ref,
              }),
            ),
            this.state.showHover &&
              o.createElement(B, {
                target: this.m_ref.current,
                store: n,
                emoticon: e,
              }),
          );
        }
      }
      (0, a.gn)([h.ak], R.prototype, "OnMouseEnter", null),
        (0, a.gn)([h.ak], R.prototype, "OnMouseLeave", null);
      const B = (0, l.Pi)((e) => {
          const { target: t, store: n, emoticon: a } = e,
            i = n.Get(a);
          return o.createElement(
            M,
            {
              target: t,
              title: `:${a}:`,
              subtitle: i && i.app_name ? i.app_name : void 0,
            },
            o.createElement(R, {
              emoticon: a,
              emoticonHoverStore: n,
              large: !0,
            }),
          );
        }),
        M = ({ target: e, title: t, subtitle: n, children: a }) =>
          o.createElement(
            s.T,
            {
              target: e,
              style: { zIndex: 1700 },
              className: O().EmoticonHover,
            },
            a,
            o.createElement(
              "div",
              { className: O().Info },
              o.createElement(
                "div",
                { className: O().Name },
                t || o.createElement("span", null, " "),
              ),
              o.createElement(
                "div",
                { className: O().AppName },
                n || o.createElement("span", null, " "),
              ),
            ),
          );
      function P(e) {
        return e.recent_emoticons;
      }
      function F(e) {
        return e.recent_stickers;
      }
      function U(e) {
        return P(e).length + F(e).length > 0;
      }
      const j = (0, l.Pi)((e) => {
        const {
          emoticonStore: t,
          emoticonHoverStore: n,
          roomEffectSettings: a,
          strFlairGroupID: l,
          onEmoticonSelected: r,
          onRoomEffectSelected: s,
          onStickerSelected: c,
        } = e;
        !(function (e) {
          const [t, n] = (0, o.useState)(e.is_initialized);
          (0, o.useEffect)(() => {
            if (!e.is_initialized) {
              e.UpdateEmoticonList();
              const t = (0, i.gx)(
                () => e.is_initialized,
                () => n(e.is_initialized),
              );
              return () => t();
            }
            return () => {};
          }, [e]);
        })(t);
        const m = [];
        return (
          U(t) &&
            m.push({
              renderTab: (e) =>
                o.createElement(
                  "span",
                  {
                    title: (0, _.Xx)("#AddonPicker_RecentlyUsed"),
                    className: (0, u.Z)(
                      O().PickerTab,
                      O().Clock,
                      e && O().ActiveTab,
                    ),
                  },
                  o.createElement(se, null),
                ),
              renderContent: () =>
                o.createElement(V, {
                  store: t,
                  hoverStore: n,
                  onEmoticonSelect: (e) => r(e.name),
                  onStickerSelect: (e) => c(e.name),
                  flairGroupID: l,
                }),
            }),
          o.createElement(
            p.xV,
            null,
            o.createElement(y, {
              config: [
                ...m,
                {
                  renderTab: (e) =>
                    o.createElement(
                      "span",
                      {
                        title: (0, _.Xx)("#AddonPicker_Emoticons"),
                        className: (0, u.Z)(O().PickerTab, e && O().ActiveTab),
                      },
                      o.createElement(oe, null),
                    ),
                  renderContent: () =>
                    o.createElement(W, {
                      store: t,
                      hoverStore: n,
                      onItemSelect: (e) => r(e.name),
                      flairGroupID: l,
                    }),
                },
                {
                  renderTab: (e) =>
                    o.createElement(
                      "span",
                      {
                        title: (0, _.Xx)("#AddonPicker_Stickers"),
                        className: (0, u.Z)(O().PickerTab, e && O().ActiveTab),
                      },
                      o.createElement(le, null),
                    ),
                  renderContent: () =>
                    o.createElement(Z, {
                      store: t,
                      onItemSelect: (e) => c(e.name),
                    }),
                },
                {
                  renderTab: (e) =>
                    o.createElement(
                      "span",
                      {
                        title: (0, _.Xx)("#AddonPicker_RoomEffects"),
                        className: (0, u.Z)(O().PickerTab, e && O().ActiveTab),
                      },
                      o.createElement(re, null),
                    ),
                  renderContent: () =>
                    o.createElement(K, {
                      store: t,
                      effectSettings: a,
                      onItemSelect: (e) => s(e.name),
                    }),
                },
              ],
            }),
          )
        );
      });
      let X = class extends o.Component {
        constructor(e) {
          super(e), (this.state = { strSearchText: "" });
          let t = this.props.emoticonStore;
          t.is_initialized ||
            (t.UpdateEmoticonList(),
            (this.m_disposeEmoticonStore = (0, i.gx)(
              () => t.is_initialized,
              () => this.forceUpdate(),
            )));
        }
        componentWillUnmount() {
          this.m_disposeEmoticonStore && this.m_disposeEmoticonStore();
        }
        render() {
          const {
              emoticonStore: e,
              emoticonHoverStore: t,
              onEmoticonSelected: n,
              onStickerSelected: a,
              strFlairGroupID: i,
            } = this.props,
            l = [];
          return (
            U(e) &&
              l.push({
                renderTab: (e) =>
                  o.createElement(
                    "span",
                    {
                      title: (0, _.Xx)("#AddonPicker_RecentlyUsed"),
                      className: (0, u.Z)(
                        O().PickerTab,
                        O().Clock,
                        e && O().ActiveTab,
                      ),
                    },
                    o.createElement(se, null),
                  ),
                renderContent: () =>
                  o.createElement(V, {
                    store: e,
                    hoverStore: t,
                    onEmoticonSelect: (e) => n(e.name),
                    onStickerSelect: (e) => a(e.name),
                    flairGroupID: i,
                  }),
              }),
            o.createElement(
              p.xV,
              null,
              o.createElement(y, {
                config: [
                  ...l,
                  {
                    renderTab: (e) =>
                      o.createElement(
                        "span",
                        {
                          title: (0, _.Xx)("#AddonPicker_Emoticons"),
                          className: (0, u.Z)(
                            O().PickerTab,
                            e && O().ActiveTab,
                          ),
                        },
                        o.createElement(oe, null),
                      ),
                    renderContent: () =>
                      o.createElement(W, {
                        store: e,
                        hoverStore: t,
                        onItemSelect: (e) => n(e.name),
                        flairGroupID: i,
                      }),
                  },
                  {
                    renderTab: (e) =>
                      o.createElement(
                        "span",
                        {
                          title: (0, _.Xx)("#AddonPicker_Stickers"),
                          className: (0, u.Z)(
                            O().PickerTab,
                            e && O().ActiveTab,
                          ),
                        },
                        o.createElement(le, null),
                      ),
                    renderContent: () =>
                      o.createElement(Z, {
                        store: e,
                        onItemSelect: (e) => a(e.name),
                      }),
                  },
                ],
              }),
            )
          );
        }
      };
      X = (0, a.gn)([l.Pi], X);
      class z extends o.Component {
        constructor(e) {
          super(e), (this.state = { strSearchText: "" });
          let t = this.props.emoticonStore;
          t.is_initialized ||
            (t.UpdateEmoticonList(),
            (this.m_disposeEmoticonStore = (0, i.gx)(
              () => t.is_initialized,
              () => this.forceUpdate(),
            )));
        }
        componentWillUnmount() {
          this.m_disposeEmoticonStore && this.m_disposeEmoticonStore();
        }
        render() {
          return o.createElement(
            p.xV,
            null,
            o.createElement(y, {
              config: [
                {
                  renderTab: () =>
                    o.createElement(
                      "span",
                      {
                        title: (0, _.Xx)("#AddonPicker_Emoticons"),
                        className: O().PickerTab,
                      },
                      o.createElement(oe, null),
                    ),
                  renderContent: () =>
                    o.createElement(Y, {
                      store: this.props.emoticonStore,
                      hoverStore: this.props.emoticonHoverStore,
                      onItemSelect: (e) => this.props.OnSelected(e.name, !1),
                      flairGroupID: this.props.strFlairGroupID,
                    }),
                },
              ],
            }),
          );
        }
      }
      class H extends o.Component {
        constructor(e) {
          super(e), (this.state = { strSearchText: "" });
          let t = this.props.emoticonStore;
          t.is_initialized ||
            (t.UpdateEmoticonList(),
            (this.m_disposeEmoticonStore = (0, i.gx)(
              () => t.is_initialized,
              () => this.forceUpdate(),
            )));
        }
        componentWillUnmount() {
          this.m_disposeEmoticonStore && this.m_disposeEmoticonStore();
        }
        render() {
          return o.createElement(
            p.xV,
            null,
            o.createElement(y, {
              config: [
                {
                  renderTab: () =>
                    o.createElement(
                      "span",
                      {
                        title: (0, _.Xx)("#AddonPicker_Emoticons"),
                        className: O().PickerTab,
                      },
                      o.createElement(oe, null),
                    ),
                  renderContent: () =>
                    o.createElement(Q, {
                      store: this.props.emoticonStore,
                      hoverStore: this.props.emoticonHoverStore,
                      onItemSelect: (e) => this.props.OnSelected(e.name, !1),
                      flairGroupID: this.props.strFlairGroupID,
                    }),
                },
              ],
            }),
          );
        }
      }
      class V extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const {
              store: e,
              hoverStore: t,
              onEmoticonSelect: n,
              onStickerSelect: a,
            } = this.props,
            { filter: i } = this.state,
            l = [];
          return (
            P(e) &&
              l.push({
                title: (0, _.Xx)("#AddonPicker_RecentEmoticons"),
                items: c.u.FilterEmoticons(P(e), i),
                onItemSelect: n,
                renderItem: (e) =>
                  o.createElement($, { emoticon: e, emoticonHoverStore: t }),
                keyExtractor: (e) => e.name,
                renderEmpty: () =>
                  o.createElement(
                    L,
                    null,
                    i
                      ? (0, _.Xx)("#AddonPicker_NoResults")
                      : (0, _.Xx)(
                          "#AddonPicker_NoRecent",
                          (0, _.Xx)("#AddonPicker_Emoticons"),
                        ),
                  ),
              }),
            F(e).length &&
              l.push({
                title: (0, _.Xx)("#AddonPicker_RecentStickers"),
                items: c.u.FilterStickers(F(e), i),
                onItemSelect: a,
                renderItem: (e) => o.createElement(J, { sticker: e }),
                keyExtractor: ({ name: e }) => e,
                renderEmpty: () =>
                  o.createElement(
                    L,
                    null,
                    i
                      ? (0, _.Xx)("#AddonPicker_NoResults")
                      : (0, _.Xx)(
                          "#AddonPicker_NoRecent",
                          (0, _.Xx)("#AddonPicker_Stickers"),
                        ),
                  ),
              }),
            o.createElement(k, {
              onFilterChange: (e) => this.setState({ filter: e }),
              filter: i,
              sections: l,
            })
          );
        }
      }
      class W extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const {
              store: e,
              hoverStore: t,
              onItemSelect: n,
              flairGroupID: a,
            } = this.props,
            { filter: i } = this.state,
            l = !i && a ? e.GetFlairListByGroupID(a) : e.emoticon_list,
            r = c.u.FilterEmoticons(l, i).slice(0, 1e3);
          return o.createElement(T, {
            title: (0, _.Xx)("#AddonPicker_Emoticons"),
            items: r,
            onItemSelect: n,
            renderItem: (e) =>
              o.createElement($, { emoticon: e, emoticonHoverStore: t }),
            keyExtractor: (e) => e.name,
            onFilterChange: (e) => this.setState({ filter: e }),
            filter: i,
            onSubmit: () => n(r[0]),
            renderEmpty: () =>
              i
                ? o.createElement(L, null, (0, _.Xx)("#AddonPicker_NoResults"))
                : o.createElement(q, null),
          });
        }
      }
      function q() {
        return o.createElement(
          o.Fragment,
          null,
          o.createElement(
            L,
            null,
            (0, _.Xx)(
              "#AddonPicker_NoneOwned",
              (0, _.Xx)("#AddonPicker_Emoticons"),
            ),
          ),
          o.createElement(
            L,
            null,
            (0, _.kQ)(
              "#AddonPicker_AcquireAtPointsShopOrMarket",
              o.createElement(
                G.ns,
                { href: `${E.De.STORE_BASE_URL}points/shop/c/emoticons` },
                (0, _.Xx)("#AddonPicker_AcquireAtPointsShop_Link"),
              ),
              o.createElement(
                G.ns,
                { href: `${E.De.COMMUNITY_BASE_URL}market` },
                (0, _.Xx)("#AddonPicker_AcquireAtPointsShopOrMarket_Link"),
              ),
            ),
          ),
        );
      }
      class Z extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const { store: e, onItemSelect: t } = this.props,
            { filter: n } = this.state,
            a = c.u.FilterStickers(e.GetStickerList(), n);
          return o.createElement(T, {
            title: (0, _.Xx)("#EmoticonPicker_StickerHeading"),
            items: a,
            onItemSelect: t,
            renderItem: (e) => o.createElement(J, { sticker: e }),
            keyExtractor: ({ name: e }) => e,
            onFilterChange: (e) => this.setState({ filter: e }),
            filter: n,
            onSubmit: () => t(a[0]),
            renderEmpty: () =>
              n
                ? o.createElement(L, null, (0, _.Xx)("#AddonPicker_NoResults"))
                : o.createElement(
                    o.Fragment,
                    null,
                    o.createElement(
                      L,
                      null,
                      (0, _.Xx)(
                        "#AddonPicker_NoneOwned",
                        (0, _.Xx)("#AddonPicker_Stickers"),
                      ),
                    ),
                    o.createElement(
                      L,
                      null,
                      (0, _.kQ)(
                        "#AddonPicker_AcquireAtPointsShop",
                        o.createElement(
                          G.ns,
                          {
                            href: `${E.De.STORE_BASE_URL}points/shop/c/stickers`,
                          },
                          (0, _.Xx)("#AddonPicker_AcquireAtPointsShop_Link"),
                        ),
                      ),
                    ),
                  ),
          });
        }
      }
      class K extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const { store: e, effectSettings: t, onItemSelect: n } = this.props,
            { filter: a } = this.state,
            i = e.GetEffectList().filter(({ name: e }) => e.indexOf(a) > -1);
          return o.createElement(T, {
            title: (0, _.Xx)("#EmoticonPicker_EffectHeading"),
            items: i,
            onItemSelect: n,
            renderItem: (e) =>
              o.createElement(te, { effect: e, roomEffectSettings: t }),
            keyExtractor: ({ name: e }) => e,
            onFilterChange: (e) => this.setState({ filter: e }),
            filter: a,
            onSubmit: () => n(i[0]),
            renderEmpty: () =>
              a
                ? o.createElement(L, null, (0, _.Xx)("#AddonPicker_NoResults"))
                : o.createElement(
                    o.Fragment,
                    null,
                    o.createElement(
                      L,
                      null,
                      (0, _.Xx)(
                        "#AddonPicker_NoneOwned",
                        (0, _.Xx)("#AddonPicker_RoomEffects"),
                      ),
                    ),
                    o.createElement(
                      L,
                      null,
                      (0, _.kQ)(
                        "#AddonPicker_AcquireAtPointsShop",
                        o.createElement(
                          G.ns,
                          {
                            href: `${E.De.STORE_BASE_URL}points/shop/c/chateffects`,
                          },
                          (0, _.Xx)("#AddonPicker_AcquireAtPointsShop_Link"),
                        ),
                      ),
                    ),
                  ),
          });
        }
      }
      let Y = class extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const {
              store: e,
              hoverStore: t,
              onItemSelect: n,
              flairGroupID: a,
            } = this.props,
            { filter: i } = this.state,
            l = [];
          return (
            P(e).length &&
              l.push({
                title: (0, _.Xx)("#AddonPicker_RecentEmoticons"),
                items: c.u.FilterEmoticons(P(e), i),
                onItemSelect: n,
                renderItem: (e) =>
                  o.createElement($, { emoticon: e, emoticonHoverStore: t }),
                keyExtractor: (e) => e.name,
                renderEmpty: () =>
                  o.createElement(
                    L,
                    null,
                    i
                      ? (0, _.Xx)("#AddonPicker_NoResults")
                      : (0, _.Xx)(
                          "#AddonPicker_NoRecent",
                          (0, _.Xx)("#AddonPicker_Emoticons"),
                        ),
                  ),
              }),
            o.createElement(k, {
              onFilterChange: (e) => this.setState({ filter: e }),
              filter: i,
              sections: [
                ...l,
                {
                  title: (0, _.Xx)("#AddonPicker_AllEmoticons"),
                  items: c.u.FilterStickers(e.emoticon_list, i).slice(0, 1e3),
                  onItemSelect: n,
                  renderItem: (e) =>
                    o.createElement($, { emoticon: e, emoticonHoverStore: t }),
                  keyExtractor: (e) => e.name,
                  renderEmpty: () =>
                    i
                      ? o.createElement(
                          L,
                          null,
                          (0, _.Xx)("#AddonPicker_NoResults"),
                        )
                      : o.createElement(q, null),
                },
              ],
            })
          );
        }
      };
      Y = (0, a.gn)([l.Pi], Y);
      let Q = class extends o.Component {
        constructor() {
          super(...arguments), (this.state = { filter: "" });
        }
        render() {
          const {
              store: e,
              hoverStore: t,
              onItemSelect: n,
              flairGroupID: a,
            } = this.props,
            { filter: i } = this.state;
          return o.createElement(k, {
            onFilterChange: (e) => this.setState({ filter: e }),
            filter: i,
            sections: [
              {
                title: (0, _.Xx)("#ChatEntryButton_Flair"),
                items: c.u.FilterStickers(e.GetFlairListByGroupID(a), i),
                onItemSelect: n,
                renderItem: (e) =>
                  o.createElement($, { emoticon: e, emoticonHoverStore: t }),
                keyExtractor: (e) => e.name,
                renderEmpty: () =>
                  i
                    ? o.createElement(
                        L,
                        null,
                        (0, _.Xx)("#AddonPicker_NoResults"),
                      )
                    : o.createElement(q, null),
              },
            ],
          });
        }
      };
      Q = (0, a.gn)([l.Pi], Q);
      const $ = (e) => {
        const { emoticon: t, emoticonHoverStore: n, large: a } = e,
          i = !t.last_used && t.time_received;
        return o.createElement(
          "div",
          { className: O().EmoticonItem },
          o.createElement(R, {
            emoticon: t.name,
            emoticonHoverStore: n,
            large: a,
          }),
          i && o.createElement(ae, null),
        );
      };
      class J extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = { showHover: !1 }),
            (this.m_ref = o.createRef());
        }
        render() {
          const e = this.props,
            { sticker: t, className: n } = e,
            i = (0, a._T)(e, ["sticker", "className"]),
            l = g(E.De.COMMUNITY_CDN_URL, t.name);
          return o.createElement(
            "div",
            Object.assign(
              {
                ref: this.m_ref,
                className: (0, u.Z)(n, O().StickerButton),
                onMouseOver: () => this.setState({ showHover: !0 }),
                onFocus: () => this.setState({ showHover: !0 }),
                onMouseLeave: () => this.setState({ showHover: !1 }),
                onBlur: () => this.setState({ showHover: !1 }),
              },
              i,
            ),
            o.createElement("img", { style: { width: "100%" }, src: l }),
            this.state.showHover &&
              o.createElement(ee, { target: this.m_ref.current, sticker: t }),
          );
        }
      }
      const ee = (0, l.Pi)((e) => {
        const {
            target: t,
            sticker: { name: n, appid: a },
          } = e,
          [i] = (0, m.vs)(a, {});
        return o.createElement(
          M,
          { target: t, title: n, subtitle: null == i ? void 0 : i.GetName() },
          o.createElement("img", {
            src: g(E.De.COMMUNITY_CDN_URL, n),
            className: O().StickerHoverSticker,
          }),
        );
      });
      class te extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = { showHover: !1 }),
            (this.m_ref = o.createRef());
        }
        render() {
          const e = this.props,
            { effect: t, roomEffectSettings: n, className: i } = e,
            l = (0, a._T)(e, ["effect", "roomEffectSettings", "className"]),
            r = n[t.name];
          return o.createElement(
            "div",
            Object.assign(
              {
                ref: this.m_ref,
                onMouseOver: () => this.setState({ showHover: !0 }),
                onFocus: () => this.setState({ showHover: !0 }),
                onMouseLeave: () => this.setState({ showHover: !1 }),
                onBlur: () => this.setState({ showHover: !1 }),
                className: (0, u.Z)(i, O().EffectButton),
              },
              l,
            ),
            r.renderEffectIcon(),
            this.state.showHover &&
              o.createElement(ne, {
                target: this.m_ref.current,
                effect: t,
                roomEffectSettings: n,
              }),
          );
        }
      }
      const ne = (0, l.Pi)((e) => {
        const {
            target: t,
            effect: { name: n, appid: a },
            roomEffectSettings: i,
          } = e,
          l = i[n],
          [r] = (0, m.vs)(a, {});
        return o.createElement(
          M,
          { target: t, title: n, subtitle: null == r ? void 0 : r.GetName() },
          o.createElement(
            "div",
            { className: O().EffectHoverEffect },
            l.renderEffectIcon(),
          ),
        );
      });
      function ae() {
        return o.createElement(
          "div",
          { className: O().NewEmoticonIndicator },
          o.createElement("div", { className: O().NewEmoticonCircle }),
        );
      }
      class ie extends o.Component {
        constructor(e) {
          super(e), (this.state = { visible: !1 });
        }
        SetVisible(e) {
          e && !this.state.visible && this.setState({ visible: !0 });
        }
        componentDidMount() {
          this.props.coordinator.RegisterChild(
            r.findDOMNode(this),
            this.SetVisible,
          );
        }
        componentWillUnmount() {
          this.props.coordinator.UnregisterChild(r.findDOMNode(this));
        }
        render() {
          let e = this.props.emoticon,
            t = [O().EmoticonSelector_Item],
            n = !1;
          return (
            !e.last_used &&
              e.time_received &&
              (t.push(O().EmoticonSelector_Item_New), (n = !0)),
            o.createElement(
              "div",
              {
                className: (0, u.Z)(...t),
                "data-emoticon": e.name,
                onClick: this.props.onClick,
              },
              this.state.visible &&
                o.createElement(R, {
                  emoticonHoverStore: this.props.emoticonHoverStore,
                  emoticon: e.name,
                  large: !0,
                }),
              n && o.createElement(ae, null),
            )
          );
        }
      }
      function le(e) {
        return o.createElement(
          "svg",
          Object.assign(
            {
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "0 0 36 36",
              fill: "none",
            },
            e,
          ),
          o.createElement("path", {
            fill: "currentColor",
            d: "M8 4C5.79086 4 4 5.79086 4 8V27C4 29.2091 5.79086 31 8 31H13V20C13 16.134 16.134 13 20 13H31V8C31 5.79086 29.2091 4 27 4H8Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M16 20C16 17.7909 17.7909 16 20 16H31L16 31V20Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M29 24.0625V25C29 25.2671 28.9738 25.5282 28.9239 25.7806L30.8858 26.1688C30.9609 25.7892 31 25.3982 31 25V24.0625H29Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M28.3263 27.2225C28.0342 27.6587 27.6587 28.0342 27.2225 28.3263L28.3351 29.9882C28.9885 29.5507 29.5507 28.9885 29.9882 28.3351L28.3263 27.2225Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M21 29H22.1875V31H19L21 29Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M24.0625 29H25C25.2671 29 25.5282 28.9738 25.7806 28.9239L26.1688 30.8858C25.7892 30.9609 25.3982 31 25 31H24.0625V29Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M29 22.1875V21L31 19V22.1875H29Z",
          }),
        );
      }
      function oe(e) {
        return o.createElement(
          "svg",
          Object.assign(
            {
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "0 0 36 36",
              fill: "none",
            },
            e,
          ),
          o.createElement("path", {
            fill: "currentColor",
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M18 3C15.0333 3 12.1332 3.87973 9.66645 5.52796C7.19972 7.17618 5.27713 9.51886 4.14181 12.2597C3.0065 15.0006 2.70945 18.0166 3.28823 20.9264C3.86701 23.8361 5.29562 26.5088 7.3934 28.6066C9.49119 30.7044 12.1639 32.133 15.0737 32.7118C17.9834 33.2906 20.9994 32.9935 23.7403 31.8582C26.4811 30.7229 28.8238 28.8003 30.472 26.3336C32.1203 23.8668 33 20.9667 33 18C33 16.0302 32.612 14.0796 31.8582 12.2597C31.1044 10.4399 29.9995 8.78628 28.6066 7.3934C27.2137 6.00052 25.5601 4.89563 23.7403 4.14181C21.9204 3.38799 19.9698 3 18 3ZM9.00001 15C9.00001 14.4067 9.17595 13.8266 9.5056 13.3333C9.83524 12.8399 10.3038 12.4554 10.852 12.2284C11.4001 12.0013 12.0033 11.9419 12.5853 12.0576C13.1672 12.1734 13.7018 12.4591 14.1213 12.8787C14.5409 13.2982 14.8266 13.8328 14.9424 14.4147C15.0581 14.9967 14.9987 15.5999 14.7716 16.1481C14.5446 16.6962 14.1601 17.1648 13.6667 17.4944C13.1734 17.8241 12.5934 18 12 18C11.2044 18 10.4413 17.6839 9.87869 17.1213C9.31608 16.5587 9.00001 15.7956 9.00001 15ZM24 18C23.4067 18 22.8266 17.8241 22.3333 17.4944C21.8399 17.1648 21.4554 16.6962 21.2284 16.1481C21.0013 15.5999 20.9419 14.9967 21.0576 14.4147C21.1734 13.8328 21.4591 13.2982 21.8787 12.8787C22.2982 12.4591 22.8328 12.1734 23.4147 12.0576C23.9967 11.9419 24.5999 12.0013 25.1481 12.2284C25.6962 12.4554 26.1648 12.8399 26.4944 13.3333C26.8241 13.8266 27 14.4067 27 15C27 15.7956 26.6839 16.5587 26.1213 17.1213C25.5587 17.6839 24.7957 18 24 18ZM26.3149 23.6788C26.7672 22.8295 27 21.9193 27 21H18H9C9 21.9193 9.23279 22.8295 9.68508 23.6788C10.1374 24.5281 10.8003 25.2997 11.636 25.9497C12.4718 26.5998 13.4639 27.1154 14.5558 27.4672C15.6478 27.8189 16.8181 28 18 28C19.1819 28 20.3522 27.8189 21.4442 27.4672C22.5361 27.1154 23.5282 26.5998 24.364 25.9497C25.1997 25.2997 25.8626 24.5281 26.3149 23.6788Z",
          }),
        );
      }
      function re(e) {
        return o.createElement(
          "svg",
          Object.assign(
            {
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "0 0 36 36",
              fill: "none",
            },
            e,
          ),
          o.createElement("path", {
            fill: "currentColor",
            d: "M14.7163 7.6875L17.2476 15.5344C17.564 16.6102 18.4499 17.4328 19.5257 17.8125L27.3726 20.3438L19.5257 22.875C18.4499 23.1914 17.6273 24.0773 17.2476 25.1531L14.7163 33L12.1851 25.1531C11.8687 24.0773 10.9827 23.2547 9.90696 22.875L2.06009 20.3438L9.90696 17.8125C10.9827 17.4961 11.8054 16.6102 12.1851 15.5344L14.7163 7.6875Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M24.488 3L25.7861 7.06499C25.9591 7.63321 26.3918 8.07031 26.9543 8.24514L30.9784 9.55643L26.9543 10.8677C26.3918 11.0426 25.9591 11.4796 25.7861 12.0479L24.488 16.1129L23.1899 12.0479C23.0168 11.4796 22.5841 11.0426 22.0216 10.8677L17.9976 9.55643L22.0216 8.24514C22.5841 8.07031 23.0168 7.63321 23.1899 7.06499L24.488 3Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M8.11778 3.9375L8.76682 5.99185C8.85336 6.25411 9.0697 6.47265 9.32932 6.56007L11.363 7.21571L9.32932 7.87136C9.0697 7.95878 8.85336 8.17732 8.76682 8.43958L8.11778 10.4939L7.46874 8.43958C7.3822 8.17732 7.16586 7.95878 6.90624 7.87136L4.87259 7.21571L6.90624 6.56007C7.16586 6.47265 7.3822 6.25411 7.46874 5.99185L8.11778 3.9375Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M30.6178 12.375L31.2668 14.4293C31.3534 14.6916 31.5697 14.9102 31.8293 14.9976L33.863 15.6532L31.8293 16.3089C31.5697 16.3963 31.3534 16.6148 31.2668 16.8771L30.6178 18.9314L29.9687 16.8771C29.8822 16.6148 29.6659 16.3963 29.4062 16.3089L27.3726 15.6532L29.4062 14.9976C29.6659 14.9102 29.8822 14.6916 29.9687 14.4293L30.6178 12.375Z",
          }),
          o.createElement("path", {
            fill: "currentColor",
            d: "M25.9303 24.5625L26.5793 26.6168C26.6659 26.8791 26.8822 27.0977 27.1418 27.1851L29.1755 27.8407L27.1418 28.4964C26.8822 28.5838 26.6659 28.8023 26.5793 29.0646L25.9303 31.1189L25.2812 29.0646C25.1947 28.8023 24.9784 28.5838 24.7187 28.4964L22.6851 27.8407L24.7187 27.1851C24.9784 27.0977 25.1947 26.8791 25.2812 26.6168L25.9303 24.5625Z",
          }),
        );
      }
      function se(e) {
        const { className: t } = e,
          n = (0, a._T)(e, ["className"]);
        return o.createElement(
          "svg",
          Object.assign(
            {
              className: (0, u.Z)("SVGIcon_Button SVGIcon_Clock", t),
              version: "1.1",
              x: "0px",
              y: "0px",
              width: "20px",
              height: "20px",
              viewBox: "0 0 24 24",
            },
            n,
          ),
          o.createElement("path", {
            d: "M15.999 15c-.15 0-.303-.034-.446-.105l-4-2A1.001 1.001 0 0111 12V5a1 1 0 012 0v6.382l3.447 1.724A1 1 0 0115.999 15zM12 24C5.383 24 0 18.617 0 12S5.383 0 12 0s12 5.383 12 12-5.383 12-12 12zm0-22C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2z",
          }),
        );
      }
      (0, a.gn)([h.ak], ie.prototype, "SetVisible", null);
    },
    38278: (e, t, n) => {
      "use strict";
      n.d(t, { Z: () => D });
      var a = n(33940),
        i = n(89526),
        l = n(88464),
        o = n(4306),
        r = n(44026),
        s = n(51438),
        c = n(40103),
        m = n(50304),
        d = n(14826),
        p = n(19304),
        u = n(68436),
        _ = n.n(u),
        h = n(701),
        g = n(16826),
        E = n(32765);
      function v() {
        return (0, E.id)()
          ? i.createElement(g.tkI, null)
          : i.createElement(h.j5H, null);
      }
      const S = 1576780700;
      let f = class extends i.Component {
        OnEmoticonClick(e) {
          var t;
          const {
            emoticonStore: n,
            strFlairGroupID: a,
            SetUIDisplayPref: l,
            contextOptions: o,
            bShowChatAddons: r,
          } = this.props;
          let s = null;
          if (
            ((s = r
              ? i.createElement(m.hp, {
                  emoticonStore: this.props.emoticonStore,
                  emoticonHoverStore: this.props.emoticonHoverStore,
                  strFlairGroupID: this.props.strFlairGroupID,
                  onEmoticonSelected: (e) =>
                    this.props.OnEmoticonSelected(e, !1),
                  roomEffectSettings: this.props.roomEffectSettings,
                  onRoomEffectSelected: this.props.onRoomEffectSelected,
                  onStickerSelected: this.props.onStickerSelected,
                })
              : a &&
                n.flair_list &&
                (null === (t = n.GetFlairListByGroupID(a)) || void 0 === t
                  ? void 0
                  : t.length) > 0
              ? i.createElement(m.uC, {
                  emoticonStore: this.props.emoticonStore,
                  emoticonHoverStore: this.props.emoticonHoverStore,
                  strFlairGroupID: this.props.strFlairGroupID,
                  OnSelected: this.props.OnEmoticonSelected,
                })
              : i.createElement(m.ag, {
                  emoticonStore: this.props.emoticonStore,
                  emoticonHoverStore: this.props.emoticonHoverStore,
                  strFlairGroupID: this.props.strFlairGroupID,
                  OnSelected: this.props.OnEmoticonSelected,
                })),
            (0, c.yV)(
              s,
              e,
              o || {
                bOverlapHorizontal: !0,
                bPreferPopLeft: !0,
                bPreferPopTop: !0,
              },
            ),
            this.BHaveUnseenEmoticons() && l)
          ) {
            let e = this.GetNewestIndicatorTime();
            (!e || e < S) && (e = S), l("rtLastAckedNewEmoticons", e);
          }
        }
        GetNewestIndicatorTime() {
          let e = this.props.emoticonStore,
            t = Number.MIN_SAFE_INTEGER,
            n = e.GetTimeReceivedNewestEmoticon();
          n && (t = n);
          let a = e.GetTimeReceivedForStickerOrEffect();
          return (t = Math.max(a, t)), t > Number.MIN_SAFE_INTEGER ? t : void 0;
        }
        BHaveUnseenEmoticons() {
          const { rtLastAckedNewEmoticons: e } = this.props;
          let t = this.GetNewestIndicatorTime();
          return !e || e < S || (t && (!e || e < t));
        }
        render() {
          const { disabled: e, className: t, ttip: n, useImg: a } = this.props;
          let l = [t],
            o = !1;
          return (
            e ? l.push("disabled") : this.BHaveUnseenEmoticons() && (o = !0),
            n && l.push("ttip"),
            a
              ? i.createElement(
                  s.s,
                  {
                    onClick: this.OnEmoticonClick,
                    onOKActionDescription: (0, d.Xx)(
                      "#ChatEntryButton_Emoticon",
                    ),
                    focusable: !0,
                  },
                  i.createElement("img", {
                    src: this.props.useImg,
                    className: (0, p.Z)(...l),
                    title:
                      this.props.title ||
                      (0, d.Xx)("#ChatEntryButton_Emoticon"),
                    "data-tooltip-text": n,
                  }),
                )
              : (l.push(_().chatSubmitButton, _().EmoticonPickerButton),
                i.createElement(
                  r.wl,
                  {
                    className: (0, p.Z)(...l),
                    onOKActionDescription: (0, d.Xx)(
                      "#ChatEntryButton_Emoticon",
                    ),
                    type: "button",
                    onClick: this.OnEmoticonClick,
                    title:
                      this.props.title ||
                      (0, d.Xx)("#ChatEntryButton_Emoticon"),
                    disabled: e,
                    "data-tooltip-text": n,
                  },
                  this.props.buttonIcon || i.createElement(v, null),
                  o && i.createElement(m.D3, null),
                ))
          );
        }
      };
      (0, a.gn)([o.ak], f.prototype, "OnEmoticonClick", null),
        (f = (0, a.gn)([l.Pi], f));
      const D = f;
    },
    9663: (e, t, n) => {
      "use strict";
      n.d(t, { d: () => Qt });
      var a = n(33940),
        i = n(89526),
        l = n(24174),
        o = n(4116),
        r = n(14288),
        s = n(90531),
        c = n(50304),
        m = n(207),
        d = n(84199);
      class p extends o.DX {
        constructor(e, t, n, a) {
          super(e),
            (this.m_LinkFilter = m.H7),
            (this.m_parentNode = void 0),
            (this.m_parentNode = t),
            (this.m_mapHostToComponent = n),
            (this.m_globalStoreLink = a);
        }
        AppendText(e, t = !1) {
          let n = e;
          if (
            t &&
            (null == this.m_parentNode || "img" != this.m_parentNode.tag)
          ) {
            let e = this.m_LinkFilter.exec(n);
            for (; e; ) {
              if (e.index > 0) {
                let n = e.input.substr(0, e.index);
                super.AppendText(n, t);
              }
              let a = e[0],
                i = !1;
              if (this.m_mapHostToComponent)
                for (let e = 0; e < this.m_mapHostToComponent.length; ++e)
                  if (this.m_mapHostToComponent[e].urlRegExp.exec(a)) {
                    (i = !0),
                      super.AppendNode(
                        this.m_mapHostToComponent[e].fnBBComponent(
                          a,
                          this.m_globalStoreLink,
                        ),
                      );
                    break;
                  }
              i || super.AppendNode((0, d.hF)(a)),
                (n = e.input.substr(e.index + a.length)),
                (e = this.m_LinkFilter.exec(n));
            }
          }
          n.length > 0 && super.AppendText(n, t);
        }
      }
      class u extends o.DX {
        constructor() {
          super(...arguments),
            (this.m_EmoteRegex = new RegExp("[ː:]([a-zA-Z0-9_]+)[ː:]"));
        }
        AppendText(e, t = !1) {
          let n = e;
          if (e.length >= 3) {
            let e = this.m_EmoteRegex.exec(n);
            for (; e; ) {
              if (e.index > 0) {
                let n = e.input.substr(0, e.index);
                super.AppendText(n, t);
              }
              let a = e[1];
              super.AppendNode(
                i.createElement(
                  c.tk,
                  { emoticonHoverStore: s.$, emoticon: a },
                  [],
                ),
              ),
                (n = e.input.substr(e.index + a.length + 2)),
                (e = this.m_EmoteRegex.exec(n));
            }
          }
          n.length > 0 && super.AppendText(n, t);
        }
      }
      class _ extends o.DX {
        constructor(e, t) {
          super(e), (this.m_parentNode = void 0), (this.m_parentNode = t);
        }
        AppendText(e, t = !1) {
          let n = e;
          this.m_parentNode &&
            "img" == this.m_parentNode.tag &&
            (n = (0, m.et)(n)),
            super.AppendText(n, t);
        }
      }
      var h = n(4306),
        g = n(26412),
        E = n(47165),
        v = n(19274),
        S = n(44094),
        f = n.n(S),
        D = n(19002),
        y = n(58218),
        I = n(23217),
        C = n(14826),
        b = n(32765);
      const A = (e) => /^\d+$/.test(e);
      function T(e) {
        const { sharedFileID: t } = e,
          n = (0, y.T)("SharedFileSnippet"),
          [l, o] = (0, i.useState)(!1),
          [r, s] = (0, i.useState)(() => ({
            sharedfileid: t,
            title: (0, C.Xx)("#Loading"),
            description: "",
            type: "",
            previewurl: "",
            appid: 0,
            url: b.De.COMMUNITY_BASE_URL + "sharedfiles/filedetails/?id=" + t,
          }));
        (0, i.useEffect)(() => {
          (() => {
            (0, a.mG)(this, void 0, void 0, function* () {
              try {
                const e = yield D.A.LoadSharedFileDynamicData([t], n);
                if (!n.token.reason && e.length > 0) {
                  const t = e[0];
                  A(t.url) &&
                    (t.url =
                      b.De.COMMUNITY_BASE_URL +
                      "sharedfiles/filedetails/?id=" +
                      t.url),
                    s(t),
                    console.log(e[0]),
                    o(!0);
                }
              } catch (e) {
                const t = (0, I.l)(e);
                console.error("SharedFileSnippet: " + t.strErrorMsg, t);
              }
            });
          })();
        }, [n, t]);
        let c = void 0 !== r.personnaname && r.personnaname.length > 0;
        return i.createElement(
          "a",
          {
            href: r.url,
            className: f().DynamicLinkBox,
            "data-modal-content-sizetofit": !!r.bSizeToFit,
            "data-appid": r.appid,
            "data-publishedfileid": t,
          },
          i.createElement("img", {
            className: f().DynamicLink_Preview,
            src: r.previewurl,
          }),
          i.createElement(
            "div",
            { className: f().DynamicLink_Content },
            i.createElement(
              "div",
              { className: f().DynamicLink_Name },
              r.title,
            ),
            i.createElement(
              "div",
              null,
              i.createElement(
                "span",
                { className: f().DynamicLink_Type },
                r.type,
              ),
            ),
            c &&
              i.createElement(
                "div",
                { className: f().DynamicLink_Author },
                (0, C.kQ)(
                  "#EventEditor_Author",
                  i.createElement(
                    "span",
                    { className: f().DynamicLink_AuthorName },
                    r.personnaname,
                  ),
                ),
              ),
            i.createElement(
              "div",
              { className: f().DynamicLink_Description },
              r.description,
            ),
          ),
        );
      }
      var k = n(701),
        w = n(19304),
        N = n(52868),
        L = n.n(N),
        x = n(88464),
        O = n(75457),
        G = n(48616),
        R = n(82079),
        B = n(13141),
        M = n(92616),
        P = n(3301),
        F = n(87178),
        U = n(20790);
      let j = class extends i.Component {
        constructor() {
          super(...arguments),
            (this.state = {
              bLoading: this.props.announcementGID
                ? !B.j1.BHasClanAnnouncementGID(this.props.announcementGID)
                : !B.j1.BHasClanAnnouncementGID(this.props.eventGID),
              bFailedLoad: !1,
            }),
            (this.m_cancelSignal = L().CancelToken.source());
        }
        componentDidMount() {
          this.HandleLoadEventInfo();
        }
        HandleLoadEventInfo() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const {
              appid: e,
              strVanity: t,
              announcementGID: n,
              eventGID: a,
              strGroupVanity: i,
            } = this.props;
            let l = this.props.clanSteamID;
            try {
              if (this.state.bLoading) {
                if (void 0 !== t) {
                  l = (yield R.sV.LoadOGGClanInfoForIdentifier(t)).clanSteamID;
                } else if (void 0 !== i) {
                  l = (yield R.sV.LoadOGGClanInfoForGroupVanity(i)).clanSteamID;
                }
                const o = B.j1.LoadPartnerEventGeneric(l, e, a, n, 0);
                let r = yield o;
                yield Promise.all([
                  M.Z.Get().QueueAppRequest(r.appid, {
                    include_assets: !0,
                    include_basic_info: !0,
                    include_release: !0,
                  }),
                ]),
                  this.setState({ bFailedLoad: !1, bLoading: !1 });
              }
            } catch (e) {
              this.HandleError(e);
            }
          });
        }
        HandleError(e) {
          let t = (0, I.l)(e);
          const {
            eventGID: n,
            announcementGID: a,
            strGroupVanity: i,
            strVanity: l,
          } = this.props;
          console.error(
            "EventSnippet hit error on announceGID " +
              a +
              " eventGID " +
              n +
              " strVanity " +
              l +
              " strGroupVanity " +
              i +
              " error: " +
              t.strErrorMsg,
          ),
            this.setState({ bFailedLoad: !0 });
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel("component unmounted");
        }
        render() {
          var e;
          const {
            appid: t,
            announcementGID: n,
            eventGID: a,
            strURL: l,
            fnFilterImageURLsForKnownFailures: o,
            fnImageFailureCallback: r,
          } = this.props;
          if (this.state.bFailedLoad) return (0, d.hF)(l);
          if (this.state.bLoading) return i.createElement(P.V, null);
          let s =
            void 0 !== n
              ? B.j1.GetClanEventFromAnnouncementGID(n)
              : B.j1.GetClanEventModel(a);
          if (null == s) return (0, d.hF)(l);
          let c = (0, O.jM)(b.De.LANGUAGE),
            m = s.GetImageForSizeAsArrayWithFallback(
              "capsule",
              c,
              G.FN.capsule_main,
            );
          o && (m = o(m));
          let p = s.GetNameWithFallback(c),
            u = s.GetSubTitleWithSummaryFallback(c),
            _ =
              null === (e = M.Z.Get().GetApp(t)) || void 0 === e
                ? void 0
                : e.GetName(),
            h = (0, C.$1)(s.GetStartTimeAndDateUnixSeconds());
          return i.createElement(
            U.JW,
            {
              eventModel: s,
              route: U.Ue.k_eView,
              className: f().DynamicLinkBox,
              "data-modal-content-sizetofit": !0,
              "data-appid": t,
            },
            i.createElement(F.j, {
              className: f().DynamicLink_Preview,
              rgSources: m,
              onIncrementalError: (e, t, n) => r && r(t),
            }),
            i.createElement(
              "div",
              { className: f().DynamicLink_Content },
              i.createElement(
                "div",
                { className: f().DynamicLink_Author },
                (0, C.Xx)(
                  s.type == O.Ep.k_ENewsEvent
                    ? "#EventDisplay_Share_Announcement"
                    : "#EventDisplay_Share_Event",
                  _,
                ),
                i.createElement("span", { className: f().DynamicLink_Date }, h),
              ),
              i.createElement(
                "div",
                { className: f().DynamicLink_Name },
                i.createElement("div", { className: f().DynamicLink_Type }, p),
              ),
              i.createElement(
                "div",
                { className: f().DynamicLink_Description },
                u,
              ),
            ),
          );
        }
      };
      j = (0, a.gn)([x.Pi], j);
      var X = n(99472),
        z = n.n(X),
        H = n(91972),
        V = n.n(H);
      let W = class extends i.Component {
        constructor() {
          super(...arguments),
            (this.state = { bSummaryMode: !0, bLoadedMetaData: !1 });
        }
        componentDidMount() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let e =
              "https://sketchfab.com/oembed?url=https://sketchfab.com/models/" +
              this.props.modelID;
            try {
              let t = yield L().get(e);
              this.setState({ bLoadedMetaData: !0, data: t.data });
            } catch (e) {
              this.setState({ bError: !0 }),
                console.error(
                  "SketchFabEmbed failed to load: " + (0, I.l)(e).strErrorMsg,
                );
            }
          });
        }
        OnSketchFabClick() {
          this.state.bLoadedMetaData && this.setState({ bSummaryMode: !1 });
        }
        render() {
          const { modelID: e } = this.props;
          return this.state.bError
            ? i.createElement(
                "div",
                {
                  className: V().dynamiclink_box,
                  onClick: this.OnSketchFabClick,
                },
                i.createElement("span", null, e),
                i.createElement(
                  "span",
                  null,
                  (0, C.Xx)("#EventDisplay_SketchFab_Error_Network"),
                ),
              )
            : this.state.bSummaryMode
            ? i.createElement(
                "div",
                {
                  className: V().dynamiclink_box,
                  onClick: this.OnSketchFabClick,
                },
                Boolean(this.state.bLoadedMetaData)
                  ? i.createElement(
                      i.Fragment,
                      null,
                      i.createElement("img", {
                        className: V().dynamiclink_preview,
                        src: this.state.data.thumbnail_url,
                      }),
                      i.createElement("img", {
                        className: V().sketchfab_play_overlay_image,
                      }),
                      i.createElement(
                        "div",
                        { className: V().dynamiclink_content },
                        i.createElement(
                          "div",
                          { className: V().dynamiclink_name },
                          i.createElement(
                            "span",
                            { className: V().dynamiclink_type },
                            (0, C.Xx)("#EventDisplay_Sketchfab"),
                          ),
                          i.createElement(
                            "div",
                            null,
                            this.state.data.title,
                            " ",
                          ),
                        ),
                        i.createElement(
                          "div",
                          { className: V().dynamiclink_author },
                          this.state.data.author_name,
                        ),
                      ),
                    )
                  : i.createElement(P.V, { size: "medium" }),
              )
            : i.createElement(
                "div",
                { className: V().sketchfabmodelembedded },
                i.createElement("iframe", {
                  className: V().sketchfabmodelembedded,
                  src:
                    "https://sketchfab.com/models/" +
                    this.props.modelID +
                    "/embed?autostart=1",
                  frameBorder: 0,
                  allowFullScreen: !0,
                }),
              );
        }
      };
      (0, a.gn)([h.ak], W.prototype, "OnSketchFabClick", null),
        (W = (0, a.gn)([x.Pi], W));
      var q = n(50265),
        Z = n(42735),
        K = n(67328),
        Y = n(19094),
        Q = n(38139),
        $ = n(23801),
        J = n(85246);
      class ee {
        GetItem(e) {
          return this.m_mapDefIDtoDefinition.get(e);
        }
        GetItemChangeCallback(e) {
          return (
            this.m_defChangeCallback.has(e) ||
              this.m_defChangeCallback.set(e, new J.pB()),
            this.m_defChangeCallback.get(e)
          );
        }
        GetKeyCategoryAndClass(e, t) {
          return e + "_" + t;
        }
        GetItemsByCategoryAndClass(e, t) {
          const n = this.GetKeyCategoryAndClass(e, t);
          return this.m_mapCategoryAndClassToItems.get(n);
        }
        GetItemsByCategoryAndClassCallback(e, t) {
          const n = this.GetKeyCategoryAndClass(e, t);
          return (
            this.m_defCategoryAndClassToChangeCallback.has(n) ||
              this.m_defCategoryAndClassToChangeCallback.set(n, new J.pB()),
            this.m_defCategoryAndClassToChangeCallback.get(n)
          );
        }
        LoadRewardDefinition(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return (
              this.m_mapDefIDToPromise.has(e) ||
                this.m_mapDefIDToPromise.set(
                  e,
                  this.InternalLoadRewardDefinition(e),
                ),
              this.m_mapDefIDToPromise.get(e)
            );
          });
        }
        InternalLoadRewardDefinition(e) {
          var t, n, i;
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (this.m_mapDefIDtoDefinition.has(e))
              return this.m_mapDefIDtoDefinition.get(e);
            const a = K.gA.Init(Q.eQ);
            a.Body().set_definitionids([e]);
            let l = null;
            try {
              const o = yield Q.pQ.QueryRewardItems(
                this.m_SteamInterface.GetServiceTransport(),
                a,
              );
              if (
                o.GetEResult() == Z.s.k_EResultOK &&
                (null === (t = o.Body().definitions()) || void 0 === t
                  ? void 0
                  : t.length) > 0
              ) {
                (0, $.X)(
                  1 ==
                    (null === (n = o.Body().definitions()) || void 0 === n
                      ? void 0
                      : n.length),
                  `Requested definition ID ${e} and receive # ${
                    null === (i = o.Body().definitions()) || void 0 === i
                      ? void 0
                      : i.length
                  }, expecting exactly one.`,
                );
                const t = o.Body().definitions()[0].toObject();
                return (
                  this.m_mapDefIDtoDefinition.set(e, t),
                  this.GetItemChangeCallback(e).Dispatch(t),
                  t
                );
              }
              l = (0, I.l)(o);
            } catch (e) {
              l = (0, I.l)(e);
            }
            return (
              console.error(
                "CLoyaltyRewardDefinitionStore.LoadRewardDefinition failed: " +
                  (null == l ? void 0 : l.strErrorMsg),
                l,
              ),
              null
            );
          });
        }
        LoadRewardDefinitionByCategoryAndClass(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const n = this.GetKeyCategoryAndClass(e, t);
            return (
              this.m_mapCategoryAndClassToPromise.has(n) ||
                this.m_mapCategoryAndClassToPromise.set(
                  n,
                  this.InternalLoadRewardDefinitionByCategoryAndClass(e, t),
                ),
              this.m_mapCategoryAndClassToPromise.get(n)
            );
          });
        }
        InternalLoadRewardDefinitionByCategoryAndClass(e, t) {
          var n;
          return (0, a.mG)(this, void 0, void 0, function* () {
            const a = this.GetKeyCategoryAndClass(e, t);
            if (this.m_mapCategoryAndClassToItems.has(a))
              return this.m_mapCategoryAndClassToItems.get(a);
            const i = K.gA.Init(Q.eQ);
            i.Body().set_community_item_classes([t]),
              i.Body().set_filter_match_any_category_tags([e]);
            let l = null;
            try {
              const o = yield Q.pQ.QueryRewardItems(
                this.m_SteamInterface.GetServiceTransport(),
                i,
              );
              if (
                o.GetEResult() == Z.s.k_EResultOK &&
                (null === (n = o.Body().definitions()) || void 0 === n
                  ? void 0
                  : n.length) > 0
              ) {
                const n = o
                  .Body()
                  .definitions()
                  .map((e) => e.toObject());
                return (
                  n.forEach((e) => {
                    this.m_mapDefIDtoDefinition.has(e.defid) ||
                      (this.m_mapDefIDtoDefinition.set(e.defid, e),
                      this.GetItemChangeCallback(e.defid).Dispatch(e));
                  }),
                  this.m_mapCategoryAndClassToItems.set(a, n),
                  this.GetItemsByCategoryAndClassCallback(e, t).Dispatch(n),
                  ("dev" != b.De.WEB_UNIVERSE && "beta" != b.De.WEB_UNIVERSE) ||
                    console.log(
                      "CLoyaltyRewardDefinitionStore.LoadRewardDefinitionByCategoryAndClass loaded " +
                        n.length,
                    ),
                  n
                );
              }
              l = (0, I.l)(o);
            } catch (e) {
              l = (0, I.l)(e);
            }
            return (
              console.error(
                "CLoyaltyRewardDefinitionStore.LoadRewardDefinitionByCategoryAndClass failed: " +
                  (null == l ? void 0 : l.strErrorMsg),
                l,
              ),
              null
            );
          });
        }
        static Get() {
          return (
            ee.s_Singleton ||
              ((ee.s_Singleton = new ee()),
              ee.s_Singleton.Init(),
              "dev" == b.De.WEB_UNIVERSE &&
                (window.g_LoyaltyRewardDefinitionStore = ee.s_Singleton)),
            ee.s_Singleton
          );
        }
        constructor() {
          (this.m_mapDefIDtoDefinition = new Map()),
            (this.m_mapDefIDToPromise = new Map()),
            (this.m_defChangeCallback = new Map()),
            (this.m_mapCategoryAndClassToItems = new Map()),
            (this.m_mapCategoryAndClassToPromise = new Map()),
            (this.m_defCategoryAndClassToChangeCallback = new Map()),
            (this.m_SteamInterface = null);
        }
        Init() {
          this.m_SteamInterface = new Y.J(b.De.WEBAPI_BASE_URL);
        }
      }
      var te = n(84343),
        ne = n(26727),
        ae = n.n(ne);
      function ie(e) {
        const { defid: t, url: n } = e,
          a = (function (e) {
            const [t, n] = (0, i.useState)(ee.Get().GetItem(e));
            return (
              (0, i.useEffect)(() => {
                t || ee.Get().LoadRewardDefinition(e);
              }, [e, t]),
              (0, h.Qg)(ee.Get().GetItemChangeCallback(e), n),
              t
            );
          })(t);
        if (!a || !a.community_item_data) return null;
        const l = a.appid,
          o = a.community_item_data.item_image_large,
          r = `${b.De.MEDIA_CDN_COMMUNITY_URL}images/items/${l}/${o}`;
        return (
          "dev" == b.De.WEB_UNIVERSE &&
            console.log("reward itemdef", (0, q.ZN)(a)),
          i.createElement(
            "div",
            { className: ae().Ctn },
            i.createElement(
              te.HP,
              { toolTipContent: a.community_item_data.item_description },
              i.createElement("img", {
                src: r,
                alt: a.community_item_data.item_title,
              }),
            ),
          )
        );
      }
      var le = n(31936),
        oe = n(75223);
      function re(e) {
        const { inputType: t, id: n } = e;
        let a = "bundle" == t ? "bundle" : "sub" == t ? "sub" : "game";
        return i.createElement(
          "div",
          {
            className: (0, w.Z)(oe.AppSummaryWidgetCtn, "AppSummaryWidgetCtn"),
          },
          i.createElement(le.ju, {
            id: n,
            type: a,
            bAllowTwoLinesForHeader: !0,
          }),
        );
      }
      const se =
          /(?:steampowered\.com|valve\.org\/store|store\.\S+\.steam\.dev|store\.steamchina\.com)\/(app|bundle|sub)\/(\d+)/i,
        ce =
          /(?:steamcommunity\.com|valve\.org\/community|steam\.dev\/community|community\.\S+\.steam\.dev|my\.steamchina\.com)\/(games|app|ogg|gid|groups)\/(\w+)\/(?:announcements\/detail|partnerevents\/view_old_announcement)\/(\d+)/i,
        me =
          /(?:steamcommunity\.com|valve\.org\/community|community\.\S+\.steam\.dev|steam\.dev\/community)\/(games|app|ogg|gid|groups)\/(\w+)\/partnerevents\/view\/(\d+)/i,
        de =
          /(?:steampowered\.com|valve\.org\/store|store\.\S+\.steam\.dev|steam\.dev\/store|store\.steamchina\.com)\/(?:news|newshub)\/(group|app)\/(\w+)\/view\/(\d+)/i,
        pe = /:\/\/medal.tv\/(?:clip|clips)\/([a-z0-9]+)/i,
        ue = /sketchfab.com\/(?:models\/(?:[^\/\s]+-)?)([a-z0-9]{32})/i,
        _e = /twitter\.com\/(\w+)(\/?)$/i,
        he = /twitter\.com\/hashtag\/(\w+)(\/?)$/i,
        ge = /twitch\.tv\/(\w+)(\/?)$/i,
        Ee =
          /(?:steamcommunity\.com|valve\.org\/community|steam\.dev\/community|community\.\S+\.steam\.dev|my\.steamchina\.com)\/id\/(\w+)(\/?)$/i,
        ve =
          /(?:steampowered\.com|valve\.org\/store|steam\.dev\/store|store\.steamchina\.com)\/points\/shop\/.*reward\/(\d+)$/i;
      let Se = null;
      function fe(e, t) {
        if ((0, b.h4)()) return null;
        const n = (0, g.S6)(e);
        return void 0 !== (null == n ? void 0 : n.strVideoID)
          ? i.createElement(v.O, {
              videoID: n.strVideoID,
              nStartSeconds: n.nStartSeconds,
              classNameAlign: "",
              classNameSize: f().sizeFull,
              bShowVideoImmediately: !1,
            })
          : (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function De(e, t) {
        if ((0, b.h4)()) return null;
        const n = new RegExp(pe).exec(e);
        if (n && n.length > 1) {
          const e = n[1];
          if ((null == e ? void 0 : e.length) > 0) {
            let n =
              "https://medal.tv/clip/" +
              e +
              "/?autoplay=0&donate=0" +
              (t && t.event ? "&steamappid=" + t.event.appid : "");
            return i.createElement("iframe", {
              className: X.MedalTVWidget,
              src: n,
              frameBorder: 0,
              allow: "autoplay",
            });
          }
        }
        return (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function ye(e, t) {
        let n = new RegExp(ue).exec(e);
        if (n && n.length > 1) {
          let e = n[1];
          if (e && e.length > 1) return i.createElement(W, { modelID: e });
        }
        return (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function Ie(e, t) {
        const n = e.split("?");
        let a;
        if (2 == n.length) {
          const e = new URLSearchParams(n[1]);
          e.has("id") && (a = e.get("id"));
        }
        return void 0 !== a
          ? i.createElement(T, { sharedFileID: a })
          : (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function Ce(e) {
        let t = (0, m.FM)(e).toLocaleLowerCase(),
          n = (0, m.FM)(b.De.STORE_BASE_URL),
          a = (0, m.FM)(b.De.COMMUNITY_BASE_URL);
        const i =
          "dev" === b.De.WEB_UNIVERSE ||
          (0, m.FM)(b.De.STORE_BASE_URL).endsWith(".steam.dev");
        return (
          t == n ||
          t == a ||
          (i &&
            (t.includes("steampowered.com") ||
              t.includes("steamcommunity.com") ||
              t.includes("steamchina.com")))
        );
      }
      function be(e, t) {
        if (Ce(e)) {
          let t = new RegExp(se).exec(e);
          if (t && t.length > 2) {
            let e = t[1],
              n = Number(t[2]);
            if (n > 0) return i.createElement(re, { id: n, inputType: e });
          }
        }
        return (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function Ae(e, t) {
        if (Ce(e)) {
          const t = new RegExp(ve).exec(e);
          if (t && t.length > 1) {
            const n = Number(t[1]);
            if (n > 0)
              return i.createElement(
                "div",
                { className: (0, w.Z)(X.LoyaltyRewardCtn) },
                i.createElement(ie, { defid: n, url: e }),
              );
          }
        }
        return (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function Te(e, t) {
        if (Ce(e)) {
          let t = new RegExp(ce).exec(e);
          if (t && t.length > 2) {
            let n, a, l, o;
            "gid" == t[1]
              ? (a = new E.K(t[2]))
              : "groups" == t[1]
              ? (o = t[2])
              : isNaN(+t[2])
              ? (l = t[2])
              : (n = Number(t[2]));
            let r = t[3];
            if (
              ((void 0 !== n && n > 0) ||
                void 0 !== l ||
                void 0 !== o ||
                void 0 !== a) &&
              null != r &&
              r.length > 0
            )
              return i.createElement(j, {
                appid: n,
                clanSteamID: a,
                strVanity: l,
                strGroupVanity: o,
                announcementGID: r,
                strURL: e,
              });
          }
        }
        return (0, d.hF)(e, null == t ? void 0 : t.event);
      }
      function ke(e, t) {
        return Re(de, e, t);
      }
      function we(e, t) {
        return Re(me, e, t);
      }
      function Ne(e, t) {
        return (0, b.h4)() ? null : Ge(e, i.createElement(k.tLe, null), "@", t);
      }
      function Le(e, t) {
        return (0, b.h4)() ? null : Ge(e, i.createElement(k.tLe, null), "#", t);
      }
      function xe(e, t) {
        return (0, b.h4)()
          ? null
          : Ge(e, i.createElement(k.Lk$, null), void 0, t);
      }
      function Oe(e, t) {
        return Ge(e, i.createElement(k.ui7, null), void 0, t);
      }
      function Ge(e, t, n, a) {
        let l;
        const o = e.endsWith("/") ? e.length - 1 : e.length,
          r = e.lastIndexOf("/", o - 1);
        -1 != r && r + 1 < e.length && (l = e.substring(r + 1, o)),
          n && l && (l = n + l);
        const s = (0, d.hF)(e, null == a ? void 0 : a.event, null != l ? l : e);
        return i.createElement(
          "div",
          { className: X.SocialLink },
          i.createElement("div", { className: X.SocialIcon }, t),
          s,
        );
      }
      function Re(e, t, n) {
        if (Ce(t)) {
          let n = new RegExp(e).exec(t);
          if (n && n.length > 2) {
            let e, a, l, o;
            "gid" == n[1]
              ? (a = new E.K(n[2]))
              : "group" == n[1]
              ? (a = E.K.InitFromClanID(Number.parseInt(n[2])))
              : "groups" == n[1]
              ? (o = n[2])
              : isNaN(+n[2])
              ? (l = n[2])
              : (e = Number(n[2]));
            const r = n[3];
            if (
              ((void 0 !== e && e > 0) ||
                void 0 !== l ||
                void 0 !== o ||
                void 0 !== a) &&
              null != r &&
              r.length > 0
            )
              return i.createElement(j, {
                appid: e,
                clanSteamID: a,
                strVanity: l,
                strGroupVanity: o,
                eventGID: r,
                strURL: t,
              });
          }
        }
        return (0, d.hF)(t, null == n ? void 0 : n.event);
      }
      var Be,
        Me = n(84770),
        Pe = n(68562);
      !(function (e) {
        (e[(e.None = 0)] = "None"),
          (e[(e.FileReady = 1)] = "FileReady"),
          (e[(e.InProgress = 2)] = "InProgress"),
          (e[(e.Error = 3)] = "Error"),
          (e[(e.Error_ImageTooLarge = 4)] = "Error_ImageTooLarge"),
          (e[(e.Error_FileTypeNotSupported = 5)] =
            "Error_FileTypeNotSupported"),
          (e[(e.Completed = 6)] = "Completed");
      })(Be || (Be = {}));
      class Fe {
        constructor() {
          (this.timestamp = 0),
            (this.imageWidth = 0),
            (this.imageHeight = 0),
            (this.eUploadState = Be.None),
            (this.uploadProgress = 0);
        }
      }
      (0, a.gn)([q.LO], Fe.prototype, "file", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "dataURL", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "imageWidth", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "imageHeight", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "eUploadState", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "uploadProgress", void 0),
        (0, a.gn)([q.LO], Fe.prototype, "strErrorDescription", void 0);
      class Ue {
        constructor(e) {
          (this.m_fileUploadProps = new Fe()), (this.m_Callbacks = e);
        }
        get file_upload_props() {
          return this.m_fileUploadProps;
        }
        get file_upload_data_url() {
          return this.m_fileUploadProps.dataURL;
        }
        get file() {
          return this.m_fileUploadProps.file;
        }
        LogFileUploadMessage(e) {
          this.m_Callbacks.LogFileUploadMessage &&
            this.m_Callbacks.LogFileUploadMessage(e);
        }
        SetUploadFileError(e, t) {
          (this.m_fileUploadProps.eUploadState = e),
            (this.m_fileUploadProps.strErrorDescription = t),
            (this.m_fileUploadProps.displayFileName = null);
        }
        SetImageFileToUpload(e, t = je) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (!e) return void this.SetFileToUpload(null);
            if (e.size > 1024 * this.m_Callbacks.GetMaxFileSizeMB() * 1024)
              return void (10 == this.m_Callbacks.GetMaxFileSizeMB()
                ? this.SetUploadFileError(
                    Be.Error_ImageTooLarge,
                    (0, C.Xx)("#Chat_Settings_Error_ChatFileTooLarge", e.name),
                  )
                : this.SetUploadFileError(
                    Be.Error_ImageTooLarge,
                    (0, C.Xx)(
                      "#Chat_Settings_Error_ChatFileTooLarge_dynamic",
                      e.name,
                      this.m_Callbacks.GetMaxFileSizeMB(),
                    ),
                  ));
            let n = e.name.split(".").pop().toLowerCase();
            if (
              -1 ==
              [
                "jpg",
                "jpeg",
                "png",
                "gif",
                "webm",
                "mpg",
                "mp4",
                "mpeg",
                "ogv",
              ].indexOf(n)
            )
              return void this.SetUploadFileError(
                Be.Error_FileTypeNotSupported,
                (0, C.Xx)(
                  "#Chat_Settings_Error_ChatFileTypeNotSupported",
                  e.name,
                ),
              );
            const a = yield t(e);
            this.SetFileToUpload(a.file),
              (this.m_fileUploadProps.imageHeight = a.height),
              (this.m_fileUploadProps.imageWidth = a.width);
          });
        }
        SetFileToUpload(e) {
          if (
            ((this.m_fileUploadProps.file = e),
            (this.m_fileUploadProps.dataURL = null),
            (this.m_fileUploadProps.hmac = null),
            (this.m_fileUploadProps.sha1 = null),
            (this.m_fileUploadProps.imageWidth = 0),
            (this.m_fileUploadProps.imageHeight = 0),
            !e)
          )
            return void (this.m_fileUploadProps.eUploadState = Be.None);
          this.m_fileUploadProps.eUploadState = Be.FileReady;
          let t = "";
          for (; t.length < 40; )
            t += Math.floor(16 * Math.random()).toString(16);
          let n = "";
          try {
            n = URL.createObjectURL(e);
          } catch (e) {
            console.error(`Failed to created object URL from file: ${e}`);
          }
          (this.m_fileUploadProps.dataURL = n),
            (this.m_fileUploadProps.displayFileName = e.name),
            (this.m_fileUploadProps.uploadFileName =
              window.performance.now() + "_" + e.name),
            (this.m_fileUploadProps.sha1 = t),
            (this.m_fileUploadProps.hmac = ""),
            (this.m_fileUploadProps.timestamp = 0);
        }
        RetryFileUpload() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return this.BeginFileUpload(this.m_fileUploadProps.additionalProps);
          });
        }
        BeginFileUpload(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let t = this.m_fileUploadProps.file;
            if (!t)
              throw (
                ((0, $.X)(
                  !1,
                  "Must SetImageFileToUpload before calling BeginFileUpload",
                ),
                new Error("Invalid State"))
              );
            (this.m_fileUploadProps.eUploadState = Be.InProgress),
              (this.m_fileUploadProps.uploadProgress = 0),
              (this.m_fileUploadProps.additionalProps = e);
            let n = new FormData();
            n.append("sessionid", b.De.SESSIONID),
              n.append("l", b.De.LANGUAGE),
              n.append("file_size", t.size.toString()),
              n.append("file_name", this.m_fileUploadProps.uploadFileName),
              n.append("file_sha", this.m_fileUploadProps.sha1),
              n.append(
                "file_image_width",
                this.m_fileUploadProps.imageWidth.toString(),
              ),
              n.append(
                "file_image_height",
                this.m_fileUploadProps.imageHeight.toString(),
              ),
              n.append("file_type", t.type),
              this.m_Callbacks.PopulateBeginFileUploadFormData &&
                this.m_Callbacks.PopulateBeginFileUploadFormData(
                  n,
                  this.file_upload_props.additionalProps,
                );
            try {
              let e = yield fetch(
                this.m_Callbacks.GetBeginFileUploadURL() +
                  `?l=${b.De.LANGUAGE}`,
                { method: "POST", body: n, credentials: "include" },
              );
              const t = yield e.json();
              return (
                (this.m_fileUploadProps.timestamp = t.timestamp),
                (this.m_fileUploadProps.hmac = t.hmac),
                this.DoFileUpload(t.result)
              );
            } catch (e) {
              const t = null == e ? void 0 : e.response;
              let n = null;
              throw (
                ((0, q.z)(() => {
                  if (
                    ((this.m_fileUploadProps.eUploadState = Be.Error),
                    this.LogFileUploadMessage(t),
                    t)
                  ) {
                    let e = t.data;
                    t.status, e && e.success;
                    n = (null == e ? void 0 : e.message)
                      ? null == e
                        ? void 0
                        : e.message
                      : (0, C.Xx)("#Chat_Settings_Error_ServerError");
                  } else n = (0, C.Xx)("#ConnectionTrouble_FailedToConnect");
                  this.m_fileUploadProps.strErrorDescription = (0, C.Xx)(
                    "#Chat_Upload_ErrorStart",
                    n,
                  );
                }),
                n)
              );
            }
          });
        }
        DoFileUpload(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let t = this.m_fileUploadProps.file,
              n = e.use_https ? "https://" : "http://";
            n += e.url_host + e.url_path;
            let a = {
              onUploadProgress: (e) => {
                let t = (e.loaded / e.total) * 100;
                t > this.m_fileUploadProps.uploadProgress &&
                  (0, q.z)(() => {
                    this.m_fileUploadProps.uploadProgress = t;
                  });
              },
              headers: {},
              transformRequest: [(e) => e],
            };
            for (let t = 0; t < e.request_headers.length; ++t) {
              let n = e.request_headers[t];
              "Content-Length" != n.name &&
                "Host" != n.name &&
                (a.headers[n.name] = n.value);
            }
            try {
              return yield L().put(n, t, a), this.CommitFileUpload(!0, e.ugcid);
            } catch (t) {
              throw (
                (this.LogFileUploadMessage(t.response),
                (0, q.z)(() => {
                  (this.m_fileUploadProps.strErrorDescription = (0, C.Xx)(
                    "#Chat_Upload_ErrorCloud",
                  )),
                    (this.m_fileUploadProps.eUploadState = Be.Error),
                    (this.m_fileUploadProps.uploadProgress = 0);
                }),
                this.CommitFileUpload(!1, e.ugcid),
                this.m_fileUploadProps.strErrorDescription)
              );
            }
          });
        }
        CommitFileUpload(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let n = this.m_fileUploadProps.file,
              a = this.m_fileUploadProps.sha1,
              i = new FormData();
            i.append("sessionid", b.De.SESSIONID),
              i.append("l", b.De.LANGUAGE),
              i.append("file_name", this.m_fileUploadProps.uploadFileName),
              i.append("file_sha", a),
              i.append("success", e ? "1" : "0"),
              i.append("ugcid", t),
              i.append("file_type", n.type),
              i.append(
                "file_image_width",
                this.m_fileUploadProps.imageWidth.toString(),
              ),
              i.append(
                "file_image_height",
                this.m_fileUploadProps.imageHeight.toString(),
              ),
              i.append(
                "timestamp",
                this.m_fileUploadProps.timestamp.toString(),
              ),
              i.append("hmac", this.m_fileUploadProps.hmac),
              this.m_Callbacks.PopulateCommitFileUploadFormData(
                i,
                this.file_upload_props.additionalProps,
              );
            try {
              let t = yield fetch(this.m_Callbacks.GetCommitFileUploadURL(), {
                method: "POST",
                body: i,
              });
              return (
                e
                  ? ((this.m_fileUploadProps.uploadProgress = 0),
                    (this.m_fileUploadProps.eUploadState = Be.Completed))
                  : (this.m_fileUploadProps.eUploadState = Be.Error),
                t
              );
            } catch (t) {
              if (!e) return null;
              let n = null;
              throw (
                ((0, q.z)(() => {
                  if (
                    (this.LogFileUploadMessage(t),
                    (this.m_fileUploadProps.uploadProgress = 0),
                    (this.m_fileUploadProps.eUploadState = Be.Error),
                    t.response)
                  ) {
                    let e = t.response.data;
                    t.response.status, e && e.success;
                    n = e.message
                      ? e.message
                      : (0, C.Xx)("#Chat_Settings_Error_ServerError");
                  } else n = (0, C.Xx)("#ConnectionTrouble_FailedToConnect");
                  this.m_fileUploadProps.strErrorDescription = `Failed to commit upload: ${n}`;
                }),
                n)
              );
            }
          });
        }
        ClearFileUploadError() {
          (this.m_fileUploadProps.eUploadState != Be.Error &&
            this.m_fileUploadProps.eUploadState != Be.Error_ImageTooLarge &&
            this.m_fileUploadProps.eUploadState !=
              Be.Error_FileTypeNotSupported) ||
            this.Reset();
        }
        Reset() {
          this.SetFileToUpload(null);
        }
      }
      function je(e) {
        return new Promise((t) => {
          let n = new FileReader();
          (n.onload = () => {
            let a = e,
              i = (function (e) {
                let t = new DataView(e),
                  n = 0,
                  a = 0,
                  i = [],
                  l = 0;
                if (65496 == t.getUint16(n)) {
                  n += 2;
                  let o = t.getUint16(n);
                  for (n += 2; n < t.byteLength && n < 131072; ) {
                    if (65505 == o)
                      (i[l] = { recess: a, offset: n - 2 }),
                        (a = n + t.getUint16(n)),
                        l++;
                    else if (65498 == o) break;
                    (n += t.getUint16(n)), (o = t.getUint16(n)), (n += 2);
                  }
                  let r = e.byteLength - a;
                  if (
                    (i.forEach((e) => {
                      r += e.offset - e.recess;
                    }),
                    r === e.byteLength)
                  )
                    return e;
                  const s = new Uint8Array(r);
                  if (i.length > 0) {
                    let t = 0;
                    i.forEach((n) => {
                      let a = n.offset - n.recess;
                      s.set(new Uint8Array(e.slice(n.recess, n.offset)), t),
                        (t += a);
                    }),
                      s.set(new Uint8Array(e.slice(a)), t);
                  }
                  return s.buffer;
                }
                return e;
              })(n.result),
              l = new Blob([i], { type: e.type });
            if (l) {
              let t = l;
              (t.lastModifiedDate = new Date(e.lastModified)),
                (t.name = e.name),
                (a = t);
            }
            if (0 == e.type.indexOf("image")) {
              let n = new Image();
              (n.src = URL.createObjectURL(e)),
                (n.onload = (e) => {
                  t({ file: a, width: n.width, height: n.height });
                });
            } else t({ file: a, width: 0, height: 0 });
          }),
            n.readAsArrayBuffer(e);
        });
      }
      (0, a.gn)([q.aD], Ue.prototype, "SetUploadFileError", null),
        (0, a.gn)([q.aD], Ue.prototype, "SetImageFileToUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "SetFileToUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "RetryFileUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "BeginFileUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "DoFileUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "CommitFileUpload", null),
        (0, a.gn)([q.aD], Ue.prototype, "ClearFileUploadError", null),
        (0, a.gn)([q.aD], Ue.prototype, "Reset", null);
      var Xe = n(20620),
        ze = n(25871),
        He = n(22444),
        Ve = n(77865),
        We = n(94843),
        qe = n(70499),
        Ze = n.n(qe);
      const Ke = (e) => {
        const [t, n] = (0, i.useState)(!0),
          [l, o] = (0, i.useState)(null);
        if (
          ((0, i.useEffect)(() => {
            if (0 == e.appid || 0 == e.trailerBaseID)
              return void o((0, C.Xx)("#TrailerPlayer_ID_NotProvided"));
            (0, a.mG)(void 0, void 0, void 0, function* () {
              yield M.Z.Get().QueueAppRequest(e.appid, {
                include_trailers: !0,
              }),
                M.Z.Get().BHasApp(e.appid)
                  ? (M.Z.Get()
                      .GetApp(e.appid)
                      .GetAllTrailers()
                      .GetTrailerByID(e.trailerBaseID) ||
                      (console.error(
                        "Trailer " +
                          e.trailerBaseID +
                          " doesn't existed within appid " +
                          e.appid,
                      ),
                      o(
                        (0, C.Xx)(
                          "#TrailerPlayer_CouldNotLoad",
                          e.appid,
                          e.trailerBaseID,
                        ),
                      )),
                    n(!1))
                  : o(
                      (0, C.Xx)(
                        "#TrailerPlayer_CouldNotLoad",
                        e.appid,
                        e.trailerBaseID,
                      ),
                    );
            });
          }, [e.appid, e.trailerBaseID]),
          l)
        )
          return e.bIsPreviewMode
            ? i.createElement("div", { className: Ze().ErrorDiv }, l)
            : null;
        if (t)
          return i.createElement(P.V, {
            string: (0, C.Xx)("#Loading"),
            size: "small",
          });
        const r = M.Z.Get()
            .GetApp(e.appid)
            .GetAllTrailers()
            .GetTrailerByID(e.trailerBaseID),
          s = r.GetTrailerMax(),
          c = {
            sPoster: r.GetScreenshot(),
            rgVideoSources: [
              { sURL: s.strWebMURL, sFormat: "video/webm" },
              { sURL: s.strMP4URL, sFormat: "video/mp4" },
            ],
          };
        return i.createElement(We.Y, {
          bControls: !0,
          bAutoPlay: !1,
          bLoop: !1,
          video: c,
        });
      };
      var Ye = n(21003),
        Qe = n(32868),
        $e = n(90170),
        Je = n(17547);
      const et = i.lazy(() =>
          Promise.all([n.e(2706), n.e(4601)]).then(n.bind(n, 70005)),
        ),
        tt = (e) => {
          const t = (0, i.useRef)(null),
            [n, l] = (0, i.useState)(Qe.D.Get().GetVODForAppID(e.appid)),
            [o, r] = (0, i.useState)(
              !Boolean(Qe.D.Get().GetVODForAppID(e.appid)),
            );
          return (
            (0, i.useEffect)(
              () => () => t.current && t.current("VODPlayer: unmounting"),
            ),
            (0, i.useEffect)(() => {
              let i = n;
              if (
                (n &&
                  n.appid != e.appid &&
                  (i = Qe.D.Get().GetVODForAppID(e.appid)),
                !i)
              ) {
                const n = () =>
                  (0, a.mG)(void 0, void 0, void 0, function* () {
                    t.current && t.current();
                    const n = L().CancelToken.source();
                    (t.current = n.cancel),
                      (i = yield Qe.D.Get().LoadVODForAppID(e.appid)),
                      n.token.reason || l(i),
                      r(!1);
                  });
                r(!0), n();
              }
              n != i && l(i);
            }, [e.appid, n]),
            !n && e.bPreviewMode
              ? i.createElement(
                  "div",
                  null,
                  (0, C.Xx)(
                    o ? "#VODPlayer_Loading" : "#VODPlayer_ErrorLoading",
                    e.appid,
                  ),
                )
              : i.createElement(
                  "div",
                  { className: Ye.BroadcastCtn },
                  i.createElement(
                    Je.SV,
                    null,
                    i.createElement(
                      i.Suspense,
                      { fallback: i.createElement("div", null) },
                      i.createElement(et, {
                        nAppIDVOD: e.appid,
                        watchLocation:
                          $e.q2.k_EBroadcastWatchLocation_SalesPage,
                        bStartPaused: !0,
                      }),
                    ),
                  ),
                )
          );
        };
      var nt = n(54297),
        at = n(75962),
        it = n(60161),
        lt = n(5080),
        ot = n(5456);
      function rt(e) {
        const t = (0, b.id)(),
          n = (0, lt.Zh)(lt.H_),
          a = "true" === String((0, r.im)(e.args, "autoadvance")).toLowerCase();
        return i.createElement(
          ot.l,
          {
            hideArrows: !n,
            hidePips: t,
            visibleElements: 1,
            useTestScrollbar: !1,
            bLazyRenderChildren: !0,
            screenIsWide: n,
            bAutoAdvance: a,
            className: z().ScreenshotCarousel,
          },
          e.children,
        );
      }
      var st = n(44026),
        ct = n(2851);
      function mt(e) {
        const { fileUploadManager: t } = e,
          n = (0, i.useRef)();
        return i.createElement(
          "div",
          { className: ct.Ctn },
          i.createElement("input", {
            type: "file",
            accept: ".jpg,.jpeg,.png,.gif,.webm,.mpg,.mpeg,.ogv,.mp4",
            style: { display: "none" },
            name: "fileupload",
            ref: n,
            onChange: (e) => {
              var n, a;
              (null ===
                (a =
                  null === (n = e.currentTarget) || void 0 === n
                    ? void 0
                    : n.files) || void 0 === a
                ? void 0
                : a.length) > 0 &&
                (t.SetImageFileToUpload(e.currentTarget.files[0]),
                (e.currentTarget.value = ""));
            },
          }),
          i.createElement(
            st.wl,
            {
              type: "button",
              title: (0, C.Xx)("#Button_Upload"),
              onOKActionDescription: (0, C.Xx)("#Button_Upload"),
              onClick: () => n.current.click(),
            },
            i.createElement(k.pkz, null),
          ),
        );
      }
      var dt = n(25125),
        pt = n(59015);
      function ut(e) {
        const { fileUploadManager: t } = e,
          n = (0, dt.SZ)(() => t.file_upload_props.eUploadState);
        return n == Be.FileReady
          ? i.createElement(_t, { fileUploadManager: t })
          : n == Be.Error ||
            n == Be.Error_FileTypeNotSupported ||
            n == Be.Error_ImageTooLarge
          ? i.createElement(gt, { fileUploadManager: t })
          : n != Be.None
          ? i.createElement(ht, { fileUploadManager: t })
          : null;
      }
      function _t(e) {
        const { fileUploadManager: t } = e,
          n = t.file;
        return i.createElement(
          "div",
          { className: pt.UploadPreviewContainer },
          Boolean(-1 != n.type.indexOf("image")) &&
            i.createElement("img", {
              className: pt.UploadPreview,
              src: t.file_upload_data_url,
            }),
          Boolean(-1 != n.type.indexOf("video")) &&
            i.createElement(k.nkn, null),
          i.createElement(
            "div",
            { className: pt.FileUploadFileName },
            "'",
            n.name,
            "'",
          ),
          i.createElement(
            "div",
            { className: pt.FileUploadCancel, onClick: () => t.Reset() },
            i.createElement(k.pVO, null),
          ),
          i.createElement(
            He.KM,
            {
              className: pt.FileUploadBtn,
              onClick: () =>
                (0, a.mG)(this, void 0, void 0, function* () {
                  yield t.BeginFileUpload(), t.Reset();
                }),
            },
            (0, C.Xx)("#Button_Upload"),
          ),
        );
      }
      function ht(e) {
        const { fileUploadManager: t } = e,
          [n, a, l] = (0, dt.SZ)(() => [
            t.file_upload_props.file,
            t.file_upload_props.displayFileName,
            t.file_upload_props.uploadProgress,
          ]),
          o = n ? (0, C.Xx)("#Uploading_Item", a) : "",
          r = { width: l + "%" };
        return i.createElement(
          "div",
          { className: pt.FileUploadProgressContainer },
          i.createElement("div", { className: pt.FileUploadProgressName }, o),
          i.createElement(
            "div",
            {
              className: (0, w.Z)(
                pt.FileUploadProgressBarContainer,
                "DialogProgressBar_ProgressBarContainer",
              ),
            },
            i.createElement("div", {
              className: "DialogProgressBar_Value",
              style: r,
            }),
          ),
        );
      }
      function gt(e) {
        const { fileUploadManager: t } = e,
          [n, l, o] = (0, dt.SZ)(() => [
            t.file_upload_props.strErrorDescription,
            t.file_upload_props.displayFileName,
            t.file_upload_props.eUploadState,
          ]),
          r = l ? (0, C.Xx)("#Uploading_Item", l) : "",
          s = n || (0, C.Xx)("#Chat_Upload_ErrorCloud");
        return i.createElement(
          "div",
          { className: pt.FileUploadProgressContainer },
          i.createElement("div", { className: pt.FileUploadProgressName }, r),
          i.createElement(
            "div",
            { className: pt.FileUploadErrorDescription },
            s,
          ),
          i.createElement(
            "div",
            { className: pt.FileUploadActions },
            i.createElement(
              He.Uq,
              { className: "DialogLayout_NoMinWidth" },
              Boolean(o == Be.Error) &&
                i.createElement(
                  He.KM,
                  {
                    onClick: () =>
                      (0, a.mG)(this, void 0, void 0, function* () {
                        yield t.RetryFileUpload(), t.Reset();
                      }),
                  },
                  (0, C.Xx)("#Chat_Upload_ErrorAction_Retry"),
                ),
              i.createElement(
                He.zx,
                { onClick: () => t.ClearFileUploadError() },
                (0, C.Xx)("#Chat_Upload_ErrorAction_Close"),
              ),
            ),
          ),
        );
      }
      var Et = n(67736),
        vt = n(57742),
        St = n(32905),
        ft = n(21907),
        Dt = n(72985);
      class yt {
        GetInventoryForApp(e) {
          return this.m_mapInventoryByApp.get(e);
        }
        GetItemDefsChangeForAppID(e) {
          return (
            this.m_listChangeCallback.has(e) ||
              this.m_listChangeCallback.set(e, new J.pB()),
            this.m_listChangeCallback.get(e)
          );
        }
        BHasLoadedDef(e) {
          return this.m_mapPromises.has(e);
        }
        SetTestAppCommunityItems(e, t) {
          this.m_mapInventoryByApp.set(e, t),
            this.GetItemDefsChangeForAppID(e).Dispatch(t),
            this.m_mapPromises.set(e, Promise.resolve(Z.s.k_EResultOK));
        }
        LoadCommunityInventory(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return e
              ? (this.m_mapPromises.has(e) ||
                  this.m_mapPromises.set(
                    e,
                    this.InternalLoadCommunityInventory(e),
                  ),
                this.m_mapPromises.get(e))
              : Z.s.k_EResultFail;
          });
        }
        InternalLoadCommunityInventory(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const t = K.gA.Init(Dt.o0);
            t.Body().set_filter_appids([e]);
            let n = null;
            try {
              const a = yield Dt.Ts.GetCommunityInventory(
                this.m_SteamInterface.GetServiceTransport(),
                t,
              );
              if (a.GetEResult() == Z.s.k_EResultOK) {
                const t = new Array();
                return (
                  a
                    .Body()
                    .items()
                    .forEach((e) => t.push(e.toObject())),
                  this.m_mapInventoryByApp.set(e, t),
                  this.GetItemDefsChangeForAppID(e).Dispatch(t),
                  Z.s.k_EResultOK
                );
              }
              n = (0, I.l)(a);
            } catch (e) {
              n = (0, I.l)(e);
            }
            return (
              console.error(
                "CQuestCommunityInventoryStore.InternalLoadCommunityInventory failed: on appid " +
                  e +
                  " error: " +
                  (null == n ? void 0 : n.strErrorMsg),
                n,
              ),
              Z.s.k_EResultFail
            );
          });
        }
        static Get() {
          return (
            yt.s_Singleton ||
              ((yt.s_Singleton = new yt()),
              yt.s_Singleton.Init(),
              "dev" == b.De.WEB_UNIVERSE &&
                (window.g_QuestCommunityInventoryStore = yt.s_Singleton)),
            yt.s_Singleton
          );
        }
        constructor() {
          (this.m_mapInventoryByApp = new Map()),
            (this.m_mapPromises = new Map()),
            (this.m_listChangeCallback = new Map()),
            (this.m_SteamInterface = null);
        }
        Init() {
          const e = (0, b.kQ)("read_inventory_token", "application_config");
          (0, $.X)(
            e,
            "CQuestCommunityInventoryStore: missing read_inventory:steam oauth permission",
          ),
            (this.m_SteamInterface = new Y.J(b.De.WEBAPI_BASE_URL, e));
        }
      }
      function It(e) {
        const [t, n] = (0, i.useState)(yt.Get().GetInventoryForApp(e));
        return (
          (0, i.useEffect)(() => {
            e &&
              !yt.Get().BHasLoadedDef(e) &&
              yt.Get().LoadCommunityInventory(e);
          }, [e]),
          (0, h.Qg)(yt.Get().GetItemDefsChangeForAppID(e), n),
          t
        );
      }
      (0, a.gn)([h.ak], yt.prototype, "SetTestAppCommunityItems", null);
      class Ct {
        GetClaimItemState() {
          return this.m_claimState;
        }
        GetClaimStateChangeCallback() {
          return this.m_claimStateChangeCallback;
        }
        GetClaimedSaleRewardItemDef() {
          return this.m_claimedFreeItemDef;
        }
        GetNextClaimTime() {
          if (!this.m_rtNextClaimTime) return null;
          return new Date(1e3 * this.m_rtNextClaimTime);
        }
        TEST_OverrideClaimState(e) {
          (this.m_bInTestMode = !0),
            (this.m_canClaimPromise = null),
            (this.m_claimPromise = null),
            e.bCanClaimNewItem
              ? (this.m_testNextClaimFakeResponse = {
                  bAlreadyClaimedCurrentItem: !0,
                  bCanClaimNewItem: !1,
                  rtNextClaimTime: Math.floor(Date.now() / 1e3) + 3600,
                  appid: 2243810,
                  community_item_type: 2,
                  community_item_class: ft.Ve.k_ECommunityItemClass_Sticker,
                })
              : (this.m_testNextClaimFakeResponse = null),
            (this.m_claimState = e),
            this.GetClaimStateChangeCallback().Dispatch(this.m_claimState);
        }
        ActivateProfileModifier(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const t = K.gA.Init(Dt.yg);
            t.Body().set_communityitemid(e.communityitemid),
              t.Body().set_appid(e.appid),
              t.Body().set_activate(!0);
            const n = yield Dt.Ts.ActivateProfileModifierItem(
              this.m_SteamInterface.GetServiceTransport(),
              t,
            );
            return (
              n.GetEResult() != Z.s.k_EResultOK &&
                console.error(
                  `Error when calling QuestService.ActivateProfileModifierItem: EResult=${n.GetEResult()}`,
                ),
              n.GetEResult()
            );
          });
        }
        LoadCanUserClaimItem() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return this.m_bInTestMode
              ? this.m_claimState
              : (this.m_canClaimPromise ||
                  (this.m_canClaimPromise =
                    this.InternalLoadCanUserClaimItem()),
                this.m_canClaimPromise);
          });
        }
        InternalLoadCanUserClaimItem() {
          var e, t, n, i;
          return (0, a.mG)(this, void 0, void 0, function* () {
            (0, $.X)(
              b.L7.logged_in,
              "User must be logged to use CSaleItemClaimableRewardsStore",
            );
            const a = K.gA.Init(Q.FE);
            a.Body().set_language(b.De.LANGUAGE);
            let l = null;
            try {
              const o = yield Q.tE.CanClaimItem(
                this.m_SteamInterface.GetServiceTransport(),
                a,
              );
              if (o.GetEResult() == Z.s.k_EResultOK)
                return (
                  (this.m_claimedFreeItemDef = Boolean(
                    null === (e = o.Body().reward_item()) || void 0 === e
                      ? void 0
                      : e.defid(),
                  )
                    ? o.Body().reward_item().toObject()
                    : null),
                  (this.m_claimState = {
                    bCanClaimNewItem: o.Body().can_claim(),
                    bAlreadyClaimedCurrentItem: Boolean(
                      this.m_claimedFreeItemDef,
                    ),
                    appid:
                      null === (t = this.m_claimedFreeItemDef) || void 0 === t
                        ? void 0
                        : t.appid,
                    community_item_type:
                      null === (n = this.m_claimedFreeItemDef) || void 0 === n
                        ? void 0
                        : n.community_item_type,
                    community_item_class:
                      null === (i = this.m_claimedFreeItemDef) || void 0 === i
                        ? void 0
                        : i.community_item_class,
                    rtNextClaimTime:
                      o.Body().next_claim_time() > 0
                        ? o.Body().next_claim_time()
                        : void 0,
                  }),
                  (this.m_rtNextClaimTime = o.Body().next_claim_time()),
                  this.SetClaimTimer(),
                  this.GetClaimStateChangeCallback().Dispatch(
                    this.m_claimState,
                  ),
                  this.m_claimState
                );
              l = (0, I.l)(o);
            } catch (e) {
              l = (0, I.l)(e);
            }
            return (
              console.error(
                "CSaleItemClaimableRewardsStore.InternalLoadCanUserClaimItem failed: error: " +
                  (null == l ? void 0 : l.strErrorMsg),
                l,
              ),
              { bCanClaimNewItem: !1, bAlreadyClaimedCurrentItem: !1 }
            );
          });
        }
        UserClaimItem() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return (
              this.m_testNextClaimFakeResponse &&
                (console.log(
                  "CSaleItemClaimableRewardsStore - testing, pretending claim action succeeded",
                  (0, q.ZN)(this.m_testNextClaimFakeResponse),
                ),
                (this.m_claimState = this.m_testNextClaimFakeResponse),
                this.GetClaimStateChangeCallback().Dispatch(this.m_claimState),
                (this.m_rtNextClaimTime = this.m_claimState.rtNextClaimTime),
                this.SetClaimTimer(),
                (this.m_testNextClaimFakeResponse = null)),
              this.m_bInTestMode
                ? this.m_claimState
                : (this.m_claimPromise ||
                    (this.m_claimPromise = this.InternalUserClaimItem()),
                  this.m_claimPromise)
            );
          });
        }
        InternalUserClaimItem() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            (0, $.X)(
              b.L7.logged_in,
              "User must be logged to use CSaleItemClaimableRewardsStore",
            ),
              (0, $.X)(
                this.m_claimState.bCanClaimNewItem,
                "Only should be called when we previously verified you can claim something. ",
              );
            const e = K.gA.Init(Q.xs);
            e.Body().set_language(b.De.LANGUAGE);
            let t = null;
            try {
              const n = yield Q.tE.ClaimItem(
                this.m_SteamInterface.GetServiceTransport(),
                e,
              );
              if (n.GetEResult() == Z.s.k_EResultOK)
                return (
                  (this.m_claimedFreeItemDef = n
                    .Body()
                    .reward_item()
                    .toObject()),
                  (this.m_claimState = {
                    bCanClaimNewItem: !1,
                    bAlreadyClaimedCurrentItem: Boolean(
                      this.m_claimedFreeItemDef,
                    ),
                    appid: this.m_claimedFreeItemDef.appid,
                    community_item_type:
                      this.m_claimedFreeItemDef.community_item_type,
                    community_item_class:
                      this.m_claimedFreeItemDef.community_item_class,
                    rtNextClaimTime:
                      n.Body().next_claim_time() > 0
                        ? n.Body().next_claim_time()
                        : void 0,
                  }),
                  this.GetClaimStateChangeCallback().Dispatch(
                    this.m_claimState,
                  ),
                  (this.m_rtNextClaimTime = n.Body().next_claim_time()),
                  this.SetClaimTimer(),
                  this.m_claimState
                );
              if (n.GetEResult() == Z.s.k_EResultDuplicateRequest)
                return (
                  (this.m_canClaimPromise =
                    this.InternalLoadCanUserClaimItem()),
                  this.m_canClaimPromise
                );
              t = (0, I.l)(n);
            } catch (e) {
              t = (0, I.l)(e);
            }
            return (
              console.error(
                "CSaleItemClaimableRewardsStore.InternalUserClaimItem failed: error: " +
                  (null == t ? void 0 : t.strErrorMsg),
                t,
              ),
              { bCanClaimNewItem: !1, bAlreadyClaimedCurrentItem: !1 }
            );
          });
        }
        SetClaimTimer() {
          if (this.m_claimTimer) return;
          if (!this.m_rtNextClaimTime) return;
          const e = Date.now();
          let t = new Date(1e3 * this.m_rtNextClaimTime);
          const n = Math.max(0, Math.min(1, t.getTime() - e));
          this.m_claimTimer = window.setTimeout(
            () => {
              (this.m_claimTimer = void 0),
                Date.now() > t.getTime()
                  ? ((this.m_canClaimPromise = null),
                    (this.m_claimPromise = null),
                    (this.m_claimedFreeItemDef = null),
                    (this.m_claimState = {
                      bCanClaimNewItem: !0,
                      bAlreadyClaimedCurrentItem: !1,
                      rtNextClaimTime: void 0,
                    }),
                    this.GetClaimStateChangeCallback().Dispatch(
                      this.m_claimState,
                    ))
                  : this.SetClaimTimer();
            },
            n > 3e5 ? n / 2 : n,
          );
        }
        static Get() {
          return (
            Ct.s_Singleton ||
              ((Ct.s_Singleton = new Ct()),
              Ct.s_Singleton.Init(),
              "dev" == b.De.WEB_UNIVERSE &&
                (window.g_SaleItemClaimableRewardsStore = Ct.s_Singleton)),
            Ct.s_Singleton
          );
        }
        constructor() {
          (this.m_claimState = {
            bCanClaimNewItem: !1,
            bAlreadyClaimedCurrentItem: !1,
          }),
            (this.m_SteamInterface = null),
            (this.m_canClaimPromise = null),
            (this.m_claimPromise = null),
            (this.m_claimStateChangeCallback = new J.pB()),
            (this.m_testNextClaimFakeResponse = null),
            (this.m_bInTestMode = !1);
        }
        Init() {
          const e = (0, b.kQ)("loyalty_webapi_token", "application_config");
          (0, $.X)(
            e,
            "CQuestCommunityInventoryStore: missing loyalty_webapi_token oauth permission",
          ),
            (this.m_SteamInterface = new Y.J(b.De.WEBAPI_BASE_URL, e));
        }
      }
      (0, a.gn)([h.ak], Ct.prototype, "TEST_OverrideClaimState", null),
        (0, a.gn)([h.ak], Ct.prototype, "UserClaimItem", null);
      var bt = n(77557),
        At = n(39087);
      class Tt {
        GetItemDefForAppID(e) {
          return this.m_mapAppToDefs.get(e);
        }
        GetItemDefsChangeForEventID(e) {
          return (
            this.m_listChangeCallback.has(e) ||
              this.m_listChangeCallback.set(e, new J.pB()),
            this.m_listChangeCallback.get(e)
          );
        }
        BHasLoadedDef(e) {
          return this.m_mapPromises.has(e);
        }
        SetTestItemDefs(e, t) {
          this.m_mapAppToDefs.set(e, t),
            this.GetItemDefsChangeForEventID(e).Dispatch(t),
            this.m_mapPromises.set(e, Promise.resolve(Z.s.k_EResultOK));
        }
        LoadAppCommunityItems(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            return e
              ? (this.m_mapPromises.has(e) ||
                  this.m_mapPromises.set(
                    e,
                    this.InternalLoadAppCommunityItems(e, t),
                  ),
                this.m_mapPromises.get(e))
              : Z.s.k_EResultFail;
          });
        }
        InternalLoadAppCommunityItems(e, t) {
          var n, i;
          return (0, a.mG)(this, void 0, void 0, function* () {
            let a = null;
            try {
              const l =
                  b.De.COMMUNITY_BASE_URL +
                  (t
                    ? "minigame/ajaxgetgameitemdefsforeditor"
                    : "minigame/ajaxgetgameitemdefs"),
                o = {
                  appid: e,
                  origin: self.origin,
                  l: b.De.LANGUAGE,
                  sessionid: t ? b.De.SESSIONID : void 0,
                },
                r = yield L().get(l, { params: o, withCredentials: t });
              if (
                200 == (null == r ? void 0 : r.status) &&
                (null === (n = null == r ? void 0 : r.data) || void 0 === n
                  ? void 0
                  : n.success) == Z.s.k_EResultOK &&
                (null === (i = null == r ? void 0 : r.data) || void 0 === i
                  ? void 0
                  : i.item_definitions)
              )
                return (
                  this.m_mapAppToDefs.set(e, r.data.item_definitions),
                  this.GetItemDefsChangeForEventID(e).Dispatch(
                    r.data.item_definitions,
                  ),
                  Z.s.k_EResultOK
                );
              a = (0, I.l)(r);
            } catch (e) {
              a = (0, I.l)(e);
            }
            return (
              console.error(
                "CSaleMiniGameItemDefStore.InternalLoadAppCommunityItems failed: on appid " +
                  e +
                  " edit? " +
                  t +
                  " error: " +
                  (null == a ? void 0 : a.strErrorMsg),
                a,
              ),
              Z.s.k_EResultFail
            );
          });
        }
        static Get() {
          return (
            Tt.s_Singleton ||
              ((Tt.s_Singleton = new Tt()),
              Tt.s_Singleton.Init(),
              "dev" == b.De.WEB_UNIVERSE &&
                (window.g_SaleMiniGameItemDefStore = Tt.s_Singleton)),
            Tt.s_Singleton
          );
        }
        constructor() {
          (this.m_mapAppToDefs = new Map()),
            (this.m_mapPromises = new Map()),
            (this.m_listChangeCallback = new Map());
        }
        Init() {}
      }
      function kt(e, t, n) {
        const a = (function (e, t) {
            const [n, a] = (0, i.useState)(Tt.Get().GetItemDefForAppID(e));
            return (
              (0, i.useEffect)(() => {
                e &&
                  !Tt.Get().BHasLoadedDef(e) &&
                  Tt.Get().LoadAppCommunityItems(e, t);
              }, [e, t]),
              (0, h.Qg)(Tt.Get().GetItemDefsChangeForEventID(e), a),
              n
            );
          })(e, n),
          [l, o] = (0, i.useState)(null);
        return (
          (0, i.useEffect)(() => {
            if (e && a && null == l) {
              const n = a.find(
                (n) => n.active && n.appid == e && n.item_type == t,
              );
              n && o(n);
            }
          }, [l, a, e, t]),
          l
        );
      }
      function wt(e) {
        const { appid: t, community_item_type: n, bForEdit: a } = e,
          l = kt(t, n, a);
        if (
          (null == l ? void 0 : l.item_movie_mp4) &&
          (null == l ? void 0 : l.item_movie_webm)
        ) {
          const e = `${b.De.MEDIA_CDN_COMMUNITY_URL}images/items/${t}/${
              null == l ? void 0 : l.item_image_large
            }`,
            n = `${b.De.MEDIA_CDN_COMMUNITY_URL}images/items/${t}/${
              null == l ? void 0 : l.item_movie_webm
            }`,
            a = `${b.De.MEDIA_CDN_COMMUNITY_URL}images/items/${t}/${
              null == l ? void 0 : l.item_movie_mp4
            }`;
          return i.createElement(
            "video",
            { muted: !0, controls: !1, autoPlay: !0, loop: !0, poster: e },
            i.createElement("source", { src: n, type: "video/webm" }),
            Boolean(!b.De.IN_CLIENT) &&
              i.createElement("source", { src: a, type: "video/mp4" }),
          );
        }
        if (l) {
          const n = `${b.De.MEDIA_CDN_COMMUNITY_URL}images/items/${t}/${
            (null == l ? void 0 : l.item_image_small) ||
            (null == l ? void 0 : l.item_image_large)
          }`;
          return i.createElement("img", {
            className: e.className,
            src: n,
            alt: null == l ? void 0 : l.item_name,
          });
        }
        return i.createElement(P.V, {
          size: "small",
          string: (0, C.Xx)("#Loading"),
        });
      }
      function Nt(e) {
        const t = (function () {
            const [e, t] = (0, i.useState)(Ct.Get().GetClaimItemState()),
              [n, a] = (0, i.useState)(!0);
            return (
              (0, i.useEffect)(() => {
                Ct.Get()
                  .LoadCanUserClaimItem()
                  .then(t)
                  .finally(() => a(!1));
              }, []),
              (0, h.Qg)(Ct.Get().GetClaimStateChangeCallback(), t),
              Object.assign(Object.assign({}, e), { bLoading: n })
            );
          })(),
          { bLoading: n } = t,
          { className: a, bPreviewMode: l, rewardType: o } = e;
        return i.createElement(
          He.zx,
          {
            className: (0, w.Z)("CSSClaimItemButton", a),
            onClick: (e) => {
              t.bCanClaimNewItem
                ? (0, vt.AM)(
                    i.createElement(xt, { rewardType: o }),
                    (0, it.RA)(e),
                  )
                : ("dev" == b.De.WEB_UNIVERSE ||
                    "beta" == b.De.WEB_UNIVERSE ||
                    l) &&
                  ((0, vt.AM)(
                    i.createElement(xt, { rewardType: o }),
                    (0, it.RA)(e),
                  ),
                  console.log(
                    "Show dialog for debugging, since already claimed: ",
                    (0, q.ZN)(t),
                  ));
            },
            disabled: n,
          },
          Boolean(n)
            ? i.createElement(P.V, {
                string: (0, C.Xx)("#Loading"),
                size: "small",
              })
            : i.createElement(Lt, { claimState: t }),
        );
      }
      function Lt(e) {
        const { claimState: t, strButtonOverride: n, rewardType: a } = e;
        if (t.bAlreadyClaimedCurrentItem)
          return i.createElement(
            "div",
            { className: (0, w.Z)(At.CheckMark, "CSSClaimedState") },
            i.createElement(k.JrY, null),
            i.createElement(
              "span",
              null,
              " ",
              (null == n ? void 0 : n.length) > 0
                ? n
                : (0, C.Xx)("#Sale_ClaimableReward_AlreadyClaimed"),
            ),
          );
        let l = (0, C.Xx)("#Sale_ClaimableReward_generic");
        switch ((null == t ? void 0 : t.community_item_class) || a) {
          case ft.Ve.k_ECommunityItemClass_Sticker:
            l = (0, C.Xx)("#Sale_ClaimableReward_sticker");
            break;
          case ft.Ve.k_ECommunityItemClass_ProfileModifier:
            l = (0, C.Xx)("#Sale_ClaimableReward_profilemodifier");
            break;
          case ft.Ve.k_ECommunityItemClass_AnimatedAvatar:
            l = (0, C.Xx)("#Sale_ClaimableReward_animatedavatar");
        }
        return i.createElement("span", { className: "CSSUnclaimedState" }, l);
      }
      function xt(e) {
        const { closeModal: t, rewardType: n } = e,
          { fnClaimItem: a } = { fnClaimItem: Ct.Get().UserClaimItem },
          l = (0, bt.tx)(),
          [o, r] = i.useState(null);
        i.useEffect(() => {
          l.bLoading ||
            (l.fnSetLoading(!0),
            a()
              .then((e) => {
                if (
                  (r(e), console.log("claim response", (0, q.ZN)(e)), e.appid)
                ) {
                  let t = (0, C.Xx)("#Sale_ClaimableReward_completed_generic");
                  const a = (null == o ? void 0 : o.community_item_class) || n;
                  switch (a) {
                    case ft.Ve.k_ECommunityItemClass_Sticker:
                      t = (0, C.Xx)("#Sale_ClaimableReward_completed_sticker");
                      break;
                    case ft.Ve.k_ECommunityItemClass_ProfileModifier:
                      t = (0, C.Xx)(
                        "#Sale_ClaimableReward_completed_profilemodifier",
                      );
                      break;
                    case ft.Ve.k_ECommunityItemClass_AnimatedAvatar:
                      t = (0, C.Xx)(
                        "#Sale_ClaimableReward_completed_animatedavatar",
                      );
                  }
                  l.fnSetStrSuccess("   "),
                    l.fnSetElSuccess(
                      i.createElement(
                        "div",
                        { className: At.DialogCtn },
                        i.createElement("span", null, t),
                        i.createElement(Ot, {
                          appid: e.appid,
                          community_item_type: e.community_item_type,
                          rewardType: a,
                        }),
                      ),
                    );
                } else l.fnSetStrError((0, C.Xx)("#Sale_ClaimableReward_Busy"));
              })
              .catch((e) =>
                l.fnSetStrError((0, C.Xx)("#Sale_ClaimableReward_Busy")),
              ));
        }, [null == o ? void 0 : o.community_item_class, l, a, n]);
        let s = (0, C.Xx)("#Sale_ClaimableReward_generic");
        switch ((null == o ? void 0 : o.community_item_class) || n) {
          case ft.Ve.k_ECommunityItemClass_Sticker:
            s = (0, C.Xx)("#Sale_ClaimableReward_sticker");
            break;
          case ft.Ve.k_ECommunityItemClass_ProfileModifier:
            s = (0, C.Xx)("#Sale_ClaimableReward_profilemodifier");
            break;
          case ft.Ve.k_ECommunityItemClass_AnimatedAvatar:
            s = (0, C.Xx)("#Sale_ClaimableReward_animatedavatar");
        }
        return i.createElement(bt.NT, {
          state: l,
          strDialogTitle: s,
          closeModal: t,
        });
      }
      function Ot(e) {
        const { appid: t, community_item_type: n, rewardType: a } = e;
        return t && n
          ? i.createElement(
              i.Fragment,
              null,
              i.createElement(wt, { appid: t, community_item_type: n }),
              Boolean(a == ft.Ve.k_ECommunityItemClass_ProfileModifier) &&
                i.createElement(Gt, { appid: t, community_item_type: n }),
            )
          : null;
      }
      function Gt(e) {
        const { appid: t, community_item_type: n } = e,
          l = It(t),
          [o, r] = i.useState(!1);
        if (!l) return null;
        const s = l.find((e) => e.item_type == n);
        return s
          ? i.createElement(
              "div",
              { className: At.EquipCtn },
              Boolean(o)
                ? i.createElement(
                    "div",
                    null,
                    (0, C.Xx)(
                      "#Sale_ClaimableReward_profilemodifier_apply_success",
                    ),
                  )
                : i.createElement(
                    He.zx,
                    {
                      onClick: (e) => {
                        (function (e) {
                          return (0, a.mG)(this, void 0, void 0, function* () {
                            return Ct.Get().ActivateProfileModifier(e);
                          });
                        })(s).then((e) => {
                          e == Z.s.k_EResultOK && r(!0);
                        });
                      },
                    },
                    (0, C.Xx)("#Sale_ClaimableReward_profilemodifier_apply"),
                  ),
              i.createElement(
                st.IS,
                { href: `${b.De.COMMUNITY_BASE_URL}profiles/${b.L7.steamid}` },
                (0, C.Xx)("#Sale_ClaimableReward_profilemodifier_view"),
              ),
            )
          : i.createElement(
              "div",
              null,
              i.createElement(
                st.IS,
                {
                  href: `${b.De.COMMUNITY_BASE_URL}profiles/${b.L7.steamid}/edit/goldenprofile`,
                },
                (0, C.Xx)("#Sale_ClaimableReward_profilemodifier_choose"),
              ),
              i.createElement(
                st.IS,
                { href: `${b.De.COMMUNITY_BASE_URL}profiles/${b.L7.steamid}` },
                (0, C.Xx)("#Sale_ClaimableReward_profilemodifier_view"),
              ),
            );
      }
      var Rt = n(78651);
      let Bt = null;
      function Mt(e) {
        var t, n;
        let a = (0, r.im)(e.args);
        const l = (0, r.im)(e.args, "style"),
          o = (0, r.im)(e.args, "id"),
          s = (function (e) {
            return "button" === e
              ? (0, w.Z)(X.LinkButton, "LinkButton")
              : (0, w.Z)(X.Link, "Link");
          })(l),
          c = e.context.event;
        if (void 0 === a) return e.children || "";
        if ("string" == typeof a && a.length > 0) {
          const n = r.vZ(
            a,
            e.language,
            null === (t = e.context.event) || void 0 === t
              ? void 0
              : t.rtime32_last_modified,
          );
          a = "string" == typeof n ? n : n[1];
        }
        return (
          "dev" == b.De.WEB_UNIVERSE &&
            "store" == (0, b.Zv)() &&
            "store.steampowered.com" == (0, m.FM)(a) &&
            ((a = a.replace(
              "https://store.steampowered.com/",
              b.De.STORE_BASE_URL,
            )),
            "clorthax_quest" ==
              (null === (n = null == c ? void 0 : c.jsondata) || void 0 === n
                ? void 0
                : n.sale_vanity_id) &&
              (-1 == a.indexOf("?")
                ? (a += "?t=2022-06-25")
                : (a += "&t=2022-06-25"))),
          "string" == typeof a && a.length > 0 && "#" == a[0]
            ? i.createElement("a", { className: s, href: a }, e.children)
            : "steam://settings/account" == a
            ? i.createElement(
                at.ns,
                { className: s, href: "steam://settings/account" },
                e.children,
              )
            : i.createElement(
                d.z,
                { className: s, url: a, event: e.context.event, id: o },
                e.children,
              )
        );
      }
      function Pt(e) {
        const { showErrorInfo: t, event: n } = e.context;
        let a = e && e.children && e.children.toString();
        if (
          (null == a || null == a || 0 == a.length) &&
          ((a = e && e.args && e.args[""]),
          null == a || null == a || 0 == a.length)
        )
          return i.createElement(i.Fragment, null);
        const l = r.vZ(
          a,
          e.language,
          null == n ? void 0 : n.rtime32_last_modified,
        );
        if ("string" == typeof l) {
          let e;
          return (
            (a = l),
            (e = (!n || !n.BHasTag("auto_rssfeed")) && !(0, m.dK)(a)),
            t || (a = (0, m.et)(a)),
            t
              ? i.createElement(nt.e, {
                  src: a,
                  crossOrigin: e ? "anonymous" : void 0,
                })
              : i.createElement(Rt.l, {
                  src: a,
                  crossOrigin: e ? "anonymous" : void 0,
                })
          );
        }
        return i.createElement(F.j, { rgSources: l });
      }
      function Ft(e) {
        const t = (0, r.im)(e.args);
        if (null == t || null == t || 0 == t.length) return "";
        const n = e && e.children && e.children.toString(),
          a = new Array();
        return (
          a.push(
            `${b.De.MEDIA_CDN_COMMUNITY_URL}images/steamworks_docs/${b.De.LANGUAGE}/${t}`,
          ),
          "english" != b.De.LANGUAGE &&
            a.push(
              `${b.De.MEDIA_CDN_COMMUNITY_URL}images/steamworks_docs/english/${t}`,
            ),
          i.createElement(F.j, { rgSources: a, alt: n })
        );
      }
      function Ut(e) {
        const t = zt(
            e.args,
            "appid",
            e.context.event.appid ? e.context.event.appid : 0,
          ),
          n = zt(e.args, "trailerid", 0);
        return i.createElement(Ke, {
          appid: t,
          trailerBaseID: n,
          bIsPreviewMode: e.context.showErrorInfo,
        });
      }
      function jt(e) {
        const t = zt(e.args, "appid", 0);
        return i.createElement(tt, {
          appid: t,
          bPreviewMode: e.context.showErrorInfo,
        });
      }
      function Xt(e) {
        const t = (0, r.im)(e.args, "name"),
          n = (0, r.im)(e.args, "title"),
          a = (0, r.im)(e.args, "company"),
          l = (0, r.im)(e.args, "photo");
        return e.context.bShowShortSpeakerInfo
          ? i.createElement(Ve.G$, {
              name: t,
              title: n,
              company: a,
              photo: l,
              bio: e.children,
            })
          : i.createElement(Ve.qs, {
              name: t,
              title: n,
              company: a,
              photo: l,
              bio: e.children,
            });
      }
      function zt(e, t, n) {
        const a = (0, r.im)(e, t);
        return void 0 === a || null == a ? n : Number.parseInt(a);
      }
      function Ht(e) {
        const t = (0, r.im)(e.args, "name"),
          n =
            "true" === ((0, r.im)(e.args, "visible") || "false").toLowerCase(),
          a = (0, Xe.x)(t);
        if (!t) {
          return e.context.showErrorInfo
            ? i.createElement("div", null, "Failed to provide giveaway name")
            : null;
        }
        return a && a.registered && ((a.eligible && n) || (!a.eligible && !n))
          ? e.children
          : null;
      }
      function Vt(e) {
        const t = e.context.showErrorInfo;
        if (!b.L7.logged_in)
          return i.createElement(
            He.zx,
            { onClick: St.X, className: "CSSClaimItemLoginButton" },
            (0, C.Xx)("#Sale_ClaimableReward_Login"),
          );
        const n = (0, r.im)(e.args, "type");
        let a;
        if (n)
          switch (n) {
            case "profilemodifier":
              a = ft.Ve.k_ECommunityItemClass_ProfileModifier;
              break;
            case "sticker":
              a = ft.Ve.k_ECommunityItemClass_Sticker;
          }
        return i.createElement(Nt, { bPreviewMode: t, rewardType: a });
      }
      function Wt(e) {
        const t = Number.parseInt((0, r.im)(e.args, "id")) || 0,
          n =
            "true" === ((0, r.im)(e.args, "visible") || "false").toLowerCase(),
          a = e.context.showErrorInfo,
          [l, o] = (0, ze.ie)(t, {});
        if (!t || o == ze.Y0.k_EStoreItemCacheState_Loading)
          return !t && a
            ? i.createElement("div", null, "Error: PackageID Not Set")
            : null;
        let s = !1;
        return (
          (s = M.Z.Get().BHasStoreItem(t, Pe.vn.k_EStoreItemType_Package)
            ? Boolean(l.GetBestPurchaseOption())
            : !M.Z.Get().BIsPackageUnavailableDueToCountryRestriction(t)),
          (!s && !n) || (s && n) ? e.children : null
        );
      }
      function qt(e) {
        if ("GameAwardDrop2022" === e) {
          const t = (0, Xe.x)(e),
            n = (0, Xe.v)();
          return t
            ? t.registered
              ? {
                  bInitialState: !1,
                  bSuccessState: t.eligible,
                  bFailedState: !t.eligible,
                  fnAction: t.eligible
                    ? void 0
                    : () =>
                        (0, a.mG)(this, void 0, void 0, function* () {
                          yield n.fnCreateRegistration(e);
                        }),
                }
              : {
                  bInitialState: !0,
                  fnAction: () =>
                    (0, a.mG)(this, void 0, void 0, function* () {
                      yield n.fnCreateRegistration(e);
                    }),
                }
            : { bInitialState: !0 };
        }
        return { bInitialState: !0 };
      }
      function Zt(e) {
        const t = (0, r.im)(e.args, "action"),
          n = (0, r.im)(e.args, "initialToken"),
          a = (0, r.im)(e.args, "successToken"),
          l = (0, r.im)(e.args, "failToken"),
          o = qt(t);
        if (!(t && n && a && l)) {
          return e.context.showErrorInfo
            ? i.createElement(
                "div",
                null,
                "Failed to provide all tokens. Dialog will not appear",
              )
            : null;
        }
        return b.L7.logged_in || "test" == t || "nologinrequired" == t
          ? i.createElement(
              He.zx,
              {
                className: "CSSActionDialogButton",
                onClick: (o) => {
                  (0, vt.AM)(
                    i.createElement(
                      Kt,
                      {
                        strAction: t,
                        strInitialToken: n,
                        strSuccessToken: a,
                        strFailToken: l,
                      },
                      e.children,
                    ),
                    (0, it.RA)(o),
                  );
                },
              },
              Boolean(o.bInitialState) && (0, C.Xx)(n),
              Boolean(o.bSuccessState) && (0, C.Xx)(a),
              Boolean(o.bFailedState) && (0, C.Xx)(l),
            )
          : i.createElement(
              He.zx,
              { className: "CSSActionDialogButton", onClick: St.X },
              (0, C.Xx)("#Login_SignIn"),
            );
      }
      function Kt(e) {
        const {
            strAction: t,
            children: n,
            closeModal: a,
            strInitialToken: l,
            strSuccessToken: o,
            strFailToken: r,
          } = e,
          s = qt(t),
          [c, m] = i.useState(Boolean(s.fnAction));
        return (
          i.useEffect(() => {
            s.fnAction && (m(!0), s.fnAction().finally(() => m(!1)));
          }, [s]),
          i.createElement(
            Et.RG,
            {
              bDisableBackgroundDismiss: !0,
              closeModal: a,
              onCancel: a,
              className: "CSSActionDialogDialog",
            },
            i.createElement(
              He.h4,
              null,
              Boolean(s.bInitialState) && (0, C.Xx)(l),
              Boolean(s.bSuccessState) && (0, C.Xx)(o),
              Boolean(s.bFailedState) && (0, C.Xx)(r),
            ),
            i.createElement(
              He.uT,
              null,
              i.createElement(
                He.Ac,
                null,
                c
                  ? i.createElement(P.V, {
                      size: "medium",
                      position: "center",
                      string: (0, C.Xx)("#Loading"),
                    })
                  : n,
              ),
            ),
          )
        );
      }
      function Yt(e) {
        const { showErrorInfo: t, event: n } = e.context,
          a = n.clanSteamID.GetAccountID(),
          [l] = i.useState(
            new Ue(
              (function (e) {
                const t = {
                  PopulateBeginFileUploadFormData: (t) => {
                    t.append("clan_account_id", "" + e);
                  },
                  PopulateCommitFileUploadFormData: (t) => {
                    t.append("clan_account_id", "" + e);
                  },
                  GetBeginFileUploadURL: () =>
                    b.De.STORE_BASE_URL + "saleaction/ajaxbeginfileupload",
                  GetCommitFileUploadURL: () =>
                    b.De.STORE_BASE_URL + "saleaction/ajaxcommitfileupload",
                  LogFileUploadMessage: (e) => {
                    console.log("UploadFileButton: ", e);
                  },
                  GetMaxFileSizeMB: () => 100,
                };
                return t;
              })(a),
            ),
          );
        return a == Me.sq ||
          a == Me.RQ ||
          (b.De.EUNIVERSE == O.xO.k_EUniverseBeta && a == Me.$Y) ||
          (b.De.EUNIVERSE == O.xO.k_EUniversePublic && a == Me._L)
          ? i.createElement(
              "div",
              null,
              i.createElement(mt, { fileUploadManager: l }),
              i.createElement(ut, { fileUploadManager: l }),
            )
          : t
          ? i.createElement("div", null, (0, C.Xx)("#CloudUpload_NotSupport"))
          : null;
      }
      class Qt extends i.Component {
        constructor(e) {
          super(e),
            (this.m_parser = new l.Z6(
              Qt.sm_BBCodeDictionary,
              this.ElementAccumulator,
              e.languageOverride,
            ));
        }
        ElementAccumulator(e) {
          return new _(
            new u(
              new p(
                new o.So(new o.LT(), 0),
                e,
                (null == Se &&
                  (Se = (0, b.h4)()
                    ? [
                        { urlRegExp: new RegExp(se), fnBBComponent: be },
                        { urlRegExp: new RegExp(me), fnBBComponent: we },
                        { urlRegExp: new RegExp(de), fnBBComponent: ke },
                        { urlRegExp: new RegExp(ce), fnBBComponent: Te },
                        { urlRegExp: new RegExp(Ee), fnBBComponent: Oe },
                      ]
                    : [
                        {
                          urlRegExp: new RegExp(/youtu.be|youtube.com/i),
                          fnBBComponent: fe,
                        },
                        {
                          urlRegExp: new RegExp(
                            /community.+sharedfiles\/filedetails\/\?id=\d+/i,
                          ),
                          fnBBComponent: Ie,
                        },
                        { urlRegExp: new RegExp(se), fnBBComponent: be },
                        { urlRegExp: new RegExp(me), fnBBComponent: we },
                        { urlRegExp: new RegExp(de), fnBBComponent: ke },
                        { urlRegExp: new RegExp(ce), fnBBComponent: Te },
                        { urlRegExp: new RegExp(pe), fnBBComponent: De },
                        { urlRegExp: new RegExp(ue), fnBBComponent: ye },
                        { urlRegExp: new RegExp(_e), fnBBComponent: Ne },
                        { urlRegExp: new RegExp(he), fnBBComponent: Le },
                        { urlRegExp: new RegExp(ge), fnBBComponent: xe },
                        { urlRegExp: new RegExp(Ee), fnBBComponent: Oe },
                        { urlRegExp: new RegExp(ve), fnBBComponent: Ae },
                      ]),
                Se),
                {
                  partnerEventStore: this.props.partnerEventStore,
                  event: this.props.event,
                },
              ),
            ),
            e,
          );
        }
        static AddDictionary(e) {
          Qt.sm_BBCodeDictionary = new Map([
            ...Array.from(Qt.sm_BBCodeDictionary.entries()),
            ...Array.from(e.entries()),
          ]);
        }
        render() {
          return (
            this.m_parser.UpdateOverrideLanguage(this.props.languageOverride),
            this.m_parser.ParseBBCode(this.props.text, {
              showErrorInfo: this.props.showErrorInfo,
              event: this.props.event,
              bShowShortSpeakerInfo: this.props.bShowShortSpeakerInfo,
            })
          );
        }
      }
      (Qt.sm_BBCodeDictionary = new Map([
        ...Array.from(r.Be.entries()),
        ...Array.from(
          (null == Bt &&
            (Bt = new Map([
              ["url", { Constructor: Mt, autocloses: !1 }],
              [
                "h1",
                {
                  Constructor: r.LW(r.R6, X.Header1),
                  autocloses: !1,
                  skipFollowingNewline: !0,
                },
              ],
              [
                "h2",
                {
                  Constructor: r.LW(r.zV, X.Header2),
                  autocloses: !1,
                  skipFollowingNewline: !0,
                },
              ],
              [
                "h3",
                {
                  Constructor: r.LW(r.BB, X.Header3),
                  autocloses: !1,
                  skipFollowingNewline: !0,
                },
              ],
              [
                "quote",
                { Constructor: r.LW(r.pu, X.BlockQuote), autocloses: !1 },
              ],
              [
                "list",
                {
                  Constructor: r.LW(r.aV, X.UnorderedList),
                  autocloses: !1,
                  skipInternalNewline: !0,
                },
              ],
              [
                "olist",
                {
                  Constructor: r.LW(r.GS, X.OrderedList),
                  autocloses: !1,
                  skipInternalNewline: !0,
                },
              ],
              [
                "*",
                { Constructor: r.HC, autocloses: !0, skipInternalNewline: !0 },
              ],
              ["img", { Constructor: Pt, autocloses: !1 }],
              ["previewyoutube", { Constructor: r.MJ, autocloses: !1 }],
              ["looping_media", { Constructor: r.jj, autocloses: !1 }],
              ["video", { Constructor: r.qy, autocloses: !1 }],
              ["youtubeorvideo", { Constructor: r.YC, autocloses: !1 }],
              ["trailer", { Constructor: Ut, autocloses: !0 }],
              ["vod", { Constructor: jt, autocloses: !1 }],
              [
                "speaker",
                {
                  Constructor: Xt,
                  autocloses: !1,
                  skipInternalNewline: !0,
                  allowWrapTextForCopying: !0,
                },
              ],
              ["giveawayeligible", { Constructor: Ht, autocloses: !1 }],
              ["claimitem", { Constructor: Vt, autocloses: !0 }],
              ["packagepurchaseable", { Constructor: Wt, autocloses: !1 }],
              ["actiondialog", { Constructor: Zt, autocloses: !1 }],
              ["uploadfilebutton", { Constructor: Yt, autocloses: !0 }],
              ["docimg", { Constructor: Ft, autocloses: !1 }],
              ["carousel", { Constructor: rt, autocloses: !1 }],
            ])),
          Bt).entries(),
        ),
      ])),
        (0, a.gn)([h.ak], Qt.prototype, "ElementAccumulator", null);
    },
    5386: (e, t, n) => {
      "use strict";
      n.d(t, { Pi: () => v, ko: () => S, uW: () => E });
      var a = n(33940),
        i = n(88464),
        l = n(25125),
        o = n(89526),
        r = n(75457),
        s = n(63903),
        c = n(7948),
        m = n(52629),
        d = n.n(m),
        p = n(19304),
        u = n(14826),
        _ = n(72120),
        h = n(4306),
        g = n(84343);
      let E = class extends o.Component {
        GenerateLanguageOptions() {
          let e = [];
          const {
            fnFilterLanguage: t,
            fnLangHasData: n,
            fnLastUpdateRTime: a,
            fnIsLangSupported: i,
          } = this.props;
          this.props.bAllowUnsetOption &&
            e.push(
              o.createElement(
                "option",
                { key: "langpicker_unset", value: r.Df.k_Lang_None },
                (0, u.Xx)("#language_selection_none"),
              ),
            );
          let l = new Array();
          const c = this.props.realms || [s.IN.k_ESteamRealmGlobal];
          for (const e of u.LJ.GetLanguageListForRealms(c)) {
            if (t && !t(e)) continue;
            const n = (0, r.j_)(e),
              a = (0, u.Xx)("#Language_" + n),
              o = Boolean(i) && i(e);
            l.push({ eLang: e, sLocName: a, bSupported: o });
          }
          l.sort((e, t) =>
            e.bSupported != t.bSupported
              ? e.bSupported
                ? -1
                : 1
              : e.sLocName.localeCompare(t.sLocName),
          );
          let m = !1;
          for (const t of l) {
            t.bSupported != m &&
              (e.push(
                o.createElement(
                  "option",
                  {
                    key: t.bSupported ? "SupportedGroup" : "UnsupportedGroup",
                    className: d().SupportedGroupLabel,
                    disabled: !0,
                  },
                  (0, u.Xx)(
                    t.bSupported
                      ? "#LanguageGroup_Supported"
                      : "#LanguageGroup_Unsupported",
                  ),
                ),
              ),
              (m = t.bSupported));
            const i = n && n(t.eLang),
              l = a && a(t.eLang);
            let r = t.sLocName;
            l &&
              0 !== l &&
              ((r += " "),
              (r += (0, u.Xx)(
                "#Language_Last_Update",
                (0, u.vX)(l) + " @ " + (0, _.Sc)(l, { bForce24HourClock: !1 }),
              ))),
              e.push(
                o.createElement(
                  "option",
                  {
                    key: "langpicker" + t.eLang + (i ? "_hasdata" : ""),
                    value: t.eLang,
                    className: (0, p.Z)(
                      { [d().LanguageWithContent]: i },
                      t.bSupported
                        ? d().SupportedLanguage
                        : d().UnsupportedLanguage,
                    ),
                  },
                  r,
                ),
              );
          }
          return e;
        }
        OnLanguageChange(e) {
          const { fnOnLanguageChanged: t, selectedLang: n } = this.props;
          let a = Number.parseInt(e.currentTarget.value);
          a != n && t && t(a);
        }
        render() {
          const { selectedLang: e, bDisabled: t, strTooltip: n } = this.props;
          let a = this.GenerateLanguageOptions();
          return o.createElement(
            g.HP,
            { toolTipContent: n },
            o.createElement(
              "select",
              { value: e, onChange: this.OnLanguageChange, disabled: t },
              a,
            ),
          );
        }
      };
      function v(e) {
        const [t, n] = (0, l.SZ)(() => [
          c.U.Get().GetHasLocalizationContext(),
          c.U.Get().GetCurEditLanguage(),
        ]);
        return o.createElement(E, {
          selectedLang: n,
          fnLangHasData: c.U.Get().BHasLanguageData,
          fnOnLanguageChanged: c.U.Get().SetCurEditLanguage,
          bDisabled: !t,
          strTooltip: t ? void 0 : (0, u.Xx)("#Localization_EditorNotInFocus"),
        });
      }
      function S(e) {
        const { fnLangHasData: t } = e;
        o.useEffect(
          () => (
            c.U.Get().SetHasLocalizationContext(!0),
            () => c.U.Get().SetHasLocalizationContext(!1)
          ),
          [],
        );
        const n = (0, l.SZ)(() => {
          const e = [];
          for (let n = r.Df.k_Lang_English; n < r.Df.k_Lang_MAX; ++n)
            e[n] = t(n);
          return e;
        });
        return (
          o.useEffect(() => c.U.Get().SetHasLanguage(n), [n]),
          o.createElement(o.Fragment, null)
        );
      }
      (0, a.gn)([h.ak], E.prototype, "OnLanguageChange", null),
        (E = (0, a.gn)([i.Pi], E));
    },
    77865: (e, t, n) => {
      "use strict";
      n.d(t, { qs: () => v, pj: () => S, G$: () => f });
      var a = n(33940),
        i = n(88464),
        l = n(89526),
        o = n(14288),
        r = n(75457),
        s = n(894),
        c = n(69206),
        m = (n(84343), n(4306)),
        d = n(32765),
        p = n(24174),
        u = n(4116);
      function _(e) {
        return new u.So(new u.LT(), 0);
      }
      function h(e) {
        const { text: t, languageOverride: n } = e,
          [a] = (0, l.useState)(
            new p.Z6(new Map([...Array.from(o.Be.entries())]), _, n),
          );
        return l.createElement(l.Fragment, null, a.ParseBBCode(t, {}));
      }
      var g = n(30204),
        E = n.n(g);
      const v = (0, i.Pi)((e) => {
        const t = e.photo ? (0, o.vZ)(e.photo, (0, r.jM)(d.De.LANGUAGE)) : null,
          n = e.photo ? ("string" == typeof t ? t : t[1]) : null,
          a = Boolean(e.title),
          i = Boolean(e.company);
        return l.createElement(
          "div",
          { className: E().SpeakerPopup, onMouseLeave: e.fnClose },
          l.createElement(
            "div",
            { className: E().SpeakerInfoOuter },
            e.photo && l.createElement("img", { src: n }),
            l.createElement(
              "div",
              { className: E().SpeakerInfoInner },
              l.createElement("div", null, e.name),
              (a || i) &&
                l.createElement(
                  "div",
                  null,
                  a &&
                    l.createElement(
                      "span",
                      { className: E().SpeakerTitle },
                      e.title,
                    ),
                  a && i && l.createElement("span", null, ", "),
                  i && l.createElement("span", null, e.company),
                ),
            ),
          ),
          e.bio &&
            l.createElement(
              "div",
              { className: E().SpeakerBio },
              e.bio,
              e.bioString && l.createElement(h, { text: e.bioString }),
            ),
        );
      });
      class S extends l.Component {
        constructor() {
          super(...arguments), (this.m_refAnchor = l.createRef());
        }
        ClosePopup() {
          this.m_fnHidePopup &&
            (this.m_fnHidePopup(),
            (this.m_fnHidePopup = null),
            window.removeEventListener("scroll", this.OnScroll));
        }
        componentWillUnmount() {
          this.ClosePopup();
        }
        OnScroll() {
          Math.abs(window.scrollY - this.m_nScrollPosAtHoverStart) > 50 &&
            this.ClosePopup();
        }
        OnHover(e) {
          const t = this.m_refAnchor.current;
          if (!t) return;
          const n = {
              direction: "right",
              bEnablePointerEvents: !0,
              style: { maxWidth: 640, minHeight: t.clientHeight },
              target: t,
            },
            a = "presenter-hover-" + Math.floor(1e8 * Math.random());
          (this.m_fnHidePopup = () =>
            S.sm_embeddedElements.HideElement(t.ownerDocument, a)),
            window.addEventListener("scroll", this.OnScroll),
            (this.m_nScrollPosAtHoverStart = window.scrollY);
          S.sm_embeddedElements.ShowElementDelayed(
            t.ownerDocument,
            150,
            l.createElement(
              c.T,
              Object.assign({}, n),
              l.createElement(
                v,
                Object.assign({}, this.props, { fnClose: this.OnLeave }),
              ),
            ),
            a,
          );
        }
        OnLeave(e) {
          this.ClosePopup();
        }
        render() {
          return l.createElement(
            "div",
            {
              className: E().SpeakerHover,
              ref: this.m_refAnchor,
              onMouseEnter: this.OnHover,
              onFocus: this.OnHover,
              onMouseLeave: this.OnLeave,
              onBlur: this.OnLeave,
            },
            this.props.children,
          );
        }
      }
      (S.sm_embeddedElements = new s.AN("presenter-hover-source-elements")),
        (0, a.gn)([m.ak], S.prototype, "ClosePopup", null),
        (0, a.gn)([m.ak], S.prototype, "OnScroll", null),
        (0, a.gn)([m.ak], S.prototype, "OnHover", null),
        (0, a.gn)([m.ak], S.prototype, "OnLeave", null);
      class f extends l.Component {
        render() {
          const e = this.props.photo
              ? (0, o.vZ)(this.props.photo, (0, r.jM)(d.De.LANGUAGE))
              : null,
            t =
              this.props.photo && !this.props.hidePhotoInCompactView
                ? "string" == typeof e
                  ? e
                  : e[1]
                : null,
            n = Boolean(this.props.title),
            a = Boolean(this.props.company);
          return l.createElement(
            "div",
            { className: E().SpeakerOuter },
            l.createElement(
              S,
              Object.assign({}, this.props),
              l.createElement(
                "div",
                { className: E().Speaker },
                l.createElement(
                  "div",
                  { className: E().SpeakerInfoOuter },
                  !!t && l.createElement("img", { src: t }),
                  l.createElement(
                    "div",
                    { className: E().SpeakerInfoInner },
                    l.createElement("div", null, this.props.name),
                    (n || a) &&
                      l.createElement(
                        "div",
                        null,
                        n &&
                          l.createElement(
                            "span",
                            { className: E().SpeakerTitle },
                            this.props.title,
                          ),
                        n && a && l.createElement("span", null, ", "),
                        a && l.createElement("span", null, this.props.company),
                      ),
                  ),
                ),
              ),
            ),
          );
        }
      }
    },
    55330: (e, t, n) => {
      "use strict";
      n.d(t, { i: () => p });
      var a = n(89526),
        i = n(75457),
        l = n(68818),
        o = n(13345),
        r = n(19304),
        s = n(14826),
        c = n(207),
        m = n(32765),
        d = n(31265);
      function p(e) {
        const { gidEvent: t } = e,
          n = (0, l.XC)(t),
          [p, u] = (0, a.useMemo)(() => {
            var e, t, a, l;
            if (
              (null ===
                (t =
                  null === (e = null == n ? void 0 : n.jsondata) || void 0 === e
                    ? void 0
                    : e.localized_sale_product_banner) || void 0 === t
                ? void 0
                : t.length) > 0 &&
              (null ===
                (l =
                  null === (a = null == n ? void 0 : n.jsondata) || void 0 === a
                    ? void 0
                    : a.localized_sale_product_mobile_banner) || void 0 === l
                ? void 0
                : l.length) > 0
            ) {
              const e = (0, i.jM)(m.De.LANGUAGE),
                t = s.LZ.GetWithFallback(
                  n.jsondata.localized_sale_product_banner,
                  e,
                ),
                a = s.LZ.GetWithFallback(
                  n.jsondata.localized_sale_product_mobile_banner,
                  e,
                );
              if (
                (null == t ? void 0 : t.length) > 0 &&
                (null == a ? void 0 : a.length) > 0
              ) {
                const e = n.clanSteamID.GetAccountID();
                return [`${(0, o.OL)()}${e}/${t}`, `${(0, o.OL)()}${e}/${a}`];
              }
            }
            return [null, null];
          }, [n]);
        return (null == p ? void 0 : p.length) > 0 &&
          (null == u ? void 0 : u.length) > 0
          ? a.createElement(
              "a",
              { href: (0, c.OL)(n.GetSaleURL()), className: d.Link },
              a.createElement("img", {
                src: p,
                className: (0, r.Z)(d.Banner, d.Big),
              }),
              a.createElement("img", {
                src: u,
                className: (0, r.Z)(d.Banner, d.Mobile),
              }),
            )
          : null;
      }
    },
    41200: (e, t, n) => {
      "use strict";
      n.d(t, { Gp: () => D, Q0: () => y, ko: () => I });
      var a = n(33940),
        i = n(54905),
        l = n.n(i),
        o = n(89526),
        r = n(75457),
        s = n(63903),
        c = n(97334),
        m = n(22444),
        d = n(52629),
        p = n(67736),
        u = n(57742),
        _ = n(3301),
        h = n(23217),
        g = n(19304),
        E = n(14826),
        v = n(11170),
        S = n(84343),
        f = n(79629);
      const D = (e) => {
          const t = (t, n) => {
            t.preventDefault();
            const {
                fnGetLocData: a,
                closeModal: i,
                strFileNamePrefix: l,
                lang: o,
              } = e,
              s = a(),
              c = new v.i();
            let m = l ? l + "_localization" : "localization";
            switch (n) {
              case "csv_row":
                c.WriteLocalizationData_CSV_LanguageRows(s, m + ".csv");
                break;
              case "csv_column":
                c.WriteLocalizationData_CSV_LanguageColumns(s, m + ".csv");
                break;
              case "csv_token":
                c.WriteLocalizationData_CSV_TokenAndLanguageColumns(
                  s,
                  m + ".csv",
                );
                break;
              case "xml":
                c.WriteLocalizationData_XML_SingleLanguage(
                  s,
                  o,
                  m + "_" + (0, r.eV)((0, r.j_)(o)) + ".xml",
                );
            }
            i && i();
          };
          return o.createElement(
            o.Fragment,
            null,
            Boolean(e.bShowCSV) &&
              o.createElement(
                o.Fragment,
                null,
                o.createElement(
                  m.KM,
                  { onClick: (e) => t(e, "csv_row") },
                  (0, E.Xx)("#Localization_Export_Btn_RowLanguages"),
                ),
                o.createElement(
                  m.KM,
                  { onClick: (e) => t(e, "csv_column") },
                  (0, E.Xx)("#Localization_Export_Btn_ColumnLanguages"),
                ),
                o.createElement(
                  m.KM,
                  { onClick: (e) => t(e, "csv_token") },
                  (0, E.Xx)("#Localization_Export_Btn_TokenLanguages"),
                ),
              ),
            Boolean(e.bShowXML) &&
              o.createElement(
                m.KM,
                { onClick: (e) => t(e, "xml") },
                (0, E.Xx)("#Localization_Export_Btn_XML"),
              ),
          );
        },
        y = (e) => {
          const [t, n] = (0, o.useState)(!1),
            i = (e, t) => {
              n(!1),
                console.log(
                  "ImportLocalizationAction: On Handle Parse error: " +
                    e.message,
                  e,
                ),
                (0, u.AM)(
                  o.createElement(
                    p.JX,
                    null,
                    o.createElement(
                      "div",
                      null,
                      o.createElement(
                        "p",
                        null,
                        (0, E.Xx)("#Localization_Error_Input"),
                      ),
                      o.createElement("p", null, e.message),
                    ),
                  ),
                  window,
                );
            },
            m = (e) => {
              n(!1);
              let t = "";
              e.forEach((e) => {
                t.length > 0 && (t += ", "),
                  (t += (0, E.Xx)("#Language_" + (0, r.j_)(e)));
              }),
                (0, u.AM)(
                  o.createElement(
                    p.uH,
                    {
                      strTitle: (0, E.Xx)("#EventDisplay_Share_Success"),
                      bAlertDialog: !0,
                    },
                    o.createElement(
                      "div",
                      null,
                      0 == t.length
                        ? (0, E.Xx)(
                            "#Localization_Success_ImportComplete_NoChange",
                          )
                        : (0, E.Xx)("#Localization_Success_ImportComplete", t),
                    ),
                  ),
                  window,
                );
            },
            D = (t) =>
              (0, a.mG)(void 0, void 0, void 0, function* () {
                let a = t.target.files;
                if (a && a.length > 0) {
                  n(!0);
                  let t = new Array(),
                    o = new v.i();
                  for (let n = 0; n < a.length; ++n)
                    if (a[n]) {
                      if (a[n].name.toLocaleLowerCase().endsWith(".csv"))
                        return void l().parse(a[0], {
                          header: !0,
                          complete: (t) => {
                            let n = new v.i().DetectAndFormatCSV(t);
                            if (!n)
                              return void i({
                                code: "",
                                message: "",
                                row: 0,
                                type: "filenameerror",
                              });
                            const a = E.LJ.GetLanguageListForRealms([
                                s.IN.k_ESteamRealmGlobal,
                              ]),
                              l = e.fnOnImportLocData(n, a);
                            m(l);
                          },
                          error: i,
                        });
                      if (a[n].name.toLocaleLowerCase().endsWith(".xml")) {
                        let l = (0, c.Z)(a[n].name, r.Df.k_Lang_None);
                        if (null == l || l == r.Df.k_Lang_None)
                          return void i({
                            code: "",
                            message: (0, E.Xx)(
                              "#Localization_Error_FileLangauage",
                              a[n].name,
                            ),
                            row: 0,
                            type: "filenameerror",
                          });
                        try {
                          const i =
                            yield o.ReadLocalizationData_XML_SingleLanguage(
                              a[n],
                              l,
                            );
                          e.fnOnImportLocData(i, [l]).map((e) => {
                            -1 == t.indexOf(e) && t.push(e);
                          });
                        } catch (e) {
                          let t = (0, h.l)(e);
                          return void i({
                            code: "",
                            message: (0, E.Xx)(
                              "#Localization_Error_XMLParseError",
                              t.strErrorMsg,
                            ),
                            row: 0,
                            type: "parseerror",
                          });
                        }
                      } else
                        i({
                          code: "",
                          message: (0, E.Xx)(
                            "#Localization_Error_FileExtention",
                            a[n].name,
                          ),
                          row: 0,
                          type: "filenameerror",
                        });
                    }
                  m(t);
                }
              });
          return o.createElement(
            S.HP,
            {
              className: (0, g.Z)(
                e.className ? e.className : d.EditPreviewButton,
              ),
              toolTipContent: e.strToolTip,
            },
            o.createElement(
              "label",
              { className: f.ImportButton, htmlFor: "importlocalization" },
              t && o.createElement(_.V, { size: "small" }),
              o.createElement(
                "div",
                { className: f.Label },
                (0, E.Xx)(e.strLabel ? e.strLabel : "#Localization_Import_Btn"),
              ),
              o.createElement("input", {
                id: "importlocalization",
                className: f.ImportButton,
                style: { display: "none" },
                type: "file",
                onSubmit: D,
                onChange: D,
                multiple: !0,
              }),
            ),
          );
        },
        I = (e) => {
          const {
              fnOnImportLocData: t,
              closeModal: n,
              sampleLocData: a,
              sampleFilename: i,
            } = e,
            l = new v.i();
          return o.createElement(
            p.RG,
            { onCancel: n, closeModal: n },
            o.createElement(m.h4, null, (0, E.Xx)("#ImportLoc_Title")),
            o.createElement(
              m.uT,
              null,
              o.createElement("div", null, (0, E.Xx)("#ImportLoc_Description")),
              o.createElement(
                "div",
                { className: f.ImportLocSampleButtonCtn },
                o.createElement(
                  "div",
                  { className: f.SampleTitle },
                  (0, E.Xx)("#ImportLoc_SampleTitle"),
                ),
                o.createElement(
                  m.zx,
                  {
                    onClick: () =>
                      l.WriteLocalizationData_CSV_LanguageRows(
                        a,
                        i + "_row.csv",
                      ),
                  },
                  (0, E.Xx)("#ImportLoc_CSVLangPerRow"),
                ),
                o.createElement(
                  m.zx,
                  {
                    onClick: () =>
                      l.WriteLocalizationData_CSV_LanguageColumns(
                        a,
                        i + "_col.csv",
                      ),
                  },
                  (0, E.Xx)("#ImportLoc_CSVLangPerCol"),
                ),
                o.createElement(
                  m.zx,
                  {
                    onClick: () =>
                      l.WriteLocalizationData_CSV_TokenAndLanguageColumns(
                        a,
                        i + "_token.csv",
                      ),
                  },
                  (0, E.Xx)("#ImportLoc_CSVTokenLang"),
                ),
                o.createElement(
                  m.zx,
                  {
                    onClick: () =>
                      l.WriteLocalizationData_XML_SingleLanguage(
                        a,
                        r.Df.k_Lang_English,
                        i + "xml",
                      ),
                  },
                  (0, E.Xx)("#ImportLoc_XML"),
                ),
              ),
            ),
            o.createElement(
              m.$_,
              null,
              o.createElement(y, {
                strLabel: (0, E.Xx)("#BuildNotes_ImportLocalization"),
                fnOnImportLocData: (e, a) => {
                  const i = t(e, a);
                  return n(), i;
                },
              }),
            ),
          );
        };
    },
    87178: (e, t, n) => {
      "use strict";
      n.d(t, { j: () => o });
      var a = n(33940),
        i = n(89526),
        l = n(4306);
      class o extends i.Component {
        constructor(e) {
          super(e),
            (this.m_refImage = i.createRef()),
            (this.state = { nImage: 0 });
        }
        componentDidUpdate(e) {
          JSON.stringify(this.props.rgSources) != JSON.stringify(e.rgSources) &&
            this.setState({ nImage: 0 });
        }
        get src() {
          let e = "";
          return (
            this.props.rgSources &&
              this.props.rgSources.length > this.state.nImage &&
              (e = this.props.rgSources[this.state.nImage]),
            e ||
              (console.warn(
                "MultiSourceImage created with no image src",
                this.props,
                this.state.nImage,
              ),
              (e =
                "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=")),
            e
          );
        }
        get imgRef() {
          return this.m_refImage;
        }
        OnImageError(e) {
          this.props.onIncrementalError &&
            this.props.onIncrementalError(
              e,
              this.props.rgSources[this.state.nImage],
              this.state.nImage,
            );
          let t = this.state.nImage + 1;
          t >= this.props.rgSources.length &&
            this.props.onError &&
            this.props.onError(e),
            t < this.props.rgSources.length && this.setState({ nImage: t });
        }
        render() {
          const e = this.props,
            { src: t, rgSources: n, onIncrementalError: l, onError: o } = e,
            r = (0, a._T)(e, [
              "src",
              "rgSources",
              "onIncrementalError",
              "onError",
            ]),
            s = this.src;
          return i.createElement(
            "img",
            Object.assign({ src: s, ref: this.m_refImage }, r, {
              onError: this.OnImageError,
            }),
          );
        }
      }
      (0, a.gn)([l.ak], o.prototype, "OnImageError", null);
    },
    11170: (e, t, n) => {
      "use strict";
      n.d(t, { C: () => c, i: () => m });
      var a = n(33940),
        i = n(75457),
        l = n(63903),
        o = n(11837),
        r = n(15254),
        s = n(14826);
      class c {
        constructor() {
          this.m_mapTokens = new Map();
        }
        GetLocalization(e, t) {
          const n = this.m_mapTokens.get(e);
          if (n && n[t]) return n[t];
        }
        SetLocalization(e, t, n) {
          let a = this.m_mapTokens.get(e);
          a ||
            ((a = (0, o.LG)([], i.Df.k_Lang_MAX, null)),
            this.m_mapTokens.set(e, a)),
            (a[t] = n);
        }
        GetSortedTokenList() {
          let e = [];
          return (
            this.m_mapTokens.forEach((t, n) => e.push(n)),
            e.sort((e, t) => e.localeCompare(t)),
            e
          );
        }
        GetLanguagesWithTokens() {
          let e = new Map();
          this.m_mapTokens.forEach((t) => {
            for (let n = 0; n < t.length; ++n)
              !e.has(n) &&
                null !== t[n] &&
                void 0 !== t[n] &&
                t[n].trim().length > 0 &&
                e.set(n, !0);
          });
          let t = new Array();
          return (
            e.forEach((e, n) => {
              e && t.push(n);
            }),
            t
          );
        }
        ClearLanguagesTokens(e) {
          e.forEach((e) => {
            this.m_mapTokens.forEach((t, n) => {
              e < t.length && null !== t[e] && (t[e] = null);
            });
          });
        }
        DebugPrintData() {
          const e = new Array();
          return (
            this.m_mapTokens.forEach((t, n) => e.push(`${n}=${t.join(",")}`)),
            e.join("\n")
          );
        }
      }
      class m {
        DetectAndFormatCSV(e) {
          var t, n, a, l, o, r;
          let s = null;
          return (
            (null ===
              (n =
                null === (t = null == e ? void 0 : e.meta) || void 0 === t
                  ? void 0
                  : t.fields) || void 0 === n
              ? void 0
              : n.length) >= 3 &&
            "field" === e.meta.fields[0] &&
            "language" === e.meta.fields[1] &&
            "value" === e.meta.fields[2]
              ? (s = this.ReadLocalizationData_CSV_TokenLanguageList(e))
              : (null ===
                  (l =
                    null === (a = null == e ? void 0 : e.meta) || void 0 === a
                      ? void 0
                      : a.fields) || void 0 === l
                  ? void 0
                  : l.length) >= 2 &&
                "field" === e.meta.fields[0] &&
                (0, i.jM)(e.meta.fields[1], i.Df.k_Lang_None) !=
                  i.Df.k_Lang_None
              ? (s = this.ReadLocalizationData_CSV_LanguageColumns(e))
              : (null ===
                  (r =
                    null === (o = null == e ? void 0 : e.meta) || void 0 === o
                      ? void 0
                      : o.fields) || void 0 === r
                  ? void 0
                  : r.length) >= 2 &&
                "language" === e.meta.fields[0] &&
                (s = this.ReadLocalizationData_CSV_LanguageRows(e)),
            s
          );
        }
        ReadLocalizationData_XML_SingleLanguage(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let n = new c(),
              a = new DOMParser(),
              i = yield r.K.ReadFile(e),
              l = a.parseFromString(i.toString(), "application/xml");
            for (let e = 0; e < l.documentElement.children.length; ++e) {
              const a = l.documentElement.children.item(e),
                i = a.getAttribute("id").toLocaleLowerCase(),
                o = a.textContent;
              n.SetLocalization(i, t, o);
            }
            return n;
          });
        }
        ReadLocalizationData_CSV_TokenLanguageList(e) {
          const t = new c();
          return (
            e.data.forEach((e) => {
              const n = e.field,
                a = (0, i.jM)(e.language);
              t.SetLocalization(n, a, e.value);
            }),
            t
          );
        }
        ReadLocalizationData_CSV_LanguageColumns(e) {
          const t = new c();
          return (
            e.data.forEach((e) => {
              const n = e.field;
              for (let a = i.Df.k_Lang_English; a < i.Df.k_Lang_MAX; ++a) {
                const l = (0, i.eV)((0, i.j_)(a));
                t.SetLocalization(n, a, e[l]);
              }
            }),
            t
          );
        }
        ReadLocalizationData_CSV_LanguageRows(e) {
          const t = new c();
          return (
            e.data.forEach((e) => {
              const n = (0, i.jM)(e.language, i.Df.k_Lang_MAX);
              if (n !== i.Df.k_Lang_MAX)
                for (const [a, i] of Object.entries(e))
                  "language" !== a &&
                    "string" == typeof i &&
                    t.SetLocalization(a, n, i);
            }),
            t
          );
        }
        GetExportLanguages() {
          return s.LJ.GetLanguageListForRealms([l.IN.k_ESteamRealmGlobal]);
        }
        WriteLocalizationData_CSV_TokenAndLanguageColumns(e, t) {
          let n = new Array();
          e.GetSortedTokenList().forEach((t) => {
            for (const a of this.GetExportLanguages()) {
              let l = { field: t };
              (l.language = (0, i.eV)((0, i.j_)(a))),
                (l.value = e.GetLocalization(t, a)),
                n.push(l);
            }
          }),
            r.K.WriteCSVToFile(n, t);
        }
        WriteLocalizationData_CSV_LanguageColumns(e, t) {
          let n = new Array();
          e.GetSortedTokenList().forEach((t) => {
            let a = { field: t };
            for (const n of this.GetExportLanguages())
              a[(0, i.eV)((0, i.j_)(n))] = e.GetLocalization(t, n);
            n.push(a);
          }),
            r.K.WriteCSVToFile(n, t);
        }
        WriteLocalizationData_CSV_LanguageRows(e, t) {
          let n = new Array();
          for (const e of this.GetExportLanguages())
            n.push({ language: (0, i.eV)((0, i.j_)(e)) });
          e.GetSortedTokenList().forEach((t) => {
            for (const a of this.GetExportLanguages())
              n[a][t] = e.GetLocalization(t, a);
          }),
            r.K.WriteCSVToFile(n, t);
        }
        WriteLocalizationData_XML_SingleLanguage(e, t, n) {
          let a = document.implementation.createDocument(null, "content", null);
          e.GetSortedTokenList().forEach((n) => {
            let i = a.createElement("string");
            i.setAttribute("id", n),
              i.appendChild(a.createTextNode(e.GetLocalization(n, t) || "")),
              a.documentElement.append(i);
          }),
            r.K.WriteXMLToFile(a, n);
        }
      }
    },
    17319: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { default: () => xt });
      var a = n(33940),
        i = n(52868),
        l = n.n(i),
        o = n(89526),
        r = n(75457),
        s = n(42735),
        c = n(63903),
        m = n(84770),
        d = n(47165),
        p = n(52316),
        u = n(1578),
        _ = n(22444),
        h = n(17547),
        g = n(88464),
        E = n(32765),
        v = n(13141);
      class S extends v.cA {
        DeleteOldAnnouncement(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let n = new URLSearchParams();
            n.append("sessionid", E.De.SESSIONID);
            let a =
                E.De.COMMUNITY_BASE_URL +
                "/gid/" +
                e.ConvertTo64BitString() +
                "/announcements/ajaxdeleteannouncement/" +
                t,
              i = yield l().post(a, n);
            if (i.data.success != s.s.k_EResultOK) throw i.data;
            return this.RemoveGIDFromList(e, m.Vv + t), i.data;
          });
        }
        static Get() {
          return (
            S.sm_Instance || ((S.sm_Instance = new S()), S.sm_Instance.Init()),
            S.sm_Instance
          );
        }
      }
      var f = n(50265),
        D = n(74802),
        y = n(77435),
        I = n(51438),
        C = n(12623),
        b = n(48616),
        A = n(82079),
        T = n(85651),
        k = n(56368),
        w = n(69159),
        N = n(54671),
        L = n(92616),
        x = n(701),
        O = n(58218),
        G = n(19304),
        R = n(14826),
        B = n(207),
        M = n(37866),
        P = n.n(M),
        F = n(20790),
        U = n(3896),
        j = n(51441),
        X = n(98389);
      const z = (0, g.Pi)((e) => {
        const { appId: t, clanId: n } = e,
          {
            strCapsuleUrl: a,
            strGroupTitle: i,
            id: l,
            strStoreURL: r,
            strCommunityURL: s,
            strForumURL: c,
            strExtraBannerGroupStyle: p,
          } = (function (e, t) {
            var n;
            const [a, i] = (0, o.useState)({}),
              l = (0, O.T)("useEventHeaderData");
            return (
              (0, o.useEffect)(() => {
                if (e)
                  L.Z.Get()
                    .QueueAppRequest(e, {
                      include_assets: !0,
                      include_screenshots: !0,
                    })
                    .then(() => {
                      var t;
                      const n = L.Z.Get().GetApp(e);
                      n &&
                        !(null === (t = null == l ? void 0 : l.token) ||
                        void 0 === t
                          ? void 0
                          : t.reason) &&
                        i({
                          strCapsuleUrl: n.GetAssets().GetHeaderURL(),
                          strGroupTitle: n.GetName(),
                          id: e,
                          strStoreURL: n.GetStorePageURL(),
                          strCommunityURL: n.GetCommunityPageURL(),
                          strForumURL: n.GetCommunityDiscussionForumsURL(),
                        });
                    });
                else if (t) {
                  const e = d.K.InitFromClanID(t);
                  A.sV.LoadClanInfoForClanSteamID(e).then((n) => {
                    var a;
                    (null === (a = null == l ? void 0 : l.token) || void 0 === a
                      ? void 0
                      : a.reason) ||
                      i({
                        strCapsuleUrl: n.avatar_full_url,
                        strGroupTitle: n.group_name,
                        id: t,
                        strStoreURL: E.De.STORE_BASE_URL + "curator/" + t + "/",
                        strCommunityURL:
                          E.De.COMMUNITY_BASE_URL +
                          "gid/" +
                          e.ConvertTo64BitString(),
                        strExtraBannerGroupStyle: P().ClanBanner,
                      });
                  });
                }
              }, [
                e,
                null === (n = null == l ? void 0 : l.token) || void 0 === n
                  ? void 0
                  : n.reason,
                t,
              ]),
              a
            );
          })(t, n),
          u = E.De.IN_CLIENT && N.jg.Get().BOwnsApp(t);
        let _ = Boolean(t !== m.dn);
        const h = k.cb.Get().GetPartnerEventPermissions(d.K.InitFromClanID(n)),
          g = h && (h.can_edit || h.support_user),
          v = (0, E.h4)(),
          S =
            E.De.STORE_BASE_URL +
            "feeds/" +
            (0, F.x3)() +
            (t ? "/app/" + t : "/group/" + n) +
            "/?cc=" +
            E.De.COUNTRY +
            "&l=" +
            E.De.LANGUAGE,
          f = o.createElement("img", { className: P().AppBannerLogo, src: a });
        return o.createElement(
          "div",
          { className: P().AppBannerCtn },
          o.createElement("div", {
            className: P().AppBannerBackground,
            style: { backgroundImage: `url(${a})` },
          }),
          o.createElement(
            "div",
            { className: (0, G.Z)(P().AppBannerGroup, p) },
            _
              ? Boolean((0, j.Hu)() && t)
                ? o.createElement(
                    j.ll,
                    {
                      item: { id: t, type: "game" },
                      className: P().AppBannerLogoCtn,
                      hoverProps: {
                        direction: "overlay",
                        style: { minWidth: "320px" },
                      },
                    },
                    f,
                  )
                : o.createElement(
                    X._,
                    {
                      type: e.appId ? "app" : "clan",
                      id: l,
                      hoverClassName: P().AppBannerLogoCtn,
                    },
                    f,
                  )
              : o.createElement(
                  "div",
                  { className: P().AppBannerLogoCtn },
                  f,
                  " ",
                ),
            o.createElement(
              "div",
              { className: P().AppBannerTitle },
              i,
              o.createElement(
                "div",
                { className: P().NewsHubSubTitle },
                (0, R.Xx)("#EventDisplay_NewsHubSubtitle"),
              ),
            ),
            _ &&
              o.createElement(
                "div",
                { className: P().AppBannerLinks },
                Boolean(u && t) &&
                  o.createElement(
                    "a",
                    {
                      className: P().AppBannerLink,
                      href: "steam://nav/games/details/" + t,
                    },
                    (0, R.Xx)("#EventDisplay_ViewInLibrary_ExtraShort"),
                  ),
                o.createElement(
                  "div",
                  { className: P().HeaderFollowButton },
                  Boolean(t)
                    ? o.createElement(U.SE, { appid: t })
                    : o.createElement(U.C4, { clanAccountID: n }),
                ),
                o.createElement(
                  "a",
                  {
                    className: P().AppBannerLink,
                    href: (0, B.OL)(r),
                    target: E.De.IN_CLIENT ? void 0 : "_blank",
                  },
                  (0, R.Xx)("#EventDisplay_ViewStorePage_ExtraShort"),
                ),
                !v &&
                  o.createElement(
                    "a",
                    {
                      className: P().AppBannerLink,
                      href: (0, B.OL)(s),
                      target: E.De.IN_CLIENT ? void 0 : "_blank",
                    },
                    (0, R.Xx)("#EventDisplay_ViewCommunityPage_ExtraShort"),
                  ),
                Boolean(!v && c) &&
                  o.createElement(
                    "a",
                    {
                      className: P().AppBannerLink,
                      href: (0, B.OL)(c),
                      target: E.De.IN_CLIENT ? void 0 : "_blank",
                    },
                    (0, R.Xx)("#EventDisplay_ViewForum_ExtraShort"),
                  ),
                !v &&
                  e.bShowRSSFeed &&
                  o.createElement(
                    "a",
                    {
                      className: P().AppBannerLink,
                      href: (0, B.OL)(S),
                      target: E.De.IN_CLIENT ? void 0 : "_blank",
                    },
                    o.createElement(x.opd, null),
                    (0, R.Xx)("#EventDisplay_RSSFeed_ExtraShort"),
                  ),
                g &&
                  o.createElement(
                    "a",
                    {
                      className: P().AppBannerLink,
                      href: (0, B.OL)(
                        (0, F.iC)(t, d.K.InitFromClanID(n), "admin"),
                      ),
                      target: E.De.IN_CLIENT ? void 0 : "_blank",
                    },
                    (0, R.Xx)("#EventDisplay_Admin_ExtraShort"),
                  ),
              ),
          ),
        );
      });
      var H = n(4306),
        V = n(52629),
        W = n.n(V),
        q = n(57742),
        Z = n(60161),
        K = n(38695),
        Y = n.n(K),
        Q = n(67736),
        $ = n(36041),
        J = n(23217),
        ee = n(32905),
        te = n(5557);
      class ne {
        constructor() {
          (this.m_mapClanReposted = new Set()),
            (this.m_mapSourceEventGIDToPostedClans = new Map());
        }
        static Get() {
          return (
            ne.s_EventRepost ||
              ((ne.s_EventRepost = new ne()), ne.s_EventRepost.Initialize()),
            ne.s_EventRepost
          );
        }
        static ValidateRepostData(e) {
          const t = e;
          return (
            !!(
              t &&
              t.repost_clan_account_ids &&
              Array.isArray(t.repost_clan_account_ids) &&
              t.repost_clan_account_ids.length > 0
            ) && "number" == typeof t.repost_clan_account_ids[0]
          );
        }
        Initialize() {
          if (document.getElementById("application_config")) {
            let e = (0, E.kQ)("repostcontrols", "application_config");
            ne.ValidateRepostData(e) &&
              e.repost_clan_account_ids.forEach((e) =>
                this.m_mapClanReposted.add(e),
              );
          }
        }
        BCanRepostPartnerEvent() {
          return this.m_mapClanReposted.size > 0;
        }
        GetRepostClanAccountID() {
          return Array.from(this.m_mapClanReposted);
        }
        LoadClansAlreadyRepostedTo(e, t, n) {
          var i, o, r;
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (this.m_mapSourceEventGIDToPostedClans.has(t))
              return this.m_mapSourceEventGIDToPostedClans.get(t);
            const a = E.De.STORE_BASE_URL + "events/ajaxgetrepostedevent",
              c = {
                sessionid: E.De.SESSIONID,
                source_clan_accountid: e.GetAccountID(),
                source_event_gid: t,
              };
            try {
              const e = yield l().get(a, {
                params: c,
                withCredentials: !0,
                cancelToken: null == n ? void 0 : n.token,
              });
              if (
                (null === (i = null == e ? void 0 : e.data) || void 0 === i
                  ? void 0
                  : i.success) == s.s.k_EResultOK
              )
                return (
                  this.m_mapSourceEventGIDToPostedClans.set(
                    t,
                    e.data.repost_clan_accountid || [],
                  ),
                  e.data.repost_clan_accountid
                );
              console.error(
                "GetRepostClanAccountID: failed " +
                  (null === (o = null == e ? void 0 : e.data) || void 0 === o
                    ? void 0
                    : o.success) +
                  " and msg: " +
                  (null === (r = null == e ? void 0 : e.data) || void 0 === r
                    ? void 0
                    : r.msg),
              );
            } catch (e) {
              const t = (0, J.l)(e);
              console.error(
                "GetRepostClanAccountID: fail repost with " + t.strErrorMsg,
                t,
              );
            }
            return new Array();
          });
        }
        RepostEvent(e, t, n, i, o) {
          var r, c, m;
          return (0, a.mG)(this, void 0, void 0, function* () {
            const a = E.De.STORE_BASE_URL + "events/ajaxrepostevent",
              d = new FormData();
            d.append("sessionid", E.De.SESSIONID),
              d.append("source_clan_accountid", "" + e.GetAccountID()),
              d.append("source_event_gid", "" + t),
              d.append("repost_clan_accountid", "" + n.GetAccountID()),
              d.append("add", "" + i);
            try {
              let e = yield l().post(a, d, {
                withCredentials: !0,
                cancelToken: null == o ? void 0 : o.token,
              });
              if (
                (null === (r = null == e ? void 0 : e.data) || void 0 === r
                  ? void 0
                  : r.success) == s.s.k_EResultOK &&
                e.data.repost_gid
              ) {
                this.m_mapSourceEventGIDToPostedClans.has(t) ||
                  this.m_mapSourceEventGIDToPostedClans.set(t, []);
                const a = this.m_mapSourceEventGIDToPostedClans
                  .get(t)
                  .findIndex((e) => n.GetAccountID() == e);
                return (
                  i && -1 == a
                    ? this.m_mapSourceEventGIDToPostedClans
                        .get(t)
                        .push(n.GetAccountID())
                    : i ||
                      -1 === a ||
                      this.m_mapSourceEventGIDToPostedClans.get(t).splice(a, 1),
                  e.data.repost_gid
                );
              }
              console.error(
                "RepostEvent: failed " +
                  (null === (c = null == e ? void 0 : e.data) || void 0 === c
                    ? void 0
                    : c.success) +
                  " and msg: " +
                  (null === (m = null == e ? void 0 : e.data) || void 0 === m
                    ? void 0
                    : m.msg),
              );
            } catch (e) {
              const t = (0, J.l)(e);
              console.error(
                "RepostEvent: fail repost with " + t.strErrorMsg,
                t,
              );
            }
            return null;
          });
        }
      }
      (0, a.gn)([f.LO], ne.prototype, "m_mapClanReposted", void 0);
      var ae = n(3301);
      const ie = (0, g.Pi)((e) => {
        const { eventModel: t } = e,
          [n, i] = (0, o.useState)(!0),
          [r, s] = (0, o.useState)(new Set()),
          [c, m] = (0, o.useState)(new Set()),
          [p, u] = (0, o.useState)(new Set()),
          [g, E] = (0, o.useState)(null),
          [v, S] = (0, o.useState)(null),
          f = (0, o.useRef)(null);
        (0, o.useEffect)(() => {
          if (n) {
            (() =>
              (0, a.mG)(void 0, void 0, void 0, function* () {
                const e = l().CancelToken.source();
                f.current = e.cancel;
                const n = ne
                  .Get()
                  .LoadClansAlreadyRepostedTo(t.clanSteamID, t.GID, e);
                n.then((e) => {
                  const t = new Set();
                  e.forEach((e) => t.add(e)), s(t);
                });
                let a = new Array();
                a.push(n),
                  ne
                    .Get()
                    .GetRepostClanAccountID()
                    .forEach((e) => {
                      const t = d.K.InitFromClanID(e);
                      a.push(A.sV.LoadClanInfoForClanSteamID(t));
                    }),
                  yield Promise.all(a),
                  i(!1);
              }))();
          }
          return () => f.current && f.current();
        }, [n, t.GID, t.clanSteamID]);
        const D = new Array();
        return (
          ne
            .Get()
            .GetRepostClanAccountID()
            .forEach((e) => {
              const n = A.sV.GetClanInfoByClanAccountID(e);
              if (n && e != t.clanSteamID.GetAccountID()) {
                const t = r.has(e),
                  a = c.has(e) || (t && !p.has(e));
                D.push(
                  o.createElement(_.ji, {
                    key: "checkbox" + e,
                    label: t
                      ? (0, R.Xx)("#EventRepost_Dialog_Existing", n.group_name)
                      : n.group_name,
                    checked: a,
                    disabled: null !== g,
                    onChange: (t) => {
                      r.has(e)
                        ? (t ? p.delete(e) : p.add(e), u(new Set(p)))
                        : (t ? c.add(e) : c.delete(e), m(new Set(c)));
                    },
                  }),
                );
              }
            }),
          o.createElement(
            h.SV,
            null,
            o.createElement(
              Q.e1,
              { onEscKeypress: () => e.closeModal && e.closeModal() },
              o.createElement(
                _.VY,
                null,
                o.createElement(
                  _.h4,
                  null,
                  (0, R.Xx)("#EventRepost_Dialog_Title"),
                ),
                o.createElement(
                  _.uT,
                  null,
                  o.createElement(
                    _.Ac,
                    null,
                    (0, R.Xx)("#EventRepost_Dialog_Desc"),
                  ),
                  n
                    ? o.createElement(ae.V, { string: (0, R.Xx)("#Loading") })
                    : o.createElement("div", null, D),
                  Boolean(c.size || p.size) &&
                    o.createElement(
                      "div",
                      null,
                      o.createElement(
                        "span",
                        null,
                        (0, R.Xx)("#EventRepost_Dialog_Action_Desc"),
                      ),
                      o.createElement(
                        "ul",
                        null,
                        Boolean(c.size) &&
                          o.createElement(
                            "li",
                            null,
                            (0, R.Xx)("#EventRepost_Dialog_Action_Add", c.size),
                          ),
                        Boolean(p.size) &&
                          o.createElement(
                            "li",
                            null,
                            (0, R.Xx)(
                              "#EventRepost_Dialog_Action_Remove",
                              p.size,
                            ),
                          ),
                      ),
                    ),
                  Boolean(g) && o.createElement("div", null, g),
                  Boolean(v) && o.createElement("div", null, v),
                ),
                o.createElement(
                  _.$_,
                  null,
                  o.createElement(_.o9, {
                    onCancel: () => e.closeModal && e.closeModal(),
                    strOKText: (0, R.Xx)("#EventRepost_Dialog_OK"),
                    bOKDisabled:
                      (0 == c.size && 0 == p.size) || null !== g || null !== v,
                    onOK: () =>
                      (0, a.mG)(void 0, void 0, void 0, function* () {
                        f.current && f.current();
                        const e = l().CancelToken.source();
                        f.current = e.cancel;
                        const n = c.size + p.size;
                        let a = 1;
                        E((0, R.Xx)("#EventRepost_Dialog_Progress", a, n));
                        for (const i of Array.from(c)) {
                          const l = d.K.InitFromClanID(i);
                          if (
                            !(yield ne
                              .Get()
                              .RepostEvent(t.clanSteamID, t.GID, l, !0, e))
                          )
                            return void S(
                              (0, R.Xx)("#EventRepost_Dialog_ResultFail"),
                            );
                          E((0, R.Xx)("#EventRepost_Dialog_Progress", ++a, n));
                        }
                        for (const i of Array.from(p)) {
                          const l = d.K.InitFromClanID(i);
                          if (
                            !(yield ne
                              .Get()
                              .RepostEvent(t.clanSteamID, t.GID, l, !1, e))
                          )
                            return void S(
                              (0, R.Xx)("#EventRepost_Dialog_ResultFail"),
                            );
                          E((0, R.Xx)("#EventRepost_Dialog_Progress", ++a, n));
                        }
                        S((0, R.Xx)("#EventRepost_Dialog_ResultSuccess"));
                      }),
                  }),
                ),
              ),
            ),
          )
        );
      });
      var le = n(44026),
        oe = n(88443),
        re = n(76672);
      var se = n(6726),
        ce = n(7787),
        me = n(16947),
        de = n(84343),
        pe = n(75962),
        ue = n(5386),
        _e = n(24174),
        he = n(67328),
        ge = n(57361);
      class Ee {
        constructor(e) {
          (this.m_nLastUpdated = 0),
            (this.m_mapLanguages = f.LO.map()),
            (this.m_fetching = null),
            (this.m_appid = e);
        }
        GetAppID() {
          return this.m_appid;
        }
        GetTokenList(e) {
          return this.m_mapLanguages.has(e) ? this.m_mapLanguages.get(e) : null;
        }
        Localize(e, t) {
          let n = E.De.LANGUAGE;
          return ve(
            e,
            this.GetTokenList(n),
            "english" != n ? this.GetTokenList("english") : null,
            this.m_appid,
            t,
          );
        }
        SubstituteParams(e, t) {
          let n = E.De.LANGUAGE;
          return Se(
            e,
            this.GetTokenList(n),
            "english" != n ? this.GetTokenList("english") : null,
            this.m_appid,
            t,
          );
        }
      }
      function ve(e, t, n, a, i) {
        if (!e.startsWith("#"))
          return console.log("Token doesn't start with #:", e), "";
        let l = e;
        e = e.toLowerCase();
        let o = "";
        if (
          (t && t.has(e) && (o = t.get(e)),
          !o && n && n.has(e) && (o = n.get(e)),
          o)
        )
          o = Se(o, t, n, a, i);
        else if (
          ((t || n) &&
            console.log(
              "No loc found for appid",
              a,
              l,
              "Tokens:",
              t,
              "Fallback:",
              n,
            ),
          t && E.De.EUNIVERSE != r.xO.k_EUniversePublic)
        )
          return e;
        return o;
      }
      function Se(e, t, n, a, i) {
        let l = e.match(/{[A-za-z0-9_%#:]+}/g);
        if (l)
          for (let o of l) {
            let l = ve(fe(o.slice(1, -1), i), t, n, a, i);
            if (!l) return "";
            e = e.replace(o, l);
          }
        return (e = fe(e, i));
      }
      function fe(e, t) {
        let n = e.match(/%[A-Za-z0-9_:]+%/g);
        if (n)
          for (let a of n) {
            let n = a.slice(1, -1).toLowerCase(),
              i = t.get(n);
            null == i
              ? console.log("No rich presence found for", n)
              : (e = e.replace(a, i));
          }
        return e;
      }
      var De = n(23801),
        ye = n(85246);
      class Ie {
        constructor() {
          (this.m_mapAppInfo = f.LO.map()),
            (this.m_mapRichPresenceLoc = f.LO.map()),
            (this.m_cAppInfoRequestsInFlight = 0),
            (this.m_setPendingAppInfo = new Set()),
            (this.m_CacheStorage = null),
            (this.m_fnCallbackOnAppInfoLoaded = new ye.pB());
        }
        Init(e) {
          this.m_CMInterface = e;
        }
        BHavePendingAppInfoRequests() {
          return (
            this.m_setPendingAppInfo.size > 0 ||
            this.m_cAppInfoRequestsInFlight > 0
          );
        }
        get CMInterface() {
          return this.m_CMInterface;
        }
        RegisterCallbackOnLoad(e) {
          if (!this.BHavePendingAppInfoRequests())
            return (
              (0, De.X)(
                !1,
                "Registering for callback on appinfo load, but nothing queued",
              ),
              void e()
            );
          this.m_fnCallbackOnAppInfoLoaded.Register(e);
        }
        IsLoadingAppID(e) {
          return this.m_setPendingAppInfo.has(e);
        }
        GetAppInfo(e) {
          if (
            ((0, De.X)(
              this.m_CMInterface,
              "CAppInfoStore.GetAppInfo called before Init",
            ),
            !this.m_mapAppInfo.has(e))
          ) {
            let t = new ge.Am(e);
            this.m_mapAppInfo.set(e, t), this.QueueAppInfoRequest(e);
          }
          return this.m_mapAppInfo.get(e);
        }
        QueueAppInfoRequest(e) {
          return e
            ? (this.m_setPendingAppInfo.size ||
                ((this.m_PendingAppInfoPromise = new Promise(
                  (e) => (this.m_PendingAppInfoResolve = e),
                )),
                window.setTimeout(() => this.FlushPendingAppInfo(), 25)),
              this.m_setPendingAppInfo.add(e),
              this.m_PendingAppInfoPromise)
            : Promise.resolve();
        }
        FlushPendingAppInfo() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const e = this.m_PendingAppInfoResolve,
              t = Array.from(this.m_setPendingAppInfo);
            (this.m_PendingAppInfoPromise = void 0),
              (this.m_PendingAppInfoResolve = void 0),
              this.m_setPendingAppInfo.clear(),
              yield this.LoadAppInfoBatch(t),
              e();
          });
        }
        LoadAppInfoBatch(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            this.m_cAppInfoRequestsInFlight++;
            let t = yield this.LoadAppInfoBatchFromLocalCache(e);
            if (t.length) {
              console.log("Loading batch of App Info from Steam: ", t),
                yield this.m_CMInterface.WaitUntilLoggedOn();
              let e = he.gA.Init(C.Fi);
              e.Body().set_language((0, r.jM)(E.De.LANGUAGE));
              const n = 50;
              for (; t.length > 0; ) {
                const a = Math.min(n, t.length),
                  i = t.slice(0, a);
                (t = t.slice(a)), e.Body().set_appids(i);
                const l = yield C.AE.GetApps(
                  this.m_CMInterface.GetServiceTransport(),
                  e,
                );
                l.GetEResult() == s.s.k_EResultOK
                  ? this.OnGetAppsResponse(l)
                  : console.error(
                      `Error when calling CommunityService.GetApps: EResult=${l.GetEResult()}, AppIDs:`,
                      i,
                    );
              }
            }
            0 == --this.m_cAppInfoRequestsInFlight &&
              0 == this.m_setPendingAppInfo.size &&
              (this.m_fnCallbackOnAppInfoLoaded.Dispatch(),
              this.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks());
          });
        }
        OnGetAppsResponse(e) {
          let t = [];
          for (let n of e.Body().apps()) {
            let e = this.m_mapAppInfo.get(n.appid());
            (0, De.X)(
              e,
              `Got AppInfo response for unrequested AppID: ${n.appid()}`,
            ),
              e &&
                ((e = new ge.Am(n.appid())),
                e.DeserializeFromMessage(n),
                this.m_mapAppInfo.set(n.appid(), e),
                t.push(e));
          }
          this.SaveAppInfoBatchToLocalCache(t);
        }
        OnAppOverviewChange(e) {
          for (let t of e) {
            const e = new ge.Am(t.appid());
            e.DeserializeFromAppOverview(t),
              e.is_initialized && this.m_mapAppInfo.set(t.appid(), e);
          }
        }
        EnsureAppInfoForAppIDs(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            let t = !1;
            return (
              e.forEach((e) => {
                let n = this.m_mapAppInfo.get(e);
                n
                  ? n.is_valid || (t = !0)
                  : ((n = new ge.Am(e)),
                    this.m_mapAppInfo.set(e, n),
                    this.QueueAppInfoRequest(e),
                    (t = !0));
              }),
              t && void 0 !== this.m_PendingAppInfoPromise
                ? this.m_PendingAppInfoPromise
                : Promise.resolve()
            );
          });
        }
        SetCacheStorage(e) {
          this.m_CacheStorage = e;
        }
        GetCacheKeyForAppID(e) {
          return "APPINFO_" + e;
        }
        LoadAppInfoBatchFromLocalCache(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (!this.m_CacheStorage) return e;
            console.log("Loading batch of App Info from Local Cache: ", e);
            const t = new Date(new Date().getTime() - 12096e5),
              n = (e) =>
                (0, a.mG)(this, void 0, void 0, function* () {
                  const n = yield this.m_CacheStorage.GetObject(
                    this.GetCacheKeyForAppID(e),
                  );
                  if (!n) return e;
                  let a = this.m_mapAppInfo.get(e);
                  return (
                    (0, De.X)(
                      a,
                      "Didn't find AppInfo in our map when loading from cache but it should've been there?",
                    ),
                    a
                      ? ((a = new ge.Am(e)),
                        a.DeserializeFromCacheObject(n),
                        a.is_initialized
                          ? (this.m_mapAppInfo.set(e, a),
                            a.time_updated_from_server < t ? e : null)
                          : (console.warn(
                              "Failed to deserialize cached App Info: ",
                              e,
                              n,
                            ),
                            e))
                      : e
                  );
                });
            let i = e.map((e) => n(e));
            return (yield Promise.all(i)).filter((e) => null !== e);
          });
        }
        SaveAppInfoBatchToLocalCache(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (this.m_CacheStorage) {
              console.log(
                "Saving batch of App Info to Local Cache: ",
                e.map((e) => e.appid),
              );
              for (const t of e) {
                const e = t.SerializeToCacheObject();
                e &&
                  this.m_CacheStorage.StoreObject(
                    this.GetCacheKeyForAppID(t.appid),
                    e,
                  );
              }
            }
          });
        }
        Localize(e, t, n) {
          const a = this.GetRichPresenceLoc(e);
          return a
            ? a.Localize(t, n)
            : E.De.EUNIVERSE != r.xO.k_EUniversePublic
            ? (console.log(
                `Unable to find app localization information for app ${e} token ${t}, this may not have had a chance to load yet`,
              ),
              t)
            : "";
        }
        GetRichPresenceLoc(e) {
          if (this.m_mapRichPresenceLoc.has(e.toString())) {
            let t = this.m_mapRichPresenceLoc.get(e.toString());
            return (
              t.m_nLastUpdated + 6e4 * ge.x3 < Date.now() &&
                this.QueueRichPresenceLocRequest(t),
              t
            );
          }
          let t = new Ee(e);
          return (
            this.m_mapRichPresenceLoc.set(e.toString(), t),
            this.QueueRichPresenceLocRequest(t),
            t
          );
        }
        GetRichPresenceLocAsync(e) {
          let t = this.GetRichPresenceLoc(e);
          return t.m_nLastUpdated ? Promise.resolve(t) : t.m_fetching;
        }
        OnRichPresenceLocUpdate(e, t) {
          e.m_nLastUpdated = Date.now();
          for (let n of t) {
            let t = n.language(),
              a = e.m_mapLanguages.get(t);
            a
              ? a.clear()
              : (e.m_mapLanguages.set(t, new Map()),
                (a = e.m_mapLanguages.get(t)));
            for (let e of n.tokens()) a.set(e.name().toLowerCase(), e.value());
          }
        }
        QueueRichPresenceLocRequest(e) {
          return (
            e.m_fetching ||
              ((e.m_fetching = this.m_CMInterface
                .WaitUntilLoggedOn()
                .then(() => {
                  let t = he.gA.Init(C.tj);
                  return (
                    t.Body().set_appid(e.GetAppID()),
                    t.Body().set_language(E.De.LANGUAGE),
                    C.AE.GetAppRichPresenceLocalization(
                      this.m_CMInterface.GetServiceTransport(),
                      t,
                    )
                  );
                })
                .then(
                  (t) => (
                    (e.m_fetching = null),
                    t.GetEResult() != s.s.k_EResultOK
                      ? Promise.reject()
                      : (this.OnRichPresenceLocUpdate(
                          e,
                          t.Body().token_lists(),
                        ),
                        Promise.resolve(e))
                  ),
                )),
              e.m_fetching.catch(() => {
                e.m_fetching = null;
              })),
            e.m_fetching
          );
        }
      }
      (0, a.gn)([f.aD], Ie.prototype, "OnGetAppsResponse", null),
        (0, a.gn)([f.aD], Ie.prototype, "OnRichPresenceLocUpdate", null);
      const Ce = new Ie();
      var be = n(94738),
        Ae = n(24448),
        Te = n(9663),
        ke = n(99066),
        we = n.n(ke);
      const Ne = (0, g.Pi)((e) => {
        const { appid: t, eventLink: n } = e,
          i = o.useRef(null),
          [r, c] = (0, Ae.Gr)(E.L7.steamid),
          [m, p] = o.useState(""),
          [_, h] = o.useState(!1),
          [g, v] = o.useState(""),
          [S, f] = o.useState(!1);
        o.useEffect(
          () => () =>
            i.current &&
            i.current("ShareEventOnFriendsActivityFeed: unmounting"),
          [],
        );
        const D = c ? c.avatar_url : null,
          y = d.K.InitFromAccountID(E.L7.accountid),
          I = () =>
            (0, a.mG)(void 0, void 0, void 0, function* () {
              var e, a;
              i.current &&
                i.current(
                  "ShareEventOnFriendsActivityFeed: cancel previous...",
                );
              const o = l().CancelToken.source();
              (i.current = o.cancel), h(!0);
              let r = m;
              0 != r.trim().length && (r += "\n\n"), (r += n);
              const c =
                E.De.COMMUNITY_BASE_URL +
                "profiles/" +
                y.ConvertTo64BitString() +
                "/ajaxpostuserstatus";
              try {
                if (E.De.IN_STEAMUI) {
                  let e = he.gA.Init(be.Sv);
                  e.Body().set_appid(t), e.Body().set_status_text(r);
                  let n = yield be.lk.PostStatusToFriends(
                    Ce.CMInterface.GetServiceTransport(),
                    e,
                  );
                  if (n.GetEResult() != s.s.k_EResultOK) {
                    const e =
                      (0, R.Xx)("#EventDisplay_Share_Failure") +
                      "\n\n" +
                      n.GetEResult();
                    return (
                      console.error(e, !o.token.reason),
                      void (o.token.reason || v(e))
                    );
                  }
                } else {
                  const n = new FormData();
                  n.append("appid", "" + t),
                    n.append("status_text", r),
                    n.append("sessionid", E.De.SESSIONID);
                  const i = yield l().post(c, n, { withCredentials: !0 });
                  if (
                    200 != i.status ||
                    (null === (e = null == i ? void 0 : i.data) || void 0 === e
                      ? void 0
                      : e.success) != s.s.k_EResultOK
                  ) {
                    const e =
                      (0, R.Xx)("#EventDisplay_Share_Failure") +
                      "\n\n" +
                      (null === (a = null == i ? void 0 : i.data) ||
                      void 0 === a
                        ? void 0
                        : a.message);
                    return console.error(e), void (o.token.reason || v(e));
                  }
                }
                o.token.reason ||
                  (f(!0), v((0, R.Xx)("#EventDisplay_Share_Success")));
              } catch (e) {
                const t = (0, J.l)(e),
                  n =
                    (0, R.Xx)("#EventDisplay_Share_Failure") +
                    "\n\n" +
                    t.strErrorMsg;
                o.token.reason || v(n), console.error(n);
              }
            });
        return _
          ? o.createElement(
              Q.uH,
              {
                strDescription: "",
                strTitle: (0, R.Xx)("#Button_Share"),
                onCancel: e.closeModal,
                onOK: e.closeModal,
                bAlertDialog: !0,
              },
              o.createElement(
                "div",
                { className: W().FlexColumnContainer },
                o.createElement(
                  "div",
                  null,
                  (0, R.Xx)("#EventDisplay_Share_OnMyStatus_Details"),
                ),
                o.createElement(
                  "div",
                  { className: we().Container },
                  0 == (null == g ? void 0 : g.length)
                    ? o.createElement(ae.V, { position: "center" })
                    : o.createElement("div", null, g),
                  Boolean(S) &&
                    o.createElement(
                      "a",
                      {
                        href:
                          E.De.COMMUNITY_BASE_URL +
                          "profiles/" +
                          y.ConvertTo64BitString() +
                          "/home",
                        target: E.De.IN_CLIENT ? void 0 : "_blank",
                      },
                      (0, R.Xx)("#EventDisplay_Share_OpenActivityFeed"),
                    ),
                ),
              ),
            )
          : o.createElement(
              Q.uH,
              {
                strDescription: "",
                strTitle: (0, R.Xx)("#Button_Share"),
                onCancel: e.closeModal,
                onOK: I,
                strOKButtonText: (0, R.Xx)("#Button_Post"),
              },
              o.createElement(
                "div",
                { className: W().FlexColumnContainer },
                o.createElement(
                  "div",
                  null,
                  (0, R.Xx)("#EventDisplay_Share_OnMyStatus_Details"),
                ),
                o.createElement(
                  "div",
                  {
                    className: (0, G.Z)(
                      we().Container,
                      W().FlexColumnContainer,
                    ),
                  },
                  o.createElement(
                    "div",
                    null,
                    o.createElement("img", {
                      className: we().SmallAvatar,
                      src: D,
                      "data-miniprofile": "s" + E.L7.steamid,
                    }),
                    o.createElement(
                      "div",
                      { className: (0, G.Z)(W().FlexColumnContainer) },
                      o.createElement(u.R, {
                        strPlaceholder: (0, R.Xx)(
                          "#EventDisplay_Share_OnMyStatus_Placeholder",
                        ),
                        fnGetCurText: () => m,
                        fnOnTextChange: (e) => p(e.currentTarget.value),
                        fnSetText: p,
                        emoticonStore: e.emoticonStore,
                        bSupportHTMLImport: !1,
                        showFormatHelp: "UserStatusPublished",
                        limitBBCode: _e.iP,
                        classNameForTextArea: we().ShareDescription,
                        bEmbeddedInDialog: !0,
                      }),
                    ),
                  ),
                  o.createElement(
                    "div",
                    { className: we().ShareLink },
                    o.createElement(Te.d, {
                      text: n,
                      partnerEventStore: e.partnerEventStore,
                    }),
                  ),
                ),
              ),
            );
      });
      class Le extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = {
              bShareOnSteamDialog: !1,
              bRequireLoginToShare: !1,
            });
        }
        ShareOnSteamActivityFeed() {
          E.L7.logged_in
            ? this.setState({ bShareOnSteamDialog: !0 })
            : E.De.IN_CLIENT
            ? console.log(
                "ShareEventOnSocialMediaDialog: In Client: Cannot use login widget. We expect to be already logged in.",
              )
            : this.setState({ bRequireLoginToShare: !0 });
        }
        render() {
          const {
            eventLink: e,
            fnGetSharePageUrl: t,
            appid: n,
            closeModal: a,
            emoticonStore: i,
            partnerEventStore: l,
          } = this.props;
          return this.state.bRequireLoginToShare
            ? o.createElement(Q.uH, {
                strTitle: (0, R.Xx)("#EventDisplay_Share_NotLoggedIn"),
                strDescription: (0, R.Xx)(
                  "#EventDisplay_Share_NotLoggedIn_Description",
                ),
                strOKButtonText: (0, R.Xx)("#MobileLogin_SignIn"),
                onCancel: this.props.closeModal,
                onOK: () => (0, ee.X)(),
              })
            : this.state.bShareOnSteamDialog
            ? o.createElement(Ne, {
                eventLink: e,
                appid: n,
                emoticonStore: i,
                partnerEventStore: l,
                closeModal: a,
              })
            : o.createElement(
                Q.uH,
                {
                  strDescription: "",
                  strTitle: (0, R.Xx)("#Button_Share"),
                  onCancel: this.props.closeModal,
                  onOK: this.props.closeModal,
                  bAlertDialog: !0,
                  modalClassName: "EventDisplay_Share_Dialog",
                },
                o.createElement(xe, {
                  eventLink: e,
                  fnGetSharePageUrl: t,
                  fnShareOnSteamActivityFeed: this.ShareOnSteamActivityFeed,
                }),
              );
        }
      }
      (0, a.gn)([H.ak], Le.prototype, "ShareOnSteamActivityFeed", null);
      const xe = (e) => {
          const {
              eventLink: t,
              fnGetSharePageUrl: n,
              fnShareOnSteamActivityFeed: a,
            } = e,
            i = (0, E.h4)(),
            [l, s] = (0, o.useState)((0, r.jM)(E.De.LANGUAGE)),
            c = (0, o.useMemo)(() => {
              const e = new URL(t);
              return e.searchParams.set("l", (0, r.j_)(l)), e.href;
            }, [l, t]);
          return o.createElement(
            "div",
            {
              className: (0, G.Z)(
                W().FlexColumnContainer,
                Y().share_controls_ctn,
              ),
            },
            !i &&
              o.createElement(
                o.Fragment,
                null,
                o.createElement(
                  "div",
                  { className: Y().ShareLanguagePicker },
                  o.createElement(
                    _.__,
                    { className: Y().LanguageLabel },
                    (0, R.Xx)("#EventDisplay_Share_LanguageLabel"),
                  ),
                  o.createElement(
                    "div",
                    null,
                    o.createElement(ue.uW, {
                      selectedLang: l,
                      fnOnLanguageChanged: s,
                    }),
                  ),
                ),
                o.createElement(
                  "div",
                  {
                    className: (0, G.Z)(
                      W().FlexRowContainer,
                      Y().ShareButtonContainer,
                    ),
                    style: { flexWrap: "wrap" },
                  },
                  o.createElement(
                    de.HP,
                    {
                      toolTipContent: (0, R.Xx)("#EventDisplay_Share_OnSteam"),
                    },
                    o.createElement(
                      "div",
                      {
                        onClick: a,
                        className: (0, G.Z)(
                          W().Button,
                          Y().ShareBtn,
                          Y().ShareSteamBtn,
                        ),
                      },
                      o.createElement("img", {
                        className: Y().SteamIcon,
                        src: "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTQwMHB4IiBoZWlnaHQ9IjE0MDlweCIgdmlld0JveD0iMCAwIDE0MDAgMTQwOSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTQwMCAxNDA5IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik02OTguMTk1LDEwLjEyNWMtMzY0LjM0NywwLTY2Mi44MzgsMjgwLjkzOC02OTEuMjA2LDYzNy45NjlMMzc4Ljc0LDgwMS43OTcNCgljMzEuNTAyLTIxLjUzOSw2OS41NTUtMzQuMTMzLDExMC40OTUtMzQuMTMzYzMuNjY5LDAsNy4zMTUsMC4wOSwxMC45MzksMC4zMTNsMTY1LjMzLTIzOS42MzdjMC0xLjEzNy0wLjAyOS0yLjI1LTAuMDI5LTMuMzk1DQoJYzAtMTQ0LjIyNywxMTcuMzM1LTI2MS41NzQsMjYxLjU4Mi0yNjEuNTc0YzE0NC4yMzMsMCwyNjEuNTgzLDExNy4zNDgsMjYxLjU4MywyNjEuNTc0YzAsMTQ0LjI0Ni0xMTcuMzUsMjYxLjU5OC0yNjEuNTgzLDI2MS41OTgNCgljLTEuOTksMC0zLjk1LTAuMDQ3LTUuOTI2LTAuMDlMNjg1LjM0MSw5NTQuNjg4YzAuMTE5LDMuMDc0LDAuMjMsNi4xOTEsMC4yMyw5LjI5N2MwLDEwOC4yNzMtODguMDc2LDE5Ni4zNTItMTk2LjMzNiwxOTYuMzUyDQoJYy05NS4wNDEsMC0xNzQuNDk0LTY3Ljg0OC0xOTIuNDk2LTE1Ny42NzZMMzAuODcyLDg5Mi43NTRjODIuMzIsMjkxLjEzNywzNDkuODA3LDUwNC41ODIsNjY3LjMyMyw1MDQuNTgyDQoJYzM4My4wNjIsMCw2OTMuNTk4LTMxMC41NTEsNjkzLjU5OC02OTMuNjEzQzEzOTEuNzkzLDMyMC42NjQsMTA4MS4yNTcsMTAuMTI1LDY5OC4xOTUsMTAuMTI1Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDQxLjY0OCwxMDYyLjU2M2wtODUuMjAyLTM1LjIwM2MxNS4xMDUsMzEuNDQ1LDQxLjIzLDU3Ljc2Miw3NS45MTEsNzIuMjE1DQoJYzc0Ljk2MSwzMS4yNSwxNjEuNDEtNC4zMzYsMTkyLjY2Ny03OS4zNTljMTUuMTEyLTM2LjMxMywxNS4yMjQtNzYuMzU1LDAuMjIzLTExMi43NDJjLTE0Ljk3OS0zNi4zOTEtNDMuMjUtNjQuNzczLTc5LjU3Mi03OS45MjINCgljLTM2LjA0Ny0xNS4wMDQtNzQuNjU2LTE0LjQzOC0xMDguNTg3LTEuNjM3bDg4LjAwOSwzNi4zOTFjNTUuMzA0LDIzLjA1MSw4MS40NDQsODYuNTU5LDU4LjQwOCwxNDEuODU1DQoJQzU2MC40NzYsMTA1OS40NTcsNDk2Ljk0NCwxMDg1LjYxMyw0NDEuNjQ4LDEwNjIuNTYzIi8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTEwMS4zNTMsNTI0Ljk2MWMwLTk2LjExMy03OC4xODQtMTc0LjMxMy0xNzQuMjk1LTE3NC4zMTNjLTk2LjA5NiwwLTE3NC4yOTQsNzguMTk5LTE3NC4yOTQsMTc0LjMxMw0KCWMwLDk2LjEwMiw3OC4xOTgsMTc0LjI3NywxNzQuMjk0LDE3NC4yNzdDMTAyMy4xNjksNjk5LjIzOCwxMTAxLjM1Myw2MjEuMDYzLDExMDEuMzUzLDUyNC45NjEgTTc5Ni40MTUsNTI0LjY1Ng0KCWMwLTcyLjMyNCw1OC42MzgtMTMwLjkxOCwxMzAuOTQtMTMwLjkxOGM3Mi4zMTYsMCwxMzAuOTI1LDU4LjU5NCwxMzAuOTI1LDEzMC45MThjMCw3Mi4zMTYtNTguNjA4LDEzMC45MTgtMTMwLjkyNSwxMzAuOTE4DQoJQzg1NS4wNTMsNjU1LjU3NCw3OTYuNDE1LDU5Ni45NzMsNzk2LjQxNSw1MjQuNjU2Ii8+DQo8L3N2Zz4NCg==",
                      }),
                      o.createElement(
                        "span",
                        { style: { whiteSpace: "nowrap" } },
                        (0, R.Xx)("#EventDisplay_Share_OnMyStatus"),
                      ),
                    ),
                  ),
                  o.createElement(
                    de.HP,
                    {
                      toolTipContent: (0, R.Xx)(
                        "#EventDisplay_Share_OnFaceBook",
                      ),
                    },
                    o.createElement(
                      pe.ns,
                      { href: n(F.u_.k_eFacebook), className: Y().ShareBtn },
                      o.createElement("img", {
                        className: (0, G.Z)(W().Button),
                        src: se.Z,
                      }),
                    ),
                  ),
                  o.createElement(
                    de.HP,
                    {
                      toolTipContent: (0, R.Xx)(
                        "#EventDisplay_Share_OnTwitter",
                      ),
                    },
                    o.createElement(
                      pe.ns,
                      { href: n(F.u_.k_eTwitter), className: Y().ShareBtn },
                      o.createElement("img", {
                        className: (0, G.Z)(W().Button),
                        src: me.Z,
                      }),
                    ),
                  ),
                  o.createElement(
                    de.HP,
                    {
                      toolTipContent: (0, R.Xx)("#EventDisplay_Share_OnReddit"),
                    },
                    o.createElement(
                      pe.ns,
                      { href: n(F.u_.k_eReddit), className: Y().ShareBtn },
                      o.createElement("img", {
                        className: (0, G.Z)(W().Button),
                        src: ce.Z,
                      }),
                    ),
                  ),
                ),
                o.createElement("div", { className: W().Divider }),
              ),
            o.createElement(Oe, { eventLink: c }),
          );
        },
        Oe = (e) => {
          const t = o.createRef(),
            [n, a] = o.useState(""),
            i = o.createRef();
          return o.createElement(
            "div",
            null,
            o.createElement(
              "div",
              {
                className: (0, G.Z)(W().FlexRowContainer, Y().linkField),
                onClick: (e) => {
                  t.current &&
                    t.current.ownerDocument.defaultView.navigator.clipboard
                      .writeText(t.current.value)
                      .then((e) => {
                        a((0, R.Xx)("#EventDisplay_Share_CopiedToClipboard"));
                      })
                      .catch((e) => {
                        a(
                          (0, R.Xx)(
                            "#EventDisplay_Share_FailedToCopyToClipboard",
                          ),
                        ),
                          console.error("Failed to copy link to clipboard:", e);
                      });
                },
              },
              o.createElement(
                "span",
                { className: Y().LinkInputLabel },
                (0, R.Xx)(
                  e.labelOverride
                    ? e.labelOverride
                    : "#EventDisplay_Share_Link",
                ),
              ),
              o.createElement("textarea", {
                className: Y().LinkInput,
                ref: t,
                value: e.eventLink,
                readOnly: !0,
              }),
              document.queryCommandSupported("copy") &&
                o.createElement(
                  "div",
                  {
                    className: (0, G.Z)(W().Button, W().Icon, Y().LinkButton),
                    "data-tooltip-text": (0, R.Xx)(
                      "#ToolTip_CopyLinkToClipboard",
                    ),
                    title: (0, R.Xx)("#ToolTip_CopyLinkToClipboard"),
                  },
                  o.createElement("img", {
                    className: Y().ClipboardIcon,
                    src: re.Z,
                  }),
                ),
            ),
            o.createElement("div", { ref: i, className: Y().ClipboardText }, n),
          );
        };
      function Ge(e) {
        let t;
        return !0 === e ? (t = "up") : !1 === e && (t = "down"), t;
      }
      const Re = (e) => {
        const t = (0, E.id)();
        return o.createElement(Be, Object.assign({}, e, { bInGamepadUI: t }));
      };
      let Be = class extends o.Component {
        constructor(e) {
          super(e), (this.m_cancelSignal = l().CancelToken.source());
          const t = k.cb.Get().BHasMyVote(e.eventModel);
          let n;
          t && (n = Ge(k.cb.Get().GetPreviouslyLoadedVote(e.eventModel))),
            (this.state = { bLoadedVote: !!t, myVote: n });
        }
        HandleRefreshMyVotingInformation() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const { eventModel: e, partnerEventStore: t } = this.props;
            k.cb.Get().BIsUserLoggedIn() &&
              (k.cb
                .Get()
                .LoadMyVote(e, this.m_cancelSignal)
                .then((e) => {
                  let t = Ge(e);
                  this.setState({ myVote: t, bLoadedVote: !0 });
                })
                .catch((e) => {
                  let t = (0, J.l)(e);
                  console.error("EventDiscussionWidget = " + t.strErrorMsg);
                }),
              A.sV.LoadClanInfoForClanSteamID(e.clanSteamID).catch((e) => {
                let t = (0, J.l)(e);
                console.error("EventDiscussionWidget = " + t.strErrorMsg);
              }));
          });
        }
        componentDidMount() {
          this.state.bLoadedVote || this.HandleRefreshMyVotingInformation();
        }
        componentDidUpdate(e) {
          this.props.eventModel.GID != e.eventModel.GID &&
            this.HandleRefreshMyVotingInformation();
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "EventDiscussionWidget is being unmounted",
          );
        }
        OnVoteUp() {
          this.Vote("up");
        }
        OnVoteDown() {
          this.Vote("down");
        }
        Vote(e) {
          const { eventModel: t } = this.props;
          (function (e, t) {
            return t.BIsUserLoggedIn()
              ? !t.GetPartnerEventPermissions(e.clanSteamID).limited_user ||
                  ((0, q.AM)(o.createElement(te.r, null), window), !1)
              : (E.De.IN_CLIENT
                  ? console.log(
                      "EventDiscussionWidget: In Client: Cannot use login widget. We expect to be already logged in.",
                    )
                  : (0, q.AM)(
                      o.createElement(Q.uH, {
                        strTitle: (0, R.Xx)("#EventDisplay_Share_NotLoggedIn"),
                        strDescription: (0, R.Xx)(
                          "#EventDisplay_Share_NotLoggedIn_Description",
                        ),
                        strOKButtonText: (0, R.Xx)("#MobileLogin_SignIn"),
                        onOK: () => (0, ee.X)(),
                      }),
                      window,
                    ),
                !1);
          })(t, k.cb.Get()) &&
            this.state.myVote != e &&
            null != e &&
            this.state.bLoadedVote &&
            this.setState(
              { bVotingUp: "up" == e, bVotingDown: "down" == e },
              () => {
                k.cb
                  .Get()
                  .Vote(t, "up" === e, this.m_cancelSignal)
                  .catch((t) => {
                    let n = (0, J.l)(t);
                    console.error(
                      "EventDiscussionWidget.OnVote" + e + " " + n.strErrorMsg,
                      n,
                    ),
                      this.setState({ bVotingDown: !1, bVotingUp: !1 });
                  }),
                  this.setState({ myVote: e, bVotingDown: !1, bVotingUp: !1 });
              },
            );
        }
        OnShareDialog(e) {
          const t = (0, F.wK)(this.props.eventModel);
          (0, q.AM)(
            o.createElement(Le, {
              eventLink: t,
              fnGetSharePageUrl: (e) => (0, F.jV)(this.props.eventModel, e),
              appid: this.props.eventModel.appid,
              emoticonStore: this.props.emoticonStore,
              partnerEventStore: this.props.partnerEventStore,
            }),
            (0, Z.RA)(e),
            { strTitle: (0, R.Xx)("#Button_Share") },
          );
        }
        GotoDiscussion(e) {
          (0, q.AM)(
            o.createElement(Q.JX, {
              strDescription: (0, R.Xx)(
                "#EventDisplay_Share_CommentMigrationInProcess",
              ),
            }),
            (0, Z.RA)(e),
          );
        }
        OpenRepostDialogs(e) {
          (0, q.AM)(
            o.createElement(ie, { eventModel: this.props.eventModel }),
            (0, Z.RA)(e),
          );
        }
        render() {
          const { eventModel: e } = this.props,
            t = (0, $.Lh)(
              e.nVotesUp - e.nVotesDown,
              0,
              Number.MAX_SAFE_INTEGER,
            ),
            n = e.GetForumTopicURL(),
            a = (0, B.bk)(n),
            i = (0, E.h4)(),
            l = E.L7.logged_in && ne.Get().BCanRepostPartnerEvent();
          return o.createElement(
            I.s,
            { className: Y().Container, "flow-children": "row", focusable: !1 },
            o.createElement(
              "div",
              { className: Y().InnerContainer },
              o.createElement(
                "div",
                { className: Y().VoteContainer },
                o.createElement(
                  "div",
                  { className: Y().VoteCount },
                  o.createElement(x.KJh, { className: Y().VoteUpStaticIcon }),
                  (0, oe.AV)(t),
                ),
                o.createElement(
                  I.s,
                  {
                    focusable: !0,
                    className: (0, G.Z)(
                      W().Button,
                      W().Icon,
                      Y().DiscussionButton,
                      "up" == this.state.myVote ? Y().VoteButtonSelected : "",
                    ),
                    onActivate: this.OnVoteUp,
                  },
                  o.createElement(x.KJh, {
                    className:
                      "up" == this.state.myVote
                        ? Y().VoteUpSelectedIcon
                        : Y().VoteUpIcon,
                  }),
                  o.createElement(
                    "span",
                    { className: Y().DiscussionButtonText },
                    (0, R.Xx)("#Button_RateUp"),
                  ),
                ),
                o.createElement(
                  I.s,
                  {
                    focusable: !0,
                    className: (0, G.Z)(
                      W().Button,
                      W().Icon,
                      Y().DiscussionButton,
                      "down" == this.state.myVote ? Y().VoteButtonSelected : "",
                    ),
                    onActivate: this.OnVoteDown,
                  },
                  o.createElement(x.KJh, {
                    className:
                      "down" == this.state.myVote
                        ? Y().VoteDownSelectedIcon
                        : Y().VoteDownIcon,
                  }),
                ),
              ),
              !i &&
                o.createElement(Me, {
                  commentCount: e.nCommentCount,
                  discussionURL: a,
                  gotoDiscussion: this.GotoDiscussion,
                }),
              l &&
                o.createElement(
                  "div",
                  { className: Y().VoteContainer },
                  o.createElement(
                    I.s,
                    {
                      focusable: !0,
                      className: (0, G.Z)(
                        W().Button,
                        W().Icon,
                        Y().DiscussionButton,
                        "down" == this.state.myVote
                          ? Y().VoteButtonSelected
                          : "",
                      ),
                      onActivate: this.OpenRepostDialogs,
                    },
                    (0, R.Xx)("#EventRepost_Dialog_Title"),
                  ),
                ),
            ),
            o.createElement(
              "div",
              { className: Y().ShareContainer },
              !this.props.bInGamepadUI &&
                o.createElement(
                  I.s,
                  {
                    focusable: !0,
                    className: (0, G.Z)(
                      W().Button,
                      W().Icon,
                      Y().DiscussionButton,
                    ),
                    onActivate: this.OnShareDialog,
                  },
                  o.createElement(x.mBz, { className: Y().ShareIcon }),
                  o.createElement(
                    "span",
                    { className: Y().DiscussionButtonText },
                    (0, R.Xx)("#Button_Share"),
                  ),
                ),
            ),
          );
        }
      };
      function Me(e) {
        const { commentCount: t, discussionURL: n, gotoDiscussion: a } = e;
        return o.createElement(
          "div",
          { className: Y().DiscussContainer },
          o.createElement(
            "div",
            { className: Y().DiscussionCount },
            o.createElement(x.IWH, null),
            (0, oe.AV)(t),
          ),
          n &&
            o.createElement(
              le.IS,
              { href: (0, B.OL)(n) },
              o.createElement(
                "div",
                {
                  className: (0, G.Z)(
                    W().Button,
                    W().Icon,
                    Y().DiscussionButton,
                  ),
                },
                o.createElement(x.IWH, null),
                o.createElement(
                  "span",
                  { className: Y().DiscussionButtonText },
                  (0, R.Xx)("#Button_Discuss"),
                ),
              ),
            ),
          !n &&
            o.createElement(
              I.s,
              {
                focusable: !0,
                onActivate: a,
                className: (0, G.Z)(W().Button, W().Icon, Y().DiscussionButton),
              },
              o.createElement(x.IWH, null),
              o.createElement(
                "span",
                { className: Y().DiscussionButtonText },
                (0, R.Xx)("#Button_Discuss"),
              ),
            ),
        );
      }
      (0, a.gn)([H.ak], Be.prototype, "OnVoteUp", null),
        (0, a.gn)([H.ak], Be.prototype, "OnVoteDown", null),
        (0, a.gn)([H.ak], Be.prototype, "OnShareDialog", null),
        (0, a.gn)([H.ak], Be.prototype, "GotoDiscussion", null),
        (0, a.gn)([H.ak], Be.prototype, "OpenRepostDialogs", null),
        (Be = (0, a.gn)([g.Pi], Be));
      var Pe = n(14952),
        Fe = n(82204),
        Ue = n.n(Fe),
        je = n(99119),
        Xe = n.n(je);
      function ze(e) {
        return E.L7.logged_in
          ? !E.L7.is_limited ||
              ((0, q.AM)(
                o.createElement(te.r, {
                  strTokenOverride: e
                    ? "#SteamAward_Vote_LimitedAccount"
                    : "#SteamAward_Nominate_LimitedAccount",
                }),
                window,
              ),
              !1)
          : ((0, q.AM)(
              o.createElement(Q.uH, {
                strTitle: (0, R.Xx)("#EventDisplay_Share_NotLoggedIn"),
                strDescription: (0, R.Xx)(
                  "#EventDisplay_Share_NotLoggedIn_Description",
                ),
                strOKButtonText: (0, R.Xx)("#MobileLogin_SignIn"),
                onOK: ee.X,
              }),
              window,
            ),
            !1);
      }
      function He(e, t) {
        var n, i;
        return (0, a.mG)(this, void 0, void 0, function* () {
          const a =
              E.De.STORE_BASE_URL + "steamawards/ajaxgetsteamawardeventdetails",
            o = { rgCategories: e };
          try {
            const e = yield l().get(a, {
              params: o,
              withCredentials: !1,
              cancelToken: t.token,
            });
            if (t.token.reason) return null;
            if (
              (null === (n = null == e ? void 0 : e.data) || void 0 === n
                ? void 0
                : n.success) == s.s.k_EResultOK &&
              (null === (i = null == e ? void 0 : e.data) || void 0 === i
                ? void 0
                : i.event_details)
            )
              return e.data.event_details;
          } catch (e) {
            const t = (0, J.l)(e);
            console.error(
              "Could not fetch award event details:" + t.strErrorMsg,
              t,
            );
          }
          return null;
        });
      }
      let Ve = class extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = { eCategoryLoaded: null, nomineeAppID: null }),
            (this.m_strPreviousNomineeTitle = null),
            (this.m_cancelSignal = l().CancelToken.source()),
            (this.m_refCheckbox = o.createRef()),
            (this.m_nominationEventDetails = null);
        }
        componentDidMount() {
          this.FetchNominationState(),
            He(
              [this.props.event.GetSteamAwardCategory()],
              this.m_cancelSignal,
            ).then((e) => {
              this.m_nominationEventDetails = e;
            });
        }
        componentDidUpdate() {
          this.props.event.GetSteamAwardCategory() !=
            this.state.eCategoryLoaded &&
            ((this.m_strPreviousNomineeTitle = null),
            this.FetchNominationState());
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "EventDisplaySteamAwardNomination is being unmounted",
          );
        }
        FetchNominationState() {
          var e;
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (
              this.props.event.GetSteamAwardCategory() ==
              Pe.b2.k_ESteamAwardCategoryID_Invalid
            )
              return void this.setState({
                eCategoryLoaded: Pe.b2.k_ESteamAwardCategoryID_Invalid,
                nomineeAppID: null,
              });
            const t =
              E.De.STORE_BASE_URL + "steamawards/ajaxgetusernominations";
            if (E.L7.logged_in)
              try {
                const n = yield l().get(t, {
                  withCredentials: !0,
                  cancelToken: this.m_cancelSignal.token,
                });
                if (this.m_cancelSignal.token.reason) return;
                (null === (e = null == n ? void 0 : n.data) || void 0 === e
                  ? void 0
                  : e.success) == s.s.k_EResultOK &&
                  n.data.nominations &&
                  this.ProcessNominations(n.data.nominations);
              } catch (e) {
                const t = (0, J.l)(e);
                console.error(
                  "Could not fetch previous nominations:" + t.strErrorMsg,
                  t,
                );
              }
            else this.ProcessNominations([]);
          });
        }
        ProcessNominations(e) {
          var t;
          return (0, a.mG)(this, void 0, void 0, function* () {
            const n = this.props.event.GetSteamAwardCategory(),
              a = e[n],
              i = a && a.appid;
            if (
              (this.setState({ eCategoryLoaded: n, nomineeAppID: i }),
              i && i != this.props.event.appid)
            ) {
              if (
                (yield L.Z.Get().QueueAppRequest(i, {}),
                this.m_cancelSignal.token.reason)
              )
                return;
              this.props.event.GetSteamAwardCategory() == n &&
                (this.m_strPreviousNomineeTitle =
                  null === (t = L.Z.Get().GetApp(i)) || void 0 === t
                    ? void 0
                    : t.GetName());
            }
          });
        }
        OnNominateClick(e) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const t = this.props.event.GetSteamAwardCategory();
            if (t != this.state.eCategoryLoaded) return;
            if (!ze(!1)) return;
            const n = this.props.event.appid;
            this.state.nomineeAppID && this.state.nomineeAppID != n
              ? e && this.HandleConflict(() => this.SaveNomination(t, n, e))
              : this.SaveNomination(t, n, e);
          });
        }
        HandleConflict(e) {
          (0, q.AM)(
            o.createElement(We, {
              strLocTokenInfix: "Nomination",
              strNewGameTitle: this.props.event.GetGameTitle(this.props.lang),
              fnGetOldGameTitle: () => this.m_strPreviousNomineeTitle,
              fnOnConfirm: e,
              fnOnCancel: () =>
                this.m_refCheckbox.current &&
                this.m_refCheckbox.current.checked &&
                this.m_refCheckbox.current.Toggle(),
            }),
            window,
          );
        }
        SaveNomination(e, t, n) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (
              (this.setState({
                eCategoryLoaded: e,
                nomineeAppID: n ? t : null,
              }),
              this.props.previewMode)
            )
              return;
            const a = E.De.STORE_BASE_URL + "steamawards/ajaxnominategame",
              i = new URLSearchParams();
            i.append("sessionid", E.De.SESSIONID),
              i.append("categoryid", e.toString()),
              i.append("nominatedid", t.toString()),
              i.append("rescind", n ? "0" : "1"),
              i.append("source", "4");
            try {
              const e = yield l().post(a, i, {
                withCredentials: !0,
                cancelToken: this.m_cancelSignal.token,
              });
              if (this.m_cancelSignal.token.reason) return;
              (e && 200 == e.status && e.data.success == s.s.k_EResultOK) ||
                console.error("Nomination request failed.", e && (0, J.l)(e));
            } catch (e) {
              const t = (0, J.l)(e);
              console.error("SaveNomination failed: " + t.strErrorMsg, t);
            }
          });
        }
        render() {
          var e, t;
          if (
            !this.m_nominationEventDetails ||
            !(null ===
              (e = this.m_nominationEventDetails.rgAwardCategoryDetails) ||
            void 0 === e
              ? void 0
              : e.length)
          )
            return null;
          let n = Math.floor(Date.now() / 1e3);
          if (
            !this.props.previewMode &&
            !this.m_nominationEventDetails.bIsAutumnSaleActive
          )
            return o.createElement(
              "div",
              { className: Ue().ExpiredEventHeader },
              " ",
              (0, R.Xx)("#SteamAwards_ExpiredEvent"),
              " ",
            );
          let a = {};
          this.m_nominationEventDetails.strBackgroundCSS.length &&
            (a.backgroundColor =
              this.m_nominationEventDetails.strBackgroundCSS),
            this.m_nominationEventDetails.strBackgroundImage.length &&
              (a.backgroundImage = `url( ${this.m_nominationEventDetails.strBackgroundImage} )`);
          const i = this.props.event.GetSteamAwardCategory(),
            l =
              i >= this.m_nominationEventDetails.eSteamAwardCategoryIDMin &&
              i < this.m_nominationEventDetails.eSteamAwardCategoryIDMax,
            r =
              this.state.eCategoryLoaded == i &&
              this.state.nomineeAppID == this.props.event.appid,
            s =
              this.props.event.BIsEventActionEnabled() ||
              n < this.props.event.GetStartTimeAndDateUnixSeconds(),
            c = l && (s || r),
            m = new Date().getFullYear();
          return o.createElement(
            "div",
            {
              style: a,
              className: (0, G.Z)(
                Ue().SteamAwardContainer,
                W().PartnerEventFont,
              ),
            },
            o.createElement(
              "div",
              { className: Ue().SteamAwardHeader },
              o.createElement("img", {
                className: Ue().SteamAwardHeaderImage,
                src: `${this.m_nominationEventDetails.strTrophyImg}`,
              }),
              o.createElement(
                "div",
                { className: Ue().SteamAwardMainCtn },
                o.createElement(
                  "div",
                  { className: Ue().SteamAwardMainTitle },
                  " ",
                  (0, R.Xx)("#SteamAwards_EventMainTitle"),
                  " ",
                ),
                o.createElement(
                  "div",
                  { className: Ue().SteamAwardSubTitle },
                  s
                    ? (0, R.Xx)("#SteamAwards_EventCallToAction")
                    : (0, R.Xx)("#SteamAwards_EventVotingDateTeaser", m),
                  s &&
                    o.createElement(
                      "a",
                      {
                        href: E.De.STORE_BASE_URL + "steamawards/nominations/",
                        className: Ue().SteamAwardLearnMore,
                      },
                      "(",
                      (0, R.Xx)("#EventDisplay_CallToAction_LearnMore"),
                      ")",
                    ),
                ),
                o.createElement(
                  "div",
                  { className: Ue().SteamAwardHeaderText },
                  s
                    ? l
                      ? (0, R.Xx)(
                          "#SteamAwards_EventNominateGamePrompt_Long",
                          this.props.event.GetGameTitle(this.props.lang),
                        )
                      : o.createElement(
                          "a",
                          {
                            className: Xe().LinkText,
                            href:
                              E.De.STORE_BASE_URL + "steamawards/nominations/",
                          },
                          (0, R.Xx)(
                            "#SteamAwards_EventNominateGamePrompt_NoCategory",
                            this.props.event.GetGameTitle(this.props.lang),
                          ),
                        )
                    : (0, R.Xx)("#SteamAwards_Event_NominationsClosed"),
                ),
              ),
            ),
            c &&
              o.createElement(
                "div",
                { className: Ue().SteamAwardVoteWidget },
                o.createElement(
                  "div",
                  {
                    style: {
                      background:
                        null === (t = this.m_nominationEventDetails) ||
                        void 0 === t
                          ? void 0
                          : t.strNominateButtonBGColor,
                    },
                    className: Ue().SteamAwardNominateButton,
                  },
                  o.createElement(_.ji, {
                    ref: this.m_refCheckbox,
                    className: Ue().SteamAwardVoteCheckBox,
                    checked: r,
                    onChange: this.OnNominateClick,
                    disabled: !s,
                    color: "#FFFFFF",
                    highlightColor: "white",
                    label: o.createElement(
                      o.Fragment,
                      null,
                      o.createElement(
                        "div",
                        { className: Ue().SteamAwardCategoryTitle },
                        this.m_nominationEventDetails.rgAwardCategoryDetails[0]
                          .strSuggestedCategoryTitle,
                      ),
                      o.createElement(
                        "span",
                        { className: Ue().SteamAwardCategoryDesc },
                        this.m_nominationEventDetails.rgAwardCategoryDetails[0]
                          .strSuggestedCategoryDesc,
                      ),
                    ),
                  }),
                ),
                s && i != this.m_nominationEventDetails.eLaborOfLove
                  ? o.createElement(
                      "div",
                      { className: Ue().SteamAwardLinkToNominationPage },
                      o.createElement(
                        "a",
                        {
                          href:
                            E.De.STORE_BASE_URL + "steamawards/nominations/",
                        },
                        " ",
                        (0, R.Xx)(
                          "#SteamAwards_EventNominationAlternativeLinkText",
                        ),
                        " ",
                      ),
                    )
                  : null,
              ),
          );
        }
      };
      (0, a.gn)([f.LO], Ve.prototype, "m_strPreviousNomineeTitle", void 0),
        (0, a.gn)([f.LO], Ve.prototype, "m_nominationEventDetails", void 0),
        (0, a.gn)([H.ak], Ve.prototype, "OnNominateClick", null),
        (0, a.gn)([H.ak], Ve.prototype, "SaveNomination", null),
        (Ve = (0, a.gn)([g.Pi], Ve));
      let We = class extends o.Component {
        OnConfirm() {
          this.props.fnOnConfirm(), this.props.closeModal();
        }
        OnCancel() {
          this.props.fnOnCancel(),
            this.props.closeModal && this.props.closeModal();
        }
        render() {
          const e = o.createElement(
              "span",
              { className: Ue().SteamAwardModalGameTitle },
              this.props.strNewGameTitle,
            ),
            t = this.props.fnGetOldGameTitle(),
            n = t
              ? o.createElement(
                  "span",
                  { className: Ue().SteamAwardModalGameTitle },
                  t,
                )
              : o.createElement(ae.V, {
                  size: "small",
                  position: "center",
                  string: (0, R.Xx)("#Loading"),
                });
          return o.createElement(Q.uH, {
            bDestructiveWarning: !0,
            strTitle: (0, R.Xx)(
              `#SteamAward_${this.props.strLocTokenInfix}ConflictWarning_Title`,
            ),
            strDescription: (0, R.kQ)(
              `#SteamAward_${this.props.strLocTokenInfix}ConflictWarning_Explanation`,
              n,
              e,
            ),
            onOK: this.OnConfirm,
            onCancel: this.OnCancel,
          });
        }
      };
      (0, a.gn)([H.ak], We.prototype, "OnConfirm", null),
        (0, a.gn)([H.ak], We.prototype, "OnCancel", null),
        (We = (0, a.gn)([g.Pi], We));
      let qe = class extends o.Component {
        constructor() {
          super(...arguments),
            (this.state = { eCategoryLoaded: null, votedForAppID: null }),
            (this.m_strPreviousVotedForAppTitle = null),
            (this.m_cancelSignal = l().CancelToken.source());
        }
        componentDidMount() {
          this.FetchVoteState();
        }
        componentDidUpdate() {
          this.props.eVoteCategory != this.state.eCategoryLoaded &&
            this.FetchVoteState();
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "EventDisplaySteamAwardVote is being unmounted",
          );
        }
        FetchVoteState() {
          var e;
          return (0, a.mG)(this, void 0, void 0, function* () {
            const t = E.De.STORE_BASE_URL + "steamawards/ajaxgetuservotes";
            if (E.L7.logged_in)
              try {
                const n = yield l().get(t, {
                  withCredentials: !0,
                  cancelToken: this.m_cancelSignal.token,
                });
                if (this.m_cancelSignal.token.reason) return;
                (null === (e = null == n ? void 0 : n.data) || void 0 === e
                  ? void 0
                  : e.success) == s.s.k_EResultOK &&
                  n.data.votes &&
                  this.UpdateVoteState(n.data.votes);
              } catch (e) {
                const t = (0, J.l)(e);
                console.error(
                  "Could not fetch previous votes:" + t.strErrorMsg,
                  t,
                );
              }
            else this.UpdateVoteState([]);
          });
        }
        UpdateVoteState(e) {
          var t;
          return (0, a.mG)(this, void 0, void 0, function* () {
            const n = this.props.eVoteCategory,
              a = e[n];
            if (
              (this.setState({ eCategoryLoaded: n, votedForAppID: a }),
              a && a != this.props.appID)
            ) {
              if (
                (yield L.Z.Get().QueueAppRequest(a, {}),
                this.m_cancelSignal.token.reason)
              )
                return;
              this.props.eVoteCategory == n &&
                (this.m_strPreviousVotedForAppTitle =
                  null === (t = L.Z.Get().GetApp(a)) || void 0 === t
                    ? void 0
                    : t.GetName());
            }
          });
        }
        OnVoteClick() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const e = this.props.eVoteCategory;
            if (e != this.state.eCategoryLoaded) return;
            if (!ze(!0)) return;
            const t = this.props.appID;
            this.state.votedForAppID && this.state.votedForAppID != t
              ? this.HandleConflict(() => this.SaveVote(e, t))
              : this.SaveVote(e, t);
          });
        }
        HandleConflict(e) {
          const t = L.Z.Get().GetApp(this.props.appID);
          (0, q.AM)(
            o.createElement(We, {
              strLocTokenInfix: "Vote",
              strNewGameTitle: null == t ? void 0 : t.GetName(),
              fnGetOldGameTitle: () => this.m_strPreviousVotedForAppTitle,
              fnOnConfirm: e,
              fnOnCancel: () => {},
            }),
            window,
          );
        }
        SaveVote(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (
              (this.setState({ eCategoryLoaded: e, votedForAppID: t }),
              this.props.previewMode &&
                E.De.EUNIVERSE == r.xO.k_EUniversePublic)
            )
              return;
            const n = E.De.STORE_BASE_URL + "steamawards/ajaxvoteforgame",
              a = new URLSearchParams();
            a.append("sessionid", E.De.SESSIONID),
              a.append("categoryid", e.toString()),
              a.append("appid", t.toString());
            try {
              const e = yield l().post(n, a, {
                withCredentials: !0,
                cancelToken: this.m_cancelSignal.token,
              });
              if (this.m_cancelSignal.token.reason) return;
              (e && 200 == e.status && e.data.success == s.s.k_EResultOK) ||
                console.error("Vote request failed.", e && (0, J.l)(e));
            } catch (e) {
              const t = (0, J.l)(e);
              console.error("SaveVote failed: " + t.strErrorMsg, t);
            }
          });
        }
        render() {
          const e = this.props.eVoteCategory,
            t =
              this.state.eCategoryLoaded == e &&
              this.state.votedForAppID == this.props.appID;
          return this.props.bIsEventActionEnabled || this.props.previewMode || t
            ? o.createElement(
                "div",
                { className: (0, G.Z)(Ue().SteamAwardVoteWidget) },
                o.createElement("div", {
                  className: Ue().SteamAwardVotePrompt,
                }),
                o.createElement(
                  "div",
                  { className: Ue().SteamAwardVoteButtonArea },
                  o.createElement(
                    "div",
                    {
                      className: (0, G.Z)(
                        Ue().SteamAwardCategoryTitle,
                        Ue().VotingTitle,
                      ),
                    },
                    this.props.strCategoryTitle,
                  ),
                  !this.props.bRenderFromStorePage &&
                    o.createElement(
                      "span",
                      { className: Ue().SteamAwardCategoryDesc },
                      this.props.strCategoryDesc,
                    ),
                  t
                    ? o.createElement(
                        "div",
                        { className: Ue().SteamAwardVoteButtonSubmitted },
                        o.createElement(
                          "span",
                          { className: Ue().SteamAwardVoteButtonText },
                          (0, R.Xx)("#SteamAward_VoteButton_VotedText"),
                        ),
                      )
                    : o.createElement(
                        "button",
                        {
                          className: Ue().SteamAwardVoteButton,
                          onClick: this.OnVoteClick,
                        },
                        o.createElement(
                          "span",
                          { className: Ue().SteamAwardVoteButtonText },
                          (0, R.Xx)("#SteamAward_VoteButton_PromptText"),
                        ),
                      ),
                ),
              )
            : null;
        }
      };
      (0, a.gn)([f.LO], qe.prototype, "m_strPreviousVotedForAppTitle", void 0),
        (0, a.gn)([H.ak], qe.prototype, "OnVoteClick", null),
        (0, a.gn)([H.ak], qe.prototype, "SaveVote", null),
        (qe = (0, a.gn)([g.Pi], qe));
      o.Component;
      let Ze = class extends o.Component {
        constructor(e) {
          super(e),
            (this.m_cancelSignal = l().CancelToken.source()),
            (this.m_awardEventDetails = null),
            (this.state = { bAppInfoLoaded: !1 });
        }
        componentDidMount() {
          L.Z.Get()
            .QueueAppRequest(this.props.appID, {})
            .then(() => {
              L.Z.Get().BHasApp(this.props.appID) &&
                this.setState({ bAppInfoLoaded: !0 });
            }),
            He(this.props.voteCategories, this.m_cancelSignal).then((e) => {
              this.m_awardEventDetails = e;
            });
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "WinterSaleSteamAwardVoteWrapper is being unmounted",
          );
        }
        GetNominatedAwardCategories() {
          var e;
          let t = [];
          return (
            null === (e = this.m_awardEventDetails.rgAwardCategoryDetails) ||
              void 0 === e ||
              e.forEach((e) => {
                t.push(
                  o.createElement(
                    qe,
                    Object.assign(
                      {
                        key: e.eSteamAwardCategoryID,
                        eVoteCategory: e.eSteamAwardCategoryID,
                        strCategoryDesc: e.strSuggestedCategoryDesc,
                        strCategoryTitle: e.strSuggestedCategoryTitle,
                      },
                      this.props,
                    ),
                  ),
                );
              }),
            t
          );
        }
        render() {
          var e;
          if (!this.state.bAppInfoLoaded || !this.props.voteCategories)
            return null;
          if (!this.m_awardEventDetails) return null;
          let t = {};
          return (
            this.m_awardEventDetails.strBackgroundCSS.length &&
              (t.backgroundColor = this.m_awardEventDetails.strBackgroundCSS),
            this.m_awardEventDetails.strBackgroundImage.length &&
              (t.backgroundImage = `url( ${this.m_awardEventDetails.strBackgroundImage} )`),
            o.createElement(
              "div",
              {
                style: t,
                className: (0, G.Z)(
                  Ue().SteamAwardContainer,
                  W().PartnerEventFont,
                ),
              },
              o.createElement(
                "div",
                { className: Ue().SteamAwardHeader },
                o.createElement("img", {
                  className: Ue().SteamAwardHeaderImage,
                  src: this.m_awardEventDetails.strTrophyImg,
                }),
                o.createElement(
                  "div",
                  { className: Ue().SteamAwardMainCtn },
                  o.createElement(
                    "div",
                    { className: Ue().SteamAwardMainTitle },
                    " ",
                    (0, R.Xx)("#SteamAwards_EventMainTitleCombined"),
                    " ",
                  ),
                  o.createElement(
                    "div",
                    { className: Ue().SteamAwardHeaderText },
                    this.props.bIsEventActionEnabled
                      ? o.createElement(
                          o.Fragment,
                          null,
                          (0, R.Xx)(
                            "#SteamAwards_EventVoteForGamePrompt",
                            null === (e = L.Z.Get().GetApp(this.props.appID)) ||
                              void 0 === e
                              ? void 0
                              : e.GetName(),
                          ),
                          o.createElement(
                            "a",
                            {
                              href: E.De.STORE_BASE_URL + "steamawards/",
                              className: (0, G.Z)(
                                Ue().SteamAwardLearnMore,
                                Ue().BottomRight,
                              ),
                            },
                            (0, R.Xx)("#EventDisplay_CallToAction_LearnMore"),
                          ),
                        )
                      : o.createElement(
                          "a",
                          {
                            href: E.De.STORE_BASE_URL + "steamawards/",
                            className: Ue().LinkText,
                          },
                          (0, R.Xx)("#SteamAwards_Event_VotesClosed"),
                        ),
                  ),
                  o.createElement(
                    "div",
                    { className: Ue().AwardCategoriesCtn },
                    this.GetNominatedAwardCategories(),
                  ),
                ),
              ),
            )
          );
        }
      };
      (0, a.gn)([f.LO], Ze.prototype, "m_awardEventDetails", void 0),
        (Ze = (0, a.gn)([g.Pi], Ze));
      var Ke = n(25125),
        Ye = n(39261),
        Qe = n(19094);
      var $e = n(21904),
        Je = n(73406);
      function et(e) {
        const { appid: t } = e,
          n = (function (e) {
            const [t, n] = (0, o.useState)(void 0),
              a = (0, E.h4)();
            return (
              (0, o.useEffect)(() => {
                if (a || !e) n([]);
                else {
                  const t = new Qe.J(E.De.WEBAPI_BASE_URL),
                    a = he.gA.Init(Ye.Fi);
                  a.Body().set_account_type(Ye.Hm.k_EInternalAppType),
                    a.Body().set_account_id("" + e),
                    a.Body().set_return_access_token(!1),
                    Ye.it
                      .GetLinkedAccountInfo(t.GetServiceTransport(), a)
                      .then((e) => {
                        var t;
                        return n(
                          (null === (t = e.Body().external_accounts()) ||
                          void 0 === t
                            ? void 0
                            : t.map((e) => ({
                                external_type: e.external_type(),
                                external_id: e.external_id(),
                                external_user_name: e.external_user_name(),
                                external_url: e.external_url(),
                                external_follows: void 0,
                              }))) || [],
                        );
                      })
                      .catch(() => n([]));
                }
              }, [e, a, n]),
              t
            );
          })(t);
        return n && 0 != n.length && E.De.IMG_URL
          ? o.createElement(
              "div",
              { className: Xe().AppSocialLinksCtn },
              o.createElement(
                "div",
                { className: W().EventEditorTextTitle },
                (0, R.Xx)("#EventDisplay_SocialTitle"),
              ),
              o.createElement(
                "div",
                { className: Xe().AppSocialLinks },
                n
                  .filter(
                    (e) => e.external_type != Ye.hy.k_EExternalFacebookAccount,
                  )
                  .map((e) =>
                    o.createElement(tt, {
                      key: "app_social_link_" + t + "_" + e.external_type,
                      social: e,
                    }),
                  ),
              ),
            )
          : null;
      }
      function tt(e) {
        const { social: t } = e,
          n =
            E.De.IMG_URL +
            "social/" +
            (0, R.Xx)(
              "#SocialMedia_Type_ShortName_" + t.external_type,
            ).toLocaleLowerCase() +
            "_large.png";
        return o.createElement(
          "a",
          {
            href: (0, B.bk)(t.external_url),
            "data-tooltip-text": t.external_user_name,
            target: E.De.IN_CLIENT ? void 0 : "_blank",
            rel: "noopener noreferrer",
          },
          o.createElement("img", { className: Xe().AppSocialLink, src: n }),
        );
      }
      function nt(e) {
        const { event: t, dateRangeLayout: n = "horizontal" } = e,
          [a, i, l] = (0, Ke.SZ)(() => [
            t.GetStartTimeAndDateUnixSeconds(),
            t.GetEndTimeAndDateUnixSeconds(),
            t.type,
          ]),
          r = {};
        return (
          "vertical" == n && (r.ShortDateRange = Xe().VerticalLocalDateAndTime),
          o.createElement(
            "div",
            { className: Xe().EventDetailTimeInfo },
            o.createElement($e.uv, {
              startDateAndTime: a,
              endDateAndTime: i,
              bHideEndTime: !(0, Je.G1)(l),
              stylesmodule: r,
            }),
          )
        );
      }
      var at = n(87178),
        it = n(60729),
        lt = n(97352),
        ot = n(19983),
        rt = n.n(ot);
      function st(e) {
        const { event: t } = e,
          n = (0, Ke.SZ)(() => {
            var e;
            return (
              (null === (e = t.jsondata) || void 0 === e
                ? void 0
                : e.referenced_appids) || []
            );
          }),
          [a, i] = o.useState(!1);
        if (
          (o.useEffect(() => {
            L.Z.Get()
              .QueueMultipleAppRequests(n, {})
              .then(() => i(!0));
          }, [n]),
          !n.length || !a)
        )
          return null;
        const l = n
            .map((e) => L.Z.Get().GetApp(e))
            .filter(Boolean)
            .map((e) => `[url="${e.GetStorePageURL()}"]${e.GetName()}[/url]`)
            .join((0, R.Xx)("#EventDisplay_ReferencedApps_Joiner")),
          r = (0, R.kb)("#EventDisplay_ReferencedApps", n.length, l);
        return o.createElement(
          "div",
          { className: rt().ReferencedApps },
          o.createElement(Te.d, { text: r }),
        );
      }
      var ct = n(34329),
        mt = (n(74831), n(25871));
      function dt(e) {
        const { children: t } = e;
        return (0, E.id)() && !E.De.IN_STEAMUI
          ? o.createElement(
              ct.TN,
              { className: V.GamepadOnlyScrollPanel },
              o.createElement(
                I.s,
                {
                  focusable: !0,
                  noFocusRing: !0,
                  className: V.GamepadOnlyPanel,
                },
                t,
              ),
            )
          : o.createElement(o.Fragment, null, t);
      }
      var pt = n(55330);
      const ut = o.lazy(() =>
        Promise.all([n.e(2706), n.e(4601)]).then(n.bind(n, 66435)),
      );
      function _t(e) {
        var t;
        const [n, a] = (0, mt.vs)(e.appid, { include_assets: !0 }),
          [i, l] = (0, A.KU)(e.clanID);
        let r = "";
        return (
          e.appid
            ? (r =
                (null === (t = null == n ? void 0 : n.GetAssets()) ||
                void 0 === t
                  ? void 0
                  : t.GetCommunityIconURL()) || "")
            : e.clanID && (r = l ? l.avatar_full_url : ""),
          o.createElement(
            "div",
            {
              className: (0, G.Z)(P().ScrollButton, P().GameArt, P().AnimIn),
              onClick: e.onAppIconClick,
            },
            r && o.createElement("img", { src: r }),
          )
        );
      }
      let ht = class extends o.Component {
        constructor(e) {
          super(e),
            (this.m_loader = null),
            (this.m_refPage = o.createRef()),
            (this.m_refContent = o.createRef()),
            (this.m_refScroll = o.createRef()),
            (this.m_refScrollAnchor = o.createRef()),
            (this.m_scrollAnimation = null),
            (this.m_nPreviousRenderCount = 0),
            (this.m_nCurrentRenderCount = 0),
            !this.props.bShowOnlyInitialEvent &&
              this.props.initialEvent &&
              ((this.m_loader = new ft(this.props.partnerEventStore)),
              this.m_loader.InitAroundEvent(
                this.props.initialEvent,
                this.props.additionalParams,
              ));
        }
        FindCurrentlyViewedEventIndex() {
          if (!this.m_refContent.current || !this.m_refScroll.current)
            return -1;
          let e = this.m_refContent.current.children,
            t = this.GetScrollTopForComparison();
          for (let n = 0; n < e.length; n++) {
            let a = e[n],
              i = a.offsetTop,
              l = i + a.clientHeight;
            if (i <= t && l > t) return n;
          }
          return -1;
        }
        GetPaddingTop() {
          return this.props.showAppHeader ? 136 : 56;
        }
        GetScrollTopForComparison() {
          return Math.ceil(
            this.m_refScroll.current.scrollTop + this.GetPaddingTop() + 24,
          );
        }
        ScrollToEvent(e) {
          let t = this.m_refContent.current;
          if (!t) return;
          if (e < 0 || e >= t.children.length) return;
          if (this.m_scrollAnimation) return;
          let n = t.children[e].offsetTop - this.GetPaddingTop();
          this.ScrollToOffset(n);
        }
        ScrollToOffset(e) {
          let t = this.m_refScroll.current;
          if (!t) return;
          let n = {
            msDuration: 500,
            timing: "cubic-in-out",
            onComplete: this.OnScrollComplete,
          };
          (this.m_scrollAnimation = new it.jg(t, { scrollTop: e }, n)),
            this.m_scrollAnimation.Start();
        }
        ScrollToBottom() {
          this.m_refScroll.current &&
            this.ScrollToOffset(this.m_refScroll.current.scrollHeight);
        }
        ScrollToNextEvent() {
          let e = this.m_loader.GetEvents(),
            t = this.FindCurrentlyViewedEventIndex() + 1;
          t >= e.length
            ? this.ScrollToBottom()
            : (this.ScrollToEvent(t),
              t == e.length - 1 && this.m_loader.LoadMoreAtEnd());
        }
        ScrollToPrevEvent() {
          let e = this.FindCurrentlyViewedEventIndex(),
            t = e - 1;
          if (t < 0) return void this.ScrollToOffset(0);
          let n = this.m_refContent.current;
          if (n) {
            let a = n.children[e],
              i = a.offsetTop,
              l = i + a.clientHeight,
              o = this.GetScrollTopForComparison();
            (o -= 0.3 * (l - i)), i <= o && (t = e);
          }
          this.ScrollToEvent(t);
        }
        OnScrollComplete() {
          this.m_scrollAnimation = null;
        }
        Close() {
          this.props.closeModal && this.props.closeModal();
        }
        OnBackgroundClick(e) {
          e.currentTarget == e.target && this.Close();
        }
        OnKeyDown(e) {
          e.keyCode == y.J.Escape && this.Close();
        }
        OnScroll(e) {
          if (this.props.bShowOnlyInitialEvent) return;
          let t = this.m_refScroll.current;
          if (!t) return;
          let n = t.clientHeight;
          t.scrollHeight - (t.scrollTop + n) <= n &&
            this.m_loader.LoadMoreAtEnd(),
            t.scrollTop <= n && this.m_loader.LoadMoreAtBeginning();
        }
        getSnapshotBeforeUpdate(e) {
          let t = this.m_nCurrentRenderCount != this.m_nPreviousRenderCount;
          if (((this.m_nPreviousRenderCount = this.m_nCurrentRenderCount), !t))
            return null;
          let n = this.m_refScroll.current;
          if (!n || !this.m_refScrollAnchor.current) return null;
          let a = this.m_refScrollAnchor.current.GetDOM();
          return a ? a.offsetTop - n.scrollTop : null;
        }
        OnTouchStart(e) {
          1 == e.touches.length &&
            (this.m_nTouchStartClientY = e.touches[0].clientY);
        }
        OnTouchMove(e) {
          if (!this.m_refScroll.current || 0 == e.touches.length) return;
          const t = this.m_nTouchStartClientY - e.touches[0].clientY;
          this.SuppressUnwantedScrollEventsBecauseSafariIsDumb(e, t);
        }
        OnWheel(e) {
          this.SuppressUnwantedScrollEventsBecauseSafariIsDumb(e, e.deltaY);
        }
        SuppressUnwantedScrollEventsBecauseSafariIsDumb(e, t) {
          const n = Z.GB(e.target) && Z.ni(this.m_refScroll.current, e.target),
            a = t < 0 && this.m_refScroll.current.scrollTop < 1,
            i =
              this.m_refScroll.current.scrollHeight -
                this.m_refScroll.current.scrollTop <=
              this.m_refScroll.current.clientHeight;
          (!n || a || (t > 0 && i)) && e.cancelable && e.preventDefault();
        }
        SetGlobalHeaderHidden(e) {
          const t = document.getElementsByClassName("responsive_header");
          (0, De.X)(t.length <= 1, "Must have at most one responsive_header"),
            t.length >= 1 && (t[0].style.display = e ? "none" : null);
        }
        SetFooterPinnedToBottom(e) {
          const t = document.getElementById("footer");
          t && (t.style.position = e ? "absolute" : null);
        }
        componentDidMount() {
          const e = this.m_refScroll.current;
          e && !Z.ni(e, e.ownerDocument.activeElement) && e.focus();
          const t = this.m_refPage.current;
          t &&
            (t.addEventListener("touchstart", this.OnTouchStart),
            t.addEventListener("touchmove", this.OnTouchMove, { passive: !1 }),
            t.addEventListener("wheel", this.OnWheel, { passive: !1 })),
            this.props.showAppHeader && this.SetGlobalHeaderHidden(!0),
            this.SetFooterPinnedToBottom(!0);
        }
        componentDidUpdate(e, t, n) {
          if (null !== n) {
            let e = this.m_refScroll.current;
            e && !Z.ni(e, e.ownerDocument.activeElement) && e.focus();
            let t = this.m_refScrollAnchor.current
              ? this.m_refScrollAnchor.current.GetDOM()
              : null;
            t && (e.scrollTop = t.offsetTop - n);
          }
        }
        componentWillUnmount() {
          const e = this.m_refPage.current;
          e &&
            (e.removeEventListener("touchstart", this.OnTouchStart),
            e.removeEventListener("touchmove", this.OnTouchMove),
            e.removeEventListener("wheel", this.OnWheel)),
            this.props.showAppHeader && this.SetGlobalHeaderHidden(!1),
            this.SetFooterPinnedToBottom(!1);
        }
        render() {
          var e;
          const { initialEvent: t, bShowOnlyInitialEvent: n } = this.props,
            a = !t,
            i = a ? [] : n ? [t] : this.m_loader.GetEvents(),
            l = [];
          let r = this.props.appid,
            s =
              null === (e = this.props.clanSteamID) || void 0 === e
                ? void 0
                : e.GetAccountID();
          for (const e of i) {
            const t = e.GID == this.props.initialEvent.GID,
              n = t;
            l.push(
              o.createElement(Et, {
                ref: t ? this.m_refScrollAnchor : null,
                key: e.GID,
                event: e,
                emoticonStore: this.props.emoticonStore,
                partnerEventStore: this.props.partnerEventStore,
                disableReadTracking: t,
                fnFilterImageURLsForKnownFailures:
                  this.props.fnFilterImageURLsForKnownFailures,
                fnImageFailureCallback: this.props.fnImageFailureCallback,
                bDisableBroadcastPlayer: !n,
                className: this.props.eventClassName,
              }),
            ),
              null == r && (r = e.appid),
              null == s && (s = e.clanSteamID.GetAccountID());
          }
          return (
            (this.m_nCurrentRenderCount = l.length),
            o.createElement(
              I.s,
              {
                onCancelButton: this.props.closeModal,
                className: P().AppPartnerEventsPage,
                ref: this.m_refPage,
              },
              this.props.showAppHeader &&
                o.createElement(Dt, { appId: r, clanId: s }),
              o.createElement(
                "div",
                {
                  className: (0, G.Z)(
                    P().AppPartnerEventsBody,
                    P().EndlessScroll,
                  ),
                  ref: this.m_refScroll,
                  onScroll: this.OnScroll,
                  onClick: this.OnBackgroundClick,
                  tabIndex: -1,
                  onKeyDown: this.OnKeyDown,
                },
                a
                  ? o.createElement(
                      "div",
                      { className: P().NoEvents },
                      (0, R.Xx)("#EventDisplay_NoEventsToSee"),
                    )
                  : o.createElement(
                      o.Fragment,
                      null,
                      o.createElement(
                        "div",
                        {
                          className: (0, G.Z)(
                            P().ControlSection,
                            !this.props.onAppIconClick && P().NoGameLink,
                            n && P().NoScrollArrows,
                          ),
                        },
                        o.createElement(
                          "div",
                          { className: P().ControlSectionWidth },
                          o.createElement(
                            "div",
                            { className: P().ControlSectionRightSide },
                            Boolean(this.props.closeModal) &&
                              o.createElement(
                                "div",
                                {
                                  className: (0, G.Z)(
                                    P().CloseButton,
                                    P().AnimIn,
                                  ),
                                  onClick: this.Close,
                                },
                                o.createElement(x.pVO, null),
                              ),
                            !n &&
                              o.createElement(
                                "div",
                                {
                                  className: (0, G.Z)(
                                    P().ScrollButton,
                                    P().Up,
                                    P().AnimIn,
                                  ),
                                  onClick: this.ScrollToPrevEvent,
                                },
                                o.createElement(x.V7n, { angle: 0 }),
                              ),
                            !n &&
                              o.createElement(
                                "div",
                                {
                                  className: (0, G.Z)(
                                    P().ScrollButton,
                                    P().Down,
                                    P().AnimIn,
                                  ),
                                  onClick: this.ScrollToNextEvent,
                                },
                                o.createElement(x.V7n, { angle: 180 }),
                              ),
                            this.props.onAppIconClick &&
                              o.createElement(_t, {
                                appid: r,
                                clanID: s,
                                onAppIconClick: this.props.onAppIconClick,
                              }),
                          ),
                        ),
                      ),
                      !n &&
                        o.createElement(gt, {
                          loader: this.m_loader,
                          location: "top",
                        }),
                      o.createElement(
                        "div",
                        {
                          ref: this.m_refContent,
                          className: (0, G.Z)(
                            P().AppPartnerEventsContainer,
                            !this.props.onAppIconClick && P().NoGameLink,
                          ),
                        },
                        l,
                      ),
                      !n &&
                        o.createElement(gt, {
                          loader: this.m_loader,
                          location: "bottom",
                        }),
                      Boolean(n) &&
                        o.createElement(
                          F.JW,
                          { eventModel: t, route: F.Ue.k_eStoreNewsHub },
                          (0, R.Xx)("#EventBrowse_MoreEventsBtn"),
                        ),
                    ),
              ),
            )
          );
        }
      };
      (0, a.gn)([H.ak], ht.prototype, "ScrollToNextEvent", null),
        (0, a.gn)([H.ak], ht.prototype, "ScrollToPrevEvent", null),
        (0, a.gn)([H.ak], ht.prototype, "OnScrollComplete", null),
        (0, a.gn)([H.ak], ht.prototype, "Close", null),
        (0, a.gn)([H.ak], ht.prototype, "OnBackgroundClick", null),
        (0, a.gn)([H.ak], ht.prototype, "OnKeyDown", null),
        (0, a.gn)([H.ak], ht.prototype, "OnScroll", null),
        (0, a.gn)([H.ak], ht.prototype, "OnTouchStart", null),
        (0, a.gn)([H.ak], ht.prototype, "OnTouchMove", null),
        (0, a.gn)([H.ak], ht.prototype, "OnWheel", null),
        (ht = (0, a.gn)([g.Pi], ht));
      const gt = (0, g.Pi)((e) => {
          let t = e.loader.GetNewerState(),
            n = e.loader.GetOlderState();
          return t == St.Loading && n == St.Loading
            ? null
            : ("top" == e.location ? t : n) == St.Loading
            ? o.createElement(
                "div",
                { className: P().DirectionState },
                o.createElement(ae.V, {
                  position: "center",
                  string: (0, R.Xx)("#Loading"),
                }),
              )
            : null;
        }),
        Et = o.forwardRef(function (e, t) {
          const n = (0, E.id)(),
            [a, i] = (0, mt.vs)(e.event.appid, { include_assets: !0 });
          return o.createElement(
            vt,
            Object.assign({ ref: t }, e, { bInGamepadUI: n, storeItem: a }),
          );
        });
      let vt = class extends o.Component {
        constructor() {
          super(...arguments),
            (this.m_refContent = o.createRef()),
            (this.m_sendReadInfo = new ye.Ar()),
            (this.m_bSentRead = !1);
        }
        OnEnterVisible() {
          if (this.m_bSentRead || this.m_sendReadInfo.IsScheduled()) return;
          this.m_sendReadInfo.Schedule(750, () => {
            k.cb
              .Get()
              .RecordEventRead(
                this.props.event,
                C.Sz.k_EPartnerEventDisplayLocation_EventScroller,
              ),
              (this.m_bSentRead = !0);
          });
        }
        OnLeaveVisible() {
          this.m_sendReadInfo.Cancel();
        }
        GetDOM() {
          return this.m_refContent.current;
        }
        render() {
          const {
              event: e,
              langOverride: t,
              partnerEventStore: n,
              emoticonStore: a,
              className: i,
              additionalTypeAndDateElement: l,
              fnFilterImageURLsForKnownFailures: s,
              fnImageFailureCallback: c,
              headerClassnames: m,
              isPreview: d,
              storeItem: p,
            } = this.props,
            u = t || (0, r.jM)(E.De.LANGUAGE),
            _ = e.GetDescriptionWithFallback(u) || "",
            h = m;
          let g = e.GetImageForSizeAsArrayWithFallback(
            "background",
            u,
            b.FN.background_main,
          );
          s && (g = s(g));
          const v = e.GetCategoryAsString(),
            S = e.type,
            f = e.BImageNeedScreenshotFallback("background", u);
          let y = "";
          if (e.appid) y = (null == p ? void 0 : p.GetName()) || "";
          else if (e.clanSteamID) {
            const t = A.sV.GetClanInfoByClanAccountID(
              e.clanSteamID.GetAccountID(),
            );
            y = t ? t.group_name : "";
          }
          const I = T.JW.GetTimeNowWithOverride(),
            C =
              S !== r.Ep.k_ENewsEvent &&
              I < e.GetStartTimeAndDateUnixSeconds() &&
              !d;
          return o.createElement(
            dt,
            null,
            o.createElement(
              "div",
              {
                ref: this.m_refContent,
                className: (0, G.Z)(
                  i,
                  P().PartnerEvent,
                  Xe().InLibraryView,
                  "editor" == h ? Xe().InEditor : "",
                ),
              },
              S != r.Ep.k_ESmallUpdateEvent &&
                !f &&
                o.createElement(at.j, {
                  className: (0, G.Z)(Xe().EventCoverImageBackground),
                  rgSources: g,
                  onIncrementalError: (e, t, n) => c && c(t),
                }),
              g.length > 0 &&
                o.createElement(at.j, {
                  className: Xe().EventBackgroundBlur,
                  rgSources: g,
                  onIncrementalError: (e, t, n) => c && c(t),
                }),
              o.createElement(
                "div",
                { className: Xe().LibraryEventTitleContainer },
                o.createElement(
                  "div",
                  { className: Xe().EventDetailTitleContainer },
                  this.props.headerElement,
                  o.createElement(
                    "div",
                    {
                      className: (0, G.Z)(
                        P().EventTypeAndTimeRow,
                        C && P().WithReminder,
                      ),
                    },
                    o.createElement(
                      "div",
                      { className: P().TimeandPostedBy },
                      o.createElement("span", { className: P().EventType }, v),
                      o.createElement(
                        "span",
                        { className: P().PostedBy },
                        " ",
                        (0, R.Xx)("#EventDisplay_PostedBy"),
                        y,
                        " ",
                      ),
                      o.createElement(nt, { event: e }),
                    ),
                    C &&
                      !d &&
                      o.createElement(
                        "div",
                        { className: P().ReminderContainer },
                        o.createElement(lt.m, {
                          eventModel: e,
                          lang: u,
                          bExpandLeft: !0,
                        }),
                      ),
                    !d && l,
                  ),
                  !this.props.disableReadTracking &&
                    !d &&
                    o.createElement(D.h, {
                      onEnter: this.OnEnterVisible,
                      onLeave: this.OnLeaveVisible,
                      bottomOffset: "300px",
                    }),
                  this.props.bInGamepadUI
                    ? o.createElement(
                        "div",
                        { className: Xe().EventDetailTitle },
                        e.GetNameWithFallback(u),
                      )
                    : o.createElement(
                        F.JW,
                        {
                          eventModel: e,
                          route: F.Ue.k_eView,
                          className: Xe().EventDetailTitle,
                        },
                        e.GetNameWithFallback(u),
                      ),
                  e.BHasSubTitle(u) &&
                    o.createElement(
                      "div",
                      {
                        className: (0, G.Z)(
                          Xe().EventDetailsSubTitle,
                          P().LibraryViewSubtitle,
                        ),
                      },
                      e.GetSubTitle(u),
                    ),
                  o.createElement("div", {
                    className: Xe().EventDetailUserType,
                  }),
                ),
              ),
              Boolean(
                e.BEventCanShowBroadcastWidget() &&
                  !this.props.bDisableBroadcastPlayer,
              ) &&
                o.createElement(
                  "div",
                  { className: Xe().EventBroadcastCtn },
                  o.createElement(
                    o.Suspense,
                    { fallback: o.createElement("div", null) },
                    o.createElement(ut, { event: this.props.event }),
                  ),
                ),
              e.BHasTag("steam_award_nomination_request") &&
                o.createElement(Ve, { event: e, lang: u }),
              e.BHasTag("steam_award_vote_request") &&
                o.createElement(Ze, {
                  appID: e.appid,
                  bIsEventActionEnabled: e.BIsEventActionEnabled(),
                  voteCategories: e.GetSteamAwardNomineeCategories(),
                }),
              o.createElement(
                "div",
                { className: Xe().LibraryEventBodyContainer },
                o.createElement(
                  "div",
                  {
                    className: (0, G.Z)(
                      Xe().EventDetailsBody,
                      P().EventDetailsBody,
                    ),
                    onContextMenu: E.De.IN_CLIENT ? w.T : void 0,
                  },
                  o.createElement(Te.d, {
                    text: _,
                    partnerEventStore: n,
                    event: e,
                  }),
                  o.createElement("span", { className: W().Clear }),
                ),
                o.createElement(st, { event: this.props.event }),
                Boolean(e.jsondata.read_more_link) &&
                  o.createElement(
                    "div",
                    { className: (0, G.Z)(P().ReadMoreCnt) },
                    o.createElement(
                      pe.ns,
                      {
                        className: (0, G.Z)(W().Button),
                        href: e.jsondata.read_more_link,
                      },
                      (0, R.Xx)("#EventEmail_Button_ClickForMoreDetails"),
                    ),
                  ),
                Boolean(e.jsondata.bSaleEnabled && e.jsondata.sale_vanity_id) &&
                  o.createElement(
                    "div",
                    { className: (0, G.Z)(P().ReadMoreCnt) },
                    o.createElement(pt.i, { gidEvent: e.GID }),
                    o.createElement(
                      "a",
                      {
                        className: (0, G.Z)(W().Button, "LinkButton"),
                        href: (0, B.OL)(e.GetSaleURL()),
                      },
                      (0, R.Xx)("#Event_Button_VisitSalePage"),
                    ),
                  ),
                o.createElement(et, { appid: e.appid }),
              ),
              !Boolean(d) &&
                o.createElement(Re, {
                  eventModel: e,
                  partnerEventStore: n,
                  emoticonStore: a,
                }),
            ),
          );
        }
      };
      var St;
      (0, a.gn)([H.ak], vt.prototype, "OnEnterVisible", null),
        (0, a.gn)([H.ak], vt.prototype, "OnLeaveVisible", null),
        (vt = (0, a.gn)([g.Pi], vt)),
        (function (e) {
          (e[(e.Idle = 1)] = "Idle"),
            (e[(e.Loading = 2)] = "Loading"),
            (e[(e.EndOfContent = 3)] = "EndOfContent");
        })(St || (St = {}));
      class ft {
        constructor(e) {
          (this.k_nMaxPerDirection = 3),
            (this.m_nAppID = 0),
            (this.m_rgEvents = []),
            (this.m_eOlderDirection = St.Idle),
            (this.m_eNewerDirection = St.Idle),
            (this.m_partnerEventStore = e);
        }
        GetEvents() {
          return this.m_rgEvents;
        }
        GetAppID() {
          return this.m_nAppID;
        }
        GetOlderState() {
          return this.m_eOlderDirection;
        }
        GetNewerState() {
          return this.m_eNewerDirection;
        }
        InitAroundEvent(e, t) {
          return (0, a.mG)(this, void 0, void 0, function* () {
            const n = this.m_partnerEventStore;
            (this.m_nAppID = e.appid),
              (this.m_clanSteamID = e.clanSteamID),
              (this.m_rgEvents = []),
              (this.m_eOlderDirection = St.Loading),
              (this.m_eNewerDirection = St.Loading),
              (this.m_additionalParams = t),
              this.m_rgEvents.push(e);
            let a = null;
            try {
              a = yield n.LoadAdjacentPartnerEventsByEvent(
                e,
                this.m_clanSteamID,
                this.m_nAppID,
                this.k_nMaxPerDirection,
                this.k_nMaxPerDirection,
                this.m_additionalParams,
              );
            } catch (e) {}
            (0, f.z)(() => {
              if (!a || 0 == a.length)
                return (
                  (this.m_eOlderDirection = St.EndOfContent),
                  void (this.m_eNewerDirection = St.EndOfContent)
                );
              let t = a.findIndex((t) => t.GID == e.GID),
                n = t,
                i = t >= 0 ? a.length - t - 1 : 0;
              (this.m_eNewerDirection =
                n >= this.k_nMaxPerDirection ? St.Idle : St.EndOfContent),
                (this.m_eOlderDirection =
                  i >= this.k_nMaxPerDirection ? St.Idle : St.EndOfContent),
                (this.m_rgEvents = a);
            });
          });
        }
        LoadMoreAtEnd() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (this.m_eOlderDirection != St.Idle) return;
            if (0 == this.m_rgEvents.length) return;
            let e = this.m_rgEvents[this.m_rgEvents.length - 1];
            this.m_eOlderDirection = St.Loading;
            let t = null;
            try {
              const n = this.m_partnerEventStore;
              t = yield n.LoadAdjacentPartnerEventsByEvent(
                e,
                this.m_clanSteamID,
                this.m_nAppID,
                0,
                this.k_nMaxPerDirection,
                this.m_additionalParams,
              );
            } catch (e) {}
            (0, f.z)(() => {
              if (!t) return void (this.m_eOlderDirection = St.Idle);
              const e = new Set(this.m_rgEvents.map((e) => e.GID));
              for (let n of t)
                e.has(n.GID) || (this.m_rgEvents.push(n), e.add(n.GID));
              this.m_eOlderDirection =
                t.length >= this.k_nMaxPerDirection ? St.Idle : St.EndOfContent;
            });
          });
        }
        LoadMoreAtBeginning() {
          return (0, a.mG)(this, void 0, void 0, function* () {
            if (this.m_eNewerDirection != St.Idle) return;
            if (0 == this.m_rgEvents.length) return;
            let e = this.m_rgEvents[0];
            this.m_eNewerDirection = St.Loading;
            let t = null;
            try {
              const n = this.m_partnerEventStore;
              t = yield n.LoadAdjacentPartnerEventsByEvent(
                e,
                this.m_clanSteamID,
                this.m_nAppID,
                this.k_nMaxPerDirection,
                0,
              );
            } catch (e) {}
            (0, f.z)(() => {
              if (!t) return void (this.m_eNewerDirection = St.Idle);
              const e = new Set(this.m_rgEvents.map((e) => e.GID));
              for (let n of t.reverse())
                e.has(n.GID) || (this.m_rgEvents.unshift(n), e.add(n.GID));
              this.m_eNewerDirection =
                t.length >= this.k_nMaxPerDirection ? St.Idle : St.EndOfContent;
            });
          });
        }
      }
      (0, a.gn)([f.LO.shallow], ft.prototype, "m_rgEvents", void 0),
        (0, a.gn)([f.LO], ft.prototype, "m_eOlderDirection", void 0),
        (0, a.gn)([f.LO], ft.prototype, "m_eNewerDirection", void 0);
      const Dt = (0, g.Pi)((e) =>
        o.createElement(
          "div",
          {
            className: (0, G.Z)(
              P().AppPartnerEventsBanner,
              "AppPartnerEventsBanner",
            ),
          },
          o.createElement(z, Object.assign({}, e)),
        ),
      );
      var yt = n(24720);
      let It = class extends o.Component {
        constructor() {
          super(...arguments), (this.m_refFocus = o.createRef());
        }
        componentDidMount() {
          this.props.fnClose &&
            (document.addEventListener("keydown", this.escFunction, !1),
            this.m_refFocus.current && this.m_refFocus.current.focus());
        }
        componentWillUnmount() {
          this.props.fnClose &&
            document.removeEventListener("keydown", this.escFunction, !1);
        }
        escFunction(e) {
          const { fnClose: t } = this.props;
          27 === e.keyCode && t && t();
        }
        OnBackgroundClick(e) {
          e.currentTarget == e.target && this.props.fnClose();
        }
        render() {
          const { event: e, langOverride: t, isPreview: n } = this.props;
          return o.createElement(
            "div",
            {
              ref: this.m_refFocus,
              className: yt.Main,
              onClick: this.OnBackgroundClick,
            },
            o.createElement(Et, {
              key: e.GID,
              event: e,
              emoticonStore: p.F,
              partnerEventStore: S.Get(),
              langOverride: t,
              isPreview: n,
              bDisableBroadcastPlayer: !1,
            }),
          );
        }
      };
      (0, a.gn)([H.ak], It.prototype, "escFunction", null),
        (0, a.gn)([H.ak], It.prototype, "OnBackgroundClick", null),
        (It = (0, a.gn)([g.Pi], It));
      var Ct = n(41200),
        bt = n(11837),
        At = n(11170),
        Tt = n(2821);
      function kt(e, t, n) {
        const a = e && e.length > n ? [...e] : (0, bt.LG)(e || [], n + 1, "");
        return (a[n] = t), a;
      }
      function wt(e, t) {
        return (e && e.length > t && e[t]) || "";
      }
      function Nt(e, t) {
        let n = !1,
          a = !1;
        for (let i = r.Df.k_Lang_English; i < r.Df.k_Lang_MAX; i++) {
          const l = wt(e, i).trim(),
            o = wt(t, i).trim();
          if (!l && !o) continue;
          const s = (0, R.Xx)("#Language_" + (0, r.j_)(i));
          if (((n = !0), !l))
            return (0, R.Xx)("#BuildNotes_Error_MissingTitle", s);
          if (!o) return (0, R.Xx)("#BuildNotes_Error_MissingDescription", s);
          if (l.length > m.wP)
            return (0, R.Xx)("#BuildNotes_Error_TitleTooLong", s);
          if (o.length > 32768)
            return (0, R.Xx)("#BuildNotes_Error_DescriptionTooLong", s);
          i === r.Df.k_Lang_English && (a = !0);
        }
        return n
          ? a
            ? null
            : (0, R.Xx)("#BuildNotes_Error_NoEnglishProvided")
          : (0, R.Xx)("#BuildNotes_Error_NoLanguagesProvided");
      }
      class Lt {
        static Get() {
          return (
            this.s_Singleton ||
              ((this.s_Singleton = new Lt()), this.s_Singleton.Init()),
            this.s_Singleton
          );
        }
        Init() {
          const e = (0, E.kQ)("build_notes", "application_config");
          (this.m_nBuildVersion = (null == e ? void 0 : e.build_version) || 0),
            (this.m_bSteamChina = (null == e ? void 0 : e.steam_china) || !1),
            (this.m_strBuildBranch =
              (null == e ? void 0 : e.build_branch) || ""),
            (this.m_strBuildBranch = this.m_strBuildBranch
              .trim()
              .toLocaleLowerCase()),
            "default" === this.m_strBuildBranch && (this.m_strBuildBranch = "");
        }
        GetPostedBuildVersion() {
          return this.m_nBuildVersion;
        }
        BShouldShowPatchNotesEditor() {
          return this.GetPostedBuildVersion() > 0;
        }
        BCanSubmitSteamChinaPatchNotes() {
          return this.m_bSteamChina;
        }
        GetBuildBranch() {
          return this.m_strBuildBranch;
        }
      }
      function xt(e) {
        const [t, n] = o.useState(r.Df.k_Lang_English),
          [i, p] = o.useState(null),
          [u, g] = o.useState(null),
          [v, S] = o.useState(null),
          [f, D] = o.useState("editing"),
          [y, I] = o.useState(null);
        if (!Lt.Get().BShouldShowPatchNotesEditor()) return null;
        const C = (e) => n(e),
          b = (e) => Boolean(wt(i, e) || wt(u, e)),
          A = Lt.Get().BCanSubmitSteamChinaPatchNotes()
            ? [c.IN.k_ESteamRealmChina, c.IN.k_ESteamRealmGlobal]
            : [c.IN.k_ESteamRealmGlobal],
          T = Nt(i, u),
          k =
            E.De.COMMUNITY_BASE_URL +
            "ogg/" +
            e.appId +
            "/partnerevents/create/";
        return o.createElement(
          h.SV,
          null,
          o.createElement(
            "div",
            { className: Tt.BuildNoteCtn },
            o.createElement(
              "div",
              { className: Tt.BuildTitle },
              (0, R.Xx)(
                "#BuildNotes_Title",
                Lt.Get().GetPostedBuildVersion(),
                Lt.Get().GetBuildBranch() || "default",
              ),
            ),
            o.createElement(
              "div",
              { className: Tt.SplitPanel },
              o.createElement(
                "div",
                { className: Tt.DescriptionPanel },
                o.createElement(
                  "div",
                  { className: Tt.BuildSubTitle },
                  (0, R.Xx)("#BuildNotes_SubTitle"),
                ),
                o.createElement(
                  "div",
                  { className: Tt.InfoText },
                  (0, R.Xx)("#BuildNotes_Desc1"),
                ),
                o.createElement(
                  "div",
                  { className: Tt.InfoText },
                  (0, R.kQ)("#BuildNotes_Desc2"),
                ),
                o.createElement(
                  "a",
                  { href: k },
                  o.createElement(
                    _.zx,
                    null,
                    (0, R.Xx)("#BuildNotes_OpenFullEditor"),
                  ),
                ),
              ),
              "editing" === f &&
                o.createElement(Ot, {
                  sError: T,
                  eLanguage: t,
                  realms: A,
                  fnHasLanguage: b,
                  fnSetLanguage: C,
                  fnGetTitle: (e) => wt(i, e),
                  fnSetTitle: (e, t) => p(kt(i, t, e)),
                  fnGetDescription: (e) => wt(u, e),
                  fnSetDescription: (e, t) => g(kt(u, t, e)),
                  fnOnPreviewEvent: () =>
                    S(
                      (function (e, t) {
                        let n = new m.bH();
                        (n.GID = "PreviewPartnerEventRow_0"),
                          (n.clanSteamID = new d.K(E.L7.steamid)),
                          (n.postTime = Date.now() / 1e3),
                          (n.startTime = Date.now() / 1e3),
                          (n.type = r.Ep.k_ESmallUpdateEvent);
                        for (
                          let a = r.Df.k_Lang_English;
                          a < r.Df.k_Lang_MAX;
                          a++
                        )
                          n.name.set(a, wt(e, a)),
                            n.description.set(a, wt(t, a));
                        return n;
                      })(i, u),
                    ),
                  fnApplyLoc: (e, t) => {
                    const n = new Array();
                    let a = i,
                      l = u;
                    for (const i of t) {
                      const t = e.GetLocalization("Title", i) || "",
                        o = e.GetLocalization("Description", i) || "";
                      (t || o) && n.push(i),
                        t && (a = kt(a, t, i)),
                        o && (l = kt(l, o, i));
                    }
                    return p(a), g(l), n;
                  },
                }),
              "submitting" === f && o.createElement(Rt, null),
              "failed" === f &&
                o.createElement(Bt, { fnOnReturnToEditor: () => D("editing") }),
              "submitted" === f &&
                o.createElement(Mt, { appId: e.appId, eventGid: y }),
            ),
          ),
          Boolean(v && "editing" === f) &&
            o.createElement(Gt, {
              event: v,
              eLanguage: t,
              realms: A,
              fnOnClose: () => S(null),
              fnOnSubmitEvent: () =>
                (0, a.mG)(this, void 0, void 0, function* () {
                  S(null), D("submitting");
                  const t = yield (function (e, t, n) {
                    var i, o, c;
                    return (0, a.mG)(this, void 0, void 0, function* () {
                      if (Nt(t, n)) return null;
                      const a = Boolean(
                          wt(t, r.Df.k_Lang_SteamChina_SChinese).trim(),
                        ),
                        m = new FormData();
                      m.append("sessionid", E.De.SESSIONID),
                        m.append("appid", "" + e),
                        m.append("post_steam_china", "" + a),
                        m.append("titles", JSON.stringify(t)),
                        m.append("descriptions", JSON.stringify(n)),
                        m.append(
                          "build_id",
                          "" + Lt.Get().GetPostedBuildVersion(),
                        ),
                        m.append("build_branch", Lt.Get().GetBuildBranch());
                      const d =
                        E.De.PARTNER_BASE_URL +
                        "partnerevents/ajaxpublishpatchnotes";
                      try {
                        const e = yield l().post(d, m, { withCredentials: !0 });
                        if (
                          (null === (i = null == e ? void 0 : e.data) ||
                          void 0 === i
                            ? void 0
                            : i.success) == s.s.k_EResultOK
                        )
                          return e.data;
                        console.error(
                          "buildpatchnotes: OnSubmitCreateEvent error code  " +
                            (null === (o = null == e ? void 0 : e.data) ||
                            void 0 === o
                              ? void 0
                              : o.success) +
                            " msg: " +
                            (null === (c = null == e ? void 0 : e.data) ||
                            void 0 === c
                              ? void 0
                              : c.msg),
                        );
                      } catch (e) {
                        const t = (0, J.l)(e);
                        console.error(
                          "buildpatchnotes: OnSubmitCreateEvent " +
                            t.strErrorMsg,
                          t,
                        );
                      }
                      return null;
                    });
                  })(e.appId, i, u);
                  t
                    ? (I(t.clan_announcement_gid),
                      (function () {
                        const e = new URLSearchParams(window.location.search);
                        e.delete("submittedbuild"), e.delete("buildbranch");
                        const t = e.toString(),
                          n =
                            window.location.origin +
                            window.location.pathname +
                            (t ? "?" + t : "") +
                            window.location.hash;
                        window.history.replaceState({}, "", n);
                      })(),
                      D("submitted"))
                    : D("failed");
                }),
              fnHasLanguage: b,
              fnSetLanguage: C,
            }),
        );
      }
      const Ot = (e) => {
          const {
            sError: t,
            eLanguage: n,
            realms: a,
            fnHasLanguage: i,
            fnSetLanguage: l,
            fnGetTitle: s,
            fnSetTitle: d,
            fnGetDescription: h,
            fnSetDescription: g,
            fnOnPreviewEvent: E,
            fnApplyLoc: v,
          } = e;
          let S = "";
          if (a.includes(c.IN.k_ESteamRealmChina)) {
            const e = "" !== s(r.Df.k_Lang_SteamChina_SChinese).trim();
            S = (0, R.Xx)(
              e
                ? "#BuildNotes_SteamChina_Provided"
                : "#BuildNotes_SteamChina_NotProvided",
            );
          }
          return o.createElement(
            "div",
            { className: Tt.RightPanel },
            o.createElement(
              "div",
              { className: Tt.EditTopBar },
              o.createElement(
                "div",
                { className: Tt.EditTitle },
                (0, R.Xx)("#BuildNotes_PatchnotesTitle"),
              ),
              o.createElement(
                "div",
                { className: Tt.LangPicker },
                o.createElement(
                  _.zx,
                  {
                    onClick: () => {
                      const e = new At.C(),
                        t = (0, R.Xx)("#BuildNotes_SampleTitle"),
                        n = (0, R.Xx)("#BuildNotes_SampleDescription");
                      for (
                        let a = r.Df.k_Lang_English;
                        a < r.Df.k_Lang_MAX;
                        a++
                      )
                        e.SetLocalization("Title", a, t),
                          e.SetLocalization("Description", a, n);
                      (0, q.AM)(
                        o.createElement(Ct.ko, {
                          sampleLocData: e,
                          sampleFilename: "patchnote_loc_sample",
                          fnOnImportLocData: v,
                        }),
                        window,
                      );
                    },
                  },
                  (0, R.Xx)("#BuildNotes_ImportLocalization"),
                ),
                o.createElement(ue.uW, {
                  selectedLang: n,
                  fnOnLanguageChanged: l,
                  fnLangHasData: i,
                  realms: a,
                }),
              ),
            ),
            o.createElement(_.II, {
              value: s(n),
              placeholder: (0, R.Xx)("#BuildNotes_TitlePlaceholder"),
              onChange: (e) => d(n, e.currentTarget.value),
              maxLength: m.wP,
            }),
            o.createElement(
              "div",
              { className: Tt.EditTitle },
              (0, R.Xx)("#BuildNotes_PatchnotesDesc"),
            ),
            o.createElement(u.R, {
              fnGetCurText: () => h(n),
              fnOnTextChange: (e) => g(n, e.currentTarget.value),
              fnSetText: (e) => g(n, e),
              strPlaceholder: (0, R.Xx)("#BuildNotes_DescPlaceholder"),
              emoticonStore: p.F,
              bSupportHTMLImport: !0,
              showFormatHelp: "PartnerEvents",
              classNameForTextArea: Tt.BBCodeEditor,
            }),
            o.createElement(
              "div",
              { className: Tt.SubmitButtonCtn },
              !Boolean(t) &&
                o.createElement(
                  _.KM,
                  { onClick: E },
                  (0, R.Xx)("#BuildNotes_Preview"),
                ),
              Boolean(t) &&
                o.createElement("div", { className: Tt.ErrorMsg }, t),
              Boolean(!t && S) &&
                o.createElement("div", { className: Tt.SteamChinaMsg }, S),
            ),
          );
        },
        Gt = (e) => {
          const {
            event: t,
            eLanguage: n,
            realms: a,
            fnOnClose: i,
            fnOnSubmitEvent: l,
            fnHasLanguage: r,
            fnSetLanguage: s,
          } = e;
          return o.createElement(
            Q.D2,
            null,
            o.createElement(
              "div",
              { className: Tt.PreviewHeader },
              o.createElement(ue.uW, {
                selectedLang: n,
                fnOnLanguageChanged: s,
                fnFilterLanguage: r,
                realms: a,
              }),
              o.createElement(
                "div",
                { className: Tt.SubmitButtonCtn },
                o.createElement(
                  _.zx,
                  { onClick: i },
                  (0, R.Xx)("#BuildNotes_Close"),
                ),
                o.createElement(
                  _.KM,
                  { onClick: l },
                  (0, R.Xx)("#BuildNotes_PostNotes"),
                ),
              ),
            ),
            o.createElement(
              "div",
              null,
              o.createElement(It, {
                event: t,
                fnClose: i,
                langOverride: n,
                isPreview: !0,
              }),
            ),
          );
        },
        Rt = (e) =>
          o.createElement(
            "div",
            { className: (0, G.Z)(Tt.RightPanel, Tt.SubmitPanel) },
            o.createElement(ae.V, { className: Tt.SubmitThrobber }),
            o.createElement(
              "div",
              { className: Tt.SubmitText },
              (0, R.Xx)("#BuildNotes_Submitting"),
            ),
          ),
        Bt = (e) =>
          o.createElement(
            "div",
            { className: (0, G.Z)(Tt.RightPanel, Tt.FailedPanel) },
            o.createElement(
              "div",
              { className: Tt.FailedText },
              (0, R.Xx)("#BuildNotes_FailedDescription"),
            ),
            o.createElement(
              "div",
              { className: Tt.FailedButton },
              o.createElement(
                _.zx,
                { onClick: e.fnOnReturnToEditor },
                (0, R.Xx)("#BuildNotes_ReturnToEditor"),
              ),
            ),
          ),
        Mt = (e) => {
          const { appId: t, eventGid: n } = e,
            a = `${E.De.STORE_BASE_URL}news/app/${t}/view/${n}`;
          return o.createElement(
            "div",
            { className: (0, G.Z)(Tt.RightPanel, Tt.SuccessPanel) },
            o.createElement(
              "div",
              { className: Tt.SuccessText },
              (0, R.Xx)("#BuildNotes_Success"),
            ),
            o.createElement(
              "a",
              { href: a, className: Tt.ViewEventButton },
              o.createElement(
                _.zx,
                null,
                (0, R.Xx)("#BuildNotes_ViewPublished"),
              ),
            ),
          );
        };
    },
    19786: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { OptInRoutes: () => fo, default: () => Io });
      var a = n(96927),
        i = n(71209),
        l = n(33940),
        o = n(52868),
        r = n.n(o),
        s = n(64368),
        c = n(50265),
        m = n(75457),
        d = n(51194),
        p = n(7948),
        u = n(23801),
        _ = n(4306);
      const h = "email_",
        g = "email_section_";
      var E;
      !(function (e) {
        (e[(e.k_RegistrationConfirmation = 0)] = "k_RegistrationConfirmation"),
          (e[(e.k_Reminder = 1)] = "k_Reminder"),
          (e[(e.k_Invite = 2)] = "k_Invite"),
          (e[(e.k_Followup = 3)] = "k_Followup"),
          (e[(e.k_Starting = 4)] = "k_Starting"),
          (e[(e.k_InviteReminder = 5)] = "k_InviteReminder"),
          (e[(e.k_Update = 6)] = "k_Update"),
          (e[(e.k_PermissionRequest = 7)] = "k_PermissionRequest"),
          (e[(e.k_MediaUsageNotification = 8)] = "k_MediaUsageNotification");
      })(E || (E = {}));
      const v = [
        E.k_Invite,
        E.k_InviteReminder,
        E.k_RegistrationConfirmation,
        E.k_Update,
        E.k_Reminder,
        E.k_Starting,
        E.k_Followup,
        E.k_PermissionRequest,
        E.k_MediaUsageNotification,
      ];
      function S(e) {
        switch (e) {
          case E.k_Invite:
            return "Invitation Email";
          case E.k_InviteReminder:
            return "Invitation Reminder Email";
          case E.k_RegistrationConfirmation:
            return "Registration Success Email";
          case E.k_Update:
            return "General Update";
          case E.k_Reminder:
            return "Reminder Email - Just Days Until It Starts";
          case E.k_Starting:
            return "Event Starts Today Email";
          case E.k_Followup:
            return "Follow-up Email";
          case E.k_PermissionRequest:
            return "Media Permission Request";
          case E.k_MediaUsageNotification:
            return "Media Usage Notification";
        }
        return "unknown";
      }
      var f;
      !(function (e) {
        (e[(e.k_Custom = 0)] = "k_Custom"),
          (e[(e.k_AssetKit = 1)] = "k_AssetKit"),
          (e[(e.k_DemoPressPreview = 2)] = "k_DemoPressPreview"),
          (e[(e.k_ScheduleLiveStream = 3)] = "k_ScheduleLiveStream"),
          (e[(e.k_CancelSection = 4)] = "k_CancelSection"),
          (e[(e.k_DemoNotReady = 5)] = "k_DemoNotReady"),
          (e[(e.k_ReviewCategorization = 6)] = "k_ReviewCategorization"),
          (e[(e.k_DemoReview = 7)] = "k_DemoReview"),
          (e[(e.k_PressPreviewDetails = 8)] = "k_PressPreviewDetails"),
          (e[(e.k_StatsSummary = 9)] = "k_StatsSummary"),
          (e[(e.k_SurveyButton = 10)] = "k_SurveyButton"),
          (e[(e.k_DemoLaunch = 11)] = "k_DemoLaunch"),
          (e[(e.k_CallForRegistration = 12)] = "k_CallForRegistration"),
          (e[(e.k_EnterDiscount = 13)] = "k_EnterDiscount"),
          (e[(e.k_EnterDiscountReminder = 14)] = "k_EnterDiscountReminder"),
          (e[(e.k_LearnMore = 15)] = "k_LearnMore"),
          (e[(e.k_MediaUsePermission = 16)] = "k_MediaUsePermission"),
          (e[(e.k_MeasureResults = 17)] = "k_MeasureResults"),
          (e[(e.k_TrailerOrDemoPermissions = 18)] =
            "k_TrailerOrDemoPermissions"),
          (e[(e.k_NextFestQASession = 19)] = "k_NextFestQASession"),
          (e[(e.k_NextFestReturns = 20)] = "k_NextFestReturns"),
          (e[(e.k_NextFestWhatNext = 21)] = "k_NextFestWhatNext"),
          (e[(e.k_NextFestTips = 22)] = "k_NextFestTips"),
          (e[(e.k_NextFestStartsNow = 23)] = "k_NextFestStartsNow"),
          (e[(e.k_MeasureResultsFree = 24)] = "k_MeasureResultsFree"),
          (e[(e.k_NextFestThankYou = 25)] = "k_NextFestThankYou"),
          (e[(e.k_MediaPermissionReminder = 26)] = "k_MediaPermissionReminder"),
          (e[(e.k_SaleThankYou = 27)] = "k_SaleThankYou"),
          (e[(e.k_NextFestMediaUsageIntended = 28)] =
            "k_NextFestMediaUsageIntended");
      })(f || (f = {}));
      const D = [
        f.k_Custom,
        f.k_CallForRegistration,
        f.k_AssetKit,
        f.k_DemoPressPreview,
        f.k_PressPreviewDetails,
        f.k_DemoReview,
        f.k_DemoLaunch,
        f.k_EnterDiscount,
        f.k_EnterDiscountReminder,
        f.k_ScheduleLiveStream,
        f.k_ReviewCategorization,
        f.k_DemoNotReady,
        f.k_LearnMore,
        f.k_CancelSection,
        f.k_StatsSummary,
        f.k_SurveyButton,
        f.k_MediaUsePermission,
        f.k_TrailerOrDemoPermissions,
        f.k_MeasureResults,
        f.k_MeasureResultsFree,
        f.k_NextFestQASession,
        f.k_NextFestReturns,
        f.k_NextFestWhatNext,
        f.k_NextFestTips,
        f.k_NextFestStartsNow,
        f.k_NextFestThankYou,
        f.k_MediaPermissionReminder,
        f.k_SaleThankYou,
        f.k_NextFestMediaUsageIntended,
      ];
      function y(e) {
        switch (e) {
          case f.k_Custom:
            return "Custom text section";
          case f.k_CallForRegistration:
            return "Register now by dateX";
          case f.k_AssetKit:
            return "Asset kit section";
          case f.k_ScheduleLiveStream:
            return "You can schedule a live stream + see schedule";
          case f.k_CancelSection:
            return "Cancel any time";
          case f.k_DemoNotReady:
            return "Cancel by this date, please";
          case f.k_ReviewCategorization:
            return "Review your game's categorization";
          case f.k_DemoReview:
            return "Demo Reminder: Get your demo reviewed";
          case f.k_DemoLaunch:
            return "Demo Reminder: Launch your demo";
          case f.k_DemoPressPreview:
            return "Press Preview Reminder: Register Now";
          case f.k_PressPreviewDetails:
            return "Press Preview details";
          case f.k_EnterDiscount:
            return "Discount, Enter Now";
          case f.k_EnterDiscountReminder:
            return "Discount, Reminder";
          case f.k_SurveyButton:
            return "Survey button";
          case f.k_MeasureResults:
            return "Measuring Your Results (sales, wishlists, demos)";
          case f.k_MeasureResultsFree:
            return "Measuring Your Results (wishlists, demos, livestreams)";
          case f.k_StatsSummary:
            return "Game Stats; demos, wishlists, views, etc.";
          case f.k_LearnMore:
            return "Learn More Link";
          case f.k_MediaUsePermission:
            return "Permission Request: Media Usage";
          case f.k_TrailerOrDemoPermissions:
            return "Permission Request: Trailer and/or Demo";
          case f.k_MediaPermissionReminder:
            return "Permission Reminder: Trailer and/or Demo";
          case f.k_NextFestReturns:
            return "Next Fest:  Returns on _date_";
          case f.k_NextFestQASession:
            return "Next Fest: Join Us For A Live Q&A Session";
          case f.k_NextFestWhatNext:
            return "Next Fest: What's Next";
          case f.k_NextFestTips:
            return "Next Fest: Tips & Best Practices";
          case f.k_NextFestMediaUsageIntended:
            return "Next Fest: We Intend To Feature Your Game";
          case f.k_NextFestStartsNow:
            return "Next Fest: Starts Today!";
          case f.k_NextFestThankYou:
            return "Next Fest: Concludes. Thank You";
          case f.k_SaleThankYou:
            return "Sale Over: Thank You";
        }
        return "unknown";
      }
      class I {
        constructor(e, t) {
          (this.m_bReadOnly = !1),
            (this.m_strOptInName = e),
            (this.m_email = t),
            (this.m_sections = this.m_email.sections.map((e) => new C(e))),
            (this.m_email.custom_app_list = (
              this.m_email.custom_app_list || []
            ).map((e) => ("string" == typeof e ? Number.parseInt(e) : e)));
        }
        GetOwningOptInName() {
          return this.m_strOptInName;
        }
        SetReadOnly(e) {
          this.m_bReadOnly != e &&
            ((this.m_bReadOnly = e),
            this.m_sections.forEach((t) => t.SetReadOnly(e)));
        }
        BIsReadOnly() {
          return this.m_bReadOnly;
        }
        BHasLanguageData(e) {
          var t, n, a;
          const i = (0, m.j_)(e);
          return (
            (null ===
              (n =
                null === (t = this.m_email.subject) || void 0 === t
                  ? void 0
                  : t[i]) || void 0 === n
              ? void 0
              : n.length) > 0 ||
            (null === (a = this.m_sections) || void 0 === a
              ? void 0
              : a.some((t) => t.BHasLangData(e)))
          );
        }
        BIsDraftEmail() {
          return (
            null === this.m_email.email_def_id ||
            void 0 === this.m_email.email_def_id
          );
        }
        BHasSectionType(e) {
          return this.m_sections.some((t) => t.GetType() == e);
        }
        GetModel() {
          return this.m_email;
        }
        GetUniqueID() {
          return this.m_email.unique_id;
        }
        GetType() {
          return this.m_email.type;
        }
        GetNumberSections() {
          return this.m_sections.length;
        }
        GetEmailTargeting() {
          return (
            this.m_email.targeting || d.KC.k_EOptInEmailTarget_ActivatingUser
          );
        }
        GetServerEmailDefID() {
          return this.m_email.email_def_id
            ? "" + this.m_email.email_def_id
            : this.m_email.email_def_id;
        }
        GetInternalName() {
          return this.m_email.internal_name;
        }
        GetAssetKitURL() {
          return this.m_email.asset_kit_url;
        }
        GetWikiDocURL() {
          return this.m_email.wiki_doc_url;
        }
        GetSurveyLinkURL() {
          return this.m_email.survey_link_url;
        }
        GetSalePreviewPage() {
          return this.m_email.sale_preview_page;
        }
        GetScheduleMaxItems() {
          return this.m_email.schedule_max_items || 2;
        }
        GetDemoPressPreviewDate() {
          return this.m_email.demo_press_preview_date;
        }
        GetNextEditionDate() {
          return this.m_email.next_edition_date;
        }
        GetCancelDate() {
          return this.m_email.cancel_date;
        }
        GetPreviewDate() {
          return this.m_email.preview_date;
        }
        GetPermissionDate() {
          return this.m_email.permission_date;
        }
        GetTrailerLaunchDate() {
          return this.m_email.trailer_date;
        }
        GetLivestreamLaunchDate() {
          return this.m_email.livestream_date;
        }
        GetPressPreviewVisibleDate() {
          return this.m_email.press_preview_visible_date;
        }
        GetQASessionDate() {
          return this.m_email.qasession_date;
        }
        GetQASessionLink() {
          return this.m_email.qasession_link;
        }
        GetRecordedQASessionLink() {
          return this.m_email.recorded_qa_session_link;
        }
        GetCustomAppTargetList() {
          return this.m_email.custom_app_list || [];
        }
        GetTrailerDemoDeadlineDate() {
          return this.m_email.trailer_demo_deadline_date;
        }
        GetDemoTrailerRegLink() {
          return this.m_email.trailer_demo_reg_link;
        }
        GetSubject(e) {
          var t;
          return null !== (t = (0, s.pM)(this.m_email.subject, e, "")) &&
            void 0 !== t
            ? t
            : "";
        }
        GetSubjectWithFallback(e) {
          var t;
          return null !==
            (t = (0, s.Xj)(
              this.m_email.subject,
              p.U.Get().GetCurEditLanguage(),
              e,
            )) && void 0 !== t
            ? t
            : "";
        }
        GetSections() {
          return this.m_sections;
        }
        GetSection(e) {
          return this.m_sections[e];
        }
        GetSectionByID(e) {
          for (let t = 0; t < this.m_sections.length; ++t)
            if (this.m_sections[t].GetUniqueID() == e)
              return this.m_sections[t];
          return null;
        }
        AddSection(e) {
          if (this.m_bReadOnly) return;
          let t = Math.floor(1 + 1e5 * Math.random());
          for (; this.GetSectionByID(g + t); )
            t = Math.floor(1 + 1e5 * Math.random());
          const n = { unique_id: g + t, type: e };
          this.m_email.sections || (this.m_email.sections = []),
            this.m_email.sections.push(n);
          const a = new C(
            this.m_email.sections[this.m_email.sections.length - 1],
          );
          this.m_sections.push(a), B.Get().SetDirty(!0);
        }
        SetServerEmailDefID(e) {
          this.m_email.email_def_id == e ||
            this.m_bReadOnly ||
            ((0, u.X)(
              null == this.m_email.email_def_id ||
                null == this.m_email.email_def_id,
              "Error: Reseting emailed def id from " +
                this.m_email.email_def_id +
                " to " +
                e,
            ),
            (this.m_email.email_def_id = "" + e),
            B.Get().SetDirty(!0));
        }
        SetType(e) {
          this.m_email.type == e ||
            this.m_bReadOnly ||
            ((this.m_email.type = e), B.Get().SetDirty(!0));
        }
        SetEmailTargeting(e) {
          this.m_email.targeting == e ||
            this.m_bReadOnly ||
            ((this.m_email.targeting = e), B.Get().SetDirty(!0));
        }
        SetInternalName(e) {
          this.m_email.internal_name == e ||
            this.m_bReadOnly ||
            ((this.m_email.internal_name = e), B.Get().SetDirty(!0));
        }
        SetAssetKitURL(e) {
          this.m_email.asset_kit_url == e ||
            this.m_bReadOnly ||
            ((this.m_email.asset_kit_url = e), B.Get().SetDirty(!0));
        }
        SetWikiDocURL(e) {
          this.m_email.wiki_doc_url == e ||
            this.m_bReadOnly ||
            ((this.m_email.wiki_doc_url = e), B.Get().SetDirty(!0));
        }
        SetSurveyLinkURL(e) {
          this.m_email.survey_link_url == e ||
            this.m_bReadOnly ||
            ((this.m_email.survey_link_url = e), B.Get().SetDirty(!0));
        }
        SetSalePreviewURL(e) {
          this.m_email.sale_preview_page == e ||
            this.m_bReadOnly ||
            ((this.m_email.sale_preview_page = e), B.Get().SetDirty(!0));
        }
        SetDemoPreviewDate(e) {
          this.m_email.demo_press_preview_date == e ||
            this.m_bReadOnly ||
            ((this.m_email.demo_press_preview_date = e), B.Get().SetDirty(!0));
        }
        SetCancelDate(e) {
          this.m_email.cancel_date == e ||
            this.m_bReadOnly ||
            ((this.m_email.cancel_date = e), B.Get().SetDirty(!0));
        }
        SetPreviewDate(e) {
          this.m_email.preview_date != e &&
            ((this.m_email.preview_date = e), B.Get().SetDirty(!0));
        }
        SetPermissionDate(e) {
          this.m_email.permission_date != e &&
            ((this.m_email.permission_date = e), B.Get().SetDirty(!0));
        }
        SetTrailerLaunchDate(e) {
          this.m_email.trailer_date != e &&
            ((this.m_email.trailer_date = e), B.Get().SetDirty(!0));
        }
        SetLivestreamLaunchDate(e) {
          this.m_email.livestream_date != e &&
            ((this.m_email.livestream_date = e), B.Get().SetDirty(!0));
        }
        SetPressPreviewVisibleDate(e) {
          this.m_email.press_preview_visible_date != e &&
            ((this.m_email.press_preview_visible_date = e),
            B.Get().SetDirty(!0));
        }
        SetScheduleMaxItems(e) {
          this.m_email.schedule_max_items == e ||
            this.m_bReadOnly ||
            ((this.m_email.schedule_max_items = e), B.Get().SetDirty(!0));
        }
        SetNextEditionDate(e) {
          this.m_email.next_edition_date == e ||
            this.m_bReadOnly ||
            ((this.m_email.next_edition_date = e), B.Get().SetDirty(!0));
        }
        SetQASessionDate(e) {
          this.m_email.qasession_date == e ||
            this.m_bReadOnly ||
            ((this.m_email.qasession_date = e), B.Get().SetDirty(!0));
        }
        SetTrailerDemoDeadlineDate(e) {
          this.m_email.trailer_demo_deadline_date == e ||
            this.m_bReadOnly ||
            ((this.m_email.trailer_demo_deadline_date = e),
            B.Get().SetDirty(!0));
        }
        SetQASessionLink(e) {
          this.m_email.qasession_link == e ||
            this.m_bReadOnly ||
            ((this.m_email.qasession_link = e), B.Get().SetDirty(!0));
        }
        SetDemoTrailerRegLink(e) {
          this.m_email.trailer_demo_reg_link == e ||
            this.m_bReadOnly ||
            ((this.m_email.trailer_demo_reg_link = e), B.Get().SetDirty(!0));
        }
        SetRecordedQASessionLink(e) {
          this.m_email.recorded_qa_session_link == e ||
            this.m_bReadOnly ||
            ((this.m_email.recorded_qa_session_link = e), B.Get().SetDirty(!0));
        }
        SetSubject(e, t) {
          if (
            (0, s.pM)(this.m_email.subject, t, void 0) != e &&
            !this.m_bReadOnly
          ) {
            const n = (0, m.j_)(t, "english");
            this.m_email.subject || (this.m_email.subject = {}),
              (this.m_email.subject[n] = e),
              B.Get().SetDirty(!0);
          }
        }
        AddAppToCustomList(e) {
          this.m_email.custom_app_list || (this.m_email.custom_app_list = []),
            this.m_email.custom_app_list.includes(e) ||
              (this.m_email.custom_app_list.push(e), B.Get().SetDirty(!0));
        }
        RemoveAppToCustomList(e) {
          if (this.m_email.custom_app_list) {
            const t = this.m_email.custom_app_list.findIndex((t) => e == t);
            if (t >= 0)
              return (
                this.m_email.custom_app_list.splice(t, 1),
                B.Get().SetDirty(!0),
                !0
              );
          }
          return !1;
        }
      }
      (0, l.gn)([c.LO], I.prototype, "m_email", void 0),
        (0, l.gn)([c.LO], I.prototype, "m_sections", void 0),
        (0, l.gn)([_.ak], I.prototype, "BHasLanguageData", null),
        (0, l.gn)([_.ak], I.prototype, "GetSubject", null),
        (0, l.gn)([c.aD.bound], I.prototype, "AddSection", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetServerEmailDefID", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetType", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetEmailTargeting", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetInternalName", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetAssetKitURL", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetWikiDocURL", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetSurveyLinkURL", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetSalePreviewURL", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetDemoPreviewDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetCancelDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetPreviewDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetPermissionDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetTrailerLaunchDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetLivestreamLaunchDate", null),
        (0, l.gn)(
          [c.aD.bound],
          I.prototype,
          "SetPressPreviewVisibleDate",
          null,
        ),
        (0, l.gn)([c.aD.bound], I.prototype, "SetScheduleMaxItems", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetNextEditionDate", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetQASessionDate", null),
        (0, l.gn)(
          [c.aD.bound],
          I.prototype,
          "SetTrailerDemoDeadlineDate",
          null,
        ),
        (0, l.gn)([c.aD.bound], I.prototype, "SetQASessionLink", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetDemoTrailerRegLink", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetRecordedQASessionLink", null),
        (0, l.gn)([c.aD.bound], I.prototype, "SetSubject", null),
        (0, l.gn)([c.aD.bound], I.prototype, "AddAppToCustomList", null),
        (0, l.gn)([c.aD.bound], I.prototype, "RemoveAppToCustomList", null);
      class C {
        constructor(e) {
          (this.m_bReadOnly = !1), (this.m_section = e);
        }
        SetReadOnly(e) {
          this.m_bReadOnly = e;
        }
        BIsReadOnly() {
          return this.m_bReadOnly;
        }
        GetUniqueID() {
          return this.m_section.unique_id;
        }
        GetType() {
          return this.m_section.type;
        }
        GetModel() {
          return this.m_section;
        }
        BHasLangData(e) {
          return (
            (0, s.JA)(this.m_section.title, e) ||
            (0, s.JA)(this.m_section.description, e)
          );
        }
        GetTitle(e) {
          var t;
          return null !== (t = (0, s.pM)(this.m_section.title, e, "")) &&
            void 0 !== t
            ? t
            : "";
        }
        GetTitleWithFallback(e) {
          var t;
          return null !==
            (t = (0, s.Xj)(
              this.m_section.title,
              p.U.Get().GetCurEditLanguage(),
              e,
            )) && void 0 !== t
            ? t
            : "";
        }
        GetDescription(e) {
          var t;
          return null !== (t = (0, s.pM)(this.m_section.description, e, "")) &&
            void 0 !== t
            ? t
            : "";
        }
        GetDescriptionWithFallback(e) {
          var t;
          return null !==
            (t = (0, s.Xj)(
              this.m_section.description,
              p.U.Get().GetCurEditLanguage(),
              e,
            )) && void 0 !== t
            ? t
            : "";
        }
        SetType(e) {
          this.m_section.type == e ||
            this.m_bReadOnly ||
            (this.m_section.type == f.k_Custom &&
              e != f.k_Custom &&
              ((this.m_section.title = {}), (this.m_section.description = {})),
            (this.m_section.type = e),
            B.Get().SetDirty(!0));
        }
        SetTitle(e, t) {
          if (
            (0, s.pM)(this.m_section.title, t, void 0) != e &&
            !this.m_bReadOnly
          ) {
            const n = (0, m.j_)(t, "english");
            this.m_section.title || (this.m_section.title = {}),
              (this.m_section.title[n] = e),
              B.Get().SetDirty(!0);
          }
        }
        SetDescription(e, t) {
          if (
            (0, s.pM)(this.m_section.description, t, void 0) != e &&
            !this.m_bReadOnly
          ) {
            const n = (0, m.j_)(t, "english");
            this.m_section.description || (this.m_section.description = {}),
              (this.m_section.description[n] = e),
              B.Get().SetDirty(!0);
          }
        }
      }
      (0, l.gn)([c.LO], C.prototype, "m_section", void 0),
        (0, l.gn)([_.ak], C.prototype, "GetTitle", null),
        (0, l.gn)([_.ak], C.prototype, "GetDescription", null),
        (0, l.gn)([c.aD.bound], C.prototype, "SetType", null),
        (0, l.gn)([c.aD.bound], C.prototype, "SetTitle", null),
        (0, l.gn)([c.aD.bound], C.prototype, "SetDescription", null);
      var b = n(89526),
        A = n(42735),
        T = n(11837),
        k = n(23217),
        w = n(85246),
        N = n(32765);
      class L {
        constructor() {
          (this.m_optInDef = new Map()),
            (this.m_activeOptInDef = new Array()),
            (this.m_archivedOptInDef = new Array()),
            (this.m_game_tags = []),
            (this.m_optin_stats = {}),
            (this.m_mapHasUnpublishedChanges = new Map());
        }
        GetActiveOptIn() {
          return this.m_activeOptInDef;
        }
        GetArchivedOptIn() {
          return this.m_archivedOptInDef;
        }
        GetGameTags() {
          return this.m_game_tags;
        }
        GetOptInStats() {
          return this.m_optin_stats;
        }
        BHasUnpublishedChagnes(e) {
          return this.m_mapHasUnpublishedChanges.get(e);
        }
        SetUnpublishedChanges(e) {
          this.m_mapHasUnpublishedChanges.set(e, !0);
        }
        GetDefinition(e) {
          return this.m_optInDef.get(e);
        }
        SetOptInDefinition(e) {
          this.m_optInDef.set(e.pageid, e);
          let t = this.m_activeOptInDef.findIndex((t) => t.pageid == e.pageid);
          -1 != t &&
            (this.m_activeOptInDef.splice(t, 1),
            this.m_activeOptInDef.unshift(e)),
            (t = this.m_archivedOptInDef.findIndex(
              (t) => t.pageid == e.pageid,
            )),
            -1 != t &&
              (this.m_archivedOptInDef.splice(t, 1),
              this.m_archivedOptInDef.unshift(e));
        }
        GetCreatedPageId() {
          return this.createdPageId;
        }
        GetCreatePageErrMsg() {
          return this.createPageErrMsg;
        }
        CreatePage(e, t) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            (this.createdPageId = ""), (this.createPageErrMsg = "");
            let n = N.De.PARTNER_BASE_URL + "/admin/store/pagecreate";
            const a = new FormData();
            a.append("sessionid", N.De.SESSIONID),
              a.append("action", "createsale"),
              a.append("id", e),
              a.append("is_optin", "true");
            try {
              let e = yield r().post(n, a, {
                withCredentials: !0,
                cancelToken: t,
              });
              if (t.reason)
                return (
                  console.log(
                    "COptInAdminStore.CreatePage cancelled: " + t.reason,
                  ),
                  null
                );
              if (
                200 != e.status ||
                !e.data ||
                e.data.success != A.s.k_EResultOK
              ) {
                let t =
                  "Save Error: (" +
                  (e.data
                    ? "result: " + e.data.success
                    : "status: " + e.status) +
                  ")";
                return (
                  e.data &&
                    e.data.msg &&
                    (t += " Error Message: " + e.data.msg),
                  (this.createPageErrMsg = e.data.msg),
                  t
                );
              }
              this.createdPageId = e.data.msg;
            } catch (e) {
              let t = (0, k.l)(e);
              return (
                console.error(
                  "OptinAdminStore.CreatePage error: " + t.strErrorMsg,
                  t,
                ),
                (this.createPageErrMsg = t.strErrorMsg),
                "Page creation error: " + e.strErrorMsg
              );
            }
            return null;
          });
        }
        static Get() {
          return (
            L.s_OptInAdmin ||
              ((L.s_OptInAdmin = new L()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInAdminStore = L.s_OptInAdmin),
              L.s_OptInAdmin.Init()),
            L.s_OptInAdmin
          );
        }
        Init() {
          let e = JSON.parse(
            JSON.stringify((0, N.kQ)("optin_game_tags", "application_config")),
          );
          if (e)
            for (let t of Object.keys(e))
              this.m_game_tags.push({ label: e[t], value: t });
          let t = JSON.parse(
            JSON.stringify((0, N.kQ)("optin_page_stats", "application_config")),
          );
          if (t)
            for (let e of Object.keys(t)) {
              let n = t[e].pageid;
              this.m_optin_stats[n] = t[e];
            }
          let n = (0, N.kQ)("optin_admin_pages", "application_config");
          if (this.ValidateStoreDefault(n)) {
            n.forEach((e) => {
              (0, s.MH)(e);
            });
            const e = Math.floor(Date.now() / 1e3);
            n.map((t) => {
              this.m_optInDef.set(t.pageid, t),
                t.event_end_date < e
                  ? this.m_archivedOptInDef.push(t)
                  : this.m_activeOptInDef.push(t);
            }),
              "dev" == N.De.WEB_UNIVERSE &&
                console.log(
                  "Loading OptIn Definitions: " + this.m_optInDef.size,
                  this.m_optInDef,
                );
          } else
            "dev" == N.De.WEB_UNIVERSE &&
              console.error("COptInAdmin.Init: Failed to load defintion", n);
          const a = (0, N.kQ)("optin_has_in_progress", "application_config");
          for (let e in a) this.m_mapHasUnpublishedChanges.set(e, a[e]);
        }
        ValidateStoreDefault(e) {
          const t = e;
          return (
            !!(
              t &&
              Array.isArray(t) &&
              t.length > 0 &&
              "object" == typeof t[0]
            ) && "string" == typeof t[0].pageid
          );
        }
      }
      function x(e) {
        return L.Get().GetDefinition(e);
      }
      (0, l.gn)([c.LO], L.prototype, "m_mapHasUnpublishedChanges", void 0),
        (0, l.gn)([c.aD], L.prototype, "Init", null);
      const O = "section_",
        G = "list_",
        R = "option_";
      class B {
        static Get() {
          return (
            B.s_Editor ||
              ((B.s_Editor = new B()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInAdminEditModel = B.s_Editor)),
            B.s_Editor
          );
        }
        GetActiveStatsChangeCallaback() {
          return this.m_activeStatsChange;
        }
        GetOptInPageID() {
          return this.m_model.pageid;
        }
        GetDynamicOptionByID(e) {
          let t = null;
          return (
            this.GetDynamicSections().forEach((n) => {
              n.unique_id == e.section_id &&
                n.lists.forEach((n) => {
                  n.unique_id == e.list_id &&
                    n.options.forEach((n) => {
                      n.unique_id == e.option_id && (t = n);
                    });
                });
            }),
            t
          );
        }
        BContainDyanmicOptionByIDs(e) {
          return null != this.GetDynamicOptionByID(e);
        }
        GetOptionNameByID(e, t = m.Df.k_Lang_English) {
          const n = this.GetDynamicOptionByID(e);
          return n ? this.GetKVLang(n.text, t) : "";
        }
        AddDemoPackage(e) {
          this.m_model.demo_packages || (this.m_model.demo_packages = []),
            this.m_model.demo_packages.push(e),
            this.SetDirty(!0);
        }
        GetDemoPackages() {
          return this.m_model.demo_packages;
        }
        GetName() {
          return this.m_model && this.m_model.pageid
            ? -1 != this.m_model.pageid.indexOf("sale_", 0)
              ? this.m_model.pageid.substring(5)
              : this.m_model.pageid
            : "";
        }
        GetFullName() {
          return this.m_model && this.m_model.pageid ? this.m_model.pageid : "";
        }
        BHasSpecialEventType() {
          var e;
          return Boolean(
            null === (e = this.m_model) || void 0 === e
              ? void 0
              : e.special_event_type,
          );
        }
        GetSpecialEventType() {
          return this.m_model.special_event_type;
        }
        SetSpecialEventType(e) {
          e !== this.m_model.special_event_type &&
            ((this.m_model.special_event_type = e), this.SetDirty(!0));
        }
        GetCurSpecialEventName() {
          return this.GetSpecialEventName(p.U.Get().GetCurEditLanguage());
        }
        GetSpecialEventName(e) {
          var t;
          return null !==
            (t = this.GetKVLang(this.m_model.special_event_name, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurSpecialEventName(e) {
          this.SetSpecialEventName(p.U.Get().GetCurEditLanguage(), e);
        }
        SetSpecialEventName(e, t) {
          this.SetKVLang(this.m_model.special_event_name, e, t);
        }
        GetCurSpecialEventDescription() {
          return this.GetSpecialEventDescription(
            p.U.Get().GetCurEditLanguage(),
          );
        }
        GetSpecialEventDescription(e) {
          var t;
          return null !==
            (t = this.GetKVLang(this.m_model.special_event_description, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurSpecialEventDescription(e) {
          this.SetSpecialEventDescription(p.U.Get().GetCurEditLanguage(), e);
        }
        SetSpecialEventDescription(e, t) {
          this.SetKVLang(this.m_model.special_event_description, e, t);
        }
        GetSpecialEventDocLink() {
          return this.m_model.special_event_doc_link;
        }
        SetSpecialEventDocLink(e) {
          e != this.m_model.special_event_doc_link &&
            ((this.m_model.special_event_doc_link = e), this.SetDirty(!0));
        }
        GetSpecialEventTypeMax() {
          return this.m_model.special_event_type_max || 0;
        }
        SetSpecialEventTypeMax(e) {
          e != this.m_model.special_event_type_max &&
            ((this.m_model.special_event_type_max = e), this.SetDirty(!0));
        }
        GetSpecialEventStartTime() {
          return this.m_model.special_event_rt_start || 0;
        }
        SetSpecialEventStartTime(e) {
          e != this.m_model.special_event_rt_start &&
            ((this.m_model.special_event_rt_start = e), this.SetDirty(!0));
        }
        GetSpecialEventEndTime() {
          return this.m_model.special_event_rt_end || 0;
        }
        SetSpecialEventEndTime(e) {
          e != this.m_model.special_event_rt_end &&
            ((this.m_model.special_event_rt_end = e), this.SetDirty(!0));
        }
        BHasSpecialEventTimeSet() {
          return (
            Boolean(this.m_model.special_event_rt_start) ||
            Boolean(this.m_model.special_event_rt_end)
          );
        }
        NCountSpecialEventBlocks() {
          var e;
          return (
            (null === (e = this.m_model.special_event_time_blocks) ||
            void 0 === e
              ? void 0
              : e.length) || 0
          );
        }
        AddSpecialEventBlock() {
          this.m_model.special_event_time_blocks ||
            (this.m_model.special_event_time_blocks = []),
            this.m_model.special_event_time_blocks.push({ block_reason: {} }),
            this.SetDirty(!0);
        }
        RemoveSpecialEventBlock(e) {
          var t;
          return (
            e <
              (null === (t = this.m_model.special_event_time_blocks) ||
              void 0 === t
                ? void 0
                : t.length) &&
            (this.m_model.special_event_time_blocks.splice(e),
            this.SetDirty(!0),
            !0)
          );
        }
        SetSpecialEventBlock(e, t) {
          var n;
          return (
            e <
              (null === (n = this.m_model.special_event_time_blocks) ||
              void 0 === n
                ? void 0
                : n.length) &&
            ((this.m_model.special_event_time_blocks[e] = t),
            this.SetDirty(!0),
            !0)
          );
        }
        GetAllSpecialEventBlocks() {
          return this.m_model.special_event_time_blocks || [];
        }
        MoveSpecialEventblock(e, t) {
          var n, a;
          return (
            e <
              (null === (n = this.m_model.special_event_time_blocks) ||
              void 0 === n
                ? void 0
                : n.length) &&
            t <
              (null === (a = this.m_model.special_event_time_blocks) ||
              void 0 === a
                ? void 0
                : a.length) &&
            e != t &&
            ((0, T.hV)(this.m_model.special_event_time_blocks, e, t),
            this.SetDirty(!0),
            !0)
          );
        }
        BIsInSpecialEventBlockedTime(e) {
          var t, n;
          return Boolean(
            e &&
              (null ===
                (n =
                  null === (t = this.m_model.special_event_time_blocks) ||
                  void 0 === t
                    ? void 0
                    : t.filter(
                        (t) => e >= t.block_rt_start && e < t.block_rt_end,
                      )) || void 0 === n
                ? void 0
                : n.length) > 0,
          );
        }
        BRequiresRemotePlayTogether() {
          return this.m_model.required_app_features.remote_play_together || !1;
        }
        SetRequiresRemotePlayTogether(e) {
          e !==
            (this.m_model.required_app_features.remote_play_together || !1) &&
            ((this.m_model.required_app_features.remote_play_together = e),
            this.SetDirty(!0));
        }
        BRequiresVR() {
          return this.m_model.required_app_features.vr || !1;
        }
        SetRequiresVR(e) {
          e !== (this.m_model.required_app_features.vr || !1) &&
            ((this.m_model.required_app_features.vr = e), this.SetDirty(!0));
        }
        BOptInRegistationOnlyShowSaveButton() {
          return this.m_model.opt_in_registration_only_show_save;
        }
        SetOptInRegistationOnlyShowSaveButton(e) {
          e != this.m_model.opt_in_registration_only_show_save &&
            ((this.m_model.opt_in_registration_only_show_save = e),
            this.SetDirty(!0));
        }
        BIsAdditionalFeaturingSectionEnabled() {
          return this.m_model.additional_featuring_section_enabled;
        }
        SetAdditionalFeaturingSectionEnabled(e) {
          e != this.m_model.additional_featuring_section_enabled &&
            ((this.m_model.additional_featuring_section_enabled = e),
            this.SetDirty(!0));
        }
        BIsCollectTrailerPermissions() {
          return this.m_model.collect_trailer_permissions;
        }
        SetCollectTrailerPermissions(e) {
          e != this.m_model.collect_trailer_permissions &&
            ((this.m_model.collect_trailer_permissions = e), this.SetDirty(!0));
        }
        BIsCollectDemoPermissions() {
          return this.m_model.collect_demo_permissions;
        }
        SetCollectDemoPermissions(e) {
          e != this.m_model.collect_demo_permissions &&
            ((this.m_model.collect_demo_permissions = e), this.SetDirty(!0));
        }
        BIsCollectGameProfileIntent() {
          return this.m_model.collect_game_profile_intent;
        }
        SetCollectGameProfileIntent(e) {
          e != this.m_model.collect_game_profile_intent &&
            ((this.m_model.collect_game_profile_intent = e), this.SetDirty(!0));
        }
        BHasCollectDemoDeadlineDate() {
          return Boolean(this.m_model.collect_demo_deadline);
        }
        GetCollectDemoDeadlineDate() {
          return this.m_model.collect_demo_deadline;
        }
        SetCollectDemoDeadlineDate(e) {
          e != this.m_model.collect_demo_deadline &&
            ((this.m_model.collect_demo_deadline = e), this.SetDirty(!0));
        }
        GetCurEventTitle() {
          var e;
          return null !==
            (e = this.GetEventTitle(p.U.Get().GetCurEditLanguage())) &&
            void 0 !== e
            ? e
            : "";
        }
        GetEventTitle(e) {
          var t;
          return null !== (t = this.GetKVLang(this.m_model.event_title, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurEventTitle(e) {
          this.SetEventTitle(p.U.Get().GetCurEditLanguage(), e);
        }
        SetEventTitle(e, t) {
          this.SetKVLang(this.m_model.event_title, e, t);
        }
        GetCurOptInRegistrationTitle() {
          var e;
          return null !==
            (e = this.GetOptInRegistrationTitle(
              p.U.Get().GetCurEditLanguage(),
            )) && void 0 !== e
            ? e
            : "";
        }
        GetOptInRegistrationTitle(e) {
          var t;
          return null !==
            (t = this.GetKVLang(this.m_model.opt_in_registration_title, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurOptInRegistrationTitle(e) {
          this.SetOptInRegistrationTitle(p.U.Get().GetCurEditLanguage(), e);
        }
        SetOptInRegistrationTitle(e, t) {
          this.m_model.opt_in_registration_title ||
            (this.m_model.opt_in_registration_title = {}),
            this.SetKVLang(this.m_model.opt_in_registration_title, e, t);
        }
        GetCurOptInRegistrationCheckbox() {
          var e;
          return null !==
            (e = this.GetOptInRegistrationCheckbox(
              p.U.Get().GetCurEditLanguage(),
            )) && void 0 !== e
            ? e
            : "";
        }
        GetOptInRegistrationCheckbox(e) {
          var t;
          return null !==
            (t = this.GetKVLang(
              this.m_model.opt_in_registration_checkbox,
              e,
            )) && void 0 !== t
            ? t
            : "";
        }
        SetCurOptInRegistrationCheckbox(e) {
          this.SetOptInRegistrationCheckbox(p.U.Get().GetCurEditLanguage(), e);
        }
        SetOptInRegistrationCheckbox(e, t) {
          this.m_model.opt_in_registration_checkbox ||
            (this.m_model.opt_in_registration_checkbox = {}),
            this.SetKVLang(this.m_model.opt_in_registration_checkbox, e, t);
        }
        BHasOptInRegistrationTitleOrCheckbox() {
          return (
            Boolean(this.m_model.opt_in_registration_title) ||
            Boolean(this.m_model.opt_in_registration_checkbox)
          );
        }
        BIsOptInEnabled() {
          return this.m_model.sale_optin_enabled;
        }
        SetOptInEnabled(e) {
          e !== this.m_model.sale_optin_enabled &&
            ((this.m_model.sale_optin_enabled = e), this.SetDirty(!0));
        }
        GetPublicEventURL() {
          return this.m_model.public_event_url;
        }
        SetPublicEventURL(e) {
          e != this.m_model.public_event_url &&
            ((this.m_model.public_event_url = e), this.SetDirty(!0));
        }
        GetPublicDocumentationWikiURL() {
          return this.m_model.public_doc_wiki_url;
        }
        SetPublicDocumentationWikiURL(e) {
          e != this.m_model.public_doc_wiki_url &&
            ((this.m_model.public_doc_wiki_url = e), this.SetDirty(!0));
        }
        GetPublicEventID() {
          return this.m_model.public_event_id;
        }
        SetPublicEventID(e) {
          e != this.m_model.public_event_id &&
            ((this.m_model.public_event_id = e), this.SetDirty(!0));
        }
        GetEventStartTime() {
          return this.m_model.event_start_date;
        }
        SetEventStartTime(e) {
          e !== this.m_model.event_start_date &&
            ((this.m_model.event_start_date = e), this.SetDirty(!0));
        }
        GetEventEndTime() {
          return this.m_model.event_end_date;
        }
        SetEventEndTime(e) {
          e !== this.m_model.event_end_date &&
            ((this.m_model.event_end_date = e), this.SetDirty(!0));
        }
        GetOptInDeadlineTime() {
          return this.m_model.optin_deadline_date;
        }
        SetOptInDeadlineTime(e) {
          e !== this.m_model.optin_deadline_date &&
            ((this.m_model.optin_deadline_date = e), this.SetDirty(!0));
        }
        BIsInvitationOnly() {
          return this.m_model.invitation_only;
        }
        SetInvititationOnly(e) {
          e !== this.m_model.invitation_only &&
            ((this.m_model.invitation_only = e), this.SetDirty(!0));
        }
        BIsReleaseGamesEligible() {
          return this.m_model.release_date_eligibility.include_released_games;
        }
        SetReleaseGameEligible(e) {
          e !== this.m_model.release_date_eligibility.include_released_games &&
            ((this.m_model.release_date_eligibility.include_released_games = e),
            this.SetDirty(!0));
        }
        BIsUnreleaseGamesEligible() {
          return this.m_model.release_date_eligibility.include_unreleased_games;
        }
        SetUnreleaseGameEligible(e) {
          e !==
            this.m_model.release_date_eligibility.include_unreleased_games &&
            ((this.m_model.release_date_eligibility.include_unreleased_games =
              e),
            this.SetDirty(!0));
        }
        GetEligibleReleaseBeforeDate() {
          return this.m_model.release_date_eligibility.release_before_date;
        }
        SetEligibleReleaseBeforeDate(e) {
          e !== this.m_model.release_date_eligibility.release_before_date &&
            ((this.m_model.release_date_eligibility.release_before_date = e),
            this.SetDirty(!0));
        }
        GetEligibleReleaseAfterDate() {
          return this.m_model.release_date_eligibility.release_after_date;
        }
        SetEligibleReleaseAfterDate(e) {
          e !== this.m_model.release_date_eligibility.release_after_date &&
            ((this.m_model.release_date_eligibility.release_after_date = e),
            this.SetDirty(!0));
        }
        GetCooldownGroupType() {
          return this.m_model.cooldown_group.group_id || 0;
        }
        SetCooldownGroupType(e) {
          (this.m_model.cooldown_group &&
            e === this.m_model.cooldown_group.group_id) ||
            (this.m_model.cooldown_group || (this.m_model.cooldown_group = {}),
            (this.m_model.cooldown_group.group_id = e),
            this.SetDirty(!0));
        }
        GetCooldownRequired() {
          return this.m_model.cooldown_group.cooldown_required || !1;
        }
        SetCooldownRequired(e) {
          (this.m_model.cooldown_group &&
            e === this.m_model.cooldown_group.cooldown_required) ||
            (this.m_model.cooldown_group || (this.m_model.cooldown_group = {}),
            (this.m_model.cooldown_group.cooldown_required = e),
            this.SetDirty(!0));
        }
        GetCooldownDays() {
          return this.m_model.cooldown_group.cooldown_time || 0;
        }
        SetCooldownDays(e) {
          e !== this.m_model.cooldown_group.cooldown_time &&
            ((this.m_model.cooldown_group.cooldown_time = e),
            this.SetDirty(!0));
        }
        GetRequiredTags() {
          let e = [];
          if (this.m_model && this.m_model.required_tags) {
            let t = L.Get().GetGameTags();
            Object.keys(this.m_model.required_tags).forEach((n) => {
              const a = t.find((e) => e.value == n);
              a && e.push({ label: a.label, value: a.value });
            });
          }
          return e;
        }
        OnChangeRequiredTags(e) {
          (this.m_model.required_tags = {}),
            e &&
              e.forEach((e) => {
                let t = parseInt(e.value);
                this.m_model.required_tags[t] = !0;
              }),
            this.SetDirty(!0);
        }
        GetAppOfficialWeightedTagRankToInclude() {
          return this.m_model.app_official_weighted_tag_rank_to_include || 20;
        }
        SetAppOfficialWeightedTagRankToInclude(e) {
          e !== this.m_model.app_official_weighted_tag_rank_to_include &&
            ((this.m_model.app_official_weighted_tag_rank_to_include = e),
            this.SetDirty(!0));
        }
        GetModel() {
          return this.m_model;
        }
        GetDynamicSections() {
          return this.m_model.dynamic_sections || [];
        }
        GetEditableDynamicSections() {
          return this.m_dynamicSections || [];
        }
        GetDynamicSectionByID(e) {
          return this.m_mapDynamicSection.get(e);
        }
        GetEmailDefinitionByID(e) {
          return this.m_mapEmails.get(e);
        }
        GetFirstEmail() {
          var e;
          return (null === (e = this.m_EmailDefinitions) || void 0 === e
            ? void 0
            : e.length) > 0
            ? this.m_EmailDefinitions[0]
            : void 0;
        }
        GetEmailDefinitions() {
          return this.m_EmailDefinitions;
        }
        GetCurDescription() {
          return this.GetDescription(p.U.Get().GetCurEditLanguage());
        }
        GetDescription(e) {
          var t;
          return null !== (t = this.GetKVLang(this.m_model.description, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurDescription(e) {
          this.SetDescription(p.U.Get().GetCurEditLanguage(), e);
        }
        SetDescription(e, t) {
          this.SetKVLang(this.m_model.description, e, t);
        }
        GetCurHelpText() {
          return this.GetHelpText(p.U.Get().GetCurEditLanguage());
        }
        GetHelpText(e) {
          var t;
          return null !== (t = this.GetKVLang(this.m_model.help_text, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurHelpText(e) {
          this.SetHelpText(p.U.Get().GetCurEditLanguage(), e);
        }
        SetHelpText(e, t) {
          this.SetKVLang(this.m_model.help_text, e, t);
        }
        GetCurAppealsText() {
          return this.GetAppealsText(p.U.Get().GetCurEditLanguage());
        }
        GetAppealsText(e) {
          var t;
          return null !== (t = this.GetKVLang(this.m_model.appeals_text, e)) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurAppealsText(e) {
          this.SetAppealsText(p.U.Get().GetCurEditLanguage(), e);
        }
        SetAppealsText(e, t) {
          this.SetKVLang(this.m_model.appeals_text, e, t);
        }
        GetCurPruningCriteriaText() {
          return this.GetPruningCriteriaText(p.U.Get().GetCurEditLanguage());
        }
        GetPruningCriteriaText(e) {
          var t;
          return null !== (t = this.m_model.eligibility_criteria) &&
            void 0 !== t
            ? t
            : "";
        }
        SetCurPruningCriteriaText(e) {
          this.SetPruningCriteriaText(p.U.Get().GetCurEditLanguage(), e);
        }
        SetPruningCriteriaText(e, t) {
          (this.m_model.eligibility_criteria = t), this.SetDirty(!0);
        }
        GetPointShopPriorityApps() {
          return this.m_model.point_shop_priority_appids;
        }
        SetPointShopPriorityApps(e) {
          (this.m_model.point_shop_priority_appids = e), this.SetDirty(!0);
        }
        GetPointShopIncludedApps() {
          return this.m_model.point_shop_included_appids;
        }
        SetPointShopIncludedApps(e) {
          (this.m_model.point_shop_included_appids = e), this.SetDirty(!0);
        }
        GetAllLocalizedOptInBanner() {
          var e;
          return null !== (e = this.m_model.localized_optin_banner) &&
            void 0 !== e
            ? e
            : {};
        }
        GetLocalizedOptInBanner(e) {
          var t, n;
          return null !==
            (n =
              null === (t = this.m_model.localized_optin_banner) || void 0 === t
                ? void 0
                : t[(0, m.j_)(e)]) && void 0 !== n
            ? n
            : "";
        }
        SetLocalizedOptInBanner(e, t) {
          (this.m_model.localized_optin_banner &&
            !Array.isArray(this.m_model.localized_optin_banner)) ||
            (this.m_model.localized_optin_banner = {});
          const n = (0, m.j_)(e);
          this.m_model.localized_optin_banner[n] != t &&
            ((this.m_model.localized_optin_banner[n] = t), this.SetDirty(!0));
        }
        DeleteLocalizedOptInBanner(e) {
          var t;
          const n = (0, m.j_)(e);
          (null === (t = this.m_model.localized_optin_banner) || void 0 === t
            ? void 0
            : t[n]) &&
            (delete this.m_model.localized_optin_banner[n], this.SetDirty(!0));
        }
        BIsCategoriesEnabled() {
          return this.m_model.categories.enabled;
        }
        SetCategoriesEnabled(e) {
          e != this.m_model.categories.enabled &&
            ((this.m_model.categories.enabled = e), this.SetDirty(!0));
        }
        GetCategoriesRequired() {
          return this.m_model.categories.required || 0;
        }
        SetCategoriesRequired(e) {
          e != this.m_model.categories.required &&
            ((this.m_model.categories.required = e), this.SetDirty(!0));
        }
        GetCategoryTags() {
          let e = [];
          if (this.m_model && this.m_model.categories.tags) {
            let t = L.Get().GetGameTags();
            Object.keys(this.m_model.categories.tags).forEach((n) => {
              const a = t.find((e) => e.value == n);
              e.push({ label: a.label, value: a.value });
            });
          }
          return e;
        }
        OnChangeCategoryTags(e) {
          (this.m_model.categories.tags = {}),
            e &&
              e.forEach((e) => {
                let t = parseInt(e.value);
                this.m_model.categories.tags[t] = !0;
              }),
            this.SetDirty(!0);
        }
        BIsArtistStatementEnabled() {
          return this.m_model.artist_statement.enabled || !1;
        }
        SetArtistStatementEnabled(e) {
          e !== this.m_model.artist_statement.enabled &&
            ((this.m_model.artist_statement.enabled = e), this.SetDirty(!0));
        }
        GetArtistStatementRequired() {
          return this.m_model.artist_statement.required || 0;
        }
        SetArtistStatementRequired(e) {
          e !== this.m_model.artist_statement.required &&
            ((this.m_model.artist_statement.required = e), this.SetDirty(!0));
        }
        BIsPrimaryCountryEnabled() {
          return this.m_model.primary_country.enabled || !1;
        }
        SetPrimaryCountryEnabled(e) {
          e !== this.m_model.primary_country.enabled &&
            ((this.m_model.primary_country.enabled = e), this.SetDirty(!0));
        }
        GetPrimaryCountryRequired() {
          return this.m_model.primary_country.required || 0;
        }
        SetPrimaryCountryRequired(e) {
          e !== this.m_model.primary_country.required &&
            ((this.m_model.primary_country.required = e), this.SetDirty(!0));
        }
        BIsPressContactEnabled() {
          return this.m_model.press_contact.enabled || !1;
        }
        SetPressContactEnabled(e) {
          var t;
          e !==
            (null === (t = this.m_model) || void 0 === t
              ? void 0
              : t.press_contact.enabled) &&
            ((this.m_model.press_contact.enabled = e), this.SetDirty(!0));
        }
        GetPressContactRequired() {
          return this.m_model.press_contact.required || 0;
        }
        SetPressContactRequired(e) {
          var t;
          e !==
            (null === (t = this.m_model) || void 0 === t
              ? void 0
              : t.press_contact.required) &&
            ((this.m_model.press_contact.required = e), this.SetDirty(!0));
        }
        BIsBeforeYouOptInEnabled() {
          return this.m_model.before_you_opt_in || !1;
        }
        SetBeforeYouOptInEnabled(e) {
          e !== this.m_model.before_you_opt_in &&
            ((this.m_model.before_you_opt_in = e), this.SetDirty(!0));
        }
        BIsBuildYourStorePageEnabled() {
          return this.m_model.build_store_page.enabled || !1;
        }
        SetBuildYourStorePageEnabled(e) {
          e !== this.m_model.build_store_page.enabled &&
            ((this.m_model.build_store_page.enabled = e), this.SetDirty(!0));
        }
        GetBuildYourStorePageRequired() {
          return this.m_model.build_store_page.required || 0;
        }
        SetBuildYourStorePageRequired(e) {
          e !== this.m_model.build_store_page.required &&
            ((this.m_model.build_store_page.required = e), this.SetDirty(!0));
        }
        GetStorePageText() {
          var e;
          return null !==
            (e = this.GetKVLang(
              this.m_model.build_store_page.description,
              p.U.Get().GetCurEditLanguage(),
            )) && void 0 !== e
            ? e
            : "";
        }
        SetStorePageText(e) {
          this.m_model.build_store_page || (this.m_model.build_store_page = {}),
            this.m_model.build_store_page.description ||
              (this.m_model.build_store_page.description = {}),
            this.SetKVLang(
              this.m_model.build_store_page.description,
              p.U.Get().GetCurEditLanguage(),
              e,
            );
        }
        BIsTaggingWizardEnabled() {
          return this.m_model.tagging_wizard || !1;
        }
        SetTaggingWizardEnabled(e) {
          e !== this.m_model.tagging_wizard &&
            ((this.m_model.tagging_wizard = e), this.SetDirty(!0));
        }
        BIsLaunchYourDemoEnabled() {
          return this.m_model.launch_demo.enabled || !1;
        }
        SetLaunchYourDemoEnabled(e) {
          e !== this.m_model.launch_demo.enabled &&
            ((this.m_model.launch_demo.enabled = e), this.SetDirty(!0));
        }
        GetLaunchYourDemoRequired() {
          return this.m_model.launch_demo.required || 0;
        }
        SetLaunchYourDemoRequired(e) {
          e !== this.m_model.launch_demo.required &&
            ((this.m_model.launch_demo.required = e), this.SetDirty(!0));
        }
        GetLaunchYourDemoDueDate() {
          return this.m_model.launch_demo.due_date || 0;
        }
        SetLaunchYourDemoDueDate(e) {
          e !== this.m_model.launch_demo.due_date &&
            ((this.m_model.launch_demo.due_date = e), this.SetDirty(!0));
        }
        BIsDoAnytimeEnabled() {
          return this.m_model.do_anytime.enabled || !1;
        }
        SetDoAnytimeEnabled(e) {
          e !== this.m_model.do_anytime.enabled &&
            ((this.m_model.do_anytime.enabled = e), this.SetDirty(!0));
        }
        BIsLivestreamEnabled() {
          return this.m_model.do_anytime.livestream || !1;
        }
        SetLivestreamEnabled(e) {
          e !== this.m_model.do_anytime.livestream &&
            ((this.m_model.do_anytime.livestream = e), this.SetDirty(!0));
        }
        BIsChatSessionEnabled() {
          return this.m_model.do_anytime.chat_session || !1;
        }
        SetChatSessionEnabled(e) {
          e !== this.m_model.do_anytime.chat_session &&
            ((this.m_model.do_anytime.chat_session = e), this.SetDirty(!0));
        }
        BIsAnytimeTaggingWizardEnabled() {
          return this.m_model.do_anytime.tagging_wizard || !1;
        }
        SetAnytimeTaggingWizardEnabled(e) {
          e !== this.m_model.do_anytime.tagging_wizard &&
            ((this.m_model.do_anytime.tagging_wizard = e), this.SetDirty(!0));
        }
        BIsEnterDiscountsEnabled() {
          return this.m_model.do_anytime.enter_discounts || !1;
        }
        SetEnterDiscountsEnabled(e) {
          e !== this.m_model.do_anytime.enter_discounts &&
            ((this.m_model.do_anytime.enter_discounts = e), this.SetDirty(!0));
        }
        GetDiscountEventID() {
          return this.m_model.do_anytime.discount_event_id || "";
        }
        SetDiscountEventID(e) {
          e !== this.m_model.do_anytime.discount_event_id &&
            ((this.m_model.do_anytime.discount_event_id = e),
            this.SetDirty(!0));
        }
        GetExternalAppReviewers() {
          return this.m_model.external_app_reviewer || [];
        }
        SetExternalAppReviewers(e) {
          JSON.stringify(e) !==
            JSON.stringify(this.m_model.external_app_reviewer) &&
            ((this.m_model.external_app_reviewer = e), this.SetDirty(!0));
        }
        RemoveExternalAppReviewAt(e) {
          var t;
          e <
            (null === (t = this.m_model.external_app_reviewer) || void 0 === t
              ? void 0
              : t.length) &&
            (this.m_model.external_app_reviewer.splice(e, 1),
            this.SetDirty(!0));
        }
        BAddExternalAppReviewAt(e) {
          this.m_model.external_app_reviewer ||
            (this.m_model.external_app_reviewer = []);
          return (
            -1 == this.m_model.external_app_reviewer.findIndex((t) => t == e) &&
            (this.m_model.external_app_reviewer.push(e), this.SetDirty(!0), !0)
          );
        }
        SetKVLang(e, t, n) {
          (function (e, t, n) {
            const a = (0, m.j_)(t);
            return e[a] != n && ((e[a] = n), !0);
          })(e, t, n) && this.SetDirty(!0);
        }
        GetKVLang(e, t) {
          return (function (e, t) {
            const n = (0, m.j_)(t);
            return e ? e[n] : "";
          })(e, t);
        }
        AddDynamicSection() {
          this.m_model.dynamic_sections || (this.m_model.dynamic_sections = []),
            this.m_model.dynamic_sections.push(B.CreateDefaultDynamicSection());
          const e = new M(
            this.m_model.dynamic_sections[
              this.m_model.dynamic_sections.length - 1
            ],
          );
          this.m_mapDynamicSection.set(e.GetUniqueID(), e),
            this.m_dynamicSections.push(e),
            this.SetDirty(!0);
        }
        static CreateDefaultDynamicSection() {
          return {
            unique_id: B.Get().GenerateUniqueIDForOptInSection(),
            input_style: "radio",
            columns: 1,
            lists: [
              {
                options: [],
                unique_id: B.GenerateUniqueIDForOptionListSection(),
              },
            ],
          };
        }
        DeleteDynamicSection(e) {
          const t = this.GetDynamicSectionByID(e);
          if (!t) return console.log("Could not find section with ID " + e), !1;
          this.m_mapDynamicSection.delete(t.GetUniqueID());
          let n = this.m_dynamicSections.findIndex((t) => t.GetUniqueID() == e);
          if (-1 === n) throw `dynamic section unique id ${e} missing: editing`;
          if (
            (this.m_dynamicSections.splice(n, 1),
            (n = this.m_model.dynamic_sections.findIndex(
              (t) => t.unique_id === e,
            )),
            -1 === n)
          )
            throw `dynamic section unique id ${e} missing: source model`;
          return (
            this.m_model.dynamic_sections.splice(n, 1), this.SetDirty(!0), !0
          );
        }
        GenerateUniqueIDForOptInSection() {
          let e = Math.floor(1 + 1e5 * Math.random());
          for (; this.GetDynamicSectionByID(O + e); )
            e = Math.floor(1 + 1e5 * Math.random());
          return O + e;
        }
        static GenerateUniqueIDForOptionListSection(e) {
          let t = Math.floor(1 + 1e5 * Math.random());
          for (; e && e.some((e) => e.unique_id === G + t); )
            t = Math.floor(1 + 1e5 * Math.random());
          return G + t;
        }
        static GenerateUniqueIDForListItem(e) {
          let t = Math.floor(1 + 1e5 * Math.random());
          for (; e && e.some((e) => e.unique_id === R + t); )
            t = Math.floor(1 + 1e5 * Math.random());
          return R + t;
        }
        BIsDirty() {
          return this.m_bDirty;
        }
        SetDirty(e) {
          this.m_bDirty != e &&
            ((this.m_bDirty = e),
            L.Get().SetUnpublishedChanges(this.GetFullName()));
        }
        Save(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            let t = N.De.PARTNER_BASE_URL + "optin/ajaxadminupdate";
            const n = new FormData();
            n.append("sessionid", N.De.SESSIONID),
              n.append("pageid", this.m_model.pageid),
              n.append("jsondata", JSON.stringify(this.m_model));
            try {
              let a = yield r().post(t, n, {
                withCredentials: !0,
                cancelToken: e,
              });
              if (e.reason)
                return (
                  console.log(
                    "COptInAdminEditModel.Save Cancelled: " + e.reason,
                  ),
                  null
                );
              if (
                200 != a.status ||
                !a.data ||
                a.data.success != A.s.k_EResultOK
              ) {
                let e =
                  "Save Error: (" +
                  (a.data
                    ? "erseult: " + a.data.success
                    : "status: " + a.status) +
                  ")";
                return (
                  a.data &&
                    a.data.err_msg &&
                    (e += " Error Message: " + a.data.err_msg),
                  console.error("COptInAdminEditModel.Save: " + e),
                  e
                );
              }
              L.Get().SetOptInDefinition(this.m_model), this.SetDirty(!1);
            } catch (e) {
              let t = (0, k.l)(e);
              return (
                console.error(
                  "COptInAdminEditModel save error: " + t.strErrorMsg,
                  t,
                ),
                "Save Error: " + e.strErrorMsg
              );
            }
            return null;
          });
        }
        BInitialized() {
          return Boolean(this.m_model);
        }
        BHasLanguageData(e) {
          const t = (0, m.j_)(e);
          return (
            (this.m_model.description &&
              this.m_model.description[t] &&
              this.m_model.description[t].length > 0) ||
            (this.m_model.help_text &&
              this.m_model.help_text[t] &&
              this.m_model.help_text[t].length > 0) ||
            (this.m_model.appeals_text &&
              this.m_model.appeals_text[t] &&
              this.m_model.appeals_text[t].length > 0) ||
            (this.m_model.special_event_name &&
              this.m_model.special_event_name[t] &&
              this.m_model.special_event_name[t].length > 0) ||
            (this.m_model.special_event_description &&
              this.m_model.special_event_description[t] &&
              this.m_model.special_event_description[t].length > 0) ||
            (this.m_model.build_store_page &&
              this.m_model.build_store_page.description &&
              this.m_model.build_store_page.description[t] &&
              this.m_model.build_store_page.description[t].length > 0) ||
            (this.m_model.artist_statement &&
              this.m_model.artist_statement.description &&
              this.m_model.artist_statement.description[t] &&
              this.m_model.artist_statement.description[t].length > 0)
          );
        }
        constructor() {
          (this.m_bDirty = !1),
            (this.m_mapDynamicSection = new Map()),
            (this.m_mapEmails = new Map()),
            (this.m_activeStatsChange = new w.pB()),
            (this.rgOptionalSuggestedRequired = []),
            (this.rgEventTypes = []),
            (this.rgGameTokens = []);
        }
        Reset(e, t) {
          var n, a;
          if (
            ((this.m_model = e ? JSON.parse(JSON.stringify(e)) : null),
            (this.m_bDirty = !1),
            p.U.Get().SetCurEditLanguage(m.Df.k_Lang_English),
            this.SetActiveStats(t),
            this.m_model &&
              ((this.m_model.required_tags &&
                !Array.isArray(this.m_model.required_tags)) ||
                (this.m_model.required_tags = {}),
              (this.m_model.categories &&
                !Array.isArray(this.m_model.categories)) ||
                (this.m_model.categories = {}),
              (this.m_model.categories.tags &&
                !Array.isArray(this.m_model.categories.tags)) ||
                (this.m_model.categories.tags = {}),
              (this.m_model.artist_statement &&
                !Array.isArray(this.m_model.artist_statement)) ||
                (this.m_model.artist_statement = {}),
              (this.m_model.primary_country &&
                !Array.isArray(this.m_model.primary_country)) ||
                (this.m_model.primary_country = {}),
              (this.m_model.press_contact &&
                !Array.isArray(this.m_model.press_contact)) ||
                (this.m_model.press_contact = {}),
              (this.m_model.build_store_page &&
                !Array.isArray(this.m_model.build_store_page)) ||
                (this.m_model.build_store_page = {}),
              (this.m_model.launch_demo &&
                !Array.isArray(this.m_model.launch_demo)) ||
                (this.m_model.launch_demo = {}),
              (this.m_model.do_anytime &&
                !Array.isArray(this.m_model.do_anytime)) ||
                (this.m_model.do_anytime = {}),
              (this.m_model.release_date_eligibility &&
                !Array.isArray(this.m_model.release_date_eligibility)) ||
                (this.m_model.release_date_eligibility = {}),
              (this.m_model.cooldown_group &&
                !Array.isArray(this.m_model.cooldown_group)) ||
                (this.m_model.cooldown_group = {}),
              (this.m_model.description &&
                !Array.isArray(this.m_model.description)) ||
                (this.m_model.description = {}),
              (this.m_model.help_text &&
                !Array.isArray(this.m_model.help_text)) ||
                (this.m_model.help_text = {}),
              (this.m_model.appeals_text &&
                !Array.isArray(this.m_model.appeals_text)) ||
                (this.m_model.appeals_text = {}),
              (this.m_model.special_event_description &&
                !Array.isArray(this.m_model.special_event_description)) ||
                (this.m_model.special_event_description = {}),
              (this.m_model.special_event_name &&
                !Array.isArray(this.m_model.special_event_name)) ||
                (this.m_model.special_event_name = {}),
              (this.m_model.event_title &&
                !Array.isArray(this.m_model.event_title)) ||
                (this.m_model.event_title = {}),
              (this.m_model.required_app_features &&
                !Array.isArray(this.m_model.required_app_features)) ||
                (this.m_model.required_app_features = {})),
            this.m_model && !this.m_model.event_start_date)
          ) {
            let e = new Date();
            e.setHours(10),
              e.setMinutes(0),
              e.setSeconds(0),
              (this.m_model.event_start_date = Math.floor(e.getTime() / 1e3));
          }
          if (this.m_model && !this.m_model.event_end_date) {
            let e = new Date();
            e.setDate(e.getDate() + 1),
              e.setHours(10),
              e.setMinutes(0),
              e.setSeconds(0),
              (this.m_model.event_end_date = Math.floor(e.getTime() / 1e3));
          }
          (this.m_dynamicSections = []),
            (this.m_mapDynamicSection = new Map()),
            this.m_model &&
              this.m_model.dynamic_sections &&
              this.m_model.dynamic_sections.forEach((e) => {
                let t = new M(e);
                this.m_dynamicSections.push(t),
                  this.m_mapDynamicSection.set(t.GetUniqueID(), t);
              }),
            (this.m_EmailDefinitions = []),
            (this.m_mapEmails = new Map()),
            (null ===
              (a =
                null === (n = this.m_model) || void 0 === n
                  ? void 0
                  : n.emails) || void 0 === a
              ? void 0
              : a.length) > 0 &&
              this.m_model.emails.forEach((e) => {
                const t = new I(this.GetFullName(), e);
                this.m_EmailDefinitions.push(t),
                  this.m_mapEmails.set(t.GetUniqueID(), t);
              }),
            this.LoadActiveStatsDetails();
        }
        AddEmailDraft(e) {
          this.m_model.emails || (this.m_model.emails = []),
            this.m_model.emails.push(e);
          const t = new I(
            this.GetFullName(),
            this.m_model.emails[this.m_model.emails.length - 1],
          );
          return (
            this.m_EmailDefinitions.push(t),
            this.m_mapEmails.set(t.GetUniqueID(), t),
            this.SetDirty(!0),
            t
          );
        }
        SetActiveStats(e) {
          (this.rgActiveStats = e),
            this.GetActiveStatsChangeCallaback().Dispatch(e);
        }
        GetActiveStats() {
          return this.rgActiveStats;
        }
        LoadActiveStatsDetails() {
          return (0, l.mG)(this, void 0, void 0, function* () {
            if (!this.m_model) return null;
            let e = N.De.PARTNER_BASE_URL + "optin/ajaxgetoptinstats";
            e +=
              "?active=true&pageids=" + encodeURIComponent(this.m_model.pageid);
            try {
              let t = yield r().get(e, { withCredentials: !0, timeout: 2e4 });
              if (
                200 != t.status ||
                !t.data ||
                t.data.success != A.s.k_EResultOK
              ) {
                return (
                  "LoadActiveStatsDetails error: (" +
                  (t.data
                    ? "result: " + t.data.success
                    : "status: " + t.status) +
                  ")"
                );
              }
              if (t.data.msg) {
                const e = t.data.msg
                  ? JSON.parse(JSON.stringify(t.data.msg))
                  : null;
                this.SetActiveStats(e ? e[0] : null);
              }
            } catch (e) {
              return "Loading active stats returned " + e.strErrorMsg;
            }
            return null;
          });
        }
        RefreshActiveStats(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            if (!this.m_model) return null;
            let t = N.De.PARTNER_BASE_URL + "optin/ajaxrefreshoptinstats";
            const n = new FormData();
            n.append("sessionid", N.De.SESSIONID),
              n.append("pageids", this.m_model.pageid);
            try {
              let a = yield r().post(t, n, {
                withCredentials: !0,
                cancelToken: e || void 0,
                timeout: 12e4,
              });
              if (e && e.reason)
                return (
                  console.log("RefreshingActiveStats Cancelled: " + e.reason),
                  null
                );
              if (
                200 != a.status ||
                !a.data ||
                a.data.success != A.s.k_EResultOK
              ) {
                let e =
                  "Refresh optin stats error: (" +
                  (a.data
                    ? "result: " + a.data.success
                    : "status: " + a.status) +
                  ")";
                return (
                  console.log("COptInAdminEditModel.RefresActiveStats: " + e), e
                );
              }
              if (a.data.msg) {
                let e = a.data.msg
                  ? JSON.parse(JSON.stringify(a.data.msg))
                  : null;
                this.SetActiveStats(e ? e[0] : null);
              }
            } catch (e) {
              let t = (0, k.l)(e);
              return (
                console.error(
                  "COptInAdminEditModel.RefreshActiveStats error: " +
                    t.strErrorMsg,
                  t,
                ),
                "Save Error: " + e.strErrorMsg
              );
            }
            return null;
          });
        }
        GetRequiredOptions() {
          return (
            this.rgOptionalSuggestedRequired.length ||
              (this.rgOptionalSuggestedRequired.push({
                label: "Optional",
                data: 0,
              }),
              this.rgOptionalSuggestedRequired.push({
                label: "Suggested",
                data: 1,
              }),
              this.rgOptionalSuggestedRequired.push({
                label: "Required",
                data: 2,
              })),
            this.rgOptionalSuggestedRequired
          );
        }
        GetCooldownGroupOptions() {
          if (!this.rgEventTypes.length)
            for (let e = 0; null != s.Sc[e]; e++)
              this.rgEventTypes.push({ label: s.Sc[e], data: e });
          return this.rgEventTypes;
        }
        GetGameTagOptions() {
          if (!this.rgGameTokens.length) {
            L.Get()
              .GetGameTags()
              .forEach((e) => {
                this.rgGameTokens.push({ label: e.label, value: e.value });
              });
          }
          return this.rgGameTokens;
        }
      }
      (0, l.gn)([c.LO], B.prototype, "m_model", void 0),
        (0, l.gn)([c.LO], B.prototype, "m_bDirty", void 0),
        (0, l.gn)([c.LO], B.prototype, "rgActiveStats", void 0),
        (0, l.gn)([c.LO], B.prototype, "m_dynamicSections", void 0),
        (0, l.gn)([c.LO], B.prototype, "m_EmailDefinitions", void 0),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventType", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventType", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurSpecialEventName", null),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventName", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurSpecialEventName", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventName", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurSpecialEventDescription", null),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventDescription", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurSpecialEventDescription", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetSpecialEventDescription",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventDocLink", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventDocLink", null),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventTypeMax", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventTypeMax", null),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventStartTime", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventStartTime", null),
        (0, l.gn)([_.ak], B.prototype, "GetSpecialEventEndTime", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventEndTime", null),
        (0, l.gn)([_.ak], B.prototype, "BHasSpecialEventTimeSet", null),
        (0, l.gn)([_.ak], B.prototype, "NCountSpecialEventBlocks", null),
        (0, l.gn)([c.aD.bound], B.prototype, "AddSpecialEventBlock", null),
        (0, l.gn)([c.aD.bound], B.prototype, "RemoveSpecialEventBlock", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetSpecialEventBlock", null),
        (0, l.gn)([_.ak], B.prototype, "GetAllSpecialEventBlocks", null),
        (0, l.gn)([c.aD.bound], B.prototype, "MoveSpecialEventblock", null),
        (0, l.gn)([_.ak], B.prototype, "BIsInSpecialEventBlockedTime", null),
        (0, l.gn)([_.ak], B.prototype, "BRequiresRemotePlayTogether", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetRequiresRemotePlayTogether",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BRequiresVR", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetRequiresVR", null),
        (0, l.gn)(
          [_.ak],
          B.prototype,
          "BOptInRegistationOnlyShowSaveButton",
          null,
        ),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetOptInRegistationOnlyShowSaveButton",
          null,
        ),
        (0, l.gn)(
          [_.ak],
          B.prototype,
          "BIsAdditionalFeaturingSectionEnabled",
          null,
        ),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetAdditionalFeaturingSectionEnabled",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BIsCollectTrailerPermissions", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetCollectTrailerPermissions",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BIsCollectDemoPermissions", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCollectDemoPermissions", null),
        (0, l.gn)([_.ak], B.prototype, "BIsCollectGameProfileIntent", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetCollectGameProfileIntent",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BHasCollectDemoDeadlineDate", null),
        (0, l.gn)([_.ak], B.prototype, "GetCollectDemoDeadlineDate", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetCollectDemoDeadlineDate",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "GetCurEventTitle", null),
        (0, l.gn)([_.ak], B.prototype, "GetEventTitle", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurEventTitle", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetEventTitle", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurOptInRegistrationTitle", null),
        (0, l.gn)([_.ak], B.prototype, "GetOptInRegistrationTitle", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurOptInRegistrationTitle", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetOptInRegistrationTitle", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurOptInRegistrationCheckbox", null),
        (0, l.gn)([_.ak], B.prototype, "GetOptInRegistrationCheckbox", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurOptInRegistrationCheckbox", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetOptInRegistrationCheckbox",
          null,
        ),
        (0, l.gn)(
          [_.ak],
          B.prototype,
          "BHasOptInRegistrationTitleOrCheckbox",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BIsOptInEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetOptInEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPublicEventURL", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetPublicDocumentationWikiURL",
          null,
        ),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPublicEventID", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetEventStartTime", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetEventEndTime", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetOptInDeadlineTime", null),
        (0, l.gn)([_.ak], B.prototype, "BIsInvitationOnly", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetInvititationOnly", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetReleaseGameEligible", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetUnreleaseGameEligible", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetEligibleReleaseBeforeDate",
          null,
        ),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetEligibleReleaseAfterDate",
          null,
        ),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCooldownGroupType", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCooldownRequired", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCooldownDays", null),
        (0, l.gn)([_.ak], B.prototype, "OnChangeRequiredTags", null),
        (0, l.gn)(
          [_.ak],
          B.prototype,
          "GetAppOfficialWeightedTagRankToInclude",
          null,
        ),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetAppOfficialWeightedTagRankToInclude",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "GetCurDescription", null),
        (0, l.gn)([_.ak], B.prototype, "GetDescription", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurDescription", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetDescription", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurHelpText", null),
        (0, l.gn)([_.ak], B.prototype, "GetHelpText", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurHelpText", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetHelpText", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurAppealsText", null),
        (0, l.gn)([_.ak], B.prototype, "GetAppealsText", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurAppealsText", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetAppealsText", null),
        (0, l.gn)([_.ak], B.prototype, "GetCurPruningCriteriaText", null),
        (0, l.gn)([_.ak], B.prototype, "GetPruningCriteriaText", null),
        (0, l.gn)([_.ak], B.prototype, "SetCurPruningCriteriaText", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPruningCriteriaText", null),
        (0, l.gn)([_.ak], B.prototype, "GetPointShopPriorityApps", null),
        (0, l.gn)([_.ak], B.prototype, "SetPointShopPriorityApps", null),
        (0, l.gn)([_.ak], B.prototype, "GetPointShopIncludedApps", null),
        (0, l.gn)([_.ak], B.prototype, "SetPointShopIncludedApps", null),
        (0, l.gn)([_.ak], B.prototype, "GetLocalizedOptInBanner", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetLocalizedOptInBanner", null),
        (0, l.gn)([_.ak], B.prototype, "DeleteLocalizedOptInBanner", null),
        (0, l.gn)([_.ak], B.prototype, "BIsCategoriesEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCategoriesEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetCategoriesRequired", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetCategoriesRequired", null),
        (0, l.gn)([_.ak], B.prototype, "OnChangeCategoryTags", null),
        (0, l.gn)([_.ak], B.prototype, "BIsArtistStatementEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetArtistStatementEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetArtistStatementRequired", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetArtistStatementRequired",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BIsPrimaryCountryEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPrimaryCountryEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetPrimaryCountryRequired", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPrimaryCountryRequired", null),
        (0, l.gn)([_.ak], B.prototype, "BIsPressContactEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPressContactEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetPressContactRequired", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetPressContactRequired", null),
        (0, l.gn)([_.ak], B.prototype, "BIsBeforeYouOptInEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetBeforeYouOptInEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "BIsBuildYourStorePageEnabled", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetBuildYourStorePageEnabled",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "GetBuildYourStorePageRequired", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetBuildYourStorePageRequired",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "GetStorePageText", null),
        (0, l.gn)([_.ak], B.prototype, "SetStorePageText", null),
        (0, l.gn)([_.ak], B.prototype, "BIsTaggingWizardEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetTaggingWizardEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "BIsLaunchYourDemoEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetLaunchYourDemoEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetLaunchYourDemoRequired", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetLaunchYourDemoRequired", null),
        (0, l.gn)([_.ak], B.prototype, "GetLaunchYourDemoDueDate", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetLaunchYourDemoDueDate", null),
        (0, l.gn)([_.ak], B.prototype, "BIsDoAnytimeEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetDoAnytimeEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "BIsLivestreamEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetLivestreamEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "BIsChatSessionEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetChatSessionEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "BIsAnytimeTaggingWizardEnabled", null),
        (0, l.gn)(
          [c.aD.bound],
          B.prototype,
          "SetAnytimeTaggingWizardEnabled",
          null,
        ),
        (0, l.gn)([_.ak], B.prototype, "BIsEnterDiscountsEnabled", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetEnterDiscountsEnabled", null),
        (0, l.gn)([_.ak], B.prototype, "GetDiscountEventID", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetDiscountEventID", null),
        (0, l.gn)([_.ak], B.prototype, "GetExternalAppReviewers", null),
        (0, l.gn)([c.aD.bound], B.prototype, "SetExternalAppReviewers", null),
        (0, l.gn)([c.aD.bound], B.prototype, "RemoveExternalAppReviewAt", null),
        (0, l.gn)([c.aD.bound], B.prototype, "BAddExternalAppReviewAt", null),
        (0, l.gn)([c.aD.bound], B.prototype, "AddDynamicSection", null),
        (0, l.gn)([c.aD.bound], B.prototype, "DeleteDynamicSection", null),
        (0, l.gn)([_.ak], B.prototype, "BHasLanguageData", null),
        (0, l.gn)([c.aD], B.prototype, "Reset", null),
        (0, l.gn)([c.aD.bound], B.prototype, "AddEmailDraft", null),
        (0, l.gn)([_.ak], B.prototype, "GetRequiredOptions", null),
        (0, l.gn)([_.ak], B.prototype, "GetCooldownGroupOptions", null),
        (0, l.gn)([_.ak], B.prototype, "GetGameTagOptions", null);
      class M {
        constructor(e) {
          this.m_section = e;
        }
        GetUniqueID() {
          return this.m_section.unique_id;
        }
        GetName() {
          var e;
          return null !==
            (e = (0, s.Xj)(
              this.m_section.name,
              p.U.Get().GetCurEditLanguage(),
              "",
            )) && void 0 !== e
            ? e
            : "";
        }
        GetNameWithFallback(e) {
          var t;
          return null !==
            (t = (0, s.Xj)(
              this.m_section.name,
              p.U.Get().GetCurEditLanguage(),
              e,
            )) && void 0 !== t
            ? t
            : "";
        }
        GetDescription() {
          var e;
          return null !==
            (e = (0, s.Xj)(
              this.m_section.description,
              p.U.Get().GetCurEditLanguage(),
              "",
            )) && void 0 !== e
            ? e
            : "";
        }
        GetInputStyle() {
          return this.m_section.input_style;
        }
        GetColumnCount() {
          return this.m_section.columns;
        }
        GetLists() {
          return this.m_section.lists;
        }
        GetListTitle(e) {
          var t;
          return null !==
            (t = (0, s.Xj)(
              this.m_section.lists[e].option_title,
              p.U.Get().GetCurEditLanguage(),
            )) && void 0 !== t
            ? t
            : "";
        }
        GetListByIndex(e) {
          return this.m_section.lists[e];
        }
        GetListByID(e) {
          const t = this.m_section.lists.filter((t) => t.unique_id == e);
          return t.length > 0 ? t[0] : null;
        }
        GetItemAtListAndIndex(e, t) {
          return this.m_section.lists[e].options[t];
        }
        GetModel() {
          return this.m_section;
        }
        GetListCount() {
          return this.m_section.lists ? this.m_section.lists.length : 0;
        }
        BIsValveOnlySection() {
          return this.m_section.valve_only;
        }
        SetName(e, t) {
          if ((0, s.Xj)(this.m_section.name, t) != e) {
            const n = (0, m.j_)(t, "english");
            this.m_section.name || (this.m_section.name = {}),
              (this.m_section.name[n] = e),
              B.Get().SetDirty(!0);
          }
        }
        SetDescription(e, t) {
          if ((0, s.Xj)(this.m_section.description, t) != e) {
            const n = (0, m.j_)(t, "english");
            this.m_section.description || (this.m_section.description = {}),
              (this.m_section.description[n] = e),
              B.Get().SetDirty(!0);
          }
        }
        SetDescriptionWithCurLang(e) {
          this.SetDescription(e, p.U.Get().GetCurEditLanguage());
        }
        SetInputStyle(e) {
          this.m_section.input_style != e &&
            ((this.m_section.input_style = e),
            "text_input" == e &&
              ((this.m_section.lists = this.m_section.lists.splice(
                1,
                this.m_section.lists.length,
              )),
              0 == this.m_section.lists.length && this.AddOptionList()),
            B.Get().SetDirty(!0));
        }
        SetColumnCount(e) {
          this.m_section.columns != e &&
            ((this.m_section.columns = e), B.Get().SetDirty(!0));
        }
        SetValveOnly(e) {
          this.m_section.valve_only != e &&
            ((this.m_section.valve_only = e), B.Get().SetDirty(!0));
        }
        AddItemToList(e, t, n, a) {
          let i = this.m_section.lists.findIndex((t) => t.unique_id === e);
          this.AddItemToListByIndex(i, t, n);
        }
        AddItemToListByIndex(e, t, n, a) {
          if (!(e >= 0 && e <= this.m_section.lists.length))
            throw "Adding item to a list that does not exist: " + e;
          {
            const i = (0, m.j_)(n, "english");
            this.m_section.lists[e].options ||
              (this.m_section.lists[e].options = []);
            const l = {
              text: {},
              unique_id: B.GenerateUniqueIDForListItem(
                this.m_section.lists[e].options,
              ),
            };
            (l.text[i] = t),
              a && ((l.tooltip = {}), (l.tooltip[i] = a)),
              this.m_section.lists[e].options.push(l),
              B.Get().SetDirty(!0);
          }
        }
        RemoveListItemByID(e, t) {
          let n = this.m_section.lists.findIndex((t) => t.unique_id === e);
          -1 !== n &&
            t < this.m_section.lists[n].options.length &&
            (this.m_section.lists[n].options.splice(t, 1),
            B.Get().SetDirty(!0));
        }
        RemoveListItem(e, t) {
          e < this.m_section.lists.length &&
            t < this.m_section.lists[e].options.length &&
            (this.m_section.lists[e].options.splice(t, 1),
            B.Get().SetDirty(!0));
        }
        MoveListItem(e, t, n) {
          e < this.m_section.lists.length &&
            ((0, T.hV)(this.m_section.lists[e].options, t, n),
            B.Get().SetDirty(!0));
        }
        UpdateListItemText(e, t, n, a) {
          let i = this.m_section.lists.findIndex((t) => t.unique_id === e);
          if (
            -1 !== i &&
            t < this.m_section.lists[i].options.length &&
            (0, s.Xj)(this.m_section.lists[i].options[t].text, a) != n
          ) {
            const e = (0, m.j_)(a, "english");
            (this.m_section.lists[i].options[t].text[e] = n),
              B.Get().SetDirty(!0);
          }
        }
        UpdateListItemTooltip(e, t, n, a) {
          let i = this.m_section.lists.findIndex((t) => t.unique_id === e);
          if (
            -1 !== i &&
            t < this.m_section.lists[i].options.length &&
            (0, s.Xj)(this.m_section.lists[i].options[t].tooltip, a) != n
          ) {
            const e = (0, m.j_)(a, "english");
            this.m_section.lists[i].options[t].tooltip ||
              (this.m_section.lists[i].options[t].tooltip = {}),
              (this.m_section.lists[i].options[t].tooltip[e] = n),
              B.Get().SetDirty(!0);
          }
        }
        UpdateListItemTextByKV(e, t, n, a) {
          if (
            e >= 0 &&
            e < this.m_section.lists.length &&
            t >= 0 &&
            t < this.m_section.lists[e].options.length
          ) {
            let i = this.m_section.lists[e].options[t],
              l = !1;
            for (let e = m.Df.k_Lang_English; e < m.Df.k_Lang_MAX; ++e) {
              if ((0, s.Xj)(n, e) != (0, s.Xj)(i.text, e)) {
                const t = (0, m.j_)(e);
                (i.text[t] = n[t]), (l = !0);
              }
              if (
                a &&
                (i.tooltip || (i.tooltip = {}),
                (0, s.Xj)(a, e) != (0, s.Xj)(i.tooltip, e))
              ) {
                const t = (0, m.j_)(e);
                (i.tooltip[t] = a[t]), (l = !0);
              }
            }
            l && B.Get().SetDirty(!0);
          }
        }
        AddOptionList() {
          const e = {
            options: [],
            unique_id: B.GenerateUniqueIDForOptionListSection(
              this.m_section.lists,
            ),
          };
          this.m_section.lists.push(e), B.Get().SetDirty(!0);
        }
        DeleteOptionList(e) {
          let t = this.m_section.lists.findIndex((t) => t.unique_id === e);
          t &&
            (this.m_section.lists.splice(t, 1),
            0 == this.m_section.lists.length &&
              (this.m_section.lists = [
                {
                  options: [],
                  unique_id: B.GenerateUniqueIDForOptionListSection(),
                },
              ]),
            B.Get().SetDirty(!0));
        }
        SetListTitle(e, t, n) {
          let a = this.m_section.lists.findIndex((t) => t.unique_id === e);
          this.SetListTitleByListIndex(a, t, n);
        }
        SetListTitleByListIndex(e, t, n) {
          if (
            e >= 0 &&
            e < this.m_section.lists.length &&
            (0, s.Xj)(this.m_section.lists[e].option_title, n) != t
          ) {
            const a = (0, m.j_)(n, "english");
            this.m_section.lists[e].option_title ||
              (this.m_section.lists[e].option_title = {}),
              (this.m_section.lists[e].option_title[a] = t),
              B.Get().SetDirty(!0);
          }
        }
      }
      function P() {
        const [e, t] = (0, b.useState)(B.Get().GetActiveStats());
        return (0, _.Qg)(B.Get().GetActiveStatsChangeCallaback(), t), e;
      }
      function F() {
        const e = P();
        return (0, b.useMemo)(() => {
          const t = JSON.parse((null == e ? void 0 : e.json_eligible) || "[]"),
            n = {
              jsonEligible: Array.isArray(t) ? t : [],
              jsonOptedIn: JSON.parse(
                (null == e ? void 0 : e.json_opted_in) || "[]",
              ),
              jsonOptedOut: JSON.parse(
                (null == e ? void 0 : e.json_opted_out) || "[]",
              ),
              jsonInvited: JSON.parse(
                (null == e ? void 0 : e.json_invited) || "[]",
              ),
              jsonPruned: JSON.parse(
                (null == e ? void 0 : e.json_pruned) || "[]",
              ),
              jsonFeatured: JSON.parse(
                (null == e ? void 0 : e.json_featured) || "[]",
              ),
              jsonPendingReview: JSON.parse(
                (null == e ? void 0 : e.json_pending_review) || "[]",
              ),
            };
          return (
            (n.setEligible = new Set(n.jsonEligible.map((e) => e.appid))),
            (n.setOptedIn = new Set(n.jsonOptedIn.map((e) => e.appid))),
            (n.setOptedOut = new Set(n.jsonOptedOut.map((e) => e.appid))),
            (n.setInvited = new Set(n.jsonInvited.map((e) => e.appid))),
            (n.setPruned = new Set(n.jsonPruned.map((e) => e.appid))),
            (n.setFeatured = new Set(n.jsonFeatured.map((e) => e.appid))),
            (n.setPendingReview = new Set(
              n.jsonPendingReview.map((e) => e.appid),
            )),
            n
          );
        }, [e]);
      }
      (0, l.gn)([_.ak], M.prototype, "GetName", null),
        (0, l.gn)([_.ak], M.prototype, "GetDescription", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetName", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetDescription", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetDescriptionWithCurLang", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetInputStyle", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetColumnCount", null),
        (0, l.gn)([c.aD.bound], M.prototype, "SetValveOnly", null),
        (0, l.gn)([c.aD.bound], M.prototype, "AddItemToList", null),
        (0, l.gn)([c.aD.bound], M.prototype, "AddItemToListByIndex", null),
        (0, l.gn)([c.aD], M.prototype, "RemoveListItemByID", null),
        (0, l.gn)([c.aD], M.prototype, "RemoveListItem", null),
        (0, l.gn)([c.aD], M.prototype, "MoveListItem", null),
        (0, l.gn)([c.aD], M.prototype, "UpdateListItemText", null),
        (0, l.gn)([c.aD], M.prototype, "UpdateListItemTooltip", null),
        (0, l.gn)([c.aD], M.prototype, "UpdateListItemTextByKV", null),
        (0, l.gn)([c.aD.bound], M.prototype, "AddOptionList", null),
        (0, l.gn)([c.aD], M.prototype, "DeleteOptionList", null),
        (0, l.gn)([c.aD], M.prototype, "SetListTitle", null),
        (0, l.gn)([c.aD], M.prototype, "SetListTitleByListIndex", null);
      var U = n(565),
        j = n(22444),
        X = n(17547),
        z = n(52629),
        H = n.n(z),
        V = n(21904),
        W = n(57742),
        q = n(75962),
        Z = n(19304),
        K = n(60161),
        Y = n(85651),
        Q = n(64203),
        $ = n.n(Q),
        J = n(3737),
        ee = n.n(J),
        te = n(43068),
        ne = n(5029),
        ae = n(5615),
        ie = n(67328),
        le = n(19094),
        oe = n(86900);
      class re {
        BHasReachEstimateLoaded(e) {
          return this.m_mapEmailToReach.has(e);
        }
        GetReachEstimate(e) {
          return this.m_mapEmailToReach.get(e);
        }
        BHasEmailDefLoadFailure(e) {
          return this.m_mapOptInToEmailDefLoadFailure.get(e);
        }
        FetchPartnerOptInEmailDetails(e) {
          var t, n;
          return (0, l.mG)(this, void 0, void 0, function* () {
            const a = ie.gA.Init(d.pA);
            a.Body().set_email_def_id(e);
            const i = yield d.u2.GetOptInEmailTracking(
              this.m_steamInterface.GetServiceTransport(),
              a,
            );
            return null ===
              (n =
                null === (t = i.Body()) || void 0 === t
                  ? void 0
                  : t.results()) || void 0 === n
              ? void 0
              : n.map((e) => e.toObject());
          });
        }
        FetchOptInEmailDefAndStats(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = ie.gA.Init(d.vc);
            t.Body().set_opt_in_name(e);
            return (yield d.u2.GetPartnerAppOptInEmailDefAndStats(
              this.m_steamInterface.GetServiceTransport(),
              t,
            ))
              .Body()
              .defs()
              .map((e) => e.toObject());
          });
        }
        LoadEstimateEmailReach(e) {
          var t;
          return (0, l.mG)(this, void 0, void 0, function* () {
            const n = ie.gA.Init(d.XB);
            n.Body().set_email_def_id(e);
            let a = A.s.k_EResultFail;
            try {
              const i = yield d.u2.GetEstimatePartnerAppOptInEmail(
                this.m_steamInterface.GetServiceTransport(),
                n,
              );
              (a = i.GetEResult()),
                a == A.s.k_EResultOK
                  ? this.m_mapEmailToReach.set(
                      e,
                      (null === (t = i.Body().stats()) || void 0 === t
                        ? void 0
                        : t.toObject()) || {},
                    )
                  : console.error(
                      "COptInEmailAdmin.EstimateEmailReach: Create request failed:",
                      a,
                      i,
                      n,
                    );
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptInEmailAdmin.EstimateEmailReach: caught error " +
                  t.strErrorMsg,
                t,
              );
            }
            return a;
          });
        }
        ComputeSettingFlags(e) {
          let t = d.c_.k_EOptInEmailSetting_None;
          return (
            e.BHasSectionType(f.k_AssetKit) &&
              (t |= d.c_.k_EOptInEmailSetting_AssetKit),
            e.BHasSectionType(f.k_DemoPressPreview) &&
              (t |= d.c_.k_EOptInEmailSetting_PressPreview),
            e.BHasSectionType(f.k_ScheduleLiveStream) &&
              (t |= d.c_.k_EOptInEmailSetting_ScheduleWidget),
            e.BHasSectionType(f.k_CancelSection) &&
              (t |= d.c_.k_EOptInEmailSetting_OptOut),
            e.BHasSectionType(f.k_DemoNotReady) &&
              (t |= d.c_.k_EOptInEmailSetting_OptOutDemo),
            e.BHasSectionType(f.k_ReviewCategorization) &&
              (t |= d.c_.k_EOptInEmailSetting_ReviewCategorization),
            e.BHasSectionType(f.k_DemoReview) &&
              (t |= d.c_.k_EOptInEmailSetting_DemoReview),
            e.BHasSectionType(f.k_PressPreviewDetails) &&
              (t |= d.c_.k_EOptInEmailSetting_PressPreviewDetails),
            e.BHasSectionType(f.k_StatsSummary) &&
              (t |= d.c_.k_EOptInEmailSetting_StatsSummary),
            e.BHasSectionType(f.k_SurveyButton) &&
              (t |= d.c_.k_EOptInEmailSetting_SurveyButton),
            e.BHasSectionType(f.k_DemoLaunch) &&
              (t |= d.c_.k_EOptInEmailSetting_DemoLaunch),
            e.BHasSectionType(f.k_CallForRegistration) &&
              (t |= d.c_.k_EOptInEmailSetting_CallForRegistration),
            t
          );
        }
        CreateOptInEmail(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = ie.gA.Init(d.xQ);
            t.Body().set_opt_in_name(B.Get().GetFullName()),
              t
                .Body()
                .set_targeting_flag(
                  "" +
                    (e.GetEmailTargeting() ||
                      d.KC.k_EOptInEmailTarget_ActivatingUser),
                ),
              t.Body().set_settings_flag("" + this.ComputeSettingFlags(e)),
              t.Body().set_email_templates(e.GetUniqueID()),
              t.Body().set_start_rtime(0),
              t.Body().set_end_rtime(0);
            let n = A.s.k_EResultFail;
            try {
              const a = yield d.u2.CreatePartnerAppOptInEmails(
                this.m_steamInterface.GetServiceTransport(),
                t,
              );
              if (((n = a.GetEResult()), n == A.s.k_EResultOK)) {
                const t = a.Body().email_def_id();
                e.SetServerEmailDefID(t);
              } else
                console.error(
                  "COptInEmailAdmin.CreateOptInEmail: Create request failed:",
                  n,
                  a,
                  t,
                );
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptInEmailAdmin.CreateOptInEmail: caught error " +
                  t.strErrorMsg,
                t,
              );
            }
            return ce(e.GetOwningOptInName()), n;
          });
        }
        UpdateOptInEmailMetaData(e, t) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const n = ie.gA.Init(d.Rg);
            n.Body().set_email_def_id(e.GetServerEmailDefID()),
              n
                .Body()
                .set_targeting_flag(
                  "" +
                    (e.GetEmailTargeting() ||
                      d.KC.k_EOptInEmailTarget_ActivatingUser),
                ),
              n.Body().set_settings_flag("" + this.ComputeSettingFlags(e)),
              n.Body().set_email_templates(e.GetUniqueID()),
              n
                .Body()
                .set_start_rtime(
                  (null == t ? void 0 : t.rtStartAutomaticEmailType) || 0,
                ),
              n
                .Body()
                .set_end_rtime(
                  (null == t ? void 0 : t.rtEndAutomaticEmail) || 0,
                ),
              n.Body().set_reviewed((null == t ? void 0 : t.bReviewed) || !1);
            let a = A.s.k_EResultFail;
            try {
              const e = yield d.u2.UpdatePartnerAppOptInEmails(
                this.m_steamInterface.GetServiceTransport(),
                n,
              );
              (a = e.GetEResult()),
                a != A.s.k_EResultOK &&
                  console.error(
                    "COptInEmailAdmin.UpdateOptInEmailMetaData: Update request failed:",
                    a,
                    e,
                    n,
                  );
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptInEmailAdmin.UpdateOptInEmailMetaData: caught error " +
                  t.strErrorMsg,
                t,
              );
            }
            return ce(e.GetOwningOptInName()), a;
          });
        }
        SendManualEmail(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = ie.gA.Init(d.ik);
            t.Body().set_email_def_id(e.GetServerEmailDefID());
            let n = A.s.k_EResultFail,
              a = null;
            try {
              const e = yield d.u2.SendPartnerOptInEmailAndWait(
                this.m_steamInterface.GetServiceTransport(),
                t,
              );
              (n = e.GetEResult()),
                n == A.s.k_EResultOK
                  ? (a = e.Body().results().toObject())
                  : console.error(
                      "COptInEmailAdmin.SendManualEmail: Create request failed:",
                      n,
                      e,
                      t,
                    );
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptInEmailAdmin.SendManualEmail: caught error " +
                  t.strErrorMsg,
                t,
              );
            }
            return ce(e.GetOwningOptInName()), { eResult: n, stats: a };
          });
        }
        TestFireEmailToSelf(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = ie.gA.Init(d.XD);
            t.Body().set_email_def_id(e.GetServerEmailDefID()),
              t.Body().set_appid(220);
            let n = A.s.k_EResultFail;
            try {
              const e = yield d.u2.TestFirePartnerAppOptInEmail(
                this.m_steamInterface.GetServiceTransport(),
                t,
              );
              (n = e.GetEResult()),
                n !== A.s.k_EResultOK &&
                  console.error(
                    "COptInEmailAdmin.TestFireEmailToSelf: Create request failed:",
                    n,
                    e,
                    t,
                  );
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptInEmailAdmin.TestFireEmailToSelf: caught error " +
                  t.strErrorMsg,
                t,
              );
            }
            return n;
          });
        }
        static Get() {
          return (
            re.s_Singleton ||
              ((re.s_Singleton = new re()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInEmailAdminStore = re.s_Singleton),
              re.s_Singleton.Init()),
            re.s_Singleton
          );
        }
        constructor() {
          (this.m_steamInterface = null),
            (this.m_mapOptInToEmailDef = new Map()),
            (this.m_mapEmailToReach = new Map()),
            (this.m_mapOptInToEmailDefLoadFailure = new Map());
        }
        Init() {
          const e = (0, N.kQ)("optin_webapi_token", "application_config");
          e
            ? (this.m_steamInterface = new le.J(N.De.WEBAPI_BASE_URL, e))
            : console.error("COptInEmailAdmin missing API token");
        }
      }
      function se(e) {
        const t = (0, ae.useQuery)(
          ["OptInEamilDefAndStats", e],
          () =>
            (0, l.mG)(this, void 0, void 0, function* () {
              return yield re.Get().FetchOptInEmailDefAndStats(e);
            }),
          { staleTime: 300 },
        );
        return { bLoading: t.isLoading, rgEmailDefAndStats: t.data };
      }
      function ce(e) {
        oe.U.invalidateQueries(["OptInEamilDefAndStats", e]);
      }
      (0, l.gn)([c.LO], re.prototype, "m_mapOptInToEmailDef", void 0),
        (0, l.gn)([c.aD], re.prototype, "LoadEstimateEmailReach", null),
        (0, l.gn)([c.aD], re.prototype, "CreateOptInEmail", null),
        (0, l.gn)([c.aD], re.prototype, "UpdateOptInEmailMetaData", null),
        (0, l.gn)([c.aD], re.prototype, "SendManualEmail", null),
        (0, l.gn)([c.aD], re.prototype, "TestFireEmailToSelf", null),
        (0, l.gn)([c.aD], re.prototype, "Init", null);
      var me = n(14826),
        de = n(3301);
      function pe(e) {
        const { list: t, bActiveOptIn: n } = e,
          a = (0, b.useMemo)(() => t.map((e) => e.pageid), [t]),
          i = (function (e) {
            const t = e.map((e) => se(e));
            if (t.some((e) => e.bLoading)) return null;
            const n = new Map();
            return e.forEach((e, a) => n.set(e, t[a].rgEmailDefAndStats)), n;
          })(a);
        return i
          ? b.createElement(ue, {
              rgStrOptInName: a,
              mapOptInToDefs: i,
              bActiveOptIn: n,
            })
          : b.createElement(de.V, {
              size: "medium",
              string: (0, me.Xx)("#Loading"),
              position: "center",
            });
      }
      function ue(e) {
        const { rgStrOptInName: t, mapOptInToDefs: n, bActiveOptIn: a } = e,
          i = (0, b.useMemo)(() => {
            const e = new Map();
            return (
              t.forEach((t) => {
                n.get(t).forEach((n) => e.set(n.email_def_id, t));
              }),
              e
            );
          }, [n, t]),
          [l, o, r] = (0, b.useMemo)(() => {
            const e = [],
              a = [],
              i = [];
            return (
              t.forEach((t) => {
                n.get(t).forEach((t) => {
                  t.reviewed
                    ? e.push(t)
                    : t.completed || t.aborted || t.deleted
                    ? a.push(t)
                    : i.push(t);
                });
              }),
              e.sort((e, t) => e.start_rtime - t.start_rtime),
              a.sort((e, t) => e.start_rtime - t.start_rtime),
              i.sort((e, t) => e.start_rtime - t.start_rtime),
              [e, a, i]
            );
          }, [n, t]);
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            null,
            "There are ",
            Array.from(i.keys()).length,
            " ",
            a ? "active " : "archived ",
            "Partner OptIns with ",
            l.length + r.length + o.length,
            " emails past the draft stage",
          ),
          b.createElement("h3", null, "Staged Emails"),
          Boolean(r.length > 0)
            ? r.map((e) =>
                b.createElement(_e, {
                  key: e.email_def_id,
                  serverDef: e,
                  mapEmailDefIDToStrOptInName: i,
                }),
              )
            : b.createElement("span", null, "No Emails Pending Review"),
          b.createElement("h3", null, "Pending Review Emails"),
          Boolean(o.length > 0)
            ? o.map((e) =>
                b.createElement(_e, {
                  key: e.email_def_id,
                  serverDef: e,
                  mapEmailDefIDToStrOptInName: i,
                }),
              )
            : b.createElement("span", null, "No Emails Pending Review"),
          b.createElement("h3", null, "Completed"),
          l.length,
        );
      }
      function _e(e) {
        const { serverDef: t, mapEmailDefIDToStrOptInName: n } = e;
        return b.createElement("div", null, t.email_def_id);
      }
      var he = n(67736);
      function ge(e) {
        const t = L.Get(),
          n = (0, b.useRef)(null),
          a = r().CancelToken.source(),
          [i, o] = (0, b.useState)(""),
          s = () => {
            n.current && n.current("new create requested."),
              e.closeModal && e.closeModal();
          };
        return b.createElement(
          he.RG,
          { onCancel: s },
          b.createElement(j.h4, null, "Create a new Opt In Page"),
          b.createElement(
            j.uT,
            null,
            b.createElement(
              "span",
              null,
              "Please provide a unique ID for the page. Do not start with the 'sale_' prefix, this will automatically be added for you.",
            ),
            b.createElement("br", null),
            b.createElement(
              "div",
              null,
              b.createElement(
                "span",
                { style: { width: "100px", display: "inline-block" } },
                "Sale ID",
              ),
              b.createElement("input", {
                type: "text",
                onChange: function (e) {
                  o(e.target.value);
                },
              }),
              b.createElement("br", null),
              b.createElement("p", null),
              b.createElement(
                "span",
                { style: { fontStyle: "italic" } },
                "The Sale ID is used in the URL for the page. Only letters, numbers, and underscores are allowed.",
              ),
              b.createElement("p", null),
              b.createElement("span", {
                id: "resultmsg",
                style: { color: "red" },
              }),
            ),
          ),
          b.createElement(
            j.$_,
            null,
            b.createElement(j.o9, {
              onCancel: s,
              onOK: function () {
                return (0, l.mG)(this, void 0, void 0, function* () {
                  let e;
                  if (
                    (n.current && n.current("new create requested."),
                    yield (e = t.CreatePage(i, a.token)),
                    t.GetCreatedPageId())
                  )
                    window.location.href =
                      N.De.PARTNER_BASE_URL +
                      "optin/admin/edit/" +
                      t.GetCreatedPageId();
                  else {
                    let e = document.getElementById("resultmsg");
                    t.GetCreatePageErrMsg()
                      ? (e.innerText = t.GetCreatePageErrMsg())
                      : (e.innerText =
                          "Error occured when attempting to create page.  Please try again.");
                  }
                });
              },
              strOKText: (0, me.Xx)("#Button_Continue"),
            }),
          ),
        );
      }
      var Ee = n(93513),
        ve = n.n(Ee);
      function Se(e) {
        const { def: t, closeModal: n, stats: a } = e,
          [i, o] = (0, b.useState)(""),
          [s, c] = (0, b.useState)(!1),
          [m, d] = (0, b.useState)(!1),
          [p, u] = (0, b.useState)(!1),
          [_, h] = (0, b.useState)(null);
        return b.createElement(
          he.uH,
          {
            strTitle: "Clone OptIn Definitions",
            onOK: () => {
              d(!0),
                (function (e, t, n) {
                  var a;
                  return (0, l.mG)(this, void 0, void 0, function* () {
                    const i =
                      N.De.PARTNER_BASE_URL +
                      (n
                        ? "optin/ajaxadmincloneinvites"
                        : "optin/ajaxadmincloneoptinpage");
                    let l = null;
                    try {
                      const o = new FormData();
                      o.append("sessionid", N.De.SESSIONID),
                        o.append(
                          n ? "strSourceOptInName" : "strOldOptInName",
                          e.pageid,
                        ),
                        o.append(
                          n ? "strTargetOptInName" : "strNewOptInName",
                          t,
                        );
                      const s = yield r().post(i, o, { withCredentials: !0 });
                      if (
                        (null === (a = null == s ? void 0 : s.data) ||
                        void 0 === a
                          ? void 0
                          : a.success) == A.s.k_EResultOK
                      )
                        return !0;
                      l = (0, k.l)(s);
                    } catch (e) {
                      l = (0, k.l)(e);
                    }
                    return (
                      console.log(
                        "CloneOptInDefinition: Failed with ",
                        l.strErrorMsg,
                        l,
                      ),
                      !1
                    );
                  });
                })(t, "sale_" + i, s)
                  .then((e) => {
                    u(e), e || h("Failed to Clone: " + t.pageid);
                  })
                  .catch(() =>
                    h("Failed to Clone, exception caught, " + t.pageid),
                  );
            },
            onCancel: n,
            bOKDisabled: m || 0 == i.trim().length,
          },
          b.createElement(
            "p",
            null,
            "Cloning the OptIn Definition will create a copy of ",
            t.pageid,
            " with the new name you have specified. The OptIn definition will be saved as a draft and return to a more initial state. Please review text and dates to ensure they aren't out of date.  Also make sure the stats are refresh before you clone as those are used. Cloning will also do the following:",
          ),
          b.createElement(
            "p",
            null,
            "We depends on the latest stats to clone invites/prunes. Stats were last refreshed at:",
            (null == a ? void 0 : a.time_updated)
              ? b.createElement(V.H6, {
                  dateAndTime: a.time_updated,
                  bSingleLine: !0,
                })
              : "",
          ),
          b.createElement(
            "ol",
            null,
            b.createElement(
              "li",
              null,
              "Only keep the English text. We expect there to be dates embed and it will require new localization",
            ),
            b.createElement(
              "li",
              null,
              "Will keep the full localization for the dynamic sections (questions asked to optin participants)",
            ),
            b.createElement(
              "li",
              null,
              "Will NOT copy over the email settings",
            ),
            b.createElement("li", null, "Will copy the prune app list"),
            b.createElement(
              "li",
              null,
              "Will convert Opted In, Opted Out and Invited to: Open Invite Status",
            ),
            b.createElement("li", null, "Will NOT copy over the featured apps"),
          ),
          b.createElement(j.II, {
            type: "string",
            label:
              (s ? "Choose Existing page id" : "Choose New page id") +
              ', exclude "sale_"',
            tooltip:
              'Page always start with "sale_" so exclude that in your input. It will be appended before we call the server for the clone operation.',
            value: i,
            onChange: (e) => {
              var t;
              return o(
                (null === (t = null == e ? void 0 : e.currentTarget) ||
                void 0 === t
                  ? void 0
                  : t.value) || "",
              );
            },
            placeholder: "for example: builders_2023",
            disabled: m,
          }),
          b.createElement(j.ji, {
            checked: s,
            onChange: c,
            label: "Only Run Invitation/Pruning Cloning",
            tooltip:
              "If enabled then make sure the name entered abve is an existing opt-in which we want to copy the pruning and invitation data over to",
            disabled: m,
          }),
          Boolean(m && !p && !_) &&
            b.createElement(de.V, {
              string: "Cloning",
              position: "center",
              size: "medium",
            }),
          Boolean(_) &&
            b.createElement("div", { className: Ee.ErrorStylesBackground }, _),
          Boolean(p) &&
            b.createElement("div", null, "Success! You can close this Dialog."),
        );
      }
      const fe = (e) => {
        var t, n;
        (0, b.useEffect)(() => {
          L.Get(), B.Get().Reset(null, null);
        }, []);
        const [a, i] = (0, ne.Ar)("tab", "active"),
          l = (e) => i(e.key),
          o = [
            {
              name: `Active Opt-In Events (${
                (null === (t = L.Get().GetActiveOptIn()) || void 0 === t
                  ? void 0
                  : t.length) || 0
              })`,
              key: "active",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(De, {
                  list: L.Get().GetActiveOptIn(),
                  stats: L.Get().GetOptInStats(),
                  bActiveOptIn: !0,
                }),
              ),
              onClick: l,
            },
            {
              name: `Archived Opt-In Events (${
                (null === (n = L.Get().GetArchivedOptIn()) || void 0 === n
                  ? void 0
                  : n.length) || 0
              })`,
              key: "archive",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(De, {
                  list: L.Get().GetArchivedOptIn(),
                  stats: null,
                }),
              ),
              onClick: l,
            },
            {
              name: "Active Opt-In Email",
              key: "activeemail",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(
                  "div",
                  null,
                  "TODO: In development mode; not ready for prime time.",
                ),
                b.createElement(pe, {
                  list: L.Get().GetActiveOptIn(),
                  bActiveOptIn: !0,
                }),
              ),
              onClick: l,
            },
          ];
        return b.createElement(
          X.SV,
          null,
          b.createElement(
            "div",
            { className: ee().DashboardCtn },
            b.createElement(
              "h1",
              null,
              "Opt-In Admin Dashboard",
              b.createElement(
                "button",
                {
                  className: (0, Z.Z)(H().Button),
                  style: { float: "right", marginRight: "16px" },
                  onClick: (e) =>
                    (0, q.b8)(
                      e,
                      "https://confluence.valve.org/display/STEAM/Setting+up+an+opt-in+event",
                    ),
                },
                "Help",
              ),
              b.createElement(
                "button",
                {
                  className: (0, Z.Z)(H().Button),
                  style: { float: "right", marginRight: "16px" },
                  onClick: (e) => {
                    (0, W.AM)(b.createElement(ge, null), (0, K.RA)(e));
                  },
                },
                "Create Opt-In Page",
              ),
            ),
            b.createElement("hr", null),
            b.createElement(
              "p",
              null,
              "This shows all of the active and past opt-in definitions we have setup. Definition drives both the eligibility of the app that are included and also describe the content we show partners on their specific opt-in page.",
            ),
            b.createElement(te.n, { tabs: o, startingTab: a }),
          ),
        );
      };
      function De(e) {
        const { bActiveOptIn: t, stats: n, list: a } = e,
          [i, l] = (0, ne.Ar)("query", ""),
          o = (0, b.useMemo)(() => {
            const e = i.trim();
            return a
              .sort((e, t) =>
                e.sale_optin_enabled == t.sale_optin_enabled
                  ? e.event_start_date - t.event_start_date
                  : e.sale_optin_enabled
                  ? -1
                  : 1,
              )
              .filter((t) => {
                var n, a, i, l;
                return (
                  0 == e.length ||
                  t.pageid.toLocaleLowerCase().includes(e) ||
                  (null ===
                    (a =
                      null === (n = t.opt_in_registration_title) || void 0 === n
                        ? void 0
                        : n.english) || void 0 === a
                    ? void 0
                    : a.toLocaleLowerCase().includes(e)) ||
                  (null ===
                    (l =
                      null === (i = t.event_title) || void 0 === i
                        ? void 0
                        : i.english) || void 0 === l
                    ? void 0
                    : l.toLocaleLowerCase().includes(e))
                );
              });
          }, [a, i]);
        return b.createElement(
          "div",
          null,
          b.createElement(j.II, {
            type: "string",
            value: i,
            onChange: (e) => l(e.currentTarget.value.toLocaleLowerCase()),
            label: "Filter",
            tooltip:
              "Filters the list to be those that contain the letters you typed exactly (case insenstive) on the page id or name",
            placeholder: "type here...",
          }),
          o.map((e) =>
            b.createElement(ye, {
              key: e.pageid,
              def: e,
              stats: n,
              bActiveOptIn: t,
            }),
          ),
        );
      }
      function ye(e) {
        var t, n, a, i, l;
        const { def: o, stats: r, bActiveOptIn: s } = e,
          c = L.Get().BHasUnpublishedChagnes(o.pageid),
          m =
            (null === (t = null == r ? void 0 : r[o.pageid]) || void 0 === t
              ? void 0
              : t.time_updated) || 0,
          d = Y.JW.GetTimeNowWithOverride(),
          p = o.event_end_date < d,
          u = o.sale_optin_enabled && !p,
          _ =
            (null === (n = o.event_title) || void 0 === n
              ? void 0
              : n.english) || "No Name Assigned";
        return b.createElement(
          "div",
          {
            key: o.pageid,
            className: (0, Z.Z)(
              ee().OptInAdminRow,
              $().TileContainer,
              Boolean(u) ? ee().OptinEnabled : "",
            ),
          },
          b.createElement(
            "div",
            { className: $().EventNameCtn },
            b.createElement(
              "div",
              { className: $().EventName },
              Boolean(_) && _,
              " ",
              b.createElement("span", null, "(", o.pageid, ")"),
            ),
            b.createElement(
              "div",
              { className: $().DatesCtn },
              b.createElement(
                "span",
                { className: $().DateAndTime },
                b.createElement(V.H6, {
                  dateAndTime: o.event_start_date,
                  bSingleLine: !0,
                  bOnlyDate: !0,
                }),
              ),
              " ",
              b.createElement(
                "span",
                { className: $().DateAndTime },
                "To ",
                b.createElement(V.H6, {
                  dateAndTime: o.event_end_date,
                  bSingleLine: !0,
                  bOnlyDate: !0,
                }),
              ),
            ),
          ),
          b.createElement(
            "div",
            { className: $().EventDetailsCtn },
            b.createElement(
              "div",
              { className: ee().StatsCtn },
              b.createElement(
                "div",
                { className: $().TopStatsCtn },
                Boolean(
                  null === (a = null == r ? void 0 : r[o.pageid]) ||
                    void 0 === a
                    ? void 0
                    : a.count_eligible,
                ) &&
                  b.createElement(
                    "div",
                    { className: $().FeaturedApps },
                    b.createElement(
                      "div",
                      { className: $().BigNumber },
                      r[o.pageid].count_eligible.toLocaleString(),
                    ),
                    b.createElement(
                      "span",
                      {
                        "data-tooltip-text":
                          "Number of apps eligible based on the criteria set",
                        className: H().HelperTooltip,
                      },
                      "Eligible",
                    ),
                  ),
                Boolean(
                  null === (i = null == r ? void 0 : r[o.pageid]) ||
                    void 0 === i
                    ? void 0
                    : i.count_invited,
                ) &&
                  b.createElement(
                    "div",
                    { className: $().FeaturedApps },
                    b.createElement(
                      "div",
                      { className: $().BigNumber },
                      r[o.pageid].count_invited.toLocaleString(),
                    ),
                    b.createElement(
                      "span",
                      {
                        "data-tooltip-text":
                          "Number of apps that have an open invitation and have not yet acted on it.",
                        className: H().HelperTooltip,
                      },
                      "Open Invitation",
                    ),
                  ),
                Boolean(null == r ? void 0 : r[o.pageid]) &&
                  b.createElement(
                    "div",
                    { className: $().FeaturedApps },
                    b.createElement(
                      "div",
                      { className: (0, Z.Z)($().BigNumber, $().Highlight) },
                      r[o.pageid].count_opted_in.toLocaleString(),
                    ),
                    b.createElement(
                      "span",
                      {
                        "data-tooltip-text":
                          "Number of apps that have selected to opt in for this event",
                        className: H().HelperTooltip,
                      },
                      "Opted In (",
                      b.createElement(
                        "a",
                        {
                          href:
                            N.De.PARTNER_BASE_URL +
                            "optin/admin/edit/" +
                            o.pageid +
                            "?tab=manage",
                          className: (0, Z.Z)($().BrowseLink),
                        },
                        "Browse",
                      ),
                      ")",
                    ),
                  ),
                Boolean(null == r ? void 0 : r[o.pageid]) &&
                  b.createElement(
                    "div",
                    { className: $().FeaturedApps },
                    b.createElement(
                      "div",
                      { className: $().BigNumber },
                      r[o.pageid].count_opted_out.toLocaleString(),
                    ),
                    b.createElement(
                      "div",
                      { className: ee().StatRow },
                      "Opted Out",
                    ),
                  ),
                Boolean(
                  null === (l = null == r ? void 0 : r[o.pageid]) ||
                    void 0 === l
                    ? void 0
                    : l.count_featured,
                ) &&
                  b.createElement(
                    "div",
                    { className: $().FeaturedApps },
                    b.createElement(
                      "div",
                      { className: $().BigNumber },
                      r[o.pageid].count_featured.toLocaleString(),
                    ),
                    b.createElement(
                      "span",
                      {
                        "data-tooltip-text":
                          "Apps marked with additional featuring.",
                        className: H().HelperTooltip,
                      },
                      "Featured",
                    ),
                  ),
              ),
              b.createElement(
                "div",
                { className: $().StatusCtn },
                Boolean(null == r ? void 0 : r[o.pageid]) &&
                  b.createElement(
                    "div",
                    { className: ee().StatRefresh },
                    "Stats refreshed:",
                    b.createElement(V.H6, { dateAndTime: m, bSingleLine: !0 }),
                  ),
                c &&
                  b.createElement(
                    "div",
                    { className: $().PendingChanges },
                    "Has Unpublished Changes",
                  ),
              ),
            ),
            b.createElement(
              "div",
              { className: (0, Z.Z)(ee().Button, ee().ButtonCtn) },
              b.createElement(
                U.rU,
                {
                  to: fo.OptinAdminEdit(o.pageid),
                  className: (0, Z.Z)(H().Button, H().Primary),
                },
                "Edit Opt-In Definition",
              ),
              Boolean(s) &&
                b.createElement(
                  "a",
                  {
                    href:
                      N.De.PARTNER_BASE_URL +
                      "optin" +
                      fo.OptInAppReview(o.pageid),
                    className: (0, Z.Z)(H().Button),
                    target: "_blank",
                  },
                  "Open Opt-In Pruning Page",
                ),
              Boolean(!s) &&
                b.createElement(
                  U.rU,
                  {
                    to: fo.OptinAdminAnalysis(o.pageid),
                    className: (0, Z.Z)(H().Button, H().Primary),
                  },
                  "Post OptIn Stats",
                ),
              b.createElement(
                j.zx,
                {
                  onClick: (e) =>
                    (0, W.AM)(
                      b.createElement(Se, {
                        def: o,
                        stats: null == r ? void 0 : r[o.pageid],
                      }),
                      (0, K.RA)(e),
                    ),
                },
                "Clone",
              ),
            ),
          ),
        );
      }
      var Ie = n(88464),
        Ce = n(5386),
        be = n(52316),
        Ae = n(1578),
        Te = n(20139),
        ke = n(701),
        we = n(84343),
        Ne = n(53134),
        Le = n(88938),
        xe = n.n(Le),
        Oe = n(24166);
      const Ge = (0, Ie.Pi)((e) => {
          const t = B.Get(),
            n = t
              .GetEditableDynamicSections()
              .map((e, t) =>
                b.createElement(Re, {
                  key: e.GetUniqueID(),
                  section: e,
                  dynamicSectionIndex: t,
                }),
              );
          return b.createElement(
            Oe.ug,
            { title: "Optional Dynamic Sections", bStartMinimized: !1 },
            b.createElement("hr", null),
            b.createElement(
              "p",
              null,
              "Optional Section that can be used to collect additional data from users for their app prior to opting in. This data can be later used to help organize the content on the sales and will surface in the sale page editors.",
            ),
            n,
            b.createElement(
              "div",
              { className: Ne.AddSectionCtn },
              b.createElement(
                j.KM,
                { onClick: t.AddDynamicSection },
                "Add New Dynamic Section",
              ),
            ),
          );
        }),
        Re = (0, Ie.Pi)((e) => {
          const { section: t, dynamicSectionIndex: n } = e,
            a = p.U.Get().GetCurEditLanguage(),
            i = b.createRef(),
            l = t
              .GetLists()
              .map((e, n) =>
                b.createElement(Me, {
                  key: t.GetUniqueID() + e.unique_id,
                  section: t,
                  listIndex: n,
                }),
              );
          return b.createElement(
            X.SV,
            null,
            b.createElement(
              "div",
              {
                className: (0, Z.Z)({
                  [xe().Section]: !0,
                  [H().ValveOnlyBackground]: t.BIsValveOnlySection(),
                }),
              },
              b.createElement(Be, { section: t, dynamicSectionIndex: n }),
              b.createElement("div", null, "Section ID: ", t.GetUniqueID()),
              b.createElement(j.II, {
                type: "text",
                label: "Section Name",
                value: t.GetName(),
                onChange: (e) => t.SetName(e.target.value, a),
              }),
              b.createElement("div", null, "Section Description: (optional)"),
              b.createElement(Ae.R, {
                fnGetCurText: t.GetDescription,
                fnOnTextChange: (e) =>
                  t.SetDescription(e.currentTarget.value, a),
                fnSetText: t.SetDescriptionWithCurLang,
                strPlaceholder: "Enter Description Here",
                emoticonStore: be.F,
                bSupportHTMLImport: !0,
                showFormatHelp: "PartnerEvents",
                classNameForTextArea: xe().EventBBCodeEditor,
                limitBBCode: void 0,
                nOverridesRows: 10,
              }),
              b.createElement(j.ji, {
                className: H().ValveOnlyBackground,
                label: "Valve Admin and Support Team Only",
                tooltip:
                  "Only showns to and changeable by Valve Admin and Support. Useful to markup and store a setting on the opt-in registration directly.",
                onChange: t.SetValveOnly,
                checked: t.BIsValveOnlySection(),
              }),
              b.createElement(j.ry, {
                rgOptions: [
                  { label: "Radio Buttons (single selection)", data: "radio" },
                  {
                    label: "Checkboxes (none or multi-selection)",
                    data: "checkbox",
                  },
                  {
                    label: "Dropdown (lots of options, allows type searching)",
                    data: "single_select",
                  },
                  {
                    label:
                      "Multi-Select Dropdown (lots of options, allows type searching)",
                    data: "multi_select",
                  },
                  { label: "Text (open ended answers)", data: "text_input" },
                ],
                selectedOption: t.GetInputStyle(),
                onChange: (e) => {
                  "text_input" === e.data &&
                  "text_input" !== t.GetInputStyle() &&
                  t.GetListCount() > 1
                    ? (0, W.AM)(
                        b.createElement(he.uH, {
                          strTitle: "Change to Text Input",
                          bDestructiveWarning: !0,
                          strDescription:
                            "Changing to text input is destructive, and will eliminate any previous values you have created for the lists. Are you sure?",
                          onOK: () => t.SetInputStyle(e.data),
                          onCancel: () => {
                            var e;
                            return null ===
                              (e = null == i ? void 0 : i.current) ||
                              void 0 === e
                              ? void 0
                              : e.SetSelectedOption(t.GetInputStyle());
                          },
                        }),
                        window,
                      )
                    : t.SetInputStyle(e.data);
                },
                label: "Input Style",
                dropDownControlRef: i,
              }),
              Boolean(
                "radio" == t.GetInputStyle() || "checkbox" == t.GetInputStyle(),
              ) &&
                b.createElement(j.DS, {
                  label: "Display as # of Column(s)",
                  showValue: !0,
                  min: 1,
                  max: 3,
                  value: t.GetColumnCount(),
                  onChange: (e) => t.SetColumnCount(e),
                  tooltip:
                    "The options to select will be displayed in this many columns to the users",
                }),
              l,
              Boolean("text_input" != t.GetInputStyle()) &&
                b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    j.zx,
                    {
                      disabled: t.GetListCount() < 2,
                      onClick: (e) => Xe(e, t.GetModel()),
                    },
                    "Re-Order lists within this Section",
                  ),
                  b.createElement(
                    j.KM,
                    { onClick: t.AddOptionList },
                    "Add Another Option List within this Dynamic Section",
                  ),
                ),
            ),
          );
        }),
        Be = (0, Ie.Pi)((e) => {
          const t = B.Get(),
            { section: n, dynamicSectionIndex: a } = e;
          return b.createElement(
            "div",
            {
              className: (0, Z.Z)({
                [Ne.Header]: !0,
                [H().ValveOnlyBackground]: n.BIsValveOnlySection(),
              }),
            },
            b.createElement(
              "span",
              null,
              n.BIsValveOnlySection() && "(VO) ",
              n.GetNameWithFallback(`Dynamic Section ${a}`),
            ),
            b.createElement(
              "div",
              null,
              b.createElement(
                j.zx,
                {
                  onClick: (e) => {
                    (0, W.AM)(
                      b.createElement(he.uH, {
                        onOK: () => {
                          t.DeleteDynamicSection(n.GetUniqueID());
                        },
                        strTitle: "Delete Dynamic Section?",
                        strDescription:
                          "Delete this section? This cannot be undone and any data will be lost.",
                        bDestructiveWarning: !0,
                      }),
                      (0, K.RA)(e),
                    );
                  },
                },
                b.createElement(ke.pVO, null),
              ),
            ),
          );
        }),
        Me = (0, Ie.Pi)((e) => {
          const { section: t, listIndex: n } = e;
          return "text_input" === t.GetInputStyle()
            ? b.createElement(
                "div",
                null,
                "Textarea will appear here for the users input.",
              )
            : b.createElement(Pe, { section: t, listIndex: n });
        }),
        Pe = (0, Ie.Pi)((e) => {
          const { section: t, listIndex: n } = e,
            a = t.GetListByIndex(n),
            i = p.U.Get().GetCurEditLanguage();
          return b.createElement(
            "div",
            { id: t.GetUniqueID() + a.unique_id, className: Ne.optionList },
            b.createElement(j.II, {
              type: "text",
              label: "Name for this group of options",
              value: t.GetListTitle(n),
              onChange: (e) =>
                t.SetListTitleByListIndex(n, e.currentTarget.value, i),
            }),
            Boolean(0 == a.options.length)
              ? b.createElement("div", null, "No Options Added")
              : b.createElement(Te.R, {
                  items: a.options.map((e, t) => ({
                    itemIndex: t,
                    listitem: e,
                  })),
                  onDelete: (e, a) => {
                    (0, W.AM)(
                      b.createElement(he.uH, {
                        bDestructiveWarning: !0,
                        strTitle: "Delete selected option",
                        strDescription:
                          "Are you sure you want to delete the following item?: " +
                          (0, s.Xj)(t.GetItemAtListAndIndex(n, e).text, i),
                        onOK: () => t.RemoveListItem(n, e),
                      }),
                      (0, K.RA)(a),
                    );
                  },
                  onEdit: (a, i) => {
                    (0, W.AM)(
                      b.createElement(
                        Fe,
                        Object.assign({}, e, {
                          itemIndex: a,
                          item: t.GetItemAtListAndIndex(n, a),
                        }),
                      ),
                      (0, K.RA)(i),
                    );
                  },
                  onMove: (e, t) => {
                    (0, T.hV)(a.options, e, t), B.Get().SetDirty(!0);
                  },
                  render: (e) => {
                    let t =
                      e.listitem.tooltip &&
                      (0, s.Xj)(e.listitem.tooltip, i, void 0);
                    return b.createElement(
                      we.HP,
                      { toolTipContent: t },
                      (0, s.Xj)(e.listitem.text, i),
                      " ",
                      Boolean(t) && "(?)",
                    );
                  },
                }),
            b.createElement(
              j.zx,
              {
                onClick: (t) =>
                  (0, W.AM)(
                    b.createElement(Ue, Object.assign({}, e)),
                    (0, K.RA)(t),
                  ),
              },
              "Add Option Item",
            ),
          );
        }),
        Fe = (e) => {
          const [t, n] = (0, b.useState)(e.item.text),
            [a, i] = (0, b.useState)(e.item.tooltip),
            [l, o] = (0, b.useState)(p.U.Get().GetCurEditLanguage());
          return b.createElement(
            he.uH,
            {
              strTitle: "Edit Item",
              strDescription: "Update the value and confirm to apply changes.",
              onOK: () => {
                e.section.UpdateListItemTextByKV(
                  e.listIndex,
                  e.itemIndex,
                  t,
                  a,
                ),
                  e.closeModal && e.closeModal();
              },
              onCancel: e.closeModal,
            },
            b.createElement(
              "div",
              null,
              b.createElement(Ce.uW, {
                selectedLang: l,
                fnLangHasData: (e) => {
                  let n = (0, m.j_)(e);
                  return (
                    (t[n] && t[n].trim().length > 0) ||
                    (a && a[n] && a[n].trim().length > 0)
                  );
                },
                fnOnLanguageChanged: o,
              }),
              b.createElement(j.II, {
                type: "text",
                placeholder: "Enter Text",
                label: "Item Name",
                value: (0, s.pM)(t, l, ""),
                onChange: (e) => {
                  let a = JSON.parse(JSON.stringify(t));
                  (a[(0, m.j_)(l)] = e.target.value), n(a);
                },
              }),
              b.createElement(j.II, {
                type: "text",
                placeholder: "Enter Tooltip",
                label: "Tooltip (optional)",
                value: (0, s.pM)(a, l, ""),
                onChange: (e) => {
                  let t = a ? JSON.parse(JSON.stringify(a)) : {};
                  (t[(0, m.j_)(l)] = e.target.value), i(t);
                },
              }),
            ),
          );
        },
        Ue = (e) => {
          const [t, n] = (0, b.useState)(""),
            [a, i] = (0, b.useState)(""),
            l = p.U.Get().GetCurEditLanguage();
          return b.createElement(
            he.uH,
            {
              strTitle: "Add Option Item",
              strDescription: `Add items for the user to select from. Adding for the language: ${(0,
              m.j_)(l)}`,
              onOK: () => {
                e.section.AddItemToListByIndex(e.listIndex, t, l, a),
                  e.closeModal && e.closeModal();
              },
              bOKDisabled: 0 == t.trim().length,
              onCancel: e.closeModal,
            },
            b.createElement(
              "div",
              null,
              b.createElement(j.II, {
                type: "text",
                value: t,
                onChange: (e) => n(e.currentTarget.value),
                placeholder: "Enter name (requred)",
                label: "Item Name",
                focusOnMount: !0,
              }),
              b.createElement(j.II, {
                type: "text",
                value: a,
                onChange: (e) => i(e.currentTarget.value),
                placeholder: "Enter Tooltip (optional)",
                label: "Tooltip",
              }),
            ),
          );
        },
        je = (e) => {
          const t = B.Get(),
            n = p.U.Get().GetCurEditLanguage();
          (0, W.AM)(
            b.createElement(
              he.uH,
              {
                strTitle: "Re-Order Dynamic Sections",
                bDestructiveWarning: !0,
                strDescription:
                  "Reorders the dynamic section. Changes are immediately applied but don't reflect in the editor. Save and reload the page (its a bug, I will fix is soon!)",
              },
              b.createElement(
                "div",
                null,
                Boolean(
                  t.GetModel().dynamic_sections &&
                    t.GetModel().dynamic_sections.length > 0,
                )
                  ? b.createElement(Te.R, {
                      items: t.GetModel().dynamic_sections,
                      render: (e) => (0, s.Xj)(e.name, n, "Unnamed Section"),
                      onReorder: () => t.SetDirty(!0),
                    })
                  : b.createElement(
                      "p",
                      null,
                      "No dynamic sections to re-order",
                    ),
              ),
            ),
            (0, K.RA)(e),
          );
        },
        Xe = (e, t) => {
          const n = B.Get(),
            a = p.U.Get().GetCurEditLanguage();
          (0, W.AM)(
            b.createElement(
              he.uH,
              {
                strTitle: "Re-Order Lists within a Sections",
                bDestructiveWarning: !0,
                strDescription:
                  "Reorders the list within a section. Changes are immediately applied but don't reflect in the editor. Save and reload the page (its a bug, I will fix is soon!)",
              },
              b.createElement(
                "div",
                null,
                Boolean(t.lists && t.lists.length > 0)
                  ? b.createElement(Te.R, {
                      items: t.lists,
                      render: (e) =>
                        (0, s.Xj)(e.option_title, a, "Untitled List"),
                      onReorder: () => n.SetDirty(!0),
                    })
                  : b.createElement("p", null, "No list to re-order"),
              ),
            ),
            (0, K.RA)(e),
          );
        };
      var ze = n(82988);
      const He = (e) => {
        const t = B.Get(),
          n = JSON.parse(JSON.stringify(t.GetModel() || [])),
          a = JSON.parse(JSON.stringify(n.emails || []));
        n.emails = [];
        const i = [
          {
            name: "OptIn Event Body Raw",
            key: "eventbody",
            status: "",
            statusType: "success",
            contents: b.createElement(
              X.SV,
              null,
              b.createElement(ze.G, { data: n }),
            ),
          },
        ];
        return (
          a.forEach((e, t) => {
            i.push({
              name: e.internal_name,
              key: "" + (e.email_def_id || t),
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(ze.G, { data: e }),
              ),
            });
          }),
          console.log(a),
          b.createElement(
            "div",
            null,
            b.createElement("h1", null, "Data:"),
            b.createElement("div", null, "PageID: ", t.GetName()),
            b.createElement(
              "div",
              null,
              "Event Start Time: ",
              t.GetEventStartTime(),
              " -",
              Boolean(0 != t.GetEventStartTime()) &&
                b.createElement(V.H6, {
                  dateAndTime: t.GetEventStartTime(),
                  bSingleLine: !0,
                }),
            ),
            b.createElement(
              "div",
              null,
              "Event End Time: ",
              t.GetEventEndTime(),
              " -",
              Boolean(0 != t.GetEventEndTime()) &&
                b.createElement(V.H6, {
                  dateAndTime: t.GetEventEndTime(),
                  bSingleLine: !0,
                }),
            ),
            b.createElement(te.n, { tabs: i, bDisableRouting: !0 }),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement("br", null),
          )
        );
      };
      var Ve = n(25125),
        We = n(18030),
        qe = n(69818),
        Ze = n.n(qe),
        Ke = n(82971),
        Ye = n(63903),
        Qe = n(15039),
        $e = n(10241),
        Je = n(44973),
        et = n(66998);
      function tt(e, t, n) {
        return `${Je.De.BASE_URL_SHARED_CDN}store_item_assets/optin/${e}/${t}/${n}`;
      }
      function nt(e) {
        var t, n;
        const a = Je.De.LANGUAGE;
        return (
          null === (t = e.localized_optin_banner) || void 0 === t
            ? void 0
            : t[a]
        )
          ? tt(e.pageid, (0, m.jM)(a), e.localized_optin_banner[a])
          : (
              null === (n = e.localized_optin_banner) || void 0 === n
                ? void 0
                : n.english
            )
          ? tt(e.pageid, m.Df.k_Lang_English, e.localized_optin_banner.english)
          : null;
      }
      function at(e) {
        const t = B.Get(),
          n = (0, b.useMemo)(() => ["localized_optin_banner"], []),
          a = (0, b.useMemo)(
            () => [Ye.IN.k_ESteamRealmGlobal, Ye.IN.k_ESteamRealmChina],
            [],
          ),
          i = (0, b.useCallback)(
            (e, n, a, i, l) => {
              (0, u.X)(
                null != a && a >= m.Df.k_Lang_English && a < m.Df.k_Lang_MAX,
                "Unexpected value for elang: " + a,
              ),
                t.SetLocalizedOptInBanner(a, e + (0, Qe.U)(i));
            },
            [t],
          );
        return b.createElement(
          "div",
          { className: xe().Section },
          b.createElement(
            "h3",
            null,
            "Localized Branding Artwork: ",
            b.createElement("span", null, "(1000 x 150)"),
          ),
          b.createElement(
            "p",
            null,
            "Branding artwork we will show to partners on any optin page",
          ),
          b.createElement($e.j, {
            rgSupportArtwork: n,
            rgRealmList: a,
            strUploadAjaxURL: `${
              Je.De.PARTNER_BASE_URL
            }optin/ajaxuploadasset/${t.GetOptInPageID()}`,
            fnOnUploadSuccess: i,
          }),
          b.createElement(X.SV, null, b.createElement(it, null)),
        );
      }
      function it(e) {
        const t = B.Get(),
          [n] = (0, Ve.SZ)(() => [
            Object.keys(t.GetAllLocalizedOptInBanner())
              .sort()
              .map((e) => (0, m.jM)(e)),
          ]),
          a = (0, b.useCallback)(
            (e) => {
              const n = t.GetLocalizedOptInBanner(e);
              return n ? tt(t.GetOptInPageID(), e, n) : null;
            },
            [t],
          );
        return b.createElement(et.V, {
          rgAssetLangs: n,
          fnGetAssetUrl: a,
          fnDeletAssetLang: t.DeleteLocalizedOptInBanner,
          imageClassname: Ze().BannerPreview,
        });
      }
      var lt = n(26464);
      class ot {
        ChangeAppsAdditionalFeaturingState(e, t, n) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const a = ie.gA.Init(d.rf),
              i = new Set(t.filter(Boolean) || []);
            if (0 == i.size || !e) return A.s.k_EResultInvalidParam;
            a.Body().set_appids(Array.from(i)),
              a.Body().set_opt_in_name(e),
              a.Body().set_additional_featuring(n);
            return (yield d.u2.SetFeaturingOnPartnerAppOptIn(
              this.m_steamInterface.GetServiceTransport(),
              a,
            )).GetEResult();
          });
        }
        static Get() {
          return (
            ot.s_Singleton ||
              ((ot.s_Singleton = new ot()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInAdminAdditionalFeaturingStore = ot.s_Singleton),
              ot.s_Singleton.Init()),
            ot.s_Singleton
          );
        }
        constructor() {
          this.m_steamInterface = null;
        }
        Init() {
          const e = (0, N.kQ)("optin_webapi_token", "application_config");
          e
            ? (this.m_steamInterface = new le.J(N.De.WEBAPI_BASE_URL, e))
            : console.error(
                "COptInAdminAdditionalFeaturingStore missing API token",
              );
        }
      }
      (0, l.gn)(
        [lt.a],
        ot.prototype,
        "ChangeAppsAdditionalFeaturingState",
        null,
      ),
        (0, l.gn)([c.aD], ot.prototype, "Init", null);
      var rt = n(77557);
      function st(e) {
        const {
            strTitle: t,
            strDescription: n,
            closeModal: a,
            fnGenericAddAction: i,
          } = e,
          [l, o] = b.useState(""),
          r = (0, rt.tx)(),
          s = (0, b.useCallback)(() => {
            r.fnSetLoading(!0);
            const e = l.replace(/\n/g, "|").split("|"),
              t = new Array();
            e.forEach((e) => {
              const n = Number.parseInt(e);
              n > 0 && t.push(n);
            }),
              t.length > 0
                ? i(t).then((e) => {
                    e == A.s.k_EResultOK
                      ? (r.fnSetSuccess(!0),
                        r.fnSetStrSuccess(
                          `Successfully updated ${t.length} apps`,
                        ))
                      : (r.fnSetError(!0),
                        r.fnSetStrError(
                          `Failed to update ${t.length} apps error: ${e} `,
                        ));
                  })
                : (r.fnSetSuccess(!0),
                  r.fnSetStrSuccess("No new appids to invite"));
          }, [r, i, l]);
        return r.bLoading
          ? b.createElement(rt.NT, {
              state: r,
              strDialogTitle: t,
              closeModal: a,
            })
          : b.createElement(
              he.uH,
              {
                strTitle: t,
                strDescription: n,
                onOK: s,
                bOKDisabled: 0 == l.trim().length || r.bLoading,
                onCancel: a,
              },
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement(
                "div",
                null,
                "Note: Remember after add all of the apps, go to 'Manage' Tab and 'Refresh Stats' to update our list",
              ),
              b.createElement("br", null),
              b.createElement(
                "div",
                null,
                "Enter App IDs seperated by new lines:",
              ),
              b.createElement("textarea", {
                cols: 120,
                rows: 10,
                onChange: (e) => o(e.currentTarget.value),
                value: l,
                autoFocus: !0,
                disabled: r.bLoading,
              }),
            );
      }
      function ct(e) {
        const t = B.Get(),
          [n, a, i, l] = (0, Ve.SZ)(() => [
            t.BIsAdditionalFeaturingSectionEnabled(),
            t.BIsCollectTrailerPermissions(),
            t.BIsCollectDemoPermissions(),
            t.BIsCollectGameProfileIntent(),
          ]),
          [o, r] = (0, b.useState)(t.BHasCollectDemoDeadlineDate()),
          [s] = (0, Ve.SZ)(() => [t.GetEventStartTime()]);
        return b.createElement(
          Oe.ug,
          { title: "Additional Featuring Section", bStartMinimized: !1 },
          b.createElement("hr", null),
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement("h3", null, "For Apps Marked As Featured"),
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              "If eneabled, this allows us to collect additional information and permissions from apps who have additional featuring enabled on them. Additional featuring is done during the App Review (pruning) process prior to sending invitation. It can be added at anytime:",
            ),
            b.createElement("br", null),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(mt, { strOptInName: t.GetOptInPageID() }),
                    (0, K.RA)(e),
                  ),
              },
              "Add Games to Featuring",
            ),
            b.createElement(j.ji, {
              label: "Enable the Additional Featuring Section.",
              onChange: t.SetAdditionalFeaturingSectionEnabled,
              checked: n,
            }),
            b.createElement("hr", null),
            b.createElement(
              "div",
              {
                className: (0, Z.Z)(
                  xe().IndentedSubSection,
                  n ? "" : xe().Disabled,
                ),
              },
              b.createElement(j.ji, {
                label: "Collect Trailer Permissions",
                tooltip:
                  "This request from them the use of their trailer in our events marketing material. Permitting us to edit the trailer for the purpose",
                onChange: t.SetCollectTrailerPermissions,
                checked: a,
              }),
              b.createElement(j.ji, {
                label: "Collect Demo Permissions",
                tooltip:
                  "This is useful for events like Next Fest. Requesting permission for us to optional feature by playing their demo during our event stream.",
                onChange: t.SetCollectDemoPermissions,
                checked: i,
              }),
              b.createElement(j.ji, {
                label: "Collect Game Profile Intent",
                tooltip:
                  "This lets the partner know that we are promoting game profile and are inviting them to submit one for the event. Note: Operational step, make sure to add game profile creation on the partner account",
                onChange: t.SetCollectGameProfileIntent,
                checked: l,
              }),
              o
                ? b.createElement(Ke.A, {
                    strDescription:
                      "Date by which partners have a submitted, reviewed and approved demo or discount",
                    nLatestTime: s,
                    nEarliestTime: 0,
                    fnGetTimeToUpdate: t.GetCollectDemoDeadlineDate,
                    fnSetTimeToUpdate: t.SetCollectDemoDeadlineDate,
                    fnSetToNow: t.SetCollectDemoDeadlineDate,
                  })
                : b.createElement(j.ji, {
                    label: "Show a specific due date",
                    tooltip:
                      "Date by which partners have a submitted, reviewed and approved demo or discount",
                    onChange: r,
                    checked: o,
                  }),
            ),
          ),
        );
      }
      function mt(e) {
        const { strOptInName: t } = e,
          { fnChangeAppAdditionalFeaturingState: n } = {
            fnChangeAppAdditionalFeaturingState:
              ot.Get().ChangeAppsAdditionalFeaturingState,
          },
          a = (0, b.useCallback)(
            (e) =>
              (0, l.mG)(this, void 0, void 0, function* () {
                return n(t, e, !0);
              }),
            [n, t],
          );
        return b.createElement(st, {
          strTitle: "Additional App Featuring",
          strDescription:
            "Feature apps to that have already been invited or opted into the event, so that they may signed up for further featuring.",
          fnGenericAddAction: a,
          closeModal: e.closeModal,
        });
      }
      class dt {
        UpdateAppInvitation(e, t, n, a, i, o) {
          var s, c, m, d;
          return (0, l.mG)(this, void 0, void 0, function* () {
            let l = A.s.k_EResultOK;
            try {
              const p = new FormData();
              if (n && (i || a))
                return (
                  console.error(
                    "COptinAdminInvitationStore::UpdateAppInvitation Unexpected parameters",
                  ),
                  A.s.k_EResultInvalidParam
                );
              p.append("sessionid", N.De.SESSIONID),
                p.append("opt_in_name", e),
                t && p.append("appids", JSON.stringify(t)),
                p.append("add", n ? "1" : "0"),
                p.append("pending_review", i ? "1" : "0"),
                p.append("prune", a ? "1" : "0");
              const u = yield r().post(
                N.De.PARTNER_BASE_URL + "optin/ajaxinviteapps",
                p,
                {
                  withCredentials: !0,
                  cancelToken: null == o ? void 0 : o.token,
                },
              );
              (200 == (null == u ? void 0 : u.status) &&
                (null === (s = u.data) || void 0 === s ? void 0 : s.success) ==
                  A.s.k_EResultOK) ||
                (console.log(
                  `COptinAdminInvitationStore.InternalUpdatePartnerOrAppInvitation failed with status ${
                    null == u ? void 0 : u.status
                  } eresult ${
                    null === (c = null == u ? void 0 : u.data) || void 0 === c
                      ? void 0
                      : c.success
                  } and msg ${
                    null === (m = null == u ? void 0 : u.data) || void 0 === m
                      ? void 0
                      : m.msg
                  }`,
                ),
                (l =
                  (null === (d = null == u ? void 0 : u.data) || void 0 === d
                    ? void 0
                    : d.success) || A.s.k_EResultFail));
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "COptinAdminInvitationStore.InternalUpdatePartnerOrAppInvitation failed add: " +
                  t.strErrorMsg,
                t,
              ),
                (l = A.s.k_EResultFail);
            }
            return l;
          });
        }
        static Get() {
          return (
            dt.s_Singleton ||
              ((dt.s_Singleton = new dt()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInAdminInvitationStore = dt.s_Singleton)),
            dt.s_Singleton
          );
        }
        constructor() {}
        ValidateStoreDefault(e) {
          const t = e;
          return (
            !!(
              t &&
              Array.isArray(t) &&
              t.length > 0 &&
              "object" == typeof t[0]
            ) &&
            "string" == typeof t[0].opt_in_name &&
            Array.isArray(t[0].partner_ids) &&
            "number" == typeof t[0].partner_ids[0]
          );
        }
      }
      function pt() {
        return { fnUpdateAppToInvitation: dt.Get().UpdateAppInvitation };
      }
      (0, l.gn)([lt.a], dt.prototype, "UpdateAppInvitation", null);
      var ut = n(16586),
        _t = n(47165),
        ht = n(92616),
        gt = n(25871),
        Et = n(20730),
        vt = n.n(Et),
        St = n(24448),
        ft = n(77435),
        Dt = n(44026);
      class yt extends b.Component {
        constructor() {
          super(...arguments),
            (this.state = {
              invite_token: "",
              input_search: "",
              friend_code_copied: !1,
              invite_copied: !1,
            });
        }
        componentDidMount() {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const e = yield r().get(
              N.De.COMMUNITY_BASE_URL + "invites/ajaxgetall",
              { params: { sessionid: N.De.SESSIONID } },
            );
            if (e && e.data && e.data.tokens) {
              const t = e.data.tokens.filter((e) => e.valid);
              t.length
                ? this.setState({ invite_token: t[0].invite_token })
                : this.OnCreateInviteLink();
            } else this.OnCreateInviteLink();
          });
        }
        OnCreateInviteLink() {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const e = new FormData();
            e.append("sessionid", N.De.SESSIONID),
              e.append("steamid_user", N.L7.steamid),
              e.append("duration", (2592e3).toString());
            const t = yield r().post(
              N.De.COMMUNITY_BASE_URL + "invites/ajaxcreate",
              e,
            );
            t &&
              t.data &&
              t.data.invite &&
              this.setState({ invite_token: t.data.invite.invite_token });
          });
        }
        OnCopy(e, t) {
          "friend_code" === e &&
            (this.setState({ friend_code_copied: !0 }),
            setTimeout(() => this.setState({ friend_code_copied: !1 }), 1e3)),
            "invite" === e &&
              (this.setState({ invite_copied: !0 }),
              setTimeout(() => this.setState({ invite_copied: !1 }), 1e3)),
            (0, K.Ei)(t);
        }
        OnAddFriend(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = new FormData();
            t.append("sessionID", N.De.SESSIONID),
              t.append("steamid", e),
              t.append("accept_invite", "0");
            try {
              const e = yield r().post(
                N.De.COMMUNITY_BASE_URL + "actions/AddFriendAjax",
                t,
              );
              return e && e.data && e.data.success == A.s.k_EResultOK;
            } catch (e) {
              return !1;
            }
          });
        }
        OnSearchChange(e) {
          this.setState({ input_search: e.target.value });
        }
        OnSearchKeyDown(e) {
          e.keyCode === ft.J.Enter && this.OnSearchSubmit();
        }
        OnSearchSubmit() {
          window.open(
            N.De.COMMUNITY_BASE_URL +
              "search/users/#text=" +
              encodeURIComponent(this.state.input_search),
            "_self",
          );
        }
        render() {
          const e = N.L7.short_url + "/" + this.state.invite_token;
          return b.createElement(
            "div",
            null,
            b.createElement(
              "div",
              { className: vt().HeaderBlock },
              (0, me.Xx)("#ManageFriends_AddAFriend"),
            ),
            b.createElement(
              "div",
              { className: vt().Background },
              b.createElement(
                "h1",
                { className: vt().Heading },
                (0, me.Xx)("#ManageFriends_YourFriendCode"),
              ),
              b.createElement(
                "div",
                { className: vt().CopyContainer },
                b.createElement("h1", { className: vt().Text }, N.L7.accountid),
                b.createElement(
                  j.KM,
                  {
                    autoFocus: !0,
                    className: vt().Button,
                    onClick: () =>
                      this.OnCopy("friend_code", String(N.L7.accountid)),
                  },
                  this.state.friend_code_copied
                    ? (0, me.Xx)("#ManageFriends_Copied")
                    : (0, me.Xx)("#ManageFriends_Copy"),
                ),
              ),
              b.createElement(
                "p",
                { className: vt().Body },
                (0, me.Xx)("#ManageFriends_EnterFriendCode"),
              ),
              b.createElement(It, {
                onButtonClick: this.OnAddFriend,
                buttonText: (0, me.Xx)("#ManageFriends_SendInvite"),
                bDisableForSelf: !0,
                bDisableForFriends: !0,
                bShowStatus: !0,
              }),
            ),
            b.createElement(
              "div",
              { className: vt().DimBackground },
              b.createElement(
                "h1",
                { className: vt().Heading },
                (0, me.Xx)("#ManageFriends_OrSendQuickInvite"),
              ),
              b.createElement(
                "p",
                { className: vt().Body },
                (0, me.Xx)("#ManageFriends_QuickInviteDescription"),
              ),
              b.createElement(
                "p",
                { className: vt().Body },
                (0, me.Xx)("#ManageFriends_QuickInviteNote"),
              ),
              b.createElement(
                "div",
                { className: vt().CopyContainer },
                Boolean(this.state.invite_token) &&
                  b.createElement("div", { className: vt().Link }, e),
                b.createElement(
                  j.KM,
                  {
                    className: vt().Button,
                    onClick: () => this.OnCopy("invite", e),
                  },
                  this.state.invite_copied
                    ? (0, me.Xx)("#ManageFriends_Copied")
                    : (0, me.Xx)("#ManageFriends_Copy"),
                ),
              ),
              b.createElement(
                j.zx,
                {
                  className: vt().GenerateLinkButton,
                  onClick: this.OnCreateInviteLink,
                },
                (0, me.Xx)("#ManageFriends_CreateInviteLink"),
              ),
            ),
            b.createElement(
              "div",
              { className: vt().Background },
              b.createElement(
                "h1",
                { className: vt().Heading },
                (0, me.Xx)("#ManageFriends_OrSearch"),
              ),
              b.createElement("br", null),
              b.createElement(
                "div",
                {
                  style: {
                    display: "flex",
                    alignItems: "center",
                    maxWidth: "598px",
                    position: "relative",
                  },
                },
                b.createElement(
                  "div",
                  { style: { width: "100%" } },
                  b.createElement(j.II, {
                    className: vt().Input,
                    onKeyDown: this.OnSearchKeyDown,
                    value: this.state.input_search,
                    onChange: this.OnSearchChange,
                    placeholder: (0, me.Xx)("#ManageFriends_EnterProfileName"),
                  }),
                ),
                b.createElement(
                  "div",
                  {
                    id: "searchIcon",
                    style: {
                      position: "absolute",
                      right: "10px",
                      cursor: "pointer",
                    },
                    onClick: this.OnSearchSubmit,
                  },
                  b.createElement(ke.YtI, null),
                ),
              ),
            ),
          );
        }
      }
      (0, l.gn)([_.ak], yt.prototype, "OnCreateInviteLink", null),
        (0, l.gn)([_.ak], yt.prototype, "OnCopy", null),
        (0, l.gn)([_.ak], yt.prototype, "OnAddFriend", null),
        (0, l.gn)([_.ak], yt.prototype, "OnSearchChange", null),
        (0, l.gn)([_.ak], yt.prototype, "OnSearchKeyDown", null),
        (0, l.gn)([_.ak], yt.prototype, "OnSearchSubmit", null);
      class It extends b.Component {
        constructor() {
          super(...arguments),
            (this.state = {
              input_friend_code: "",
              disable_send_invite: !1,
              searchResult: null,
              invite_status: "pending",
            }),
            (this.m_currentRequest = 0);
        }
        OnFriendCodeChange(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = e.target.value.split(",")[0];
            this.setState({ input_friend_code: t, invite_status: "pending" }),
              window.clearTimeout(this.m_currentRequest),
              (this.m_currentRequest = window.setTimeout(
                () => this.LoadProfile(t),
                500,
              ));
          });
        }
        LoadProfile(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            if (e) {
              const t = _t.K.InitFromAccountID(Number(e));
              yield St.y$.LoadProfiles([t.ConvertTo64BitString()]);
              const n = St.y$.GetProfile(t.ConvertTo64BitString());
              n
                ? this.setState({
                    searchResult: n,
                    disable_send_invite:
                      N.L7.is_limited ||
                      (this.props.bDisableForFriends && n.is_friend) ||
                      (this.props.bDisableForSelf &&
                        n.steamid === N.L7.steamid),
                  })
                : this.setState({ searchResult: null });
            } else this.setState({ searchResult: null });
          });
        }
        OnActionClick(e) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const t = new FormData();
            t.append("sessionID", N.De.SESSIONID),
              t.append("steamid", e),
              t.append("accept_invite", "0"),
              this.setState({ disable_send_invite: !0 });
            (yield this.props.onButtonClick(e))
              ? (this.setState({
                  input_friend_code: "",
                  invite_status: "success",
                }),
                setTimeout(() => this.setState({ searchResult: null }), 3e3))
              : this.setState({
                  invite_status: "failure",
                  disable_send_invite: !1,
                });
          });
        }
        render() {
          return b.createElement(
            "div",
            { className: vt().FriendCodeSelector },
            b.createElement(j.II, {
              className: vt().Input,
              value: this.state.input_friend_code,
              onChange: this.OnFriendCodeChange,
              placeholder: (0, me.Xx)(
                "#ManageFriends_EnterFriendCodePlaceholder",
              ),
            }),
            b.createElement(
              Ct,
              {
                searchResult: this.state.searchResult,
                invite_status: this.state.invite_status,
                bShowStatus: this.props.bShowStatus,
              },
              b.createElement(
                j.KM,
                {
                  className: vt().SendInviteButton,
                  onClick: () =>
                    this.OnActionClick(this.state.searchResult.steamid),
                  disabled: this.state.disable_send_invite,
                },
                this.props.buttonText,
              ),
            ),
          );
        }
      }
      (0, l.gn)([_.ak], It.prototype, "OnFriendCodeChange", null),
        (0, l.gn)([_.ak], It.prototype, "LoadProfile", null),
        (0, l.gn)([_.ak], It.prototype, "OnActionClick", null);
      const Ct = (e) => {
        const {
            searchResult: t,
            invite_status: n,
            bShowStatus: a,
            children: i,
          } = e,
          l = (0, N.id)();
        return Boolean(t)
          ? b.createElement(
              "div",
              { className: vt().ProfileCard },
              b.createElement(
                "div",
                { className: vt().UserContainer },
                b.createElement(
                  "div",
                  { className: vt().Image },
                  b.createElement("img", {
                    style: { width: "100%", height: "100%" },
                    src: t.avatar_url_full,
                  }),
                ),
                b.createElement(
                  "div",
                  { className: vt().ProfileContent },
                  b.createElement(
                    "h1",
                    { className: vt().Heading },
                    t.persona_name,
                  ),
                  b.createElement(
                    "div",
                    { className: vt().ProfileLink },
                    b.createElement(
                      Dt.IS,
                      {
                        target: l ? void 0 : "_blank",
                        href: N.De.COMMUNITY_BASE_URL + "profiles/" + t.steamid,
                      },
                      (0, me.Xx)("#ManageFriends_ProfileLink"),
                    ),
                    b.createElement("br", null),
                    b.createElement(
                      "span",
                      { className: vt().Body },
                      t.real_name,
                      b.createElement("br", null),
                      `${t.city}${t.city ? "," : ""} ${t.state}${
                        t.state ? "," : ""
                      } ${t.country}`,
                    ),
                  ),
                ),
                i,
              ),
              b.createElement(
                "div",
                { className: vt().ProfileLink },
                t.is_friend &&
                  b.createElement(
                    "div",
                    null,
                    (0, me.Xx)("#ManageFriends_IsFriend"),
                  ),
                0 != t.friends_in_common &&
                  b.createElement(
                    "div",
                    null,
                    b.createElement(
                      Dt.IS,
                      {
                        target: l ? void 0 : "_blank",
                        href:
                          N.De.COMMUNITY_BASE_URL +
                          "profiles/" +
                          t.steamid +
                          "/friendscommon",
                      },
                      1 === t.friends_in_common
                        ? (0, me.Xx)(
                            "#ManageFriends_FriendsInCommonSingular",
                            t.friends_in_common,
                          )
                        : (0, me.Xx)(
                            "#ManageFriends_FriendsInCommon",
                            t.friends_in_common,
                          ),
                    ),
                  ),
                a &&
                  "failure" === n &&
                  b.createElement(
                    "div",
                    { className: vt().Failure },
                    (0, me.Xx)("#ManageFriends_InviteFailure"),
                  ),
                a &&
                  "success" === n &&
                  b.createElement(
                    "div",
                    { className: vt().Success },
                    (0, me.Xx)("#ManageFriends_InviteSuccess", t.persona_name),
                  ),
              ),
            )
          : null;
      };
      var bt = n(16670);
      function At(e) {
        const t = B.Get(),
          n = (0, Ve.SZ)(() => B.Get().GetExternalAppReviewers());
        return b.createElement(
          b.Fragment,
          null,
          b.createElement("h3", null, "App Invites"),
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              "Tool that lets you explicitly invite specific apps to participate. This can be done before or after the OptIn is published/live for partners. App Invites will bypass ",
              b.createElement("b", null, "ALL"),
              " eligibility constraints or restrictions (ie, missing a tag and/or pass the end date for the registrations). This is independant of invitation only and can be used in conjunction of invitation only.",
            ),
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              "Inviting apps will NOT trigger any automatic notification. However, the email tab can be used to send an email to all invited apps.",
            ),
            b.createElement("h4", null, "Eligibilty Criteria Internal"),
            b.createElement(
              "p",
              null,
              "Shown on the pruning UI to our team and external pruning contractors",
            ),
            b.createElement(Ae.R, {
              fnGetCurText: t.GetCurPruningCriteriaText,
              fnOnTextChange: (e) =>
                t.SetCurPruningCriteriaText(e.currentTarget.value),
              fnSetText: t.SetCurPruningCriteriaText,
              strPlaceholder: "Enter Pruning Criteria Text",
              emoticonStore: be.F,
              bSupportHTMLImport: !0,
              showFormatHelp: "PartnerEvents",
              classNameForTextArea: xe().EventBBCodeEditor,
              limitBBCode: void 0,
              nOverridesRows: 10,
            }),
            b.createElement(
              "div",
              { className: xe().InviteButtonRow },
              b.createElement(
                we.HP,
                {
                  toolTipContent:
                    "For adding games to the pruning process; app isn't able to optin while in this state. Only games we haven't already acted upon can move to pending review.",
                },
                b.createElement(
                  j.KM,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(kt, {
                          strOptInName: t.GetOptInPageID(),
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  'Add to "Pending Review"...',
                ),
              ),
              b.createElement(
                we.HP,
                {
                  toolTipContent:
                    "Invite an app allows it to immediately optin to the event and will see they are permitted to participate",
                },
                b.createElement(
                  j.zx,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(Tt, {
                          strOptInName: t.GetOptInPageID(),
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Invite Apps...",
                ),
              ),
              b.createElement(
                we.HP,
                {
                  toolTipContent:
                    "Directly marks an app as pruned. It won't surface on the sale pages or content hub override page. Will apply even if app as opted in",
                },
                b.createElement(
                  j.zx,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(wt, {
                          strOptInName: t.GetOptInPageID(),
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Prune Apps...",
                ),
              ),
            ),
            b.createElement(
              "div",
              { className: xe().ShowAllInvitedRow },
              b.createElement(
                we.HP,
                {
                  toolTipContent:
                    "This list will include all invited app, even if they are no longer invited because we pruned them or the partner took action - opted in/out.",
                },
                b.createElement(
                  j.zx,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(Lt, {
                          strOptInName: t.GetOptInPageID(),
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Show All Apps that were once Invited...",
                ),
              ),
            ),
            b.createElement("br", null),
            b.createElement("h3", null, "Manage App Pruning"),
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              "For an event like a tag sale, that depends on publisher and users tagging, we may need to review invited games to ensure they match the intent of the tag sale. ",
              b.createElement(
                "a",
                {
                  href:
                    N.De.PARTNER_BASE_URL +
                    "optin/appreview/" +
                    t.GetOptInPageID(),
                },
                "Go to Opt-In Pruning Page",
              ),
            ),
            Boolean((null == n ? void 0 : n.length) > 0) &&
              b.createElement(
                b.Fragment,
                null,
                b.createElement("br", null),
                b.createElement("h3", null, "External Reviewers"),
                b.createElement(Te.R, {
                  bDisabled: !0,
                  items: n,
                  onDelete: (e) => t.RemoveExternalAppReviewAt(e),
                  render: (e) => {
                    const t = _t.K.InitFromAccountID(e);
                    return b.createElement(
                      "a",
                      {
                        href: `${
                          N.De.COMMUNITY_BASE_URL
                        }profiles/${t.ConvertTo64BitString()}`,
                      },
                      b.createElement(bt.N, { accountID: e }),
                    );
                  },
                }),
                b.createElement(
                  "p",
                  null,
                  "Note: Make sure to publish changes to the external review list. They can only access published opt-in definitions.",
                ),
              ),
            b.createElement(
              "p",
              { className: xe().SectionDesc },
              b.createElement(
                "b",
                null,
                "Add External App Reviewer via Friend Code / Account ID",
              ),
            ),
            b.createElement(It, {
              buttonText: "Add to Reviewer List",
              onButtonClick: (e) =>
                (0, l.mG)(this, void 0, void 0, function* () {
                  const n = new _t.K(e);
                  return t.BAddExternalAppReviewAt(n.GetAccountID());
                }),
              bDisableForSelf: !0,
              bShowStatus: !0,
            }),
          ),
        );
      }
      function Tt(e) {
        const { strOptInName: t } = e,
          { fnUpdateAppToInvitation: n } = pt(),
          a = (0, b.useCallback)((e) => n(t, e, !0), [t, n]);
        return b.createElement(st, {
          strTitle: "Invite Apps",
          strDescription:
            "Invite apps to participate in the OptIn, which will disregard any opt-in restriction. This will not notify the partners for the apps. This will re-invite apps which previously opted out.",
          fnGenericAddAction: a,
          closeModal: e.closeModal,
        });
      }
      function kt(e) {
        const { strOptInName: t } = e,
          { fnUpdateAppToInvitation: n } = pt(),
          a = (0, b.useCallback)((e) => n(t, e, !1, !1, !0), [t, n]);
        return b.createElement(st, {
          strTitle: "Add Apps to Pending Review",
          strDescription:
            "For apps not already invited/opted in/out or pruned, this will set the apps to an initial pending review state. This allow us to have a clear list of app awaiting pruning. In this state, the game cannot join the opt-in until they either invited.",
          fnGenericAddAction: a,
          closeModal: e.closeModal,
        });
      }
      function wt(e) {
        const { strOptInName: t } = e,
          { fnUpdateAppToInvitation: n } = pt(),
          a = (0, b.useCallback)((e) => n(t, e, !1, !0), [t, n]);
        return b.createElement(st, {
          strTitle: "Prune App",
          strDescription:
            "This will immediately mark the app as pruned. This will override their opt-in or opt-out status and move the app to the prune list.",
          fnGenericAddAction: a,
          closeModal: e.closeModal,
        });
      }
      const Nt = { include_release: !0 };
      function Lt(e) {
        const { closeModal: t, strOptInName: n } = e,
          a = (0, ut.Cy)(n, !1),
          [i, l] = b.useState(!1);
        return (
          b.useEffect(() => {
            if ((null == a ? void 0 : a.length) > 0) {
              const e = a.map((e) => e.appid);
              ht.Z.Get()
                .QueueMultipleAppRequests(e, Nt)
                .then(() => l(!0));
            } else l(!0);
          }, [a]),
          b.createElement(
            he.uH,
            {
              strTitle: "All Invited Apps",
              strDescription:
                "This is the list of all apps that were ever invited. The invite status will change when the partner takes action such as opt-in or opt-out. We use the invite account setting to figure out if an invite actually happened",
              bDisableBackgroundDismiss: !0,
              bAllowFullSize: !0,
              closeModal: t,
              className: xe().InvitedAppHistoryDialog,
            },
            Boolean(!a || !i) &&
              b.createElement(de.V, { size: "medium", position: "center" }),
            b.createElement(
              "table",
              { className: xe().InvitedAppHistoryTable },
              b.createElement(
                "thead",
                null,
                b.createElement(
                  "tr",
                  null,
                  b.createElement("th", null, "Invited By"),
                  b.createElement("th", null, "Game"),
                  b.createElement("th", null, "Status"),
                ),
              ),
              b.createElement(
                "tbody",
                null,
                null == a
                  ? void 0
                  : a
                      .filter((e) => e.accountid_invited)
                      .map((e) =>
                        b.createElement(xt, { registration: e, key: e.appid }),
                      ),
              ),
            ),
          )
        );
      }
      function xt(e) {
        const { registration: t } = e,
          [n] = (0, gt.vs)(t.appid, Nt);
        let a = "invited";
        return (
          t.pruned
            ? (a = "pruned")
            : t.opt_in
            ? (a = "opted in")
            : t.time_opted_out && (a = "opted out"),
          b.createElement(
            "tr",
            { className: xe().InvitedAppRow },
            b.createElement(
              "td",
              null,
              Boolean(t.accountid_invited) &&
                b.createElement(bt.N, { accountID: t.accountid_invited }),
            ),
            b.createElement(
              "td",
              null,
              (null == n ? void 0 : n.GetName()) || "unknown",
              " (",
              t.appid,
              ") ",
            ),
            b.createElement("td", null, a),
          )
        );
      }
      const Ot = (0, Ie.Pi)((e) => {
        const t = B.Get(),
          n = t.BIsReleaseGamesEligible() || t.BIsUnreleaseGamesEligible();
        return b.createElement(
          Oe.ug,
          { title: "Registration Requirements", bStartMinimized: !1 },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement("h3", null, "Registration Deadline"),
            b.createElement(Ke.A, {
              strDescription: void 0,
              nEarliestTime: 0,
              fnGetTimeToUpdate: () => t.GetOptInDeadlineTime(),
              fnSetTimeToUpdate: t.SetOptInDeadlineTime,
              fnIsValidDateTime: () => !0,
              bShowTimeZone: !0,
            }),
          ),
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement("h3", null, "ELIGIBILITY SETTING"),
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              "Enable this to limit participation to only invitied games or partners.",
              b.createElement("br", null),
              "Disable to use criteria to determine participation eligibility.",
            ),
            b.createElement(j.gE, {
              onChange: (e) => {
                t.SetInvititationOnly(e);
              },
              label: "Make participation invite-only",
              checked: t.BIsInvitationOnly(),
            }),
          ),
          t.BIsInvitationOnly() &&
            b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement(At, null),
              ),
            ),
          !t.BIsInvitationOnly() &&
            b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement("h3", null, "ELIGIBILITY CRITERIA SETTINGS"),
                b.createElement(
                  "div",
                  { className: xe().IndentedSubSection },
                  b.createElement(
                    "div",
                    { className: xe().SectionDesc },
                    "Use the settings below to define one or more criteria that determines which games can participate.",
                    b.createElement("br", null),
                    b.createElement("br", null),
                  ),
                  b.createElement("h3", null, "LIMIT BY RELEASE DATE"),
                  b.createElement(
                    "div",
                    { className: xe().Section },
                    !Boolean(n) &&
                      b.createElement(
                        "div",
                        { className: ve().WarningStylesWithIcon },
                        "Required Setting for OptIn",
                      ),
                    b.createElement(j.ji, {
                      label: "Released games are eligible",
                      checked: t.BIsReleaseGamesEligible(),
                      onChange: t.SetReleaseGameEligible,
                    }),
                    b.createElement(j.ji, {
                      label: "Unreleased games are eligible",
                      checked: t.BIsUnreleaseGamesEligible(),
                      onChange: t.SetUnreleaseGameEligible,
                    }),
                    Boolean(t.BIsUnreleaseGamesEligible()) &&
                      b.createElement(
                        b.Fragment,
                        null,
                        b.createElement(Ke.A, {
                          strDescription: "Must release AFTER",
                          nEarliestTime: 0,
                          fnGetTimeToUpdate: () =>
                            t.GetEligibleReleaseAfterDate(),
                          fnSetTimeToUpdate: t.SetEligibleReleaseAfterDate,
                          fnIsValidDateTime: () => !0,
                          bShowTimeZone: !0,
                        }),
                        b.createElement(Ke.A, {
                          strDescription: "Must release BEFORE",
                          nEarliestTime: 0,
                          fnGetTimeToUpdate: () =>
                            t.GetEligibleReleaseBeforeDate(),
                          fnSetTimeToUpdate: t.SetEligibleReleaseBeforeDate,
                          fnIsValidDateTime: () => !0,
                          bShowTimeZone: !0,
                        }),
                      ),
                  ),
                  b.createElement("h3", null, "LIMIT BY COOLDOWN GROUP"),
                  b.createElement(
                    "div",
                    { className: xe().Section },
                    b.createElement(j.ji, {
                      label:
                        "Games are ineligible to optin to this event if already opted in to an event of the same type",
                      checked: t.GetCooldownRequired(),
                      onChange: t.SetCooldownRequired,
                    }),
                    b.createElement(
                      "div",
                      { className: xe().InviteButtonRow },
                      b.createElement(j.ry, {
                        label: "Cooldown Group",
                        rgOptions: t.GetCooldownGroupOptions(),
                        selectedOption: t.GetCooldownGroupType(),
                        onChange: (e) => t.SetCooldownGroupType(e.data),
                        contextMenuPositionOptions: {
                          bDisableMouseOverlay: !0,
                        },
                      }),
                      b.createElement(
                        "div",
                        { className: xe().NarrowInputField },
                        b.createElement(j.II, {
                          label: "Cooldown Window (in number of days)",
                          type: "number",
                          value: t.GetCooldownDays(),
                          maxLength: 4,
                          onChange: (e) =>
                            t.SetCooldownDays(parseInt(e.target.value)),
                        }),
                      ),
                    ),
                  ),
                  b.createElement("h3", null, "LIMIT BY TAG"),
                  b.createElement(
                    "div",
                    { className: xe().SectionDesc },
                    "Games must have one of these tags to participate",
                  ),
                  b.createElement(
                    "div",
                    { className: xe().Section },
                    b.createElement(We.ZP, {
                      isSearchable: !0,
                      isMulti: !0,
                      onChange: t.OnChangeRequiredTags,
                      value: t.GetRequiredTags(),
                      options: t.GetGameTagOptions(),
                    }),
                    b.createElement("br", null),
                    b.createElement("br", null),
                    b.createElement(
                      "div",
                      { className: xe().NarrowInputField },
                      b.createElement(j.II, {
                        type: "number",
                        min: "1",
                        max: "40",
                        label:
                          "Max Rank for the Apps Weighted Official Tag to Include",
                        tooltip:
                          "When comparing against the app list of official weighted tags; this is the largest rank to include. Default is 20 if not specified on the server.  Make sure 1) set field, 2) save opt in, 3) publish opt in, 4) refresh stats 5) ??? 6) Profit",
                        value: t.GetAppOfficialWeightedTagRankToInclude(),
                        onChange: (e) => {
                          const n =
                            Number.parseInt(e.currentTarget.value) || 20;
                          t.SetAppOfficialWeightedTagRankToInclude(n);
                        },
                      }),
                    ),
                  ),
                  b.createElement("h3", null, "LIMIT BY APP FEATURES"),
                  b.createElement(
                    "div",
                    { className: xe().SectionDesc },
                    "Games must have one of these features to participate",
                  ),
                  b.createElement(
                    "div",
                    { className: xe().Section },
                    b.createElement(j.ji, {
                      label: "Remote Play Together",
                      checked: t.BRequiresRemotePlayTogether(),
                      onChange: t.SetRequiresRemotePlayTogether,
                    }),
                    b.createElement(j.ji, {
                      label: "VR",
                      checked: t.BRequiresVR(),
                      onChange: t.SetRequiresVR,
                    }),
                  ),
                ),
              ),
            ),
        );
      });
      var Gt = n(73406);
      function Rt(e) {
        return e ? { label: (0, Gt.Sq)(e), value: "" + e } : null;
      }
      const Bt = (0, Ie.Pi)((e) => {
        const t = B.Get(),
          [n, a] = b.useState(t.BHasSpecialEventType()),
          [i, l] = b.useState(Rt(t.GetSpecialEventType())),
          o = {
            option: (e) =>
              Object.assign(Object.assign({}, e), { color: "#444444" }),
          },
          r = new Array();
        m.De.forEach((e) => r.push(Rt(e)));
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "h3",
            null,
            "Include Special Event Category for OptIn",
          ),
          b.createElement(
            "p",
            null,
            "If enabled, registered games have the ability to create events of the specified typed marked up using tags with this opt-in names. This allows sales page to automatically load those events in a carousel or a schedule widget.",
            b.createElement(
              "span",
              null,
              Boolean(n) &&
                b.createElement(
                  "span",
                  null,
                  " The following tag will be set on the associated events: ",
                  b.createElement("b", null, t.GetFullName()),
                ),
            ),
          ),
          n
            ? b.createElement(
                "div",
                { className: xe().IndentedSubSection },
                b.createElement(
                  "p",
                  null,
                  "This special event type will appear at the top of the category chooser for registered games. Please configure the name and info so partners know what this event is for.",
                ),
                b.createElement(
                  "p",
                  null,
                  b.createElement(
                    "a",
                    {
                      href: "https://confluence.valve.org/display/STEAM/Opt-In+Tech+Custom+Event+type",
                      target: "_blank",
                    },
                    "Learn more about this feature here.",
                  ),
                ),
                b.createElement(We.ZP, {
                  styles: o,
                  label: "Choose Type (Required):",
                  isSearchable: !0,
                  isMulti: !1,
                  placeholder: "Choose Event type",
                  onChange: (e) => {
                    l(e),
                      (null == e ? void 0 : e.value) &&
                        t.SetSpecialEventType(Number.parseInt(e.value));
                  },
                  value: i,
                  options: r,
                  defaultMenuIsOpen: !1,
                }),
                b.createElement("br", null),
                b.createElement(j.II, {
                  type: "text",
                  label: "Optional: Special Event Title:",
                  onChange: (e) => t.SetCurSpecialEventName(e.target.value),
                  value: t.GetCurSpecialEventName(),
                  tooltip:
                    "This appears on the partner events editor to describe the special event category. Assign if the opt-in name is not helpful when creating the event. Don't include the event type, it will be appended at the end, ie, News or Live Stream.",
                  placeholder: "Optional: Special Event Title Here",
                }),
                b.createElement("br", null),
                b.createElement(
                  "div",
                  null,
                  "Optional: Special Event Description:",
                ),
                b.createElement(Ae.R, {
                  fnGetCurText: t.GetCurSpecialEventDescription,
                  fnOnTextChange: (e) =>
                    t.SetCurSpecialEventDescription(e.currentTarget.value),
                  fnSetText: t.SetCurSpecialEventDescription,
                  strPlaceholder:
                    "Optional: Enter Special Event Description Here",
                  emoticonStore: be.F,
                  bSupportHTMLImport: !0,
                  showFormatHelp: "PartnerEvents",
                  classNameForTextArea: xe().EventBBCodeEditor,
                  limitBBCode: void 0,
                  nOverridesRows: 10,
                }),
                b.createElement("br", null),
                b.createElement(j.II, {
                  type: "text",
                  label: "Optional: Documentation Link:",
                  onChange: (e) => t.SetSpecialEventDocLink(e.target.value),
                  value: t.GetSpecialEventDocLink(),
                  tooltip:
                    "Ideally links directly to the part of the OptIn documentation that talks about the purpose of this event. Use an anchor to do this.",
                  placeholder: "Optional: Documentation Link Here",
                }),
                b.createElement(
                  "div",
                  { className: xe().NarrowInputField },
                  b.createElement(j.II, {
                    type: "number",
                    min: "0",
                    max: "40",
                    label: "Optional: Maximum amount of events per game",
                    onChange: (e) =>
                      t.SetSpecialEventTypeMax(Number.parseInt(e.target.value)),
                    value: t.GetSpecialEventTypeMax(),
                    tooltip:
                      "How many of these event type can a single game created? If set to zero, it means unlimited.",
                  }),
                ),
                b.createElement(Mt, null),
              )
            : b.createElement(j.ji, {
                label: "Enable Feature",
                checked: n,
                onChange: a,
              }),
        );
      });
      function Mt(e) {
        const t = B.Get(),
          [n, a] = b.useState(
            t.BHasSpecialEventTimeSet() || t.NCountSpecialEventBlocks() > 0,
          ),
          [i, l, o, r, s] = (0, Ve.SZ)(() => [
            t.GetEventStartTime(),
            t.GetEventEndTime(),
            t.GetSpecialEventStartTime(),
            t.GetSpecialEventEndTime(),
            t.GetAllSpecialEventBlocks(),
          ]);
        return n
          ? b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "p",
                null,
                "Optional: Further restrict the event scheduling between these following two times. By restricting the schedule\tit allows the event organizer to run official streams that will take priority and letting partners avoid scheduling their events at those time.",
              ),
              b.createElement(Ke.A, {
                strDescription: "Special Event Scheduling Start Date and Time",
                nEarliestTime: i,
                nLatestTime: l,
                fnGetTimeToUpdate: () => o,
                fnSetTimeToUpdate: t.SetSpecialEventStartTime,
                fnIsValidDateTime: () => !0,
                bShowTimeZone: !0,
              }),
              b.createElement(Ke.A, {
                strDescription: "Special Event Scheduling End Date and Time",
                nEarliestTime: i,
                nLatestTime: l,
                fnGetTimeToUpdate: () => r,
                fnSetTimeToUpdate: t.SetSpecialEventEndTime,
                fnIsValidDateTime: () => !0,
                bShowTimeZone: !0,
              }),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement(
                "p",
                null,
                "Optional: Add one ore more additional event scheduling restrictions. For instance, we plan to have official replace or broadcasts are different points of the events that are not strictly at the start or end of the event. Alternatively, we want to prevents partners from scheduling their live streams during the common hours related to Steam prop and suffer from their stream interruptions.",
              ),
              b.createElement(Te.R, {
                items: s,
                onDelete: (e) => t.RemoveSpecialEventBlock(e),
                onMove: (e, n) => t.MoveSpecialEventblock(e, n),
                render: (e) => {
                  const t = e,
                    n = s.findIndex((e) => e == t);
                  return b.createElement(Pt, {
                    key:
                      "rtime" +
                      n +
                      "_" +
                      (null == t ? void 0 : t.block_rt_start),
                    block: t,
                  });
                },
                onEdit: (e, t) =>
                  (0, W.AM)(
                    b.createElement(Ft, { blockIndex: e }),
                    (0, K.RA)(t),
                  ),
              }),
              b.createElement(
                j.zx,
                { onClick: () => t.AddSpecialEventBlock() },
                "Add a Special Event Blocked from Scheduling Time Range",
              ),
              b.createElement("br", null),
              b.createElement("br", null),
            )
          : b.createElement(j.ji, {
              label: "Optional: Limit Event Schedule Time",
              checked: n,
              onChange: a,
            });
      }
      function Pt(e) {
        const { block: t } = e,
          [n, a, i, l] = (0, Ve.SZ)(() => [
            t.block_rt_start,
            t.block_rt_end,
            t.block_reason,
            t.internal_reason,
          ]);
        return t && t.block_rt_start && t.block_rt_end
          ? b.createElement(
              "div",
              null,
              b.createElement("span", null, "Blocked time: "),
              b.createElement(V.Ai, { startDateAndTime: n, endDateAndTime: a }),
              Boolean(l) && b.createElement("div", null, "Interal Reason: ", l),
              Boolean(i) &&
                b.createElement(
                  "div",
                  null,
                  "Has Localizable User Facing Reason",
                ),
            )
          : b.createElement(
              "div",
              null,
              "Error: Block Time not setup. Please edit",
            );
      }
      function Ft(e) {
        const { blockIndex: t, closeModal: n } = e,
          a = B.Get(),
          [i, l] = (0, b.useState)(a.GetAllSpecialEventBlocks()[t]),
          [o, r, c] = (0, Ve.SZ)(() => [
            a.GetEventStartTime(),
            a.GetEventEndTime(),
            p.U.Get().GetCurEditLanguage(),
          ]),
          d = (0, m.j_)(c),
          u = (e) => (i.block_reason[d] = e);
        return b.createElement(
          he.uH,
          {
            strTitle: "Edit Special Event Schedule Block Range",
            strDescription:
              "Additional times when a partner cannot schedule their special event because we have blocked it out",
            bAllowFullSize: !0,
            bDisableBackgroundDismiss: !0,
            onOK: () => {
              a.SetSpecialEventBlock(t, i) ||
                console.log(
                  "Failed to save special event block, requiring debugging, ",
                  t,
                );
            },
            closeModal: n,
          },
          b.createElement(Ke.A, {
            strDescription: "Blocked Out Scheduling Start Date and Time",
            nEarliestTime: o,
            nLatestTime: r,
            fnGetTimeToUpdate: () => i.block_rt_start,
            fnSetTimeToUpdate: (e) =>
              l(Object.assign(Object.assign({}, i), { block_rt_start: e })),
            fnIsValidDateTime: () =>
              (i.block_rt_start && !i.block_rt_end) ||
              i.block_rt_start < i.block_rt_end,
            bShowTimeZone: !0,
          }),
          b.createElement(Ke.A, {
            strDescription: "Blocked Out Scheduling End Date and Time",
            nEarliestTime: o,
            nLatestTime: r,
            fnGetTimeToUpdate: () => i.block_rt_end,
            fnSetTimeToUpdate: (e) =>
              l(Object.assign(Object.assign({}, i), { block_rt_end: e })),
            fnIsValidDateTime: () =>
              (i.block_rt_end && !i.block_rt_start) ||
              i.block_rt_start < i.block_rt_end,
            bShowTimeZone: !0,
          }),
          b.createElement(j.II, {
            type: "text",
            label: "Internal Reason",
            value: i.internal_reason || "",
            onChange: (e) =>
              l(
                Object.assign(Object.assign({}, i), {
                  internal_reason: e.currentTarget.value,
                }),
              ),
            placeholder: "Optional: Reason visible only to us",
          }),
          b.createElement(
            "div",
            null,
            "Optional: Blocking Schedule Localized Reason visible to Partner Event Editors:",
          ),
          b.createElement(Ae.R, {
            fnGetCurText: () => (0, s.pM)(i.block_reason, c, ""),
            fnOnTextChange: (e) => u(e.currentTarget.value),
            fnSetText: u,
            strPlaceholder:
              "Optional: Enter Schedule block description here; shorter concise reason preferred.",
            emoticonStore: be.F,
            bSupportHTMLImport: !0,
            showFormatHelp: "PartnerEvents",
            classNameForTextArea: xe().EventBBCodeEditor,
            limitBBCode: void 0,
            nOverridesRows: 10,
          }),
          b.createElement("br", null),
        );
      }
      function Ut(e) {
        const t = B.Get(),
          [n, a, i] = (0, Ve.SZ)(() => [
            t.GetName(),
            t.GetFullName(),
            t.BIsOptInEnabled(),
          ]),
          l =
            N.De.PARTNER_BASE_URL +
            "admin/store/page/" +
            a +
            "?activetab=tab_publish";
        return b.createElement(
          "div",
          { className: Ze().AdminPageCtn },
          b.createElement(
            "div",
            { className: Ze().PageTitle },
            "OptIn Admin Editing: ",
            n,
          ),
          b.createElement("hr", null),
          b.createElement(
            "div",
            { className: Ze().ColumnCtn },
            b.createElement(
              "div",
              { className: Ze().LeftCol },
              b.createElement(jt, null),
              b.createElement(qt, null),
              b.createElement(Ot, null),
              b.createElement(Xt, null),
              b.createElement(Ge, null),
              b.createElement(zt, null),
              b.createElement(Ht, null),
              b.createElement(Vt, null),
              b.createElement(ct, null),
              b.createElement(Wt, null),
            ),
            b.createElement(
              "div",
              { className: Ze().RightCol },
              b.createElement(
                "div",
                { className: Ze().SectionCtn },
                b.createElement(
                  "div",
                  { className: xe().SectionDesc },
                  "When you are ready to start accepting opt-ins from eligible games that meet the criteria you've defined, check the box below. You will then need to follow the path to publish this event in order to make it public.",
                ),
                b.createElement("br", null),
                Boolean(i) &&
                  b.createElement(
                    b.Fragment,
                    null,
                    b.createElement(
                      "div",
                      { className: xe().SectionDesc },
                      "Note: Since this OptIn is enabled for partner, after each text or localization update, please remember to Publish.  Publishing is required for the updated text to appear to partners.",
                    ),
                    b.createElement("br", null),
                  ),
                b.createElement(j.ji, {
                  label: "Enable Partners to opt-in",
                  checked: i,
                  onChange: t.SetOptInEnabled,
                }),
                b.createElement(
                  "a",
                  { href: l, className: (0, Z.Z)(H().Button, H().Primary) },
                  "Go Publish",
                ),
              ),
            ),
          ),
        );
      }
      const jt = (0, Ie.Pi)((e) => {
          const t = B.Get();
          return b.createElement(
            Oe.ug,
            { title: "Basic Event Info", bStartMinimized: !1 },
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement("h3", null, "Event Title:"),
              b.createElement(j.II, {
                type: "text",
                onChange: (e) => t.SetCurEventTitle(e.target.value),
                value: t.GetCurEventTitle(),
                placeholder: "Enter Title Here",
                className: H().LargeInput,
              }),
              b.createElement("br", null),
              b.createElement("h3", null, "Event Description:"),
              b.createElement(
                "p",
                null,
                "This section appears at the top of the opt-in page and is used for telling potential participants what the event is all about",
              ),
              b.createElement(Ae.R, {
                fnGetCurText: t.GetCurDescription,
                fnOnTextChange: (e) =>
                  t.SetCurDescription(e.currentTarget.value),
                fnSetText: t.SetCurDescription,
                strPlaceholder: "Enter Description Here",
                emoticonStore: be.F,
                bSupportHTMLImport: !0,
                showFormatHelp: "PartnerEvents",
                classNameForTextArea: xe().EventBBCodeEditor,
                limitBBCode: void 0,
                nOverridesRows: 10,
              }),
            ),
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement("h3", null, "Event Dates:"),
              b.createElement(
                "p",
                null,
                "Specify the dates of the actual event",
              ),
              b.createElement(Ke.A, {
                strDescription: "Event Start Date and Time",
                nEarliestTime: 0,
                fnGetTimeToUpdate: () => t.GetEventStartTime(),
                fnSetTimeToUpdate: t.SetEventStartTime,
                fnIsValidDateTime: () => !0,
                bShowTimeZone: !0,
              }),
              b.createElement(Ke.A, {
                strDescription: "Event End Date and Time",
                nEarliestTime: 0,
                fnGetTimeToUpdate: () => t.GetEventEndTime(),
                fnSetTimeToUpdate: t.SetEventEndTime,
                fnIsValidDateTime: () => !0,
                bShowTimeZone: !0,
              }),
            ),
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement("h3", null, "Steamworks Documentation URL:"),
              b.createElement(
                "p",
                null,
                "Where in the Steamworks Documentation can partners learn about this festival and eligiblity criteria",
              ),
              b.createElement(j.II, {
                type: "text",
                onChange: (e) =>
                  t.SetPublicDocumentationWikiURL(e.target.value),
                value: t.GetPublicDocumentationWikiURL(),
                mustBeURL: !0,
                placeholder:
                  "For Example: https://partner.steamgames.com/doc/marketing/upcoming_events/themed_sales/<EVENT NAME>",
              }),
              b.createElement("h3", null, "Help Text:"),
              b.createElement(
                "p",
                null,
                "This section appears near the bottom of the opt-in page and is used for describing where participants can find more information.",
              ),
              b.createElement(Ae.R, {
                fnGetCurText: t.GetCurHelpText,
                fnOnTextChange: (e) => t.SetCurHelpText(e.currentTarget.value),
                fnSetText: t.SetCurHelpText,
                strPlaceholder: "Enter Help Text",
                emoticonStore: be.F,
                bSupportHTMLImport: !0,
                showFormatHelp: "PartnerEvents",
                classNameForTextArea: xe().EventBBCodeEditor,
                limitBBCode: void 0,
                nOverridesRows: 10,
              }),
            ),
            b.createElement(at, null),
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement("h3", null, "Categorization & Stat Reporting:"),
              b.createElement(
                "p",
                null,
                "Allows the developer to view how their game is being categorized within the sale page. The event hosting the sale page must be publicly visible.",
              ),
              b.createElement(
                "ul",
                null,
                b.createElement(
                  "li",
                  null,
                  "Before the event start, this would be the developer preview sale pages. ",
                ),
                b.createElement(
                  "li",
                  null,
                  "Once the evnet is live, we should update this value to the actual sale page's clan event GID.",
                ),
              ),
              b.createElement(
                "p",
                null,
                "Our event stats will also be based on the apps included in this sale page.",
              ),
              b.createElement(j.II, {
                type: "text",
                onChange: (e) => t.SetPublicEventID(e.target.value),
                value: t.GetPublicEventID(),
                placeholder: "5196643638649256091",
              }),
            ),
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement(Bt, null),
            ),
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement("h3", null, "Public Content Hub / Sale URL:"),
              b.createElement(
                "p",
                null,
                "Relative URL (text after store.steampowered.com/) used by the point shop to link to the store event. This is used by the point shop event specific page to point back to the sale page.",
              ),
              b.createElement(j.II, {
                type: "text",
                onChange: (e) => t.SetPublicEventURL(e.target.value),
                value: t.GetPublicEventURL(),
                placeholder: "For Example: category/scream",
              }),
            ),
          );
        }),
        Xt = (0, Ie.Pi)((e) => {
          const t = B.Get();
          return b.createElement(
            b.Fragment,
            null,
            b.createElement(
              Oe.ug,
              { title: "Registration Options", bStartMinimized: !1 },
              b.createElement(
                "span",
                null,
                "Select the settings that should appear as part of the opt-in process",
              ),
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement("h3", null, "Categories"),
                b.createElement(
                  "p",
                  null,
                  "Ask developers to choose one or more categories that apply to their game. Most often used with Next Fest to put games in the right sections and tabs.",
                ),
                b.createElement(j.ji, {
                  label: "Show Categories",
                  checked: t.BIsCategoriesEnabled(),
                  onChange: t.SetCategoriesEnabled,
                }),
                b.createElement("hr", null),
                b.createElement(
                  "div",
                  {
                    className: (0, Z.Z)(
                      xe().IndentedSubSection,
                      t.BIsCategoriesEnabled() ? "" : xe().Disabled,
                    ),
                  },
                  b.createElement(j.ry, {
                    label: "Optional/Suggested/Required",
                    rgOptions: t.GetRequiredOptions(),
                    selectedOption: t.GetCategoriesRequired(),
                    onChange: (e) => t.SetCategoriesRequired(e.data),
                    contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
                  }),
                  b.createElement("span", null, "Visible Categories"),
                  b.createElement(We.ZP, {
                    isSearchable: !0,
                    isMulti: !0,
                    onChange: t.OnChangeCategoryTags,
                    value: t.GetCategoryTags(),
                    options: t.GetGameTagOptions(),
                  }),
                ),
              ),
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement("h3", null, "Press Contact Info"),
                b.createElement(
                  "p",
                  null,
                  "When enablesd, it will allow the partner to enter a primary contact name and email address for this game. It will inform them that we plan to use this information when contacting the press about the event with participating games. You can export the opt-in press contact in manage tab.",
                ),
                b.createElement(j.ji, {
                  label: "Collect Press Contact Info",
                  checked: t.BIsPressContactEnabled(),
                  onChange: t.SetPressContactEnabled,
                }),
                b.createElement("hr", null),
                b.createElement(
                  "div",
                  {
                    className: (0, Z.Z)(
                      xe().IndentedSubSection,
                      t.BIsPressContactEnabled() ? "" : xe().Disabled,
                    ),
                  },
                  b.createElement(j.ry, {
                    label: "Optional/Suggested/Required",
                    rgOptions: t.GetRequiredOptions(),
                    selectedOption: t.GetPressContactRequired(),
                    onChange: (e) => t.SetPressContactRequired(e.data),
                    contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
                  }),
                ),
              ),
            ),
            b.createElement(
              Oe.ug,
              { title: "Uncommon Registration Options", bStartMinimized: !0 },
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement("h3", null, "Artist Statement"),
                b.createElement(
                  "p",
                  null,
                  "Ask developers to provide an artist statement. This is presented as the following",
                ),
                b.createElement(
                  "p",
                  null,
                  b.createElement(
                    "i",
                    null,
                    '"Please also tell us a bit about yourself (or your team) and your game. Anything you think we should know that won\'t be obvious from your Steam appID such as awards your game has won or shows it has been included in? Unique story of your team or the project? Let us know here! Note: Your text here is for internal use at Valve only and will not be shown publicly."',
                  ),
                ),
                b.createElement(j.ji, {
                  label: "Artist Statement",
                  checked: t.BIsArtistStatementEnabled(),
                  onChange: t.SetArtistStatementEnabled,
                }),
                b.createElement(j.ry, {
                  label: "Optional/Suggested/Required",
                  rgOptions: t.GetRequiredOptions(),
                  selectedOption: t.GetArtistStatementRequired(),
                  onChange: (e) => t.SetArtistStatementRequired(e.data),
                  contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
                }),
              ),
              b.createElement(
                "div",
                { className: xe().Section },
                b.createElement("h3", null, "Primary Country"),
                b.createElement(
                  "p",
                  null,
                  "Ask developers to tell us what country they are primarily from. We haven't used this in a long time.",
                ),
                b.createElement(j.ji, {
                  label: "Ask developers to enter their Primary Country",
                  checked: t.BIsPrimaryCountryEnabled(),
                  onChange: t.SetPrimaryCountryEnabled,
                }),
                b.createElement(j.ry, {
                  label: "Optional/Suggested/Required",
                  rgOptions: t.GetRequiredOptions(),
                  selectedOption: t.GetPrimaryCountryRequired(),
                  onChange: (e) => t.SetPrimaryCountryRequired(e.data),
                  contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
                }),
              ),
            ),
          );
        }),
        zt = (0, Ie.Pi)((e) => {
          const t = B.Get();
          return b.createElement(
            Oe.ug,
            {
              title: "Tasks Required Prior To Registration",
              bStartMinimized: !1,
            },
            b.createElement(
              "div",
              { className: xe().Section },
              b.createElement(j.ji, {
                label: "Show this section to developers",
                checked: t.BIsBeforeYouOptInEnabled(),
                onChange: t.SetBeforeYouOptInEnabled,
              }),
              b.createElement("hr", null),
              b.createElement(
                "div",
                {
                  className: (0, Z.Z)(
                    xe().IndentedSubSection,
                    t.BIsBeforeYouOptInEnabled() ? "" : xe().Disabled,
                  ),
                },
                b.createElement("h3", null, "Build Your Store Page"),
                b.createElement(j.ji, {
                  label: "Remind devs to build their store page",
                  checked: t.BIsBuildYourStorePageEnabled(),
                  onChange: t.SetBuildYourStorePageEnabled,
                }),
                b.createElement(j.ry, {
                  label: "Optional/Suggested/Required",
                  rgOptions: t.GetRequiredOptions(),
                  selectedOption: t.GetBuildYourStorePageRequired(),
                  onChange: (e) => t.SetBuildYourStorePageRequired(e.data),
                  contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
                }),
                b.createElement(Ae.R, {
                  fnGetCurText: t.GetStorePageText,
                  fnOnTextChange: (e) =>
                    t.SetStorePageText(e.currentTarget.value),
                  fnSetText: t.SetStorePageText,
                  strPlaceholder:
                    "Describe any required guidelines for the store page such as screenshots, trailer, etc.",
                  emoticonStore: be.F,
                  bSupportHTMLImport: !0,
                  showFormatHelp: "PartnerEvents",
                  classNameForTextArea: xe().EventBBCodeEditor,
                  limitBBCode: void 0,
                  nOverridesRows: 10,
                }),
                b.createElement("h3", null, "Tagging Wizard"),
                b.createElement(j.ji, {
                  label: "Remind developers to use The Tagging Wizard",
                  checked: t.BIsTaggingWizardEnabled(),
                  onChange: t.SetTaggingWizardEnabled,
                }),
              ),
            ),
          );
        });
      function Ht(e) {
        const t = B.Get(),
          [n, a, i, l] = (0, Ve.SZ)(() => [
            t.BIsLaunchYourDemoEnabled(),
            t.GetRequiredOptions(),
            t.GetLaunchYourDemoRequired(),
            t.GetLaunchYourDemoDueDate(),
          ]);
        return b.createElement(
          Oe.ug,
          { title: "Tasks required to start", bStartMinimized: !1 },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "p",
              null,
              "These are sections that describe activities that developers need to do in order to be live within the festival.",
            ),
            b.createElement(j.ji, {
              label: "Show 'Launch your demo' section",
              checked: n,
              onChange: t.SetLaunchYourDemoEnabled,
            }),
            b.createElement("hr", null),
            b.createElement(
              "div",
              {
                className: (0, Z.Z)(
                  xe().IndentedSubSection,
                  n ? "" : xe().Disabled,
                ),
              },
              b.createElement(j.ry, {
                label: "Optional/Suggested/Required",
                rgOptions: a,
                selectedOption: i,
                onChange: (e) => t.SetLaunchYourDemoRequired(e.data),
                contextMenuPositionOptions: { bDisableMouseOverlay: !0 },
              }),
              b.createElement(Ke.A, {
                strDescription: "Due Date",
                nEarliestTime: 0,
                fnGetTimeToUpdate: () => l,
                fnSetTimeToUpdate: t.SetLaunchYourDemoDueDate,
                fnIsValidDateTime: () => !0,
                bShowTimeZone: !0,
              }),
            ),
          ),
        );
      }
      function Vt(e) {
        const t = B.Get(),
          [n, a, i, l, o, r] = (0, Ve.SZ)(() => [
            t.BIsDoAnytimeEnabled(),
            t.BIsLivestreamEnabled(),
            t.BIsChatSessionEnabled(),
            t.BIsAnytimeTaggingWizardEnabled(),
            t.BIsEnterDiscountsEnabled(),
            t.GetDiscountEventID(),
          ]);
        return b.createElement(
          Oe.ug,
          { title: "Tasks that can be done any time", bStartMinimized: !1 },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "p",
              null,
              "Show activities such as livestreaming, chat sessions, tagging wizard, and discounting that developers can do at any time to get more out of their participation in this event.",
            ),
            b.createElement(j.ji, {
              label: "Show This Section to Developers",
              checked: n,
              onChange: t.SetDoAnytimeEnabled,
            }),
            b.createElement("hr", null),
            b.createElement(
              "div",
              {
                className: (0, Z.Z)(
                  xe().IndentedSubSection,
                  Boolean(n) ? "" : xe().Disabled,
                ),
              },
              b.createElement(
                "h3",
                null,
                "This Event Will Feature Livestreams",
              ),
              b.createElement(j.ji, {
                label: "Developers can create livestream sessions",
                checked: a,
                onChange: t.SetLivestreamEnabled,
              }),
              b.createElement(
                "span",
                null,
                "Developers may schedule a 'livestream' type event during this sale and their stream will be prioritized in the broadcast player on the event landing page during their scheduled time.",
              ),
              b.createElement("br", null),
              b.createElement("h3", null, "This Event Will Feature Dev Chats"),
              b.createElement(j.ji, {
                label: "Developers can create chat session",
                checked: i,
                onChange: t.SetChatSessionEnabled,
              }),
              b.createElement(
                "span",
                null,
                "Developers may schedule a 'live chat' type event during this sale and their event will appear in the schedule on the event landing page.",
              ),
              b.createElement("br", null),
              b.createElement("h3", null, "Reminder to Update Store Tags"),
              b.createElement(j.ji, {
                label: "Remind developers to use the tagging wizard",
                checked: l,
                onChange: t.SetAnytimeTaggingWizardEnabled,
              }),
              b.createElement(
                "span",
                null,
                "Developers should make use of the tagging wizard to make sure players can find their game.",
              ),
              b.createElement("br", null),
              b.createElement("h3", null, "This Event features discounts"),
              b.createElement(j.ji, {
                label: "Remind developers to enter discounts",
                checked: o,
                onChange: t.SetEnterDiscountsEnabled,
              }),
              b.createElement(
                "span",
                null,
                "Developers are reminded to enter discounts for their game.",
              ),
              b.createElement("br", null),
              Boolean(o) &&
                b.createElement(j.II, {
                  type: "text",
                  label: "Enter Discount Event ID",
                  placeholder:
                    "For example: 7113, in the case of partner.steamgames.com/admin/editdiscountevent/7113",
                  tooltip: "Only requires the ID found at the end of the URL",
                  value: r,
                  onChange: (e) => {
                    var n;
                    return t.SetDiscountEventID(
                      (null === (n = null == e ? void 0 : e.currentTarget) ||
                      void 0 === n
                        ? void 0
                        : n.value) || "",
                    );
                  },
                }),
            ),
          ),
        );
      }
      function Wt(e) {
        const t = B.Get(),
          [n] = (0, Ve.SZ)(() => [t.BOptInRegistationOnlyShowSaveButton()]),
          [a, i] = (0, b.useState)(
            t.BHasOptInRegistrationTitleOrCheckbox() || n,
          ),
          [l, o] = (0, Ve.SZ)(() => [
            t.GetCurOptInRegistrationTitle(),
            t.GetCurOptInRegistrationCheckbox(),
          ]);
        return b.createElement(
          Oe.ug,
          { title: "Override Final Particiption Text", bStartMinimized: !1 },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "p",
              null,
              "The final part of the registration for the opt-in will have the following:",
            ),
            b.createElement(
              "p",
              null,
              b.createElement("b", null, "Default Title:"),
              " ",
              (0, me.Xx)("#OptIn_OptinOptionTitle"),
            ),
            b.createElement(
              "p",
              null,
              b.createElement("b", null, "Radio 1:"),
              " ",
              (0, me.Xx)(
                "#OptIn_Participate",
                "Game Name",
                t.GetCurEventTitle(),
              ),
            ),
            b.createElement(
              "p",
              null,
              b.createElement("b", null, "Radio 2:"),
              " ",
              (0, me.Xx)(
                "#OptIn_Participate_No",
                "Game Name",
                t.GetCurEventTitle(),
              ),
            ),
            b.createElement("br", null),
            a
              ? b.createElement(
                  "div",
                  null,
                  b.createElement(j.II, {
                    type: "text",
                    label: "OptIn Registration Title",
                    onChange: (e) =>
                      t.SetCurOptInRegistrationTitle(e.target.value),
                    value: l,
                    disabled: n,
                    placeholder: "Enter OptIn Registration Title Here",
                  }),
                  b.createElement(j.II, {
                    type: "text",
                    label: "OptIn Registration Checkbox",
                    tooltip:
                      "This version cannot dynamically insert the game name or the event name, it is just a localized string",
                    onChange: (e) =>
                      t.SetCurOptInRegistrationCheckbox(e.target.value),
                    value: o,
                    disabled: n,
                    placeholder: "Enter OptIn Registration Checkbox Here",
                  }),
                  b.createElement(j.ji, {
                    label: "Use the Save button as 'Opted In'",
                    tooltip:
                      "This hides the title and checkbox and only shows the save. When the save is pressed it is treated as opted in. Useful for when we are asking for permissions and not actualy looking for opt-in into a festival. Hitting means they are done.",
                    onChange: t.SetOptInRegistationOnlyShowSaveButton,
                    checked: n,
                  }),
                )
              : b.createElement(j.ji, {
                  label: "Override this final text?",
                  checked: a,
                  onChange: i,
                }),
          ),
        );
      }
      function qt(e) {
        var t;
        const n = B.Get(),
          [a, i] = (0, b.useState)(
            (null === (t = n.GetCurAppealsText()) || void 0 === t
              ? void 0
              : t.length) > 0,
          );
        return b.createElement(
          Oe.ug,
          { title: "Appeals Process", bStartMinimized: !1 },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "p",
              null,
              "To avoid tickets, we want to provide games that have been pruned out or not considered information about how we reviewed games for inclusion in the sale. This let them review our guidelines and then submit an appeal for us to review for their include.  Not all opt-in's need an appear process.",
            ),
            Boolean(a)
              ? b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "p",
                    null,
                    "Describe the eligibility criteria here for partners to see. They will see this when their game is not eligible and they can then consider whether they wish to start an appeal.",
                  ),
                  b.createElement(Ae.R, {
                    fnGetCurText: n.GetCurAppealsText,
                    fnOnTextChange: (e) =>
                      n.SetCurAppealsText(e.currentTarget.value),
                    fnSetText: n.SetCurAppealsText,
                    strPlaceholder: "Enter Appeals Text",
                    emoticonStore: be.F,
                    bSupportHTMLImport: !0,
                    showFormatHelp: "PartnerEvents",
                    classNameForTextArea: xe().EventBBCodeEditor,
                    limitBBCode: void 0,
                    nOverridesRows: 10,
                  }),
                )
              : b.createElement(
                  j.zx,
                  { onClick: () => i(!0) },
                  "Add Appeals Support",
                ),
          ),
        );
      }
      var Zt = n(99344),
        Kt = n(12990);
      function Yt(e) {
        const { tableRef: t } = e,
          n = (0, b.useCallback)(() => {
            let e = document.getElementById("filter-field"),
              n = document.getElementById("filter-type"),
              a = document.getElementById("filter-value");
            (e.value = ""),
              (n.value = ""),
              (a.value = ""),
              t.current.table.clearFilter();
          }, [t]),
          a = (0, b.useCallback)(() => {
            let e = document.getElementById("filter-field"),
              n = document.getElementById("filter-type"),
              a = document.getElementById("filter-value"),
              i = e.options[e.selectedIndex].value,
              l = -1 != n.selectedIndex ? n.options[n.selectedIndex].value : "";
            i && l && t.current.table.setFilter(i, l, a.value);
          }, [t]);
        return b.createElement(
          "div",
          null,
          "Field: ",
          b.createElement(
            "select",
            { id: "filter-field", onChange: a },
            b.createElement("option", null),
            b.createElement("option", { value: "app_name" }, "App Name"),
            b.createElement("option", { value: "tags" }, "Tags"),
          ),
          b.createElement("span", { style: { paddingLeft: "20px" } }, "Type:"),
          b.createElement(
            "select",
            { id: "filter-type", onChange: a },
            b.createElement("option", { value: "=" }, "="),
            b.createElement("option", { value: "like" }, "like"),
          ),
          b.createElement("span", { style: { paddingLeft: "20px" } }, "Value:"),
          b.createElement("input", {
            id: "filter-value",
            type: "text",
            placeholder: "value to filter",
            onKeyUp: a,
          }),
          b.createElement("span", { style: { paddingLeft: "20px" } }),
          b.createElement(
            "button",
            { id: "download-csv", onClick: n },
            "Clear",
          ),
        );
      }
      var Qt = n(20075);
      function $t(e) {
        const t = B.Get(),
          n = P(),
          [a, i] = (0, b.useState)(!1);
        return b.createElement(
          "div",
          { style: { width: "100%" } },
          b.createElement(
            "span",
            { className: e.ctnOverride || Qt.StatsCtn },
            "Refreshed:",
            Boolean(n && n.time_updated) &&
              b.createElement(V.H6, {
                dateAndTime: n.time_updated,
                bSingleLine: !0,
              }),
            b.createElement("br", null),
            "Eligible information is based on the published page",
            b.createElement("br", null),
            b.createElement(
              "span",
              { className: Qt.Warning },
              "Sales numbers are for Valve Admins only",
            ),
            b.createElement("br", null),
            b.createElement(
              j.zx,
              {
                id: "statsRefreshButton",
                onClick: () =>
                  (0, l.mG)(this, void 0, void 0, function* () {
                    i(!0), yield t.RefreshActiveStats(), i(!1);
                  }),
                style: { marginTop: "10px", float: "right", width: "120px" },
                disabled: a,
              },
              a ? "Refreshing..." : "Refresh Stats",
            ),
            b.createElement("br", null),
            b.createElement("br", null),
          ),
        );
      }
      var Jt = n(20614),
        en = n(1386);
      function tn(e) {
        const t = B.Get(),
          n = [
            { title: "App ID", field: "appid", formatter: en.L2, width: 80 },
            {
              title: "App Name",
              field: "app_name",
              formatter: en.IX,
              width: 250,
            },
            {
              title: "Is Released",
              field: "released",
              formatter: en.c8,
              width: 120,
            },
          ];
        return (
          t.BIsEnterDiscountsEnabled() &&
            n.push(
              {
                title: "Long Term Sales Rank",
                field: "long_term_sales_rank",
                formatter: en.AV,
                width: 80,
              },
              {
                title: "Discounts",
                field: "discount_info",
                formatter: en.sN,
                width: 450,
                variableHeight: !0,
              },
            ),
          n.push(
            {
              title: "Wishlists",
              field: "wishlists",
              formatter: en.AV,
              sorter: "number",
              width: 140,
            },
            {
              title: "Sales",
              field: "sales",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            {
              title: "DLC Sales",
              field: "sales_dlc",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            {
              title: "In Game Sales",
              field: "sales_in_game",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            { title: "Tags", field: "tags", width: 250 },
            {
              title: "Publisher ID",
              field: "publisherid",
              formatter: en.H,
              width: 120,
            },
          ),
          n
        );
      }
      function nn(e, t) {
        return Number.parseInt(t.sales) - Number.parseInt(e.sales);
      }
      function an(e, t) {
        const {
            oAllStats: n,
            mapAppToDiscountInfo: a,
            strDiscountEventID: i,
            rtEventStart: l,
            rtEventEnd: o,
          } = t,
          r = {
            nTotal: e.length || 0,
            nTopOptedIn: 0,
            nTopOptedOut: 0,
            nTopInvited: 0,
            nTopWithOverlappingDiscount: 0,
            nTopWithOfficialDiscount: 0,
            nTopFree: 0,
            nTopComingSoon: 0,
          };
        return (
          e.forEach((e) => {
            var t, s;
            n.setOptedIn.has(e.appid) && (r.nTopOptedIn += 1),
              n.setOptedOut.has(e.appid) && (r.nTopOptedOut += 1),
              n.setInvited.has(e.appid) && (r.nTopInvited += 1);
            const c = null == a ? void 0 : a.get(e.appid);
            c &&
              (c.is_free && (r.nTopFree += 1),
              c.is_coming_soon && (r.nTopComingSoon += 1),
              i &&
                (null === (t = c.discounts) || void 0 === t
                  ? void 0
                  : t.find((e) => e.discountEventID == i)) &&
                (r.nTopWithOfficialDiscount += 1),
              (null === (s = c.discounts) || void 0 === s
                ? void 0
                : s.some((e) => e.rtStartDate < o && e.rtEndDate > l)) &&
                (r.nTopWithOverlappingDiscount += 1));
          }),
          r
        );
      }
      function ln(e) {
        const { rgOverviewList: t } = e,
          [n, a] = (0, b.useMemo)(
            () => [an(t.sort(nn).slice(0, 100), e), an(t, e)],
            [e, t],
          );
        return e.mapAppToDiscountInfo
          ? b.createElement(
              Oe.ug,
              {
                title: "OptIn Participation Stats",
                tooltip:
                  "Shows the stats for the top 100 and all games invited/optin/opted out for a themed sale. Ignores the eligible games",
                bStartMinimized: !1,
              },
              b.createElement(
                "table",
                { className: xe().StatsCtn },
                b.createElement(
                  "tr",
                  null,
                  b.createElement("th", null),
                  b.createElement("th", { colSpan: 4 }, "Action Taken:"),
                  b.createElement("th", { colSpan: 3 }, "Discounts:"),
                ),
                b.createElement(
                  "tr",
                  null,
                  b.createElement("th", null),
                  b.createElement("th", null, "Total"),
                  b.createElement("th", null, "Opt In"),
                  b.createElement("th", null, "Opt Out"),
                  b.createElement("th", null, "Invited"),
                  b.createElement("th", null, "All"),
                  b.createElement("th", null, "Official Discount Event"),
                  b.createElement("th", null, "Any overlapping Discount"),
                ),
                b.createElement(
                  "tr",
                  null,
                  b.createElement("td", null, "Top Hundred:"),
                  b.createElement(on, { oCalc: n }),
                ),
                b.createElement(
                  "tr",
                  null,
                  b.createElement("td", null, "All Games:"),
                  b.createElement(on, { oCalc: a }),
                ),
              ),
            )
          : b.createElement(de.V, {
              string: "Loading Stats",
              size: "medium",
              position: "center",
            });
      }
      function on(e) {
        const { oCalc: t } = e;
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "td",
            null,
            t.nTopOptedIn + t.nTopOptedOut + t.nTopInvited,
          ),
          b.createElement("td", null, t.nTopOptedIn),
          b.createElement("td", null, t.nTopOptedOut),
          b.createElement("td", null, t.nTopInvited),
          b.createElement(
            "td",
            null,
            t.nTopWithOverlappingDiscount + t.nTopWithOfficialDiscount,
          ),
          b.createElement("td", null, t.nTopWithOfficialDiscount),
          b.createElement("td", null, t.nTopWithOverlappingDiscount),
        );
      }
      class rn {
        GetOptInDemoApps(e, t) {
          return this.m_mapAppToDemoAppID.get(this.ConvertToKey(e, t));
        }
        BHasLoaded(e, t) {
          return this.m_mapAppToDemoAppID.has(this.ConvertToKey(e, t));
        }
        GetLoadCallback(e, t) {
          const n = this.ConvertToKey(e, t);
          return (
            this.m_mapLoadCallback.has(n) ||
              this.m_mapLoadCallback.set(n, new w.pB()),
            this.m_mapLoadCallback.get(n)
          );
        }
        ConvertToKey(e, t) {
          return (
            e +
            (null == t ? void 0 : t.section_id) +
            (null == t ? void 0 : t.list_id) +
            (null == t ? void 0 : t.option_id)
          );
        }
        LoadAppWithDemoAppIDs(e, t) {
          return (0, l.mG)(this, void 0, void 0, function* () {
            const n = this.ConvertToKey(e, t);
            return (
              this.m_mapPromises.has(n) ||
                this.m_mapPromises.set(
                  n,
                  this.InternalLoadAppWithDemoAppIDs(e, t),
                ),
              this.m_mapPromises.get(n)
            );
          });
        }
        InternalLoadAppWithDemoAppIDs(e, t) {
          var n, a;
          return (0, l.mG)(this, void 0, void 0, function* () {
            const i = new Map(),
              l = this.ConvertToKey(e, t);
            if (this.m_mapAppToDemoAppID.has(l))
              return this.m_mapAppToDemoAppID.get(l);
            try {
              const o = { sessionid: N.De.SESSIONID, optInName: e },
                s = N.De.PARTNER_BASE_URL + "optin/ajaxgetoptinappwithdemoid",
                c = yield r().get(s, { params: o, withCredentials: !0 });
              if (
                200 == (null == c ? void 0 : c.status) &&
                (null === (n = null == c ? void 0 : c.data) || void 0 === n
                  ? void 0
                  : n.success) == A.s.k_EResultOK
              )
                null === (a = c.data.app_with_demos) ||
                  void 0 === a ||
                  a.forEach((e) => {
                    i.set(e.appid, e);
                  }),
                  this.m_mapAppToDemoAppID.set(l, i),
                  this.GetLoadCallback(e, t).Dispatch(i);
              else {
                const e = (0, k.l)(c);
                console.error(
                  "function GetAppWithDemoAppIDs: error message received with " +
                    e.strErrorMsg,
                  e,
                );
              }
            } catch (e) {
              const t = (0, k.l)(e);
              console.error(
                "function GetAppWithDemoAppIDs: failed with " + t.strErrorMsg,
                t,
              );
            }
            return i;
          });
        }
        static Get() {
          return (
            rn.s_Singleton ||
              ((rn.s_Singleton = new rn()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInDemoAppStores = rn.s_Singleton)),
            rn.s_Singleton
          );
        }
        constructor() {
          (this.m_mapAppToDemoAppID = new Map()),
            (this.m_mapPromises = new Map()),
            (this.m_mapLoadCallback = new Map());
        }
      }
      function sn(e) {
        const { tableRef: t, mapAppToDiscountInfo: n, oAllStats: a } = e,
          i = B.Get(),
          { jsonFeatured: l } = a,
          [o, r, s] = (0, Ve.SZ)(() => [
            i.BIsAdditionalFeaturingSectionEnabled() &&
              i.BIsCollectTrailerPermissions(),
            i.BIsAdditionalFeaturingSectionEnabled() &&
              i.BIsCollectDemoPermissions(),
            i.BIsAdditionalFeaturingSectionEnabled() &&
              i.BIsCollectGameProfileIntent(),
          ]),
          c = (function (e, t) {
            const [n, a] = (0, b.useState)(rn.Get().GetOptInDemoApps(e));
            return (
              (0, b.useEffect)(() => {
                t &&
                  !rn.Get().BHasLoaded(e) &&
                  rn.Get().LoadAppWithDemoAppIDs(e);
              }, [e, t]),
              (0, _.Qg)(rn.Get().GetLoadCallback(e), a),
              n
            );
          })(
            (0, Ve.SZ)(() => i.GetOptInPageID()),
            r,
          ),
          m = (0, b.useMemo)(() => l.map((e) => e.appid), [l]),
          d = (0, ut.QQ)(i.GetOptInPageID(), m),
          p = (0, b.useMemo)(
            () =>
              l && d
                ? l.map((e) => {
                    var t, n, a, i, l, o;
                    if (d) {
                      const r = d.get(e.appid);
                      r &&
                        ((e.opt_in = r.opt_in),
                        (e.trailers_opt_in = Boolean(
                          (null === (t = r.jsondata) || void 0 === t
                            ? void 0
                            : t.trailer_permission) &&
                            (null === (n = r.jsondata) || void 0 === n
                              ? void 0
                              : n.rtime_granting_trailer),
                        )),
                        (e.demo_opt_in = Boolean(
                          (null === (a = r.jsondata) || void 0 === a
                            ? void 0
                            : a.demo_permission) &&
                            (null === (i = r.jsondata) || void 0 === i
                              ? void 0
                              : i.rtime_granting_demo),
                        )),
                        (e.game_profile_intent = Boolean(
                          (null === (l = r.jsondata) || void 0 === l
                            ? void 0
                            : l.game_profile_intent) &&
                            (null === (o = r.jsondata) || void 0 === o
                              ? void 0
                              : o.rtime_granting_profile),
                        )),
                        (e.store_url = `${N.De.STORE_BASE_URL}app/${e.appid}`));
                    }
                    if (c) {
                      const t = c.get(e.appid);
                      t &&
                        (t.is_demo_released
                          ? (e.demo_state = "Released")
                          : t.is_build_reviewed
                          ? (e.demo_state = "Approved")
                          : (e.demo_state = "No Demo"));
                    }
                    return e;
                  })
                : null,
            [l, d, c],
          );
        if (!d || !p || (r && !c))
          return b.createElement(de.V, {
            string: (0, me.Xx)("#Loading"),
            position: "center",
            size: "medium",
          });
        const u =
            N.De.PARTNER_BASE_URL + "optin/sale/" + i.GetOptInPageID() + "/",
          h = [
            {
              title: "Opted In",
              field: "opt_in",
              formatter: en.KF,
              width: 50,
              formatterParams: u,
            },
            ...tn(),
          ];
        o &&
          h.push({
            title: "Trailer OptIn",
            field: "trailers_opt_in",
            formatter: en.Xv,
            width: 50,
          }),
          r &&
            h.push(
              {
                title: "Demo OptIn",
                field: "demo_opt_in",
                formatter: en.Xv,
                width: 50,
              },
              {
                title: "Demo State",
                field: "demo_state",
                formatter: en.T6,
                width: 100,
              },
            ),
          s &&
            h.push({
              title: "Game Profile OptIn",
              field: "game_profile_intent",
              formatter: en.Xv,
              width: 50,
            }),
          h.push({ title: "Store URL", field: "store_url", width: 350 });
        const g = (0, en.n_)();
        return b.createElement(
          X.SV,
          null,
          b.createElement(Jt.ReactTabulator, {
            ref: t,
            columns: h,
            data: p,
            options: g,
          }),
          b.createElement("br", null),
        );
      }
      function cn(e) {
        const {
            tableRef: t,
            bSomeEmailSent: n,
            mapAppToDiscountInfo: a,
            oAllStats: i,
          } = e,
          l = B.Get(),
          o = P(),
          [r, s, c, m] = (0, Ve.SZ)(() => [
            l.GetEventStartTime(),
            l.GetEventEndTime(),
            l.BIsInvitationOnly(),
            l.GetDiscountEventID(),
          ]),
          {
            jsonEligible: d,
            jsonOptedIn: p,
            jsonOptedOut: u,
            jsonInvited: _,
            jsonPruned: h,
            jsonPendingReview: g,
          } = i,
          E = tn(),
          v = [
            { title: "App ID", field: "appid", formatter: en.L2, width: 80 },
            {
              title: "App Name",
              field: "app_name",
              formatter: en.IX,
              width: 250,
            },
            {
              title: "Is Released",
              field: "released",
              formatter: en.c8,
              width: 120,
            },
            {
              title: "Wishlists",
              field: "wishlists",
              formatter: en.AV,
              sorter: "number",
              width: 140,
            },
            {
              title: "Sales",
              field: "sales",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            {
              title: "DLC Sales",
              field: "sales_dlc",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            {
              title: "In Game Sales",
              field: "sales_in_game",
              formatter: "money",
              formatterParams: { precision: !1, symbol: "$" },
              width: 150,
            },
            { title: "Tags", field: "tags", width: 250 },
            {
              title: "Publisher IDs",
              field: "publishers",
              formatter: en.H,
              width: 120,
            },
          ],
          S = (0, en.n_)(),
          f = [];
        if (n && c) {
          if (n) {
            const e = o
                ? o.count_opted_in + o.count_opted_out + o.count_invited
                : 0,
              n = [...E];
            n.unshift({
              title: "State",
              field: "appid",
              formatter: en.oC,
              width: 120,
              formatterParams: i,
            });
            const l = [...p, ...u, ..._];
            f.push({
              name: o ? `Overview (${e})` : "Overview",
              key: "overview",
              status: "",
              statusType: "success",
              tooltip:
                "Shows a single table with all of the opted in, opted out and invited apps",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(ln, {
                  rgOverviewList: l,
                  oAllStats: i,
                  mapAppToDiscountInfo: a,
                  strDiscountEventID: m,
                  rtEventStart: r,
                  rtEventEnd: s,
                }),
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: n,
                  data: l,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            });
          }
        } else
          f.push({
            name: o
              ? "Eligible via OptIn Def (" + o.count_eligible + ")"
              : "Eligible via OptIn Def",
            key: "eligible",
            status: "",
            statusType: "success",
            tooltip:
              "Automatically hides when invitation only mode and we have already sent some email.",
            contents: b.createElement(
              X.SV,
              null,
              b.createElement(Jt.ReactTabulator, {
                ref: t,
                columns: v,
                data: d,
                options: S,
              }),
              b.createElement("br", null),
            ),
          });
        const D = n ? "Invited Apps" : "Pending Invite";
        return (
          f.push(
            {
              name: o ? "Opted In (" + o.count_opted_in + ")" : "Opted In",
              key: "manage&section=optedin",
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: E,
                  data: p,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            },
            {
              name: o ? "Opted Out (" + o.count_opted_out + ")" : "Opted Out",
              key: "manage&section=optedout",
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: E,
                  data: u,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            },
            {
              name: o ? D + " (" + o.count_invited + ")" : D,
              key: "manage&section=invited",
              tooltip:
                "This only includes invited apps that haven't sinced opted out or opted in.",
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: E,
                  data: _,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            },
            {
              name: o
                ? "Pending Review Apps (" + o.count_pending_review + ")"
                : "Pending Review Apps",
              key: "manage&section=pending_review",
              tooltip:
                "IApps that are candidates of the App review process. They can be invited or pruned out.",
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: E,
                  data: g,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            },
            {
              name: o
                ? "Pruned Out Apps (" + o.count_pruned + ")"
                : "Pruned Apps",
              key: "manage&section=pruned",
              tooltip:
                "Invited apps which we reviewed and then pruned from the list as they don't closely match the events theme.",
              status: "",
              statusType: "success",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(Jt.ReactTabulator, {
                  ref: t,
                  columns: E,
                  data: h,
                  options: S,
                }),
                b.createElement("br", null),
              ),
            },
            {
              name: o
                ? "Featured Apps (" + o.count_featured + ")"
                : "Featured Apps",
              key: "manage&section=featured",
              status: "",
              statusType: "success",
              contents: b.createElement(sn, Object.assign({}, e)),
            },
          ),
          b.createElement(te.n, { tabs: f, bDisableRouting: !0 })
        );
      }
      (0, l.gn)([c.LO], rn.prototype, "m_mapAppToDemoAppID", void 0);
      var mn = n(25508);
      class dn {
        FetchAllEligibleOptInApps(e) {
          var t;
          return (0, l.mG)(this, void 0, void 0, function* () {
            const n =
                N.De.PARTNER_BASE_URL + "optin/ajaxgetalleligibleoptinapps",
              a = { sessionid: N.De.SESSIONID, opt_in_name: e },
              i = yield r().get(n, { params: a, withCredentials: !0 });
            return null === (t = null == i ? void 0 : i.data) || void 0 === t
              ? void 0
              : t.data;
          });
        }
        static Get() {
          return dn.s_Singleton || (dn.s_Singleton = new dn()), dn.s_Singleton;
        }
        constructor() {}
      }
      function pn(e) {
        var t, n, a, i, o, r;
        const s = (0, ae.useQuery)(
            ["useAllEligibleOptInApps", e],
            () =>
              (0, l.mG)(this, void 0, void 0, function* () {
                return yield dn.Get().FetchAllEligibleOptInApps(e);
              }),
            { staleTime: 60 * mn._H.PerMinute * 1e3 },
          ),
          c = (0, b.useMemo)(() => {
            var e, t, n, a, i, l;
            return s.isLoading
              ? null
              : {
                  eligible_appids: new Set(
                    (null === (e = s.data) || void 0 === e
                      ? void 0
                      : e.eligible_appids) || [],
                  ),
                  opted_in_appids: new Set(
                    (null === (t = s.data) || void 0 === t
                      ? void 0
                      : t.opted_in_appids) || [],
                  ),
                  opted_out_appids: new Set(
                    (null === (n = s.data) || void 0 === n
                      ? void 0
                      : n.opted_out_appids) || [],
                  ),
                  invited_appids: new Set(
                    (null === (a = s.data) || void 0 === a
                      ? void 0
                      : a.invited_appids) || [],
                  ),
                  pruned_appids: new Set(
                    (null === (i = s.data) || void 0 === i
                      ? void 0
                      : i.pruned_appids) || [],
                  ),
                  featured_appids: new Set(
                    (null === (l = s.data) || void 0 === l
                      ? void 0
                      : l.featured_appids) || [],
                  ),
                };
          }, [
            null === (t = s.data) || void 0 === t ? void 0 : t.eligible_appids,
            null === (n = s.data) || void 0 === n ? void 0 : n.featured_appids,
            null === (a = s.data) || void 0 === a ? void 0 : a.invited_appids,
            null === (i = s.data) || void 0 === i ? void 0 : i.opted_in_appids,
            null === (o = s.data) || void 0 === o ? void 0 : o.opted_out_appids,
            null === (r = s.data) || void 0 === r ? void 0 : r.pruned_appids,
            s.isLoading,
          ]);
        return s.isLoading || !c ? null : c;
      }
      var un = n(72120);
      const _n = (e) => {
        const t = B.Get(),
          n = (0, b.useRef)(null),
          [a, i] = b.useState("Demo Package " + t.GetFullName()),
          [o, s] = b.useState(void 0),
          [c, m] = b.useState(void 0),
          [d, p] = b.useState(void 0),
          [u, _] = b.useState(void 0);
        b.useEffect(
          () => () =>
            n.current &&
            n.current("DialogChoosePackageNameAndDynamicSetting: unmounting"),
          [],
        );
        return u
          ? b.createElement(he.uH, {
              strTitle: "Create Demo Package",
              strDescription:
                "Package succesfully created and opt-in definition updated.",
              onOK: e.closeModal && e.closeModal,
              onCancel: e.closeModal && e.closeModal,
              bAlertDialog: !0,
            })
          : b.createElement(
              he.uH,
              {
                strTitle: "Create Demo Package",
                strDescription:
                  "Choose a package name. We will create a package with release override for 'Featured' Apps who have approved or released demos and that have opted in for us to be able use their demos.",
                onOK: () =>
                  (0, l.mG)(void 0, void 0, void 0, function* () {
                    var e;
                    m(!0);
                    const i = r().CancelToken.source();
                    n.current = i.cancel;
                    try {
                      const n = new FormData();
                      n.append("sessionid", N.De.SESSIONID),
                        n.append("optInName", t.GetFullName()),
                        n.append("packageName", a);
                      const l =
                          N.De.PARTNER_BASE_URL + "optin/ajaxcreatedemopackage",
                        o = yield r().post(l, n, {
                          withCredentials: !0,
                          cancelToken: i.token,
                        });
                      if (
                        200 == (null == o ? void 0 : o.status) &&
                        (null === (e = o.data) || void 0 === e
                          ? void 0
                          : e.success) == A.s.k_EResultOK &&
                        o.data.packageid >= 0 &&
                        !i.token.reason
                      ) {
                        t.AddDemoPackage({
                          packageid: o.data.packageid,
                          rtimecreated: Math.floor(Date.now() / 1e3),
                        });
                        const e = yield t.Save(i.token);
                        Boolean(e) && !i.token.reason ? s(e) : _(!0);
                      } else
                        i.token.reason ||
                          s(
                            "Create Package Failed: " +
                              (null == o ? void 0 : o.status) +
                              " " +
                              (null == o ? void 0 : o.statusText),
                          );
                    } catch (e) {
                      const t = (0, k.l)(e),
                        n =
                          "DialogChoosePackageNameAndDynamicSetting error: " +
                          t.strErrorMsg;
                      console.error(n, t), i.token.reason || s(n);
                    } finally {
                      i.token.reason || m(!1);
                    }
                  }),
                bOKDisabled: 0 == a.trim().length || void 0 !== c,
                onCancel: e.closeModal,
              },
              b.createElement("br", null),
              b.createElement(j.II, {
                type: "text",
                label: "Package Name",
                tooltip:
                  "Public name of the package; please give a thoughtful and easy to search name",
                value: a,
                onChange: (e) => i(e.currentTarget.value),
              }),
              Boolean(c) &&
                b.createElement(de.V, {
                  string: d
                    ? "Package Created, Saving Model"
                    : "Creating Package in Progress",
                  size: "medium",
                  position: "center",
                }),
              Boolean(o) &&
                b.createElement(
                  "div",
                  { className: Ee.ErrorStylesBackground },
                  o,
                ),
            );
      };
      function hn(e, t) {
        const n = B.Get(),
          a = new Array();
        return (
          n.GetDynamicSections().forEach((n) => {
            (e && !e.includes(n.input_style)) ||
              n.lists.forEach((e) => {
                t
                  ? a.push({
                      value: n.unique_id + "|" + e.unique_id,
                      label: e.option_title
                        ? e.option_title.english
                        : n.name.english,
                    })
                  : e.options.forEach((t) => {
                      a.push({
                        value:
                          n.unique_id + "|" + e.unique_id + "|" + t.unique_id,
                        label: t.text.english,
                      });
                    });
              });
          }),
          a
        );
      }
      const gn = (e) => {
          const t = {
              option: (e) =>
                Object.assign(Object.assign({}, e), { color: "#444444" }),
            },
            n = hn(e.rgInputType);
          return b.createElement(
            b.Fragment,
            null,
            Boolean(e.label) && b.createElement("div", null, e.label),
            b.createElement(We.ZP, {
              styles: t,
              isSearchable: !0,
              isMulti: !1,
              placeholder: "Choose One",
              onChange: e.fnChoiceMade,
              value: e.selected,
              options: n,
              defaultMenuIsOpen: !1,
            }),
          );
        },
        En = (e) => {
          const t = {
              option: (e) =>
                Object.assign(Object.assign({}, e), { color: "#444444" }),
            },
            n = hn(e.rgInputType, e.bForDataExport);
          return b.createElement(
            b.Fragment,
            null,
            Boolean(e.label) && b.createElement("div", null, e.label),
            b.createElement(We.ZP, {
              styles: t,
              isSearchable: !0,
              isMulti: !0,
              placeholder: "Choose One or More",
              onChange: e.fnChoiceMade,
              value: e.selected,
              options: n,
              defaultMenuIsOpen: !1,
            }),
          );
        },
        vn = (0, Ie.Pi)((e) => {
          var t;
          const { editModel: n } = e;
          return (null === (t = n.GetDemoPackages()) || void 0 === t
            ? void 0
            : t.length) > 0
            ? b.createElement(
                "div",
                null,
                b.createElement("h3", null, "Packages Created by OptIn"),
                n
                  .GetDemoPackages()
                  .map((e) =>
                    b.createElement(Sn, {
                      key: "pack" + e.packageid,
                      demoPackageInfo: e,
                      editModel: n,
                    }),
                  ),
              )
            : null;
        }),
        Sn = (0, Ie.Pi)((e) => {
          const { demoPackageInfo: t, editModel: n } = e,
            [a, i] = (0, gt.ie)(t.packageid, { include_basic_info: !0 });
          return n.BInitialized() && null != t.packageid
            ? a && i != gt.Y0.k_EStoreItemCacheState_Loading
              ? b.createElement(
                  "div",
                  null,
                  b.createElement(
                    "div",
                    null,
                    b.createElement(
                      "a",
                      {
                        href:
                          N.De.PARTNER_BASE_URL +
                          "store/packagelanding/" +
                          t.packageid,
                        target: "_blank",
                      },
                      a.GetName(),
                      " - package id: ",
                      t.packageid,
                    ),
                  ),
                  b.createElement(
                    "div",
                    null,
                    "Matches Option: ",
                    n.GetOptionNameByID(t.selection),
                  ),
                  b.createElement(
                    "div",
                    null,
                    "Created Time: ",
                    (0, me.vX)(t.rtimecreated),
                    " - ",
                    (0, un.Sc)(t.rtimecreated, { bForce24HourClock: !1 }),
                  ),
                )
              : i == gt.Y0.k_EStoreItemCacheState_Loading
              ? b.createElement(de.V, {
                  string: "Loading Package " + t.packageid,
                  size: "small",
                  position: "center",
                })
              : b.createElement(
                  "div",
                  { className: Ee.ErrorStylesBackground },
                  "Failed to load package: ",
                  t.packageid,
                )
            : b.createElement(de.V, null);
        });
      function fn(e) {
        const t = e.split("|");
        return { section_id: t[0], list_id: t[1], option_id: t[2] };
      }
      var Dn = n(84036),
        yn = n.n(Dn),
        In = n(15254);
      class Cn {
        constructor() {
          this.nLoadedOptIn = 0;
        }
        Increment() {
          this.nLoadedOptIn += 1;
        }
      }
      function bn(e, t, n) {
        const a = (0, b.useMemo)(
            () => t.filter((e) => e && e.appid).map((e) => e.appid),
            [t],
          ),
          i = (0, ut.QQ)(e, a, n);
        return Boolean(i);
      }
      function An(e) {
        const t = B.Get(),
          [n, a] = b.useState(null),
          [i, l] = b.useState(new Array()),
          [o, r] = b.useState(!1),
          [s, c] = b.useState(!1),
          [m, d] = b.useState(!0),
          [p, u] = b.useState(!1);
        return b.createElement(
          he.uH,
          {
            strTitle: "Export Press Opt-In CSV",
            onCancel: e.closeModal,
            onOK: () => {
              e.closeModal && e.closeModal();
              let t = n ? fn(n.value) : null,
                a =
                  (null == i ? void 0 : i.length) > 0
                    ? i.map((e) => fn(e.value))
                    : null;
              (0, W.AM)(
                b.createElement(Tn, {
                  strOptInName: e.strOptInName,
                  optInStats: e.optInStats,
                  filter: t,
                  rgAdditionalData: a,
                  bExportArtistStatement: o,
                  bFilterToDemoExist: s,
                  bIncludePerssContact: m,
                  bIncludeCategories: p,
                }),
                window,
              );
            },
            strDescription:
              "Choose an optional filter which will limit which partners to export. Choose optionally additional data to export that the partners would have entered",
          },
          b.createElement(gn, {
            selected: n,
            fnChoiceMade: a,
            rgInputType: ["checkbox"],
            label: "Choose Filter:",
          }),
          b.createElement(En, {
            selected: i,
            fnChoiceMade: l,
            bForDataExport: !0,
            label: "Additional Data to Export:",
          }),
          t.BIsArtistStatementEnabled() &&
            b.createElement(j.ji, {
              label: "Export Artist Statement",
              checked: o,
              onChange: r,
            }),
          t.BIsArtistStatementEnabled() &&
            b.createElement(j.ji, {
              label: "Export Press Contact Info",
              checked: m,
              onChange: d,
            }),
          t.BIsLaunchYourDemoEnabled() &&
            b.createElement(j.ji, {
              label: "Filter to games with Demo Apps Created",
              tooltip:
                "Just requires the partner to have created the demo appid. This will include live demos and demo still being builte",
              checked: s,
              onChange: c,
            }),
          t.BIsCategoriesEnabled() &&
            b.createElement(j.ji, {
              label: "Add the categories selection",
              tooltip:
                "Partners can choose up to two categories, include them in the output.",
              checked: p,
              onChange: u,
            }),
        );
      }
      function Tn(e) {
        const {
            rgAdditionalData: t,
            filter: n,
            bIncludePerssContact: a,
            bIncludeCategories: i,
            bExportArtistStatement: o,
          } = e,
          s = () => e.closeModal && e.closeModal(),
          { optInStats: c, strOptInName: m, bFilterToDemoExist: d } = e,
          p = c.length,
          [u, _] = (0, b.useState)(!1),
          [h] = (0, b.useState)(() => new Cn()),
          g = bn(m, c, h),
          E = (0, b.useRef)(null),
          v = (null == t ? void 0 : t.length) > 0,
          S = (0, b.useMemo)(() => {
            const e = new Array();
            return (
              v &&
                t.forEach((t) => {
                  e.push(B.Get().GetDynamicSectionByID(t.section_id));
                }),
              e
            );
          }, [v, t]);
        return (
          (0, b.useEffect)(() => {
            if (c && g) {
              (() =>
                (0, l.mG)(this, void 0, void 0, function* () {
                  const e = r().CancelToken.source();
                  E.current = e.cancel;
                  let l = null;
                  d && (l = yield rn.Get().LoadAppWithDemoAppIDs(m, n));
                  const s = new Array();
                  c
                    .filter((e) =>
                      ut.qh.Get().BHasOptionOnRegistration(e.appid, m, n),
                    )
                    .filter((e) => {
                      var t;
                      return Boolean(
                        null == l ||
                          (null === (t = l.get(e.appid)) || void 0 === t
                            ? void 0
                            : t.demo_appid),
                      );
                    })
                    .forEach((e) => {
                      var n, l, r, c;
                      const d = ut.qh.Get().GetRegistration(e.appid, m),
                        p = {
                          game_name: e.app_name || "undefined",
                          store_page: N.De.STORE_BASE_URL + "app/" + e.appid,
                          tags: e.tags || "",
                        };
                      if (
                        (a &&
                          ((p.press_contact_name =
                            (null === (n = null == d ? void 0 : d.jsondata) ||
                            void 0 === n
                              ? void 0
                              : n.press_contact_name) || ""),
                          (p.press_contact_email =
                            (null === (l = null == d ? void 0 : d.jsondata) ||
                            void 0 === l
                              ? void 0
                              : l.press_contact_email) || "")),
                        o &&
                          (p.artist_statement =
                            (null === (r = null == d ? void 0 : d.jsondata) ||
                            void 0 === r
                              ? void 0
                              : r.artist_statement) || ""),
                        i &&
                          (null === (c = null == d ? void 0 : d.jsondata) ||
                          void 0 === c
                            ? void 0
                            : c.category_tags))
                      ) {
                        let e = 0;
                        const t = L.Get().GetGameTags();
                        console.log(d.jsondata.category_tags);
                        for (const n in d.jsondata.category_tags) {
                          const a = t.filter((e) => e.value == n);
                          (null == a ? void 0 : a.length) > 0
                            ? (p["category_choice_" + ++e] = a[0].label)
                            : (p["category_choice_" + ++e] = n);
                        }
                        for (; e < 2; ) p["category_choice_" + ++e] = "";
                      }
                      v &&
                        t.forEach((e, t) => {
                          const n = S[t],
                            a = n.GetListByID(e.list_id),
                            i = a.option_title
                              ? a.option_title.english
                              : n.GetName(),
                            l = (0, ut.A0)(d, e);
                          if ("text_input" == n.GetInputStyle())
                            p[i] =
                              (null == l ? void 0 : l.length) > 0 ? l[0] : "";
                          else {
                            let t = "";
                            null == l ||
                              l.forEach((n) => {
                                const a = B.Get().GetDynamicOptionByID(
                                  Object.assign(Object.assign({}, e), {
                                    option_id: n,
                                  }),
                                );
                                t.length > 0 && (t += "|"),
                                  (t += a.text.english);
                              }),
                              (p[i] = t);
                          }
                        }),
                        s.push(p);
                    }),
                    In.K.WriteCSVToFile(s, "press_game_list.csv"),
                    _(!0);
                }))();
            }
            return () =>
              E.current && E.current("OptInStatsPressCSV: unmounting");
          }, [c, m, d, g, n, a, o, i, t, v, S]),
          b.createElement(
            X.SV,
            null,
            b.createElement(
              he.e1,
              { onEscKeypress: s },
              b.createElement(
                j.VY,
                null,
                b.createElement(j.h4, null, "Export Press Opt-In CSV"),
                b.createElement(
                  j.uT,
                  null,
                  b.createElement(
                    j.Ac,
                    null,
                    b.createElement(
                      "div",
                      null,
                      "Extracting the list of opt-in games and producing a CSV. This requires reading in each opt-in record by partners to extract their 'Press Contact Info' if available which takes a while. Please wait while we pull that information",
                    ),
                    b.createElement("br", null),
                    u
                      ? b.createElement(
                          "div",
                          null,
                          "Completed processing, needed to load ",
                          h.nLoadedOptIn,
                          " Apps out of a total ",
                          c.length,
                          ". You can close this dialog.",
                        )
                      : b.createElement(kn, { tracker: h, nTotalOptIn: p }),
                  ),
                ),
                b.createElement(
                  j.$_,
                  null,
                  b.createElement(j.o9, {
                    onCancel: s,
                    bOKDisabled: !u,
                    strOKText: "Done",
                    onOK: s,
                  }),
                ),
              ),
            ),
          )
        );
      }
      (0, l.gn)([c.LO], Cn.prototype, "nLoadedOptIn", void 0);
      const kn = (0, Ie.Pi)((e) => {
        const { tracker: t, nTotalOptIn: n } = e,
          a = (0, ut.lQ)();
        return b.createElement(de.V, {
          string: `Progressing ${a ? t.nLoadedOptIn : 0} / ${n}`,
          size: "medium",
          position: "center",
        });
      });
      function wn(e) {
        const {
            closeModal: t,
            eligigleOptInStats: n,
            strOptInName: a,
            bPendingReviewInstead: i,
          } = e,
          o = (0, b.useMemo)(() => {
            const e = new Set(n.map((e) => e.appid));
            return Array.from(e);
          }, [n]),
          r = (0, gt.wZ)(o, { include_release: !0 }),
          [s, c] = (0, b.useState)(!0),
          [m, d] = (0, b.useState)(!1),
          [p, u] = (0, b.useState)(1e3),
          [_, h, g, E, v] = (0, b.useMemo)(
            () => [
              n.length,
              n.filter((e) => e.released).length,
              n.filter((e) => {
                if (!e.released) return !1;
                return (
                  Number.parseInt(e.sales.replace(/[^0-9.-]+/g, "")) +
                    Number.parseInt(e.sales_dlc.replace(/[^0-9.-]+/g, "")) +
                    Number.parseInt(e.sales_in_game.replace(/[^0-9.-]+/g, "")) >
                  p
                );
              }).length,
              n.filter((e) => !e.released).length,
              n.filter((e) => {
                if (!e.released && r != gt.Y0.k_EStoreItemCacheState_Loading) {
                  const t = ht.Z.Get().GetApp(e.appid);
                  return Boolean(null == t ? void 0 : t.BIsComingSoon());
                }
                return !1;
              }).length,
            ],
            [n, p, r],
          ),
          [S, f] = (0, b.useState)(void 0),
          [D, y] = (0, b.useState)(void 0),
          [I, C] = (0, b.useState)(void 0),
          { fnUpdateAppToInvitation: T } = pt(),
          k = (0, b.useCallback)(
            () =>
              (0, l.mG)(this, void 0, void 0, function* () {
                y(!0);
                const e = Array.from(
                  new Set(
                    n
                      .filter((e) => {
                        if (e.released) {
                          if (m) {
                            return (
                              Number.parseInt(
                                e.sales.replace(/[^0-9.-]+/g, ""),
                              ) +
                                Number.parseInt(
                                  e.sales_dlc.replace(/[^0-9.-]+/g, ""),
                                ) +
                                Number.parseInt(
                                  e.sales_in_game.replace(/[^0-9.-]+/g, ""),
                                ) >
                              p
                            );
                          }
                          return !0;
                        }
                        if (s) {
                          const t = ht.Z.Get().GetApp(e.appid);
                          return Boolean(
                            null == t ? void 0 : t.BIsComingSoon(),
                          );
                        }
                        return !0;
                      })
                      .map((e) => e.appid),
                  ),
                );
                let t = A.s.k_EResultOK;
                for (; e.length > 0; ) {
                  const n = e.splice(0, 100);
                  if (((t = yield T(a, n, !i, !1, i)), t != A.s.k_EResultOK))
                    break;
                }
                t != A.s.k_EResultOK &&
                  f("Hit error on invite batch, check networks/console: " + t),
                  C(!0);
              }),
            [m, i, s, n, T, p, a],
          );
        return b.createElement(
          he.uH,
          {
            strTitle: `Move Eligible Apps To '${
              i ? "Pending Review" : "Invited"
            }'`,
            strDescription: `Move eligible apps into the '${
              i ? "Pending Review" : "Invited"
            }' state as computed by the latest refresh stats to the ${
              i
                ? "app requiring review. This lets us prune the app to be precisely matching our festival purpose."
                : "invited app list. This lets them participate immediately when festival is open."
            }`,
            bDisableBackgroundDismiss: !0,
            onCancel: t,
            bOKDisabled: D || r == gt.Y0.k_EStoreItemCacheState_Loading,
            onOK: k,
            strOKButtonText: `Mark Apps as '${
              i ? "Pending Review" : "Invited"
            }'`,
          },
          Boolean(!D) &&
            b.createElement(
              b.Fragment,
              null,
              Boolean(r == gt.Y0.k_EStoreItemCacheState_Loading) &&
                b.createElement(de.V, {
                  size: "small",
                  string: "Loading App Details",
                }),
              b.createElement(
                "div",
                null,
                b.createElement("div", null, "Total Eligible Apps: ", _),
                b.createElement("div", null, "** Total Released Apps: ", h),
                m &&
                  b.createElement(
                    "div",
                    null,
                    "** Total Released Apps with min revenue: ",
                    g,
                  ),
                b.createElement("div", null, "** Total Unreleased Apps: ", E),
                b.createElement(
                  "div",
                  null,
                  "** Total Unreleased Apps with Coming Soon Pages: ",
                  v,
                ),
              ),
              m
                ? b.createElement(j.II, {
                    type: "number",
                    label: `Minimum lifetime revenue for released app to be included in the '${
                      i ? "Pending Review" : "Invite"
                    }'`,
                    min: "0",
                    max: "100000000",
                    value: p,
                    tooltip:
                      "This looks at the combination of lifetime package sales, dlc sales and in-game sales",
                    onChange: (e) => {
                      const t = Number.parseInt(e.currentTarget.value) || 0;
                      u(t);
                    },
                  })
                : b.createElement(j.ji, {
                    label: "Filter released apps by min lifetime revenue?",
                    checked: m,
                    onChange: d,
                  }),
              b.createElement(j.ji, {
                label: "Unreleased App Require a Coming Soon Page",
                checked: s,
                onChange: c,
              }),
            ),
          Boolean(D && !I) &&
            b.createElement(de.V, {
              string: (0, me.Xx)("#Saving"),
              size: "medium",
            }),
          Boolean(S) &&
            b.createElement("div", { className: Ee.ErrorStylesBackground }, S),
          Boolean(I && !S) &&
            b.createElement(
              "div",
              null,
              "Moving ",
              i ? "Pending Review" : "Invited",
              " to now completed, you can close the dialog",
            ),
        );
      }
      var Nn,
        Ln = n(58218);
      function xn(e, t, n, a, i) {
        return (0, l.mG)(this, void 0, void 0, function* () {
          try {
            const i = yield fetch(t);
            console.log("fetched: ", i);
            const l = yield i.blob(),
              o = window.URL.createObjectURL(l),
              r = document.createElement("a");
            (r.style.display = "none"),
              (r.href = o),
              (r.download = n),
              document.body.appendChild(r),
              r.click(),
              window.URL.revokeObjectURL(o),
              a(e + 1),
              console.log("Downloaded " + e + ":" + n + " size: " + l.size);
          } catch (e) {
            const t = (0, k.l)(e);
            console.log("Download error" + e.strErrorMsg),
              i("Download failed " + t.strErrorMsg);
          }
        });
      }
      function On(e) {
        const { closeModal: t, optInStats: n } = e,
          a = B.Get(),
          i = a.GetOptInPageID(),
          o = (0, Ln.T)("OptinAdminManageDownloadTrailers"),
          [s, c] = (0, b.useState)(1),
          [m, d] = b.useState(null),
          [p, u] = (0, b.useState)(null),
          [_, h] = (0, b.useState)(!1),
          [g, E] = (0, b.useState)(!0),
          [v, S] = (0, b.useState)(new Cn()),
          f = bn(a.GetOptInPageID(), n, v),
          D = (function (e) {
            const [t, n] = (0, b.useState)(!0);
            return (
              (0, b.useEffect)(() => {
                const t = r().CancelToken.source(),
                  a = e.map((e) => e.appid);
                return (
                  ht.Z.Get()
                    .QueueMultipleAppRequests(a, {
                      include_trailers: !0,
                      include_screenshots: !0,
                    })
                    .then(() => {
                      t.token.reason || n(!1);
                    }),
                  () => t.cancel("useLoadedStoreItemTrailers: unmounting")
                );
              }, [e]),
              t
            );
          })(n),
          [y, I] = b.useState(void 0),
          [C, A] = b.useState(void 0),
          [T, k] = (0, b.useState)(0),
          [w, L] = (0, b.useState)(Nn.k_EDownloadTrailer),
          [x, O] = (0, b.useState)([]);
        return (
          (0, b.useEffect)(() => {
            if (!D && (f || !g)) {
              const e = n.map((e) => e.appid),
                t = m ? fn(m.value) : null,
                a = e
                  .filter((e) => {
                    var t;
                    return (
                      w != Nn.k_EDownloadTrailer ||
                      (null === (t = ht.Z.Get().GetApp(e)) || void 0 === t
                        ? void 0
                        : t.BHasHighlightTrailers())
                    );
                  })
                  .filter(
                    (e) => !g || ut.qh.Get().BHasOptionOnRegistration(e, i, t),
                  )
                  .filter((e) => !_ || ut.qh.Get().BHasOptInTrailer(e, i))
                  .filter((e) => !p || p.has(e));
              O(a);
            }
          }, [D, f, n, m, i, p, w, g, _]),
          b.createElement(
            he.uH,
            {
              strTitle:
                "Download Game Capsules or Trailers for " + a.GetFullName(),
              strDescription:
                "Downloads all of the highest quality MP4 or PNG/JPG file for the 'first' trailers or game capsule that appears on the store page. One per opted in game. This has since been modified to support screenshots and any capsule format.",
              onOK: () =>
                (0, l.mG)(this, void 0, void 0, function* () {
                  A(!0),
                    yield (function (e, t, n, a, i, o) {
                      var r;
                      return (0, l.mG)(this, void 0, void 0, function* () {
                        console.log(
                          "Download Assets " +
                            t +
                            " with available assets: " +
                            (null == e ? void 0 : e.length),
                        );
                        for (
                          let l = 0;
                          l < Math.min(t, (null == e ? void 0 : e.length) || 0);
                          ++l
                        ) {
                          if (
                            null === (r = null == o ? void 0 : o.token) ||
                            void 0 === r
                              ? void 0
                              : r.reason
                          )
                            return void console.log(
                              "cancelled download: " + o.token.reason,
                            );
                          const t = e[l],
                            s = ht.Z.Get().GetApp(t);
                          let c, m;
                          if (n == Nn.k_EDownloadTrailer) {
                            const e = s
                              .GetAllTrailers()
                              .GetHighlightTrailers()[0]
                              .GetTrailerMax()
                              .strMP4URL.replace("http://", "https://");
                            (m = `${N.De.PARTNER_BASE_URL}gfxproxy/trailergfx?appid=${t}&itype=apps`),
                              (c =
                                s.GetName().replace(/[^\w\s!?]/g, "") +
                                "_" +
                                t +
                                ".mp4"),
                              console.log("fetching indirectly ", e, m),
                              yield xn(l, m, c, a, i);
                          } else if (
                            n == Nn.k_EDownloadAllAgeSafeScreenshots ||
                            n == Nn.k_EDownloadScreenshots
                          ) {
                            const e =
                              n == Nn.k_EDownloadAllAgeSafeScreenshots
                                ? s.GetOnlyAllAgesSafeScreenshots()
                                : s.GetBothAllAgesSafeAndMatureScreenshots();
                            for (let n = 0; n < e.length; ++n) {
                              const o = e[n].split("/").pop().split("?")[0];
                              (c =
                                s.GetName().replace(/[^\w\s!?]/g, "") +
                                "_" +
                                t +
                                "_" +
                                o),
                                (m = `${N.De.PARTNER_BASE_URL}gfxproxy/gfx/apps/${t}/${o}`),
                                yield xn(l, m, c, a, i);
                            }
                          } else {
                            let e = "header.jpg";
                            switch (n) {
                              default:
                              case Nn.k_EDownloadHeader:
                                break;
                              case Nn.k_EDownloadSmallCapsule:
                                e = "capsule_231x87.jpg";
                                break;
                              case Nn.k_EDownloadMainCapsule:
                                e = "capsule_616x353.jpg";
                                break;
                              case Nn.k_EDownloadVerticalCapsule:
                                e = "hero_capsule.jpg";
                                break;
                              case Nn.k_EDownloadPageBackground:
                                e = "page_bg_raw.jpg";
                            }
                            (c =
                              s.GetName().replace(/[^\w\s!?]/g, "") +
                              "_" +
                              t +
                              "_" +
                              e),
                              (e += `?t=${Math.floor(
                                Date.now() / 1e3,
                              )}&exclude_beta=1`),
                              (m = `${N.De.PARTNER_BASE_URL}gfxproxy/gfx/apps/${t}/${e}`),
                              console.log("fetching indirectly ", m),
                              yield xn(l, m, c, a, i);
                          }
                          console.log(
                            `Finished processing appid ${s.GetName()}`,
                          );
                        }
                      });
                    })(x, s, w, k, I, o);
                }),
              bOKDisabled: D || !f || C || 0 == s,
              bAllowFullSize: !0,
              onCancel: () => {
                o.cancel("cancel"), t && t();
              },
              closeModal: () => o.cancel("cloased"),
              bDisableBackgroundDismiss: !0,
            },
            D || !f
              ? b.createElement(de.V, {
                  string: `Loading ${n.length} OptIn Registration and Games Details`,
                  position: "center",
                  size: "medium",
                })
              : b.createElement(
                  b.Fragment,
                  null,
                  !C &&
                    b.createElement(
                      "div",
                      null,
                      x.length,
                      " of apps with items available to download.",
                      b.createElement(Gn, { type: w, setType: L }),
                      b.createElement(j.ji, {
                        checked: g,
                        onChange: E,
                        label: "Require OptIn",
                      }),
                      b.createElement(j.ji, {
                        checked: _,
                        onChange: h,
                        label: "Require Trailer Featuring Opt-in Permissions",
                      }),
                      b.createElement(gn, {
                        selected: m,
                        fnChoiceMade: d,
                        rgInputType: ["checkbox"],
                        label: "Choose Filter:",
                      }),
                      b.createElement(j.II, {
                        type: "number",
                        label: "How many Apps to download from?",
                        min: "1",
                        max: (null == x ? void 0 : x.length) || 1,
                        value: s,
                        onChange: (e) =>
                          c(Number.parseInt(e.currentTarget.value) || 1),
                      }),
                      b.createElement(Rn, { fnSetAppIDListList: u }),
                    ),
                ),
            Boolean(C) &&
              b.createElement(
                b.Fragment,
                null,
                Boolean(T < s)
                  ? b.createElement(de.V, {
                      string: `Downloading ${T} out of ${s}`,
                      size: "medium",
                      position: "center",
                    })
                  : b.createElement(
                      "span",
                      null,
                      "Done: Downloaded ",
                      `${T} out of ${s}`,
                    ),
              ),
            Boolean(y) &&
              b.createElement(
                "div",
                { className: Ee.ErrorStylesBackground },
                y,
              ),
          )
        );
      }
      function Gn(e) {
        const { type: t, setType: n } = e,
          a = (0, b.useMemo)(
            () => [
              { label: "First Store Trailer", data: Nn.k_EDownloadTrailer },
              {
                label: "Header Image (460x215 px)",
                data: Nn.k_EDownloadHeader,
              },
              {
                label: "Small Capsule (231x87 px)",
                data: Nn.k_EDownloadSmallCapsule,
              },
              {
                label: "Main Capsule (616x353 px)",
                data: Nn.k_EDownloadMainCapsule,
              },
              {
                label: "Virtual Capsule (374x448 px)",
                data: Nn.k_EDownloadVerticalCapsule,
              },
              {
                label: "Background (1438x810 px)",
                data: Nn.k_EDownloadPageBackground,
              },
              {
                label: "All Age Safe Only Screenshots",
                data: Nn.k_EDownloadAllAgeSafeScreenshots,
              },
              { label: "All Screenshots", data: Nn.k_EDownloadScreenshots },
            ],
            [],
          );
        return b.createElement(j.ry, {
          label: "Choose Download Type",
          rgOptions: a,
          selectedOption: t,
          onChange: (e) => n(e.data),
        });
      }
      function Rn(e) {
        const { fnSetAppIDListList: t } = e,
          [n, a] = b.useState(""),
          [i, l] = b.useState(!1);
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            null,
            "Optionally provide an explicit lists of appids seperately by new lines. Will only download the trailers for these appids as long as they are opted in and have a trailer.",
          ),
          i
            ? b.createElement(
                b.Fragment,
                null,
                b.createElement("div", null, "Enter App IDs:"),
                b.createElement("textarea", {
                  cols: 120,
                  rows: 10,
                  onChange: (e) => a(e.currentTarget.value),
                  value: n,
                  autoFocus: !0,
                }),
                b.createElement(
                  j.zx,
                  {
                    onClick: () => {
                      const e = n.replace(/\n/g, "|").split("|"),
                        a = new Set();
                      e.forEach((e) => {
                        const t = Number.parseInt(e);
                        t > 0 && a.add(t);
                      }),
                        a.size > 0 && t(a);
                    },
                  },
                  "AppID List Complete. Apply Filter",
                ),
              )
            : b.createElement(
                j.zx,
                { onClick: () => l(!0) },
                "Add AppID Filter List",
              ),
        );
      }
      function Bn(e) {
        const { tableRef: t, eligibleStats: n } = e,
          a = B.Get(),
          i = (0, Ve.SZ)(() => a.GetFullName()),
          [l] = (0, Ve.SZ)(() => [
            a.BIsAdditionalFeaturingSectionEnabled() &&
              a.BIsCollectDemoPermissions(),
          ]);
        return b.createElement(
          "div",
          { className: yn().DownloadRow },
          b.createElement(
            j.zx,
            {
              id: "download-csv",
              onClick: () => t.current.table.download("csv", "data.csv"),
              style: { width: "120px" },
            },
            "Download CSV",
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "Generates a CSV of only opt-ed in games intended to be shared with the press",
            },
            b.createElement(
              j.zx,
              {
                id: "download-perss_csv",
                onClick: function (e) {
                  (0, W.AM)(
                    b.createElement(An, {
                      strOptInName: i,
                      optInStats: t.current.state.data,
                    }),
                    (0, K.RA)(e),
                  );
                },
                style: { width: "200px", marginLeft: "10px" },
              },
              "Download Press CSV",
            ),
          ),
          Boolean(l) &&
            b.createElement(
              we.HP,
              {
                toolTipContent:
                  "Create a package for the demos that have opted-in to the event and allowed us to use their demo. The package is create with release override.",
              },
              b.createElement(
                j.zx,
                {
                  id: "create_package",
                  onClick: () => {
                    (0, W.AM)(b.createElement(_n, null), window);
                  },
                  style: { width: "200px", marginLeft: "10px" },
                },
                "Create Demo Package",
              ),
            ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "Download trailers or Game Capsules for opted-in games from this event.",
            },
            b.createElement(
              j.zx,
              {
                id: "download_trailer",
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(On, { optInStats: t.current.state.data }),
                    (0, K.RA)(e),
                  ),
                style: { width: "250px", marginLeft: "10px" },
              },
              "Download Trailers or Capsules",
            ),
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "Recommend we refresh stats before this call. This will search for the appids in the various buckets (optin, opted out etc...)",
            },
            b.createElement(
              j.zx,
              {
                id: "find_app",
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(Mn, { strOptInName: a.GetOptInPageID() }),
                    (0, K.RA)(e),
                  ),
                style: { width: "200px", marginLeft: "10px" },
              },
              "Find App",
            ),
          ),
          Boolean((null == n ? void 0 : n.length) > 0) &&
            b.createElement(
              we.HP,
              {
                toolTipContent:
                  "Recommend refresh stats before using this dialog. This will provide a dialog that will mass move apps into the pending_review state which allows us to do pruning before they are invited to participate.",
              },
              b.createElement(
                j.zx,
                {
                  id: "eligible_to_invite",
                  onClick: (e) =>
                    (0, W.AM)(
                      b.createElement(wn, {
                        strOptInName: i,
                        eligigleOptInStats: n,
                        bPendingReviewInstead: !0,
                      }),
                      (0, K.RA)(e),
                    ),
                  style: { width: "150px", marginLeft: "10px" },
                },
                "Eligible => Pending Review",
              ),
            ),
          Boolean((null == n ? void 0 : n.length) > 0) &&
            b.createElement(
              we.HP,
              {
                toolTipContent:
                  "Recommend refresh stats before using this dialog. This will provide a dialog that will mass invite eligible apps meeting a coming soon or release with min earn critria.",
              },
              b.createElement(
                j.zx,
                {
                  id: "eligible_to_invite",
                  onClick: (e) =>
                    (0, W.AM)(
                      b.createElement(wn, {
                        strOptInName: i,
                        eligigleOptInStats: n,
                        bPendingReviewInstead: !1,
                      }),
                      (0, K.RA)(e),
                    ),
                  style: { width: "150px", marginLeft: "10px" },
                },
                "Eligible => Invited",
              ),
            ),
        );
      }
      function Mn(e) {
        const { closeModal: t, strOptInName: n } = e,
          [a, i] = (0, b.useState)(""),
          l = pn(n),
          o = (0, b.useMemo)(
            () =>
              a
                .split(" ")
                .map((e) => Number.parseInt(e))
                .filter(Boolean),
            [a],
          );
        return b.createElement(
          he.uH,
          {
            strTitle: "Find App In OptIn",
            strDescription:
              "Goes across entire opt-in data pulled from refresh stats to surface what cateogry the appid(s) are in.",
            closeModal: t,
            bDisableBackgroundDismiss: !0,
          },
          b.createElement(j.II, {
            type: "text",
            label: "Space separated list of appids to be searched",
            onChange: (e) => i(e.currentTarget.value),
            value: a,
          }),
          b.createElement("h2", null, "Apps:"),
          Boolean(l)
            ? b.createElement(
                "div",
                null,
                "This only print TRUE if it finds the app in the specific list. This doesn't know if the app is eligible or not based on the rules of the optin.",
              )
            : b.createElement(de.V, {
                position: "center",
                string: "loading",
                size: "medium",
              }),
          null == o
            ? void 0
            : o.map((e) => {
                const t = null == l ? void 0 : l.eligible_appids.has(e),
                  n = null == l ? void 0 : l.opted_in_appids.has(e),
                  a = null == l ? void 0 : l.opted_out_appids.has(e),
                  i = null == l ? void 0 : l.invited_appids.has(e),
                  o = null == l ? void 0 : l.pruned_appids.has(e),
                  r = null == l ? void 0 : l.featured_appids.has(e);
                return b.createElement(
                  b.Fragment,
                  null,
                  b.createElement("div", null, "Appid: ", e),
                  b.createElement(
                    "div",
                    null,
                    "In Eligible List?: ",
                    t ? "TRUE" : "",
                  ),
                  b.createElement(
                    "div",
                    null,
                    "In Opted In List?: ",
                    n ? "TRUE" : "",
                  ),
                  b.createElement(
                    "div",
                    null,
                    "In Opted Out List?: ",
                    a ? "TRUE" : "",
                  ),
                  b.createElement(
                    "div",
                    null,
                    "In Invited List?: ",
                    i ? "TRUE" : "",
                  ),
                  b.createElement(
                    "div",
                    null,
                    "In Pruned List?: ",
                    o ? "TRUE" : "",
                  ),
                  b.createElement(
                    "div",
                    null,
                    "in Featured? List: ",
                    r ? "TRUE" : "",
                  ),
                  b.createElement("br", null),
                );
              }),
        );
      }
      function Pn(e) {
        const t = B.Get(),
          n = P(),
          a = (0, Ve.SZ)(() => t.GetFullName()),
          { rgEmailDefAndStats: i } = se(a),
          l = !(
            n &&
            (n.json_invited ||
              n.json_eligible ||
              n.json_opted_in ||
              n.json_featured ||
              n.json_opted_out) &&
            i
          ),
          o = null == i ? void 0 : i.some((e) => e.completed);
        return b.createElement(
          "div",
          null,
          b.createElement("h2", null, a),
          b.createElement("hr", null),
          b.createElement(
            "div",
            { className: (0, Z.Z)(xe().Section, xe().ManageTable) },
            b.createElement(
              "div",
              { className: xe().SectionDesc },
              b.createElement($t, null),
              "How to opt in a specific game. Use this link and swap out the 220 at the end with the correct appID  ",
              b.createElement("br", null),
              b.createElement(
                "a",
                { href: N.De.PARTNER_BASE_URL + "optin/sale/" + a + "/220" },
                N.De.PARTNER_BASE_URL,
                "optin/sale/",
                t.GetName(),
                "/220",
              ),
              b.createElement("br", null),
              b.createElement("br", null),
              Boolean(l)
                ? b.createElement(de.V, {
                    size: "medium",
                    string: "Loading Stats/No Stats to show",
                    position: "center",
                  })
                : b.createElement(Fn, { bSomeEmailSent: o }),
            ),
          ),
        );
      }
      function Fn(e) {
        const t = B.Get(),
          { bSomeEmailSent: n } = e,
          a = F(),
          { jsonEligible: i } = a,
          l = (0, Ve.SZ)(() => t.BIsEnterDiscountsEnabled()),
          o = b.useRef(null);
        return b.createElement(
          b.Fragment,
          null,
          Boolean(l)
            ? b.createElement(jn, {
                tableRef: o,
                bSomeEmailSent: n,
                oAllStats: a,
              })
            : b.createElement(cn, {
                tableRef: o,
                bSomeEmailSent: n,
                oAllStats: a,
              }),
          b.createElement(Yt, { tableRef: o }),
          b.createElement("br", null),
          b.createElement(Bn, { tableRef: o, eligibleStats: i }),
        );
      }
      function Un(e, t, n, a, i, l) {
        return t && n && e
          ? (e.forEach((e) => {
              n.fnbHasSomeLongTermSaleRankForApp(e.appid)
                ? (e.long_term_sales_rank = n.fnGetLongTermSaleRankForApp(
                    e.appid,
                  ))
                : (e.long_term_sales_rank = 1e6),
                (e.discount_info = (0, Zt.L)(e.appid, t, i, l, a));
            }),
            e)
          : e;
      }
      function jn(e) {
        const { tableRef: t, bSomeEmailSent: n, oAllStats: a } = e,
          i = B.Get(),
          [l, o] = (0, Ve.SZ)(() => [i.GetFullName(), i.GetDiscountEventID()]),
          {
            jsonOptedIn: r,
            jsonInvited: s,
            jsonFeatured: c,
            jsonOptedOut: m,
          } = a,
          d = (0, b.useMemo)(() => {
            const e = (null == r ? void 0 : r.map((e) => e.appid)) || [],
              t = (null == s ? void 0 : s.map((e) => e.appid)) || [],
              n = (null == c ? void 0 : c.map((e) => e.appid)) || [],
              a = (null == m ? void 0 : m.map((e) => e.appid)) || [],
              i = new Set([...e, ...t, ...n, ...a]);
            return Array.from(i).sort();
          }, [r, s, c, m]),
          p = (0, Kt.l)(d),
          u = (0, Zt.o)(l, d, o),
          _ = (0, b.useMemo)(() => {
            const e = i.GetDiscountEventID(),
              t = i.GetEventStartTime(),
              n = i.GetEventEndTime();
            return Object.assign(Object.assign({}, a), {
              jsonOptedIn: Un(a.jsonOptedIn, u, p, e, t, n),
              jsonInvited: Un(a.jsonInvited, u, p, e, t, n),
              jsonFeatured: Un(a.jsonFeatured, u, p, e, t, n),
              jsonOptedOut: Un(a.jsonOptedOut, u, p, e, t, n),
            });
          }, [i, p, u, a]);
        return p && u
          ? b.createElement(cn, {
              tableRef: t,
              bSomeEmailSent: n,
              mapAppToDiscountInfo: u,
              oAllStats: _,
            })
          : b.createElement(de.V, {
              string: "Loading",
              size: "medium",
              position: "center",
            });
      }
      function Xn(e) {
        switch (e) {
          case d.KC.k_EOptInEmailTarget_ActivatingUser:
            return "User who Registered the App for this Opt-In";
          case d.KC.k_EOptInEmailTarget_EligibleApps:
            return "Eligible Games that are not already opted in/out";
          case d.KC.k_EOptInEmailTarget_InvitedApps:
            return "Apps who were explicitly Invited, that have not already opted in/out";
          case d.KC.k_EOptInEmailTarget_FeaturedApps:
            return "All 'Featured' apps";
          case d.KC.k_EOptInEmailTarget_FeaturedAppsMissingDate:
            return "All 'Featured' apps not opted out without a featured date.";
          case d.KC.k_EOptInEmailTarget_FeaturedAppsNotContacted:
            return "'Featured' apps who have not been emailed about featuring before";
          case d.KC.k_EOptInEmailTarget_CustomAppList:
            return "Custom App List";
        }
        return "Unknown target: " + e;
      }
      !(function (e) {
        (e[(e.k_EDownoadInvalid = 0)] = "k_EDownoadInvalid"),
          (e[(e.k_EDownloadTrailer = 1)] = "k_EDownloadTrailer"),
          (e[(e.k_EDownloadHeader = 2)] = "k_EDownloadHeader"),
          (e[(e.k_EDownloadSmallCapsule = 3)] = "k_EDownloadSmallCapsule"),
          (e[(e.k_EDownloadMainCapsule = 4)] = "k_EDownloadMainCapsule"),
          (e[(e.k_EDownloadVerticalCapsule = 5)] =
            "k_EDownloadVerticalCapsule"),
          (e[(e.k_EDownloadPageBackground = 6)] = "k_EDownloadPageBackground"),
          (e[(e.k_EDownloadAllAgeSafeScreenshots = 7)] =
            "k_EDownloadAllAgeSafeScreenshots"),
          (e[(e.k_EDownloadScreenshots = 8)] = "k_EDownloadScreenshots");
      })(Nn || (Nn = {}));
      const zn = "edit_email";
      class Hn {
        constructor() {
          this.m_curSelection = void 0;
        }
        SetSelectionFromQueryParams(e) {
          const t = (0, ne.ks)(e, zn);
          (null == t ? void 0 : t.trim().length) > 0 &&
            B.Get()
              .GetEmailDefinitions()
              .forEach((e) => {
                e.GetUniqueID() === t &&
                  this.m_curSelection !== e &&
                  (this.m_curSelection = e);
              });
        }
        BHasSelection() {
          return Boolean(this.m_curSelection);
        }
        GetSelection() {
          return this.m_curSelection;
        }
        SetSelection(e, t, n) {
          var a;
          e != this.m_curSelection &&
            ((this.m_curSelection = e),
            e &&
              t &&
              (null === (a = null == t ? void 0 : t.stats) || void 0 === a
                ? void 0
                : a.completed) &&
              e.SetReadOnly(!0),
            (0, ne.i9)(n, zn, null == e ? void 0 : e.GetUniqueID()));
        }
        static Get() {
          return Hn.s_Singleton || (Hn.s_Singleton = new Hn()), Hn.s_Singleton;
        }
      }
      function Vn(e) {
        const { serverDef: t, emailEditModel: n } = e,
          [a] = (0, Ve.SZ)(() => [t.reviewed || !1]);
        return a
          ? b.createElement("span", null, "Email Resutls: Reviewed")
          : b.createElement(
              j.zx,
              {
                className: xe().BasicButtonSize,
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(Wn, { emailEditModel: n, serverDef: t }),
                    (0, K.RA)(e),
                  ),
              },
              "Mark as Reviewed",
            );
      }
      function Wn(e) {
        const { serverDef: t, emailEditModel: n, closeModal: a } = e,
          [i, l] = (0, b.useState)(!1),
          [o, r] = (0, b.useState)(!1),
          [s, c] = (0, b.useState)(null);
        return b.createElement(
          he.uH,
          {
            strTitle: "Email Reviewe",
            strDescription: "Dialog to mark the email as reviewed.",
            onCancel: a,
            onOK: () => {
              l(!0),
                re
                  .Get()
                  .UpdateOptInEmailMetaData(n, {
                    rtStartAutomaticEmailType:
                      (null == t ? void 0 : t.start_rtime) || 0,
                    rtEndAutomaticEmail:
                      (null == t ? void 0 : t.end_rtime) || 0,
                    bReviewed: !0,
                  })
                  .then((e) => {
                    e != A.s.k_EResultOK &&
                      c(
                        'Failed to mark the email Reviewed. "p"lease try again later.',
                      );
                  })
                  .catch(() =>
                    c(
                      'Failed to mark the email Reviewed. "p"lease try again later.',
                    ),
                  )
                  .finally(() => r(!0));
            },
            bOKDisabled: i,
            strCancelButtonText: o ? "Close" : void 0,
          },
          b.createElement(
            "div",
            null,
            "Purpose: Please review the stats for the email that has been sent. Verify that there are not an unexpectedly larger number of failed email or unreachable partner. We want to avoid issues where emails failed due to some server failure and our partners are not notified about these time sensitive requests.",
          ),
          Boolean(i && !o) &&
            b.createElement(de.V, {
              size: "medium",
              position: "center",
              string: (0, me.Xx)("#Saving"),
            }),
          Boolean(o && s) && b.createElement("div", null, "Error: ", s),
          Boolean(o && !s) &&
            b.createElement("div", null, "Review Status Save Successful."),
        );
      }
      function qn(e) {
        const { serverDef: t, emailEditModel: n } = e,
          [a] = (0, Ve.SZ)(() => [t.start_rtime]);
        return t.aborted || t.completed || t.deleted || t.reviewed
          ? null
          : b.createElement(
              b.Fragment,
              null,
              b.createElement(
                j.zx,
                {
                  className: xe().BasicButtonSize,
                  onClick: (e) =>
                    (0, W.AM)(
                      b.createElement(Zn, { emailEditModel: n, serverDef: t }),
                      (0, K.RA)(e),
                    ),
                },
                Boolean(a) ? "Update Email Scheduled Times" : "Schedule Email",
              ),
              Boolean(a) &&
                b.createElement(
                  j.zx,
                  {
                    className: xe().BasicButtonSize,
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(Kn, {
                          emailEditModel: n,
                          serverDef: t,
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Unset Email Schedule",
                ),
            );
      }
      function Zn(e) {
        const { serverDef: t, emailEditModel: n, closeModal: a } = e,
          i = B.Get(),
          l = t.start_rtime || i.GetEventStartTime(),
          o = t.end_rtime || i.GetEventEndTime(),
          [r, s] = (0, b.useState)(l),
          [c, m] = (0, b.useState)(o),
          [d, p] = (0, b.useState)(!1),
          [u, _] = (0, b.useState)(!1),
          [h, g] = (0, b.useState)(null),
          E = Y.JW.GetTimeNowWithOverride();
        return b.createElement(
          he.uH,
          {
            strTitle: "Setup OptIn Email Schedule",
            strDescription:
              "The email can be setup to start firing upto the end of the underlying Partner OptIn event.  The end-time is a safe guard to prevent firing emals beyond this time incase email servers are slow.",
            onCancel: a,
            bDisableBackgroundDismiss: !1,
            strCancelButtonText: u ? "Close" : void 0,
            onOK: () => {
              p(!0),
                re
                  .Get()
                  .UpdateOptInEmailMetaData(n, {
                    rtStartAutomaticEmailType: r,
                    rtEndAutomaticEmail: c,
                  })
                  .then((e) => {
                    e != A.s.k_EResultOK &&
                      g("Failed to Save setting, please try again later");
                  })
                  .catch(() =>
                    g("Failed to Save setting, please try again later"),
                  )
                  .finally(() => _(!0));
            },
            bOKDisabled: d || (l == r && c == o),
          },
          Boolean(d && !u) &&
            b.createElement(de.V, {
              size: "medium",
              position: "center",
              string: (0, me.Xx)("#Saving"),
            }),
          Boolean(u && h) && b.createElement("div", null, "Error: ", h),
          Boolean(u && !h) && b.createElement("div", null, "Save Successful."),
          !Boolean(d) &&
            b.createElement(
              b.Fragment,
              null,
              b.createElement("br", null),
              b.createElement(Ke.A, {
                strDescription: "Email Start Sending Time",
                nEarliestTime: E,
                nLatestTime: i.GetEventEndTime(),
                fnGetTimeToUpdate: () => r,
                fnSetTimeToUpdate: s,
                fnIsValidDateTime: () => r < c,
                bShowTimeZone: !0,
              }),
              b.createElement(Ke.A, {
                strDescription: "Email Stop at Time",
                nEarliestTime: E,
                nLatestTime: i.GetEventEndTime(),
                fnGetTimeToUpdate: () => c,
                fnSetTimeToUpdate: m,
                fnIsValidDateTime: () => r < c,
                bShowTimeZone: !0,
              }),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("br", null),
            ),
        );
      }
      function Kn(e) {
        const { serverDef: t, emailEditModel: n, closeModal: a } = e,
          [i, l] = (0, b.useState)(!1),
          [o, r] = (0, b.useState)(!1),
          [s, c] = (0, b.useState)(null);
        return b.createElement(
          he.uH,
          {
            strTitle: "Clear Email Schedule?",
            strDescription:
              "Removinmg the scheduling for firing this email? If you confirm, this will be manual mode only.",
            onCancel: a,
            onOK: () => {
              l(!0),
                re
                  .Get()
                  .UpdateOptInEmailMetaData(n, {
                    rtStartAutomaticEmailType: 0,
                    rtEndAutomaticEmail: 0,
                  })
                  .then((e) => {
                    e != A.s.k_EResultOK &&
                      c("Failed to Reset Scheduling, please try again later");
                  })
                  .catch(() =>
                    c("Failed to Save setting, please try again later"),
                  )
                  .finally(() => r(!0));
            },
            bOKDisabled: i,
            strCancelButtonText: o ? "Close" : void 0,
          },
          Boolean(i && !o) &&
            b.createElement(de.V, {
              size: "medium",
              position: "center",
              string: (0, me.Xx)("#Saving"),
            }),
          Boolean(o && s) && b.createElement("div", null, "Error: ", s),
          Boolean(o && !s) && b.createElement("div", null, "Save Successful."),
        );
      }
      (0, l.gn)([c.LO], Hn.prototype, "m_curSelection", void 0);
      var Yn = n(59934),
        Qn = n(38944);
      const $n =
        n.p +
        "images/applications/appmgmt/Logo_Steamworks.png?v=valveisgoodatcaching";
      var Jn = n(26897),
        ea = n.n(Jn),
        ta = n(20565);
      const na = (0, Ie.Pi)((e) => {
          const { section: t, sectionIndex: n, emailDef: a, storeItem: i } = e;
          let l = null;
          if (t.GetType() === f.k_Custom)
            l = b.createElement(aa, { section: t, emailDef: a });
          else
            l = b.createElement(oa, { section: t, emailDef: a, storeItem: i });
          return b.createElement(
            "div",
            null,
            !a.BIsReadOnly() &&
              b.createElement(
                "div",
                { className: ea().ChangeBtnCtn },
                b.createElement(
                  j.zx,
                  {
                    className: xe().BasicButtonSize,
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(la, {
                          emailDef: a,
                          sectionIndex: n,
                          storeItem: i,
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Change Section Type",
                ),
              ),
            l,
          );
        }),
        aa = (0, Ie.Pi)((e) => {
          const { section: t } = e,
            n = p.U.Get().GetCurEditLanguage();
          return b.createElement(
            "div",
            { className: ea().SectionCtn },
            b.createElement(
              "div",
              { className: ea().SectionEntryTitle },
              "Title:",
            ),
            b.createElement("input", {
              type: "text",
              value: t.GetTitle(n),
              placeholder: "(required) Enter Title",
              onChange: (e) => t.SetTitle(e.currentTarget.value, n),
              maxLength: 240,
            }),
            b.createElement(
              "div",
              { className: ea().SectionEntryTitle },
              "Description:",
            ),
            b.createElement("textarea", {
              value: t.GetDescription(n),
              onChange: (e) => t.SetDescription(e.currentTarget.value, n),
              placeholder: "(required) Description / Body Text",
              rows: 4,
            }),
          );
        }),
        ia = (e) => {
          const {
              curValue: t,
              fnOnChange: n,
              emailDef: a,
              sectionIndex: i,
            } = e,
            l = D.filter(
              (e) =>
                e == f.k_Custom ||
                !a.GetSections().some((t, n) => n != i && t.GetType() == e),
            ).map((e) => ({ label: y(e), data: e }));
          return b.createElement(j.ry, {
            label: "Email Section Type",
            strDropDownClassName: H().DropDownScroll,
            rgOptions: l,
            selectedOption: t,
            onChange: (e) => n(e.data),
            contextMenuPositionOptions: { bDisablePopTop: !0 },
          });
        },
        la = (e) => {
          const {
              closeModal: t,
              sectionIndex: n,
              emailDef: a,
              storeItem: i,
            } = e,
            l = "number" != typeof n,
            o = l ? f.k_Custom : a.GetSection(n).GetType(),
            r = o == f.k_Custom,
            [s, c] = b.useState(o);
          return b.createElement(
            he.RG,
            { bAllowFullSize: !0, onCancel: t, closeModal: t },
            b.createElement(
              j.h4,
              null,
              l ? "Add New Email Section" : "Change Section Type",
            ),
            b.createElement(
              j.uT,
              null,
              b.createElement(
                "div",
                null,
                b.createElement(
                  "p",
                  null,
                  "An email can have any number of custom sections. Other section types can only appear once on the email. Sections are pruned from the drop down if they already are using else where in the email body.",
                ),
              ),
              r &&
                b.createElement(
                  "div",
                  null,
                  "Warning: changing from a custom to another type of section will loose any previous custom text.",
                ),
              b.createElement(ia, {
                emailDef: a,
                sectionIndex: n,
                curValue: s,
                fnOnChange: c,
              }),
              b.createElement(
                "div",
                { className: ta.Preview },
                b.createElement("h2", null, "Section Preview"),
                b.createElement(oa, {
                  emailDef: a,
                  section: new C({ type: s, unique_id: "dummy" }),
                  storeItem: i,
                }),
              ),
            ),
            b.createElement(
              j.$_,
              null,
              b.createElement(j.o9, {
                onCancel: t,
                onOK: () => {
                  if (l) {
                    a.AddSection(s);
                    const e = document.getElementById("end_of_email_sections");
                    e && e.scrollIntoView();
                  } else a.GetSection(n).SetType(s);
                  t();
                },
              }),
            ),
          );
        },
        oa = (0, Ie.Pi)((e) => {
          const { emailDef: t, section: n, storeItem: a } = e;
          let i = "",
            l = b.createElement("div", null);
          if (n.GetType() == f.k_Custom) return null;
          const o =
              N.De.PARTNER_BASE_URL +
              "optin/sale/" +
              B.Get().GetName() +
              "/" +
              a.GetAppID(),
            r = o + "?focusmedia=1",
            s = N.De.PARTNER_BASE_URL + "optin/sale/" + B.Get().GetName(),
            c = N.De.PARTNER_BASE_URL + "taxonomy/tagwizard/" + a.GetAppID(),
            m =
              (N.De.PARTNER_BASE_URL,
              a.GetAppID(),
              N.De.PARTNER_BASE_URL + "apps/demo/" + a.GetAppID()),
            d =
              N.De.COMMUNITY_BASE_URL +
              "ogg/" +
              a.GetAppID() +
              "/partnerevents/create/",
            p = B.Get().GetOptInDeadlineTime(),
            u = B.Get().GetCurEventTitle(),
            _ = B.Get().GetEventStartTime();
          switch (n.GetType()) {
            case f.k_AssetKit:
              (i = (0, me.Xx)("#OptIn_EmailSection_Asset_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_Asset_Body",
                    b.createElement(
                      "a",
                      { href: t.GetAssetKitURL() || "" },
                      (0, me.Xx)("#OptIn_EmailSection_Asset_Token"),
                    ),
                  ),
                ));
              break;
            case f.k_DemoPressPreview:
              (i = (0, me.Xx)("#OptIn_EmailSection_Press_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_Press_Body",
                    b.createElement(
                      "a",
                      { href: o },
                      (0, me.Xx)("#OptIn_EmailSection_Press_Token"),
                    ),
                    (0, me.$1)(t.GetDemoPressPreviewDate() || 0),
                  ),
                ));
              break;
            case f.k_ScheduleLiveStream:
              (i = (0, me.Xx)("#OptIn_EmailSection_schedlive_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_schedlive_Body",
                    t.GetScheduleMaxItems().toLocaleString(),
                    u,
                    b.createElement(
                      "a",
                      { href: t.GetSalePreviewPage() || "" },
                      (0, me.Xx)("#OptIn_EmailSection_schedlive_Token"),
                    ),
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.kQ)(
                    "#OptIn_EmailSection_schedlive_Link",
                    b.createElement(
                      "a",
                      { href: d, target: "_blank" },
                      (0, me.Xx)("#OptIn_EmailSection_schedlive_Link_Token"),
                    ),
                  ),
                ));
              break;
            case f.k_CancelSection:
              (i = (0, me.Xx)("#OptIn_EmailSection_cancel_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_EmailSection_cancel_Body",
                    u,
                    (0, me.$1)(t.GetCancelDate() || 0) +
                      " @ " +
                      (0, un.Sc)(t.GetCancelDate() || 0, {
                        bForce24HourClock: !1,
                      }),
                  ),
                ));
              break;
            case f.k_DemoNotReady:
              (i = (0, me.Xx)("#OptIn_EmailSection_notreadydemo_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_EmailSection_notreadydemo_Body",
                    (0, me.$1)(t.GetCancelDate() || 0),
                    (0, me.jr)(t.GetNextEditionDate() || 0),
                  ),
                ));
              break;
            case f.k_ReviewCategorization:
              (i = (0, me.Xx)("#OptIn_EmailSection_reviewcategories_Title")),
                (l = b.createElement(
                  "div",
                  { className: ea().SectionBody },
                  (0, me.kQ)(
                    "#OptIn_EmailSection_reviewcategories_Body",
                    b.createElement(
                      "a",
                      { href: o + "#GameListing" },
                      (0, me.Xx)(
                        "#OptIn_EmailSection_reviewcategories_BodyLink",
                      ),
                    ),
                  ),
                  b.createElement(
                    "ul",
                    null,
                    b.createElement(
                      "li",
                      null,
                      (0, me.kQ)(
                        "#OptIn_EmailSection_reviewcategories_Li_1",
                        b.createElement(
                          "a",
                          { href: o },
                          (0, me.Xx)(
                            "#OptIn_EmailSection_RegistrationForm_Token",
                          ),
                        ),
                      ),
                    ),
                    b.createElement(
                      "li",
                      null,
                      (0, me.kQ)(
                        "#OptIn_EmailSection_reviewcategories_Li_2",
                        b.createElement(
                          "a",
                          { href: c },
                          (0, me.Xx)("#OptIn_EmailSection_TagWizard_Token"),
                        ),
                      ),
                    ),
                    b.createElement(
                      "li",
                      null,
                      (0, me.Xx)("#OptIn_EmailSection_reviewcategories_Li_3"),
                    ),
                  ),
                ));
              break;
            case f.k_DemoReview:
              (i = (0, me.Xx)("#OptIn_EmailSection_DemoReview_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_DemoReview_Body",
                    b.createElement(
                      "a",
                      { href: m },
                      (0, me.Xx)("#OptIn_EmailSection_DemoReview_Token"),
                    ),
                  ),
                ));
              break;
            case f.k_PressPreviewDetails:
              (i = (0, me.Xx)("#OptIn_EmailSection_PressPreviewDetails_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_PressPreviewDetails_Body",
                    (0, me.$1)(t.GetPreviewDate() || 0),
                    b.createElement(
                      "a",
                      { target: "_blank", href: t.GetWikiDocURL() || "" },
                      (0, me.Xx)(
                        "#OptIn_EmailSection_PressPreviewDetails_EventDoc",
                      ),
                    ),
                  ),
                ));
              break;
            case f.k_MediaUsePermission:
              (i = (0, me.Xx)("#OptIn_EmailSection_MediaPermission_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.Xx)("#OptIn_EmailSection_MediaPermission_Body_1"),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.Xx)("#OptIn_EmailSection_MediaPermission_Body_2"),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.kQ)(
                    "#OptIn_EmailSection_MediaPermission_Body_3",
                    (0, me.$1)(t.GetPermissionDate() || 0),
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  b.createElement(
                    "a",
                    { href: o },
                    (0, me.kQ)(
                      "#Steamworks_partner_optin_MediaPermission_RegLinkText",
                    ),
                  ),
                ));
              break;
            case f.k_TrailerOrDemoPermissions:
              (i = (0, me.Xx)(
                "#OptIn_EmailSection_TrailerDemoPermission_title",
              )),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc1",
                    u,
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.Xx)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc2",
                    u,
                  ),
                  " ",
                  (0, me.kQ)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc3",
                    b.createElement(
                      "b",
                      null,
                      (0, me.$1)(t.GetPressPreviewVisibleDate() || 0),
                    ),
                  ),
                  " ",
                  (0, me.kQ)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc4",
                    b.createElement("b", null, (0, me.$1)(_ || 0)),
                    u,
                  ),
                  " ",
                  (0, me.Xx)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc5",
                    u,
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.kQ)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc6",
                    b.createElement(
                      "b",
                      null,
                      (0, me.$1)(t.GetPermissionDate() || 0),
                    ),
                  ),
                  " ",
                  (0, me.kQ)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc7",
                    b.createElement(
                      "b",
                      null,
                      (0, me.$1)(t.GetPermissionDate() || 0),
                    ),
                    u,
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  (0, me.kQ)(
                    "#OptIn_EmailSection_TrailerDemoPermission_desc8",
                    b.createElement(
                      "b",
                      null,
                      (0, me.$1)(t.GetPermissionDate() || 0),
                    ),
                  ),
                  b.createElement("br", null),
                  b.createElement("br", null),
                  b.createElement(
                    "a",
                    { href: r },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_TrailerDemoPermission_RegLinkText",
                    ),
                  ),
                ));
              break;
            case f.k_StatsSummary:
              (i = (0, me.Xx)("#OptIn_EmailSection_StatsSummary_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_StatsSummary_Body",
                      B.Get().GetCurEventTitle(),
                    ),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    b.createElement(
                      "div",
                      { className: ea().StatNumber },
                      b.createElement("span", null, "00,000"),
                      " new demo players",
                    ),
                    "Your game's demo was played by 00,000 new players during Steam Next Fest. Click ",
                    b.createElement("a", { href: "#" }, "HERE"),
                    " to see a detailed breakdown of downloads for your demo.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    b.createElement(
                      "div",
                      { className: ea().StatNumber },
                      b.createElement("span", null, "00,000"),
                      " wishlists",
                    ),
                    "Your game was added to the wishlist of 00,000 new players during Steam Next Fest! Click ",
                    b.createElement("a", { href: "#" }, "HERE"),
                    " to see a detailed breakdown of wishlist activity on your game.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    b.createElement(
                      "div",
                      { className: ea().StatNumber },
                      b.createElement("span", null, "00,000"),
                      " broadcast views",
                    ),
                    "We found 8 broadcast sessions for your game during Steam Next Fest, totalling views by 00,000 unique users. Broadcast stats are collected under each Steam account that did the broadcasting, so for now details can only be seen by the owner of the account that did the broadcasting.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    b.createElement(
                      "div",
                      { className: ea().StatNumber },
                      b.createElement("span", null, "00,000"),
                      " store page views",
                    ),
                    "This many unique players visited your store page from the landing page of Steam Next Fest.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().StatCtn },
                    b.createElement(
                      "div",
                      { className: ea().StatNumber },
                      b.createElement("span", null, "00,000"),
                      " game impressions",
                    ),
                    "Your game capsule appeared on screen to this many unique players in Steam Next Fest.",
                  ),
                ));
              break;
            case f.k_SurveyButton:
              (i = null),
                (l = b.createElement(
                  "div",
                  null,
                  "If you have a few minutes, please take this quick survey so that we may understand how you felt the event went for you and how we can improve in the future.",
                  b.createElement(
                    "a",
                    {
                      href: t.GetSurveyLinkURL() || "",
                      className: ea().BigButton,
                    },
                    b.createElement("span", null, "Take Event Survey"),
                  ),
                ));
              break;
            case f.k_MeasureResults:
              (i = "MEASURING YOUR RESULTS"),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "You can check out how your game did by visiting these detailed reporting pages in Steam:",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "SALES",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "For games that are released and playable, you can find a report of your game's sales here: https://partner.steampowered.com/app/details/",
                    a.GetAppID(),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "WISHLISTS",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "Players may add your game to their wishlist if they aren't quite ready to buy it or if your game is unreleased. You can find your wishlisting results here: https://partner.steampowered.com/app/wishlist/",
                    a.GetAppID(),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "DEMO ACTIVATIONS",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "If you had a playable demo available, you can find a report of your demo activations by selecting your demo from this page: https://partner.steampowered.com/app/details/",
                    a.GetAppID(),
                  ),
                ));
              break;
            case f.k_MeasureResultsFree:
              (i = "MEASURING YOUR RESULTS"),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "You can check out how your game did by visiting these detailed reporting pages in Steam:",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "WISHLISTS",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "Players may add your game to their wishlist if they aren't quite ready to buy it or if your game is unreleased. You can find your wishlisting results here: https://partner.steampowered.com/app/wishlist/",
                    a.GetAppID(),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "DEMO ACTIVATIONS",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "If you had a playable demo available, you can find a report of your demo activations by selecting your demo from this page: https://partner.steampowered.com/app/details/",
                    a.GetAppID(),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "LIVESTREAM VIEWS",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "Visit this livestream history page from the account that ran the livestream to see counts of viewers and time watched: https://steamcommunity.com/broadcast/history",
                  ),
                ));
              break;
            case f.k_DemoLaunch:
              (i = (0, me.Xx)("#OptIn_EmailSection_DemoRelease_Title")),
                (l = b.createElement(
                  "div",
                  null,
                  (0, me.kQ)(
                    "#OptIn_EmailSection_DemoRelease_Body",
                    b.createElement(
                      "a",
                      { href: m },
                      (0, me.Xx)("#OptIn_EmailSection_DemoRelease_Token"),
                    ),
                  ),
                ));
              break;
            case f.k_EnterDiscount:
              (i = "DISCOUNT"),
                (l = b.createElement(
                  "div",
                  null,
                  "If you’d like to offer a discount on your title throughout the ",
                  B.Get().GetCurEventTitle(),
                  " event, you'll need to enter your discounts before the event begins on ",
                  b.createElement(
                    "span",
                    null,
                    " " +
                      (0, me.$1)(B.Get().GetEventStartTime() || 0) +
                      " @ " +
                      (0, un.Sc)(B.Get().GetEventStartTime() || 0, {
                        bForce24HourClock: !1,
                      }),
                  ),
                  ". Visit your ",
                  b.createElement(
                    "a",
                    {
                      href:
                        N.De.PARTNER_BASE_URL +
                        "promotion/discounts/dashboard/",
                    },
                    b.createElement("span", null, "discount dashboard"),
                  ),
                  " to check your eligible games and enter your discounts",
                  b.createElement("br", null),
                  b.createElement("br", null),
                  "Remember, all discounts are subject to the same cooldown between discounts, with the only exceptions being for major Steam seasonal sales. For more details on the discounting, please see the ",
                  b.createElement(
                    "a",
                    {
                      href:
                        N.De.PARTNER_BASE_URL +
                        "doc/marketing/discount_rule_changes",
                    },
                    b.createElement(
                      "span",
                      null,
                      "Discount Rule Changes documentation",
                    ),
                  ),
                  ". If you wish, you may delete conflicting custom discounts you had planned. It's up to you to choose which discount events you participate in.",
                ));
              break;
            case f.k_EnterDiscountReminder:
              (i = "DISCOUNT"),
                (l = b.createElement(
                  "div",
                  null,
                  "If you’d like to offer a discount on your title throughout the event, it’s not too late to do so. Enter your ",
                  B.Get().GetCurEventTitle(),
                  " discounts before the event begins on ",
                  (0, me.$1)(B.Get().GetEventStartTime() || 0) +
                    " @ " +
                    (0, un.Sc)(B.Get().GetEventStartTime() || 0, {
                      bForce24HourClock: !1,
                    }),
                  ". Visit your ",
                  b.createElement(
                    "a",
                    {
                      href:
                        N.De.PARTNER_BASE_URL +
                        "promotion/discounts/dashboard/",
                    },
                    b.createElement("span", null, "discount dashboard"),
                  ),
                  " to check your eligible games and enter your discounts.",
                ));
              break;
            case f.k_LearnMore:
              (i = "LEARN MORE"),
                (l = b.createElement(
                  "div",
                  null,
                  "Visit our ",
                  b.createElement(
                    "a",
                    { href: t.GetWikiDocURL() || "#" },
                    B.Get().GetCurEventTitle(),
                    " documentation",
                  ),
                  " for more information. Should you have any remaining questions, please reach out via ",
                  b.createElement(
                    "a",
                    {
                      href:
                        N.De.HELP_BASE_URL +
                        "en/wizard/HelpWithPublishing?issueid=933",
                    },
                    "Steam Support",
                  ),
                  ".",
                ));
              break;
            case f.k_CallForRegistration:
              (i = (0, me.Xx)("#OptIn_EmailSection_Register_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_Register_Body_1",
                      (0, me.$1)(p || 0),
                    ),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_Register_Body_2",
                      b.createElement("a", { href: s }, s),
                    ),
                  ),
                ));
              break;
            case f.k_NextFestReturns:
              (i = (0, me.Xx)(
                "#OptIn_EmailSection_NextFest_Returns_Title",
                (0, me.$1)(B.Get().GetEventStartTime() || 0),
              )),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)("#OptIn_EmailSection_NextFest_Returns_Body"),
                  ),
                ));
              break;
            case f.k_NextFestQASession:
              (i = (0, me.Xx)("#OptIn_EmailSection_NextFest_QASession_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_NextFest_QASession_Body",
                      b.createElement(
                        "span",
                        null,
                        " " +
                          (0, me.$1)(t.GetQASessionDate() || 0) +
                          " @ " +
                          (0, un.Sc)(t.GetQASessionDate() || 0, {
                            bForce24HourClock: !1,
                          }),
                      ),
                      b.createElement(
                        "a",
                        { href: t.GetQASessionLink() || "", target: "_blank" },
                        (0, me.kQ)(
                          "#OptIn_EmailSection_NextFest_QASession_Link",
                        ),
                      ),
                    ),
                  ),
                ));
              break;
            case f.k_NextFestWhatNext:
              (i = (0, me.Xx)("#OptIn_EmailSection_NextFest_WhatNext_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)(
                      "#OptIn_EmailSection_NextFest_WhatNext_Body",
                      (0, me.$1)(B.Get().GetEventStartTime() || 0),
                    ),
                  ),
                ));
              break;
            case f.k_NextFestTips:
              (i = (0, me.Xx)("#OptIn_EmailSection_NextFest_Tips_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.kQ)(
                      "#OptIn_EmailSection_NextFest_Tips_Body",
                      b.createElement(
                        "a",
                        {
                          href: "https://partner.steamgames.com/doc/marketing/upcoming_events/nextfest/tips",
                          target: "_blank",
                        },
                        (0, me.kQ)("#OptIn_EmailSection_NextFest_Tips_Insert1"),
                      ),
                      b.createElement(
                        "a",
                        {
                          href: t.GetRecordedQASessionLink() || "",
                          target: "_blank",
                        },
                        (0, me.kQ)("#OptIn_EmailSection_NextFest_Tips_Insert2"),
                      ),
                    ),
                  ),
                ));
              break;
            case f.k_NextFestStartsNow:
              (i = (0, me.Xx)("#OptIn_EmailSection_NextFest_StartsNow_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)("#OptIn_EmailSection_NextFest_StartsNow_Body"),
                  ),
                ));
              break;
            case f.k_NextFestThankYou:
              (i = (0, me.Xx)("#OptIn_EmailSection_NextFest_ThankYou_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)("#OptIn_EmailSection_NextFest_ThankYou_Body"),
                  ),
                ));
              break;
            case f.k_MediaPermissionReminder:
              (i = (0, me.Xx)(
                "#OptIn_EmailSection_TrailerDemoPermission_Reminder1_Title",
              )),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)(
                      "#OptIn_EmailSection_TrailerDemoPermission_Reminder1_Body",
                    ),
                    b.createElement("br", null),
                    b.createElement("br", null),
                    t.GetDemoTrailerRegLink() || "",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    (0, me.Xx)(
                      "#OptIn_EmailSection_TrailerDemoPermission_Reminder2_Title",
                    ),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)(
                      "#OptIn_EmailSection_TrailerDemoPermission_Reminder2_Body",
                      (0, me.$1)(t.GetTrailerDemoDeadlineDate() || 0),
                    ),
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)(
                      "#OptIn_EmailSection_TrailerDemoPermission_Reminder2_Body2",
                    ),
                  ),
                ));
              break;
            case f.k_NextFestMediaUsageIntended:
              (i = "OFFICIAL TRAILER AND/OR LIVESTREAM"),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "We intend to include your game in the official event trailer and/or in the official livestream. Please let us know ASAP if your plans have changed!",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "The main event trailer will be available on the ",
                    b.createElement(
                      "a",
                      { href: "https://www.youtube.com/c/SteamYT" },
                      "Steam YouTube channel",
                    ),
                    " ",
                    (0, me.$1)(t.GetTrailerLaunchDate() || 0),
                    " sometime after 10am Pacific Time.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "The official livestream will broadcast ",
                    (0, me.$1)(t.GetLivestreamLaunchDate() || 0),
                    ", 11am - 1pm Pacific Time, and can be viewed on the ",
                    b.createElement(
                      "a",
                      { href: "https://store.steampowered.com/sale/nextfest" },
                      "Steam Next Fest event page",
                    ),
                    "; ",
                    b.createElement(
                      "a",
                      { href: "https://www.twitch.tv/valve" },
                      "Twitch",
                    ),
                    "; ",
                    b.createElement(
                      "a",
                      { href: "https://www.youtube.com/c/SteamYT" },
                      "YouTube",
                    ),
                    "; and ",
                    b.createElement(
                      "a",
                      { href: "https://www.facebook.com/Steam/videos" },
                      "Facebook",
                    ),
                    ".",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "EVENT PARTICIPATION IS REQUIRED FOR FEATURING",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "Of course, participation in this edition of Steam Next Fest with a playable demo is required in order to be featured. If you can no longer participate for any reason please follow the instructions below.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionTitle },
                    "NEED TO OPT-OUT OR CANCEL? PLEASE DO SO ASAP!",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "If your plans have changed and you no longer intend to participate in this edition, or you would like to opt out of trailer and/or livestream inclusion, please ",
                    b.createElement(
                      "a",
                      {
                        href: "https://help.steampowered.com/en/wizard/HelpWithPublishing?issueid=932",
                        target: "_blank",
                      },
                      "contact us",
                    ),
                    " immediately and return to ",
                    b.createElement(
                      "a",
                      { href: o, target: "_blank" },
                      "your game's registration page",
                    ),
                    " to update your selections for featuring permission and/or event registration as relevant.",
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    'Under the Visibility Opportunity section, select the "no, I do not agree" checkbox(es) for trailer and/or demo usage permissions. If also opting out of Steam Next Fest altogether, please select the "no" checkbox under the Festival Registration section. Make sure to Save.',
                  ),
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    "You must opt out by ",
                    (0, me.$1)(t.GetLivestreamLaunchDate() || 0),
                    " to ensure your trailer and/or demo is not included in our marketing materials.",
                  ),
                ));
              break;
            case f.k_SaleThankYou:
              (i = (0, me.Xx)("#OptIn_EmailSection_ThankYou_Title")),
                (l = b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    "div",
                    { className: ea().SectionBody },
                    (0, me.Xx)("#OptIn_EmailSection_ThankYou_Body"),
                  ),
                ));
              break;
            default:
              (i = "Unknown"),
                (l = b.createElement(
                  "div",
                  null,
                  "Unknown type ",
                  n.GetType(),
                  " @ ",
                  y(n.GetType()),
                  " ",
                ));
          }
          return b.createElement(
            "div",
            { className: ea().SectionCtn },
            b.createElement("div", { className: ea().SectionTitle }, i),
            l,
          );
        });
      var ra = n(59808),
        sa = n.n(ra);
      const ca = (e) => {
          const { emailDef: t, storeItem: n, partnerInfo: a } = e;
          switch (t.GetType()) {
            case E.k_Invite:
            case E.k_InviteReminder:
              return b.createElement(
                b.Fragment,
                null,
                b.createElement("a", { href: a.partner_url }, a.name),
                " is invited to participate in an upcoming Steam event!",
              );
            case E.k_RegistrationConfirmation:
              return b.createElement(
                b.Fragment,
                null,
                "You've successfully registered ",
                b.createElement(
                  "a",
                  { href: n.GetStorePageURL() },
                  n.GetName(),
                ),
                " for an upcoming Steam Event!",
              );
            case E.k_Update:
              return b.createElement(
                b.Fragment,
                null,
                "We have a few things to share that might be helpful for ",
                b.createElement(
                  "a",
                  { href: n.GetStorePageURL() },
                  n.GetName(),
                ),
                " in an upcoming Steam Event!",
              );
            case E.k_Reminder:
              return b.createElement(
                b.Fragment,
                null,
                "This event is coming up quickly, so we wanted to check that ",
                b.createElement(
                  "a",
                  { href: n.GetStorePageURL() },
                  n.GetName(),
                ),
                " is all set to participate.",
              );
            case E.k_Starting:
              return b.createElement(
                b.Fragment,
                null,
                "This event starts soon! Here are a few final notes to prepare ",
                b.createElement(
                  "a",
                  { href: n.GetStorePageURL() },
                  n.GetName(),
                ),
                ".",
              );
            case E.k_Followup:
              return b.createElement(
                b.Fragment,
                null,
                "We are pleased to have had ",
                b.createElement(
                  "a",
                  { href: n.GetStorePageURL() },
                  n.GetName(),
                ),
                " participate in a recent event!",
              );
            case E.k_PermissionRequest:
              return b.createElement(
                b.Fragment,
                null,
                b.createElement("a", { href: a.partner_url }, a.name),
                " is in consideration to be included in official event marketing!",
              );
            case E.k_MediaUsageNotification:
              return b.createElement(
                b.Fragment,
                null,
                "Please let us know ASAP if ",
                b.createElement("a", { href: a.partner_url }, a.name),
                " will no longer be part of the event.",
              );
            default:
              return b.createElement(
                "div",
                null,
                "unknown type: ",
                t.GetType(),
              );
          }
        },
        ma = (0, Ie.Pi)((e) => {
          const { emailDef: t, appid: n } = e,
            [a] = (0, gt.vs)(n, { include_basic_info: !0 }),
            [i] = (0, Qn.DV)((0, Qn.Tt)());
          if (!a || !i)
            return b.createElement(de.V, {
              string: (0, me.Xx)("#Loading"),
              size: "medium",
              position: "center",
            });
          const l = B.Get(),
            o = p.U.Get().GetCurEditLanguage(),
            r = t
              .GetSections()
              .map((e, n) =>
                b.createElement(na, {
                  key: "section" + t.GetUniqueID() + "_" + e.GetUniqueID(),
                  emailDef: t,
                  section: e,
                  sectionIndex: n,
                  storeItem: a,
                }),
              );
          return b.createElement(
            "div",
            { className: Jn.EmailEditorContent },
            b.createElement(Ce.ko, { fnLangHasData: t.BHasLanguageData }),
            t.BIsReadOnly() && b.createElement("h2", null, "Read Only"),
            b.createElement("h1", null, "Showing Email: ", t.GetInternalName()),
            b.createElement(
              "div",
              { className: Jn.Columns },
              b.createElement(
                "div",
                { className: Jn.LeftCol },
                b.createElement(
                  "div",
                  { className: (0, Z.Z)(Jn.RightAlign, Jn.EmailSubjectCtn) },
                  b.createElement(
                    "span",
                    { className: Jn.EmailOptionTitle },
                    "Email Subject:",
                  ),
                  b.createElement("input", {
                    type: "text",
                    disabled: t.BIsReadOnly(),
                    value: t.GetSubject(o),
                    size: 90,
                    maxLength: 250,
                    onChange: (e) => t.SetSubject(e.currentTarget.value, o),
                  }),
                ),
                b.createElement(
                  "div",
                  {
                    className: (0, Z.Z)(Jn.EmailTemplate, Jn.DevEmailTemplate),
                  },
                  b.createElement(
                    "div",
                    {
                      className: (0, Z.Z)(
                        Jn.CenterAlign,
                        Jn.DevEmail_TopHeader,
                      ),
                    },
                    b.createElement(
                      "a",
                      { href: N.De.PARTNER_BASE_URL },
                      b.createElement("img", {
                        src: $n,
                        className: Jn.DevEmail_TopLogo,
                      }),
                    ),
                  ),
                  b.createElement(
                    "div",
                    { className: (0, Z.Z)(Jn.DevEmail_Content) },
                    b.createElement(
                      "div",
                      { className: Jn.DevEmail_Headline1 },
                      (function (e) {
                        switch (e.GetType()) {
                          case E.k_Invite:
                            return "YOU'RE INVITED!";
                          case E.k_InviteReminder:
                            return "LAST CHANCE TO REGISTER";
                          case E.k_RegistrationConfirmation:
                            return "YOU'RE IN!";
                          case E.k_Update:
                            return "EVENT UPDATE";
                          case E.k_Reminder:
                            return "REMINDER!";
                          case E.k_Starting:
                            return "GET READY!";
                          case E.k_Followup:
                            return "THANKS FOR JOINING US!";
                          case E.k_PermissionRequest:
                            return "WE'D LIKE YOUR PERMISSION";
                          case E.k_MediaUsageNotification:
                            return "YOUR GAME IS ON THE SHORT LIST FOR FEATURING";
                          default:
                            return "unknown type: " + e.GetType();
                        }
                      })(t),
                    ),
                    b.createElement(
                      "div",
                      { className: Jn.DevEmail_Headline2 },
                      b.createElement(ca, {
                        emailDef: t,
                        storeItem: a,
                        partnerInfo: i,
                      }),
                    ),
                    b.createElement(
                      "div",
                      { className: Jn.EventCtn },
                      b.createElement(
                        "div",
                        { className: Jn.EventTitle },
                        l.GetCurEventTitle(),
                      ),
                      Boolean(t.GetType() != E.k_PermissionRequest) &&
                        b.createElement(
                          "div",
                          { className: Jn.EventDates },
                          (0, me.$1)(l.GetEventStartTime()),
                          " - ",
                          (0, me.$1)(l.GetEventEndTime()),
                        ),
                    ),
                    b.createElement(
                      "div",
                      { className: Jn.DevEmail_Subject },
                      (function (e) {
                        switch (e) {
                          case E.k_Invite:
                          case E.k_InviteReminder:
                            return "Here's what you need to know and how to get registered:";
                          case E.k_RegistrationConfirmation:
                          case E.k_Update:
                            return "Below are some general things to keep in mind and make use of while you prepare for your participation.";
                          case E.k_Reminder:
                            return "We're here to help connect you with everything you need to have a successful event.";
                          case E.k_Starting:
                          case E.k_Followup:
                          case E.k_PermissionRequest:
                          case E.k_MediaUsageNotification:
                            return null;
                        }
                        return "unknown";
                      })(t.GetType()),
                    ),
                  ),
                  r,
                  b.createElement("hr", { id: "end_of_email_sections" }),
                  b.createElement(
                    "div",
                    { className: (0, Z.Z)(Jn.DevEmail_Content) },
                    Boolean(
                      t.GetType() != E.k_Invite &&
                        t.GetType() != E.k_Followup &&
                        t.GetType() != E.k_PermissionRequest,
                    ) &&
                      b.createElement(
                        "div",
                        { className: Jn.DevEmail_Subject },
                        "To review the participation checklist, make adjustments to your registration, or cancel entirely, you can visit the  ",
                        b.createElement(
                          "a",
                          {
                            href:
                              N.De.PARTNER_BASE_URL +
                              "optin/" +
                              l.GetModel().pageid +
                              "/sale/" +
                              n,
                          },
                          "registration page for ",
                          a.GetName(),
                        ),
                        ".",
                      ),
                    b.createElement(
                      "div",
                      null,
                      b.createElement("b", null, "Have Questions?"),
                      b.createElement("br", null),
                      b.createElement("a", { href: "#" }, "Contact us"),
                      " and we'll get right back to you.",
                    ),
                    b.createElement("img", {
                      src:
                        N.De.STORE_CDN_URL +
                        "public/cdn/email/general/logo_med.png",
                      className: Jn.DevEmail_SignOff_Img,
                    }),
                    b.createElement(
                      "div",
                      { className: Jn.DevEmail_Signoff },
                      b.createElement("div", null, "Sincerely,"),
                      b.createElement("div", null, "The Steam Business Team"),
                    ),
                  ),
                ),
                b.createElement(
                  "div",
                  { className: (0, Z.Z)(Jn.DevEmail_Footer_Ctn) },
                  Boolean(t.GetType() != E.k_Invite) &&
                    b.createElement(
                      "span",
                      { className: Jn.DevEmail_Footer_Reason },
                      "You are receiving this email because you registered ",
                      a.GetName(),
                      " for the ",
                      l.GetName(),
                      " event on Steamworks.",
                    ),
                  b.createElement(
                    "div",
                    { className: Jn.DevEmail_Footer_SubSection },
                    b.createElement("img", {
                      src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAAgCAYAAAAPHGYtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA8FJREFUeNrsWltIVEEYXs28ZPebEVq+BBGZIl1ALc0LaDd9q8gi6yl66LGgh24PPddDPkVXlCDIzbByqcwoSsEsWB80NKxIpIhKKiTdvh/+iZ/D6ZxZ3KNnaT74dmbOzM6emf8652xCJBIJGPgTiWYLjHAMjHCMcAwmCUn0sXN37VuzFRNCKxgEq8DeG43Xz8dMOMBys78TwmJwNvgLnBNTyxFoBDvMXmvjILia66/AMXDEK+G0wiQvmz3XA8JBiRIO9q0HRU/MY47LDexBMR0cxg20WPoyUZRzM4z+Tod5trD5K1zD+DGN369EsQQcxfgGl7GLUGzlZg/Gd1j681DkcTOE/g+W/vkodthM3Y2x3VOSELjgAFgKfqObt2xoLXiW67vAzn9sWgopFzhTXO4Fn2n8/jGwGPwKNriM/QnWg6lgG7jZ0n8CrAHHLYqisAy8ZHP9FAnIj6l0E5cU8NZZ+sq4HAVbHOYotggmIDQ8ZoDikL8PcbMASjFDKMg0FCXcbMfYzw5TUV+dYNOUpdIuoBRRpYbkwp7zYpNRFPL1B1jsd4c5lCA+gQMs5G3gcQ/WdAvcDiazUtzl6/ngXDHGCSN+iL2JGto4iOKlEI5CAZimuVjlxx8JC1sDAWd5sKbb7LYIFTZWHtCwhEw6+wmu8vMTgqCNq1AuIiL67eINLSxbWZjQ5ABbT6xdG7mkdhtlUvUuVrj4eEKgGXdOcta2CbwnFvsUix12+K4UAAmnn336AnZ39R65NlKeHChHBicThZpWTniPNWX73q2xNtIBSz3iKceC01Gu13QRKt4MYp434LgI2mWYK82Ddcl7qmAXnBqFcFLpDCOY7We3Jl0bWcxGtiLHxfK5oYibs9BuI6K+QW2CJRbEyrWR2+oSwinleh/6whpTZHB8VNzvZ7emtPEImMtnGsJrLLbf4TuVQgHmcfZkZ1l3PHJt+axM7zStZojPNFa0+V04T8AvvMl7NRcr481h8IdonwazeMwhj4RzBlzKdHXBULQhjq1xlRDQjY/BJTWjuk9Yg5NLo0NflXAnFyz9a1lglLbmclxzQjrG2W1uM7570eZ+wxjfh+oKvvQRfBFPz+6ifdkmU+YBlw0tEoe+kE3//ShTalKkahvmuFjP3/MPJyNxg6Qox9OGnuO626uF38J/252DHoq5nFLxmy7PtR479F0BU7h+NRBnSKC/RsH81f+j6swrA32wmyXrDWLfary2nJX8jsJADwsn060dZRrEYUJgMNkxx8BYjoERjhGOgRHO/40/AgwA6Pwl5bmDALcAAAAASUVORK5CYII=",
                      width: 103,
                      height: 43,
                    }),
                    b.createElement(
                      "div",
                      null,
                      b.createElement(
                        "div",
                        { className: Jn.DevEmail_Footer_Bold },
                        b.createElement(
                          "strong",
                          null,
                          "© Valve Corporation",
                          b.createElement("br", null),
                          "PO Box 1688 Bellevue, WA 98009",
                        ),
                      ),
                      b.createElement(
                        "div",
                        { className: Jn.DevEmail_Footer_Regular },
                        "All rights reserved. All trademarks are property of their respective owners in the US and other countries.",
                      ),
                      b.createElement(
                        "div",
                        null,
                        b.createElement(
                          "a",
                          {
                            className: H().FlexRowContainer,
                            href:
                              (N.De.IN_CLIENT ? "steam://openurl/" : "") +
                              "https://twitter.com/steam_games",
                            target: N.De.IN_CLIENT ? void 0 : "_blank",
                          },
                          b.createElement("img", {
                            src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA4CAYAAABJ7S5PAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEJGOUM2QTBGNkY5MTFFOUJBQTg4OUJENjhFNUQyN0MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEJGOUM2OUZGNkY5MTFFOUJBQTg4OUJENjhFNUQyN0MiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkI2RThDNjdERjZGODExRTk5N0QwOTZDNjI3Q0M0MTRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkI2RThDNjdFRjZGODExRTk5N0QwOTZDNjI3Q0M0MTRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XKq1FgAAAwJJREFUeNrsm4tRhDAQhoNjA7RAC7QQSzhLiCVgCVgClnBXAlcClAAlYAlnMm7OHeSRF4HEy8yOzp0w7Mfun90kJrfbjTwGIU8PBD/j2fYGSZJs/YwpN8Yt55bBTzmu3Fqwi8nN7xkhfrGxDYdwuhKPqGgdANO5d3r3Y8Y5ujMI4dCgAQFbM4oaPHIEt8KBMOVYBn/IdgJRGQLANiAYlFsJEYO/z9ZAFOgC5hmECwjY2bnvCqwRcyCa0UXME4iTQwhLVo3F8g8IUOipi9nGIFILTTCGAGlTTIGgS+G0IYjCA4QCdOGENGOQM4cOCGFnPOU4BLF1NHRzgjqXGlTxptQhCF/a8CfdlzSCatyohNwOIS0mIZiI5dIUxSxB1B4BDBCBRGX67AxzkB0cxGTFKf2e6j5NmhdZuw9InY82LtCcKbfhn5b1gJyaGoCSB9mG8zDpeWv9gctQw5EjCF+jlvkLvZ0WRHrfMVMk+ar0fFqx5P/TzJfijb1EtgjVKi/V8ZQ4caMAQ1z4CmH879YshdM1h9FxK+Gzd259BL72yhqhWVmGZkRZI/gH10gj/6qbGquiEqNQblFQhakPC3VEF5k+ZFoagcZ7ZGnRm6SGIHSJKEXUmsiVFeoq5rRYXI+IDEatGgiq23pFoE0YcwoCdaRFQDNKpyMNydpKtGjERo2X3BugBxfJNxXBVz4WsNMqs5do0BXLEBdpmHMQAUZFrZM/JmJ5DgDCoLuCbjprNCGuSzoFEQCMs83itekBsqNpRkMM92GtQKCzVuUBZpTBZhNJuaBaG3DOksLDyDORqaeiSW47tDYglAoqjcNkqeeZxSoSnKXGCATznCJOIDgDASlRE//ls7ONZWMQO3ehtWv90e01KDjfhFQs6YB4BuWnE2qfkmOcbWihpd52v2X05suDtdJsa8prh9KrHQslLwCUNQIVR7504UxGJ958glCqLLmGyOW53OHD9uT3ONGF7HQOQ/pvVGKDuGZoRiGoxJ7bie6RKe0+HR5EjOPxX34wvgUYAA3Q5FQ1OsEYAAAAAElFTkSuQmCC",
                            width: 33,
                            height: 28,
                          }),
                          b.createElement(
                            "div",
                            { className: Jn.DevEmail_Follow },
                            "Follow us on Twitter",
                          ),
                        ),
                      ),
                    ),
                  ),
                ),
              ),
              b.createElement(
                "div",
                { className: Jn.RightCol },
                b.createElement(
                  "div",
                  { className: Jn.Sticky },
                  b.createElement(ua, { emailDef: t }),
                  b.createElement(_a, { emailDef: t }),
                  b.createElement(da, { emailDef: t }),
                  !t.BIsReadOnly() &&
                    b.createElement(
                      "div",
                      { className: Jn.AddSectionCtn },
                      b.createElement(
                        j.KM,
                        {
                          className: xe().BasicButtonSize,
                          disabled: t.BIsReadOnly(),
                          onClick: (e) =>
                            (0, W.AM)(
                              b.createElement(la, {
                                emailDef: t,
                                storeItem: a,
                              }),
                              (0, K.RA)(e),
                            ),
                        },
                        "Add an Email Section",
                      ),
                    ),
                ),
              ),
            ),
          );
        }),
        da = (0, Ie.Pi)((e) => {
          const { emailDef: t } = e,
            n = pa(t);
          return 0 == Object.values(n).length
            ? null
            : b.createElement(
                "div",
                { className: Jn.MetaDataCtn },
                t.BIsReadOnly() && b.createElement("h2", null, "Read Only"),
                b.createElement(
                  "div",
                  { className: Jn.ConfTitle },
                  "Email Configuration",
                ),
                b.createElement(
                  "p",
                  null,
                  "The following metadata is required to render correctly",
                ),
                n.bNeedAssetKit &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Asset Kit URL:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetAssetKitURL() || "",
                      placeholder: "https://<url to asset kit>",
                      onChange: (e) => t.SetAssetKitURL(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedDemoPressPreviewDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Press Preview Demo is Ready Date?",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetDemoPressPreviewDate() || 0,
                      fnSetTimeToUpdate: t.SetDemoPreviewDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedMaxItems &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Max Events Permitted on Schedule",
                    ),
                    b.createElement("input", {
                      type: "number",
                      min: "1",
                      disabled: t.BIsReadOnly(),
                      onChange: (e) =>
                        t.SetScheduleMaxItems(
                          Number.parseInt(e.currentTarget.value),
                        ),
                      value: t.GetScheduleMaxItems() || 2,
                      className: Jn.MaxEventCount,
                    }),
                  ),
                n.bNeedSalePreview &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Sale Event Preview Page (for Schedule Access):",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetSalePreviewPage() || "",
                      placeholder: "https://<url to public store sale page>",
                      onChange: (e) =>
                        t.SetSalePreviewURL(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedNextEditionDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Festival Next Edition Date for Opt-in?",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetNextEditionDate() || 0,
                      fnSetTimeToUpdate: t.SetNextEditionDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedQASessionDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Q&A Session Date",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetQASessionDate() || 0,
                      fnSetTimeToUpdate: t.SetQASessionDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedTrailerDemoDeadlineDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription:
                        "Deadline for Demo Approved And Permission Granted",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () =>
                        t.GetTrailerDemoDeadlineDate() || 0,
                      fnSetTimeToUpdate: t.SetTrailerDemoDeadlineDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedQASessionLink &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Q&A Session URL:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetQASessionLink() || "",
                      placeholder: "https://<url to zoom>",
                      onChange: (e) =>
                        t.SetQASessionLink(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedDemoTrailerRegLink &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Permission Registration URL:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetDemoTrailerRegLink() || "",
                      placeholder: "typically same full url as base event",
                      onChange: (e) =>
                        t.SetDemoTrailerRegLink(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedRecordedQASessionLink &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Recorded Q&A YouTube URL:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetRecordedQASessionLink() || "",
                      placeholder: "https://<url to YouTube>",
                      onChange: (e) =>
                        t.SetRecordedQASessionLink(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedCancelDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Cancel Date / Opt-Out Date",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetCancelDate() || 0,
                      fnSetTimeToUpdate: t.SetCancelDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedTrailerLaunchDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Official Trailer Launch Date",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetTrailerLaunchDate() || 0,
                      fnSetTimeToUpdate: t.SetTrailerLaunchDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedLivestreamLaunchDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Official Livestream Launch Date",
                      disabled: t.BIsReadOnly(),
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetLivestreamLaunchDate() || 0,
                      fnSetTimeToUpdate: t.SetLivestreamLaunchDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedPreviewDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Press Preview Date",
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetPreviewDate() || 0,
                      fnSetTimeToUpdate: t.SetPreviewDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedPermissionDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription: "Permission Deadline Date",
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () => t.GetPermissionDate() || 0,
                      fnSetTimeToUpdate: t.SetPermissionDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedPressPreviewVisibleDate &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(Ke.A, {
                      strDescription:
                        "Press Preview will be Visible to Press/Customer on/or around date",
                      nEarliestTime: 0,
                      fnGetTimeToUpdate: () =>
                        t.GetPressPreviewVisibleDate() || 0,
                      fnSetTimeToUpdate: t.SetPressPreviewVisibleDate,
                      fnIsValidDateTime: () => !0,
                      bShowTimeZone: !0,
                    }),
                  ),
                n.bNeedWikiDocumentation &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Event Wiki documentation:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetWikiDocURL() || "",
                      placeholder:
                        "https://<url to steamworks event wiki documentation>",
                      onChange: (e) => t.SetWikiDocURL(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
                n.bNeedSurveyLink &&
                  b.createElement(
                    "div",
                    { className: Jn.MetaDataRow },
                    b.createElement(
                      "div",
                      { className: Jn.MetaDataRowTitle },
                      "Event Survey link:",
                    ),
                    b.createElement("input", {
                      type: "text",
                      disabled: t.BIsReadOnly(),
                      value: t.GetSurveyLinkURL() || "",
                      placeholder: "https://<url online survey>",
                      onChange: (e) =>
                        t.SetSurveyLinkURL(e.currentTarget.value),
                      maxLength: 240,
                    }),
                  ),
              );
        });
      function pa(e) {
        const t = {};
        return (
          (e.GetSections() || []).forEach((e) => {
            switch (e.GetType()) {
              case f.k_AssetKit:
                t.bNeedAssetKit = !0;
                break;
              case f.k_DemoPressPreview:
                t.bNeedDemoPressPreviewDate = !0;
                break;
              case f.k_ScheduleLiveStream:
                (t.bNeedMaxItems = !0), (t.bNeedSalePreview = !0);
                break;
              case f.k_CancelSection:
                t.bNeedCancelDate = !0;
                break;
              case f.k_DemoNotReady:
                (t.bNeedCancelDate = !0), (t.bNeedNextEditionDate = !0);
                break;
              case f.k_PressPreviewDetails:
                (t.bNeedPreviewDate = !0), (t.bNeedWikiDocumentation = !0);
                break;
              case f.k_SurveyButton:
                t.bNeedSurveyLink = !0;
                break;
              case f.k_CallForRegistration:
                break;
              case f.k_LearnMore:
                t.bNeedWikiDocumentation = !0;
                break;
              case f.k_MediaUsePermission:
                t.bNeedPermissionDate = !0;
                break;
              case f.k_TrailerOrDemoPermissions:
                (t.bNeedPermissionDate = !0),
                  (t.bNeedPressPreviewVisibleDate = !0);
                break;
              case f.k_NextFestQASession:
                (t.bNeedQASessionDate = !0), (t.bNeedQASessionLink = !0);
                break;
              case f.k_NextFestTips:
                t.bNeedRecordedQASessionLink = !0;
                break;
              case f.k_MediaPermissionReminder:
                (t.bNeedDemoTrailerRegLink = !0),
                  (t.bNeedTrailerDemoDeadlineDate = !0);
                break;
              case f.k_NextFestMediaUsageIntended:
                (t.bNeedTrailerLaunchDate = !0),
                  (t.bNeedLivestreamLaunchDate = !0),
                  (t.bNeedCancelDate = !0),
                  (t.bNeedWikiDocumentation = !0);
            }
          }),
          t
        );
      }
      const ua = (e) => {
        const { emailDef: t } = e,
          n = t.BIsReadOnly(),
          a = b.createRef(),
          i = [
            {
              label: Xn(d.KC.k_EOptInEmailTarget_ActivatingUser),
              data: d.KC.k_EOptInEmailTarget_ActivatingUser,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_EligibleApps),
              data: d.KC.k_EOptInEmailTarget_EligibleApps,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_InvitedApps),
              data: d.KC.k_EOptInEmailTarget_InvitedApps,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_FeaturedApps),
              data: d.KC.k_EOptInEmailTarget_FeaturedApps,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_FeaturedAppsMissingDate),
              data: d.KC.k_EOptInEmailTarget_FeaturedAppsMissingDate,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_FeaturedAppsNotContacted),
              data: d.KC.k_EOptInEmailTarget_FeaturedAppsNotContacted,
            },
            {
              label: Xn(d.KC.k_EOptInEmailTarget_CustomAppList),
              data: d.KC.k_EOptInEmailTarget_CustomAppList,
            },
          ];
        return b.createElement(
          "div",
          null,
          t.BIsReadOnly() && b.createElement("h2", null, "Read Only"),
          b.createElement(
            "div",
            { className: Jn.ConfTitle },
            "Email Targetting",
          ),
          b.createElement(
            "div",
            null,
            b.createElement(
              "p",
              null,
              "This defines both which opt-in games and who from the opt-in game teams are eligible to receive this email. We will fire an email per game that qualifies which may mean some users may receive more than one email, as they did the opt-in registration for more than one game",
            ),
          ),
          b.createElement(j.ry, {
            label: "Who should receive this email?",
            dropDownControlRef: a,
            disabled: n,
            strDropDownClassName: H().DropDownScroll,
            rgOptions: i,
            selectedOption: t.GetEmailTargeting(),
            onChange: (e) => {
              Boolean(t.GetServerEmailDefID())
                ? (0, W.AM)(
                    b.createElement(he.uH, {
                      strTitle: "Update Targeting",
                      strDescription:
                        "Since this email is already staged. Updating the email targeting requires changing the email configuration. The target setting will be applied immediately. Proceed with the update?",
                      onOK: () => {
                        (0, c.z)(() => {
                          t.SetEmailTargeting(e.data),
                            re.Get().UpdateOptInEmailMetaData(t);
                        });
                      },
                      onCancel: () => {
                        var e;
                        null === (e = null == a ? void 0 : a.current) ||
                          void 0 === e ||
                          e.SetSelectedOption(t.GetEmailTargeting());
                      },
                    }),
                    window,
                  )
                : t.SetEmailTargeting(e.data);
            },
            contextMenuPositionOptions: { bDisablePopTop: !0 },
          }),
        );
      };
      function _a(e) {
        const { emailDef: t } = e,
          [n, a] = (0, Ve.SZ)(() => {
            var e;
            return [
              t.GetEmailTargeting() == d.KC.k_EOptInEmailTarget_CustomAppList,
              (null === (e = t.GetCustomAppTargetList()) || void 0 === e
                ? void 0
                : e.length) || 0,
            ];
          });
        return n
          ? b.createElement(
              "div",
              { className: Jn.MetaDataCtn },
              t.BIsReadOnly() && b.createElement("h2", null, "Read Only"),
              b.createElement(
                "div",
                { className: Jn.ConfTitle },
                "Custom App Target List",
              ),
              b.createElement("div", null, "Apps List Size: ", a),
              b.createElement(
                j.zx,
                {
                  onClick: (e) => {
                    (0, W.AM)(
                      b.createElement(ha, { emailDef: t }),
                      (0, K.RA)(e),
                    );
                  },
                },
                "Manage Custom App List",
              ),
            )
          : null;
      }
      function ha(e) {
        const { emailDef: t, closeModal: n } = e,
          [a, i] = b.useState(""),
          [l, o] = b.useState(""),
          [r] = (0, Ve.SZ)(() => [t.GetCustomAppTargetList()]);
        return b.createElement(
          he.uH,
          {
            strTitle: "Custom App Email Target List Manager",
            bDisableBackgroundDismiss: !0,
            onCancel: n,
            bAllowFullSize: !0,
            onOK: () => {
              a.replace(/\n/g, "|")
                .split("|")
                .forEach((e) => {
                  const n = Number.parseInt(e);
                  n > 0 && t.AddAppToCustomList(n);
                });
              l
                .replace(/\n/g, "|")
                .split("|")
                .forEach((e) => {
                  const n = Number.parseInt(e);
                  n > 0 && t.RemoveAppToCustomList(n);
                }),
                n();
            },
          },
          b.createElement(
            "div",
            null,
            "ADDING: Enter App IDs seperated by new lines:",
          ),
          b.createElement("textarea", {
            cols: 120,
            rows: 5,
            onChange: (e) => i(e.currentTarget.value),
            value: a,
            autoFocus: !0,
          }),
          b.createElement(
            "div",
            null,
            "REMOVE: Enter App IDs seperated by new lines:",
          ),
          b.createElement("textarea", {
            cols: 120,
            rows: 5,
            onChange: (e) => o(e.currentTarget.value),
            value: l,
            autoFocus: !0,
          }),
          b.createElement(
            "p",
            null,
            "After hitting ok, remember to save the optin.",
          ),
          b.createElement(
            Oe.ug,
            { title: `App List: ${r.length} Apps`, bStartMinimized: !0 },
            b.createElement(
              b.Fragment,
              null,
              r.map((e) =>
                b.createElement(ga, {
                  key: `app_${e}`,
                  appid: e,
                  fnRemoveApp: () => t.RemoveAppToCustomList(e),
                }),
              ),
            ),
          ),
        );
      }
      function ga(e) {
        const { appid: t, fnRemoveApp: n } = e,
          a = "string" == typeof t ? Number.parseInt(t) : t,
          [i] = (0, gt.vs)(a, {});
        return b.createElement(
          b.Fragment,
          null,
          Boolean(i)
            ? b.createElement("div", null, i.GetName(), " (", t, ")")
            : b.createElement("div", null, "Store Item Not Loading Appid: ", t),
          b.createElement(
            we.HP,
            {
              className: sa().ProgressIconError,
              onClick: n,
              toolTipContent: "Remove App From List",
            },
            b.createElement(ke.X, null),
          ),
        );
      }
      const Ea = (e) => {
        const { closeModal: t, emailDef: n } = e,
          a = (0, rt.tx)(),
          i = (0, b.useCallback)(() => {
            a.fnSetLoading(!0),
              re
                .Get()
                .CreateOptInEmail(n)
                .then((e) => {
                  if (e != A.s.k_EResultOK)
                    a.fnSetError(!0),
                      a.fnSetStrError(
                        "Error: Failed to create the email on the steam server: Eresult: " +
                          e,
                      );
                  else {
                    const e = r().CancelToken.source();
                    B.Get()
                      .Save(e.token)
                      .then((e) => {
                        e
                          ? (a.fnSetError(!0),
                            a.fnSetStrError(
                              "NOTE: Email was created on the Server; saving the opt-in metadata failed. Please save again immediately or we will require to manually update the email_def_id. \n" +
                                e,
                            ))
                          : (ce(B.Get().GetFullName()),
                            a.fnSetSuccess(!0),
                            a.fnSetStrSuccess(
                              "Create Email and Opt-In Save Complete. You can close this dialog",
                            ));
                      });
                  }
                });
          }, [a, n]);
        return a.bLoading
          ? b.createElement(rt.NT, {
              state: a,
              strDialogTitle: "Create Email On Steam Server",
              closeModal: t,
            })
          : b.createElement(
              he.uH,
              {
                bAllowFullSize: !0,
                onCancel: t,
                closeModal: t,
                strTitle: "Create Email On Steam Server",
                onOK: i,
              },
              b.createElement(
                "div",
                null,
                "Creating the email registers it with the Steam server which is then able to fire the email.",
              ),
            );
      };
      var va = n(31148);
      const Sa = (e) => {
        const { closeModal: t, emailDef: n } = e,
          [a, i] = b.useState(void 0),
          l = (0, rt.tx)();
        return l.bLoading
          ? b.createElement(rt.NT, {
              state: l,
              strDialogTitle: "Send Manual OptIn Email",
              closeModal: t,
            })
          : b.createElement(
              he.uH,
              {
                bAllowFullSize: !0,
                onCancel: t,
                closeModal: t,
                strTitle: "Send Manual OptIn Email Now?",
                strOKButtonText: "Send Now",
                onOK: () => {
                  l.fnSetLoading(!0),
                    re
                      .Get()
                      .SendManualEmail(n)
                      .then((e) => {
                        e.eResult != A.s.k_EResultOK
                          ? (l.fnSetError(!0),
                            l.fnSetStrError(
                              "Send Error: Failed to send the email from the Steam server: Eresult: " +
                                e.eResult,
                            ))
                          : (ce(B.Get().GetFullName()),
                            l.fnSetSuccess(!0),
                            l.fnSetElSuccess(
                              b.createElement(fa, { doneStats: e.stats || {} }),
                            ));
                      });
                },
              },
              b.createElement(
                "div",
                null,
                "With a saved and published OptIn state, we can manually fire the email to the recipients. Once you click send, it may take a little while to process, so be patient.",
              ),
            );
      };
      function fa(e) {
        const { doneStats: t } = e;
        return b.createElement(
          "div",
          null,
          b.createElement("br", null),
          "Send Completed. You can close this dialog",
          b.createElement("br", null),
          b.createElement("br", null),
          b.createElement(
            "div",
            null,
            "Accounts Examined: ",
            (null == t ? void 0 : t.accounts_examined) || 0,
          ),
          b.createElement(
            "div",
            null,
            "Emails Sent: ",
            (null == t ? void 0 : t.accounts_emailed) || 0,
          ),
          b.createElement(
            "div",
            null,
            "Why is email sent higher than account examined?  Some users may be associated with more than one app and will receive more than one email",
          ),
          b.createElement(
            "div",
            null,
            "Emails Skipped (user opted out): ",
            (null == t ? void 0 : t.accounts_not_emailed_opted_out) || 0,
          ),
          b.createElement(
            "div",
            null,
            "Emails Failed to Send: ",
            (null == t ? void 0 : t.accounts_email_failed) || 0,
          ),
        );
      }
      var Da = n(92794),
        ya = n(57082);
      function Ia(e) {
        const { emailEditModel: t, serverDef: n } = e,
          a = n.opt_in_name,
          { rgEmailSentList: i, oEmailSummary: o } = (function (e) {
            const t = (0, ae.useQuery)(
                ["COptInEmailAdmin", "GetEmailDetails", e],
                () =>
                  (0, l.mG)(this, void 0, void 0, function* () {
                    return yield re.Get().FetchPartnerOptInEmailDetails(e);
                  }),
              ),
              n = (0, b.useMemo)(() => {
                var e;
                const n = new Set(),
                  a = new Set(),
                  i = new Set(),
                  l = new Set();
                null === (e = null == t ? void 0 : t.data) ||
                  void 0 === e ||
                  e.forEach((e) => {
                    n.add(e.appid),
                      1 == e.status && a.add(e.appid),
                      e.partnerid &&
                        (i.add(e.partnerid),
                        1 == e.status && l.add(e.partnerid));
                  });
                const o = Array.from(n).filter((e) => !a.has(e)),
                  r = Array.from(i).filter((e) => !l.has(e));
                return {
                  unique_appid_count: n.size,
                  appid_emailed: a.size,
                  rg_appid_not_emailed: o,
                  unique_partner_count: i.size,
                  partner_eailed: l.size,
                  rg_partner_not_emailed: r,
                };
              }, [t]);
            return { rgEmailSentList: t.data, oEmailSummary: n };
          })(t.GetServerEmailDefID()),
          [r, s] = (0, b.useState)(!1),
          c = pn(a),
          [m, p] = (0, b.useState)(!1);
        (0, b.useEffect)(() => {
          var e;
          if (i && !r && c) {
            const t = new Set(
              null == i ? void 0 : i.map((e) => e.appid).filter(Boolean),
            );
            null === (e = c.invited_appids) ||
              void 0 === e ||
              e.forEach((e) => t.add(e));
            const n = Array.from(t);
            ht.Z.Get()
              .QueueMultipleAppRequests(n, { include_release: !0 })
              .then(() => s(!0));
          }
        }, [i, r, c]);
        const [u, _, h, g, E, v, S, f] = (0, b.useMemo)(() => {
          let e = 0,
            t = 0,
            n = 0,
            a = 0,
            l = 0,
            o = 0,
            r = 0;
          const s = new Set();
          if (c) {
            const m = new Set(
              null == i ? void 0 : i.map((e) => e.appid).filter(Boolean),
            );
            m.forEach((i) => {
              let s = !1;
              c.eligible_appids.has(i) && ((e += 1), (s = !0)),
                c.opted_in_appids.has(i) && ((t += 1), (s = !0)),
                c.opted_out_appids.has(i) && ((n += 1), (s = !0)),
                c.invited_appids.has(i) && ((a += 1), (s = !0)),
                c.pruned_appids.has(i) && ((l += 1), (s = !0)),
                c.featured_appids.has(i) && ((o += 1), (s = !0)),
                s || (r += 1);
            }),
              c.invited_appids.forEach((e) => {
                e && !m.has(e) && s.add(e);
              });
          }
          return [e, t, n, a, l, o, r, s];
        }, [i, c]);
        if (!i || !r || !c) {
          let e = (0, me.Xx)("#Loading");
          return (
            i
              ? r
                ? c || (e = "Loading App OptIn Breakdown")
                : (e = "Loading App Details")
              : (e = "Loading Raw Email Stats"),
            b.createElement(de.V, {
              position: "center",
              size: "medium",
              string: e,
            })
          );
        }
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Total Appid:",
            b.createElement("span", null, o.unique_appid_count),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Appid Emailed:",
            b.createElement("span", null, o.appid_emailed),
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "Attempted to email these apps however all users opted out of receiving communication.",
            },
            b.createElement(
              "div",
              { className: H().FlexRowWrapSpaceBetweenContainer },
              "Appid not Emails (?):",
              b.createElement("span", null, o.rg_appid_not_emailed.length),
            ),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Total PartnerID:",
            b.createElement("span", null, o.unique_partner_count),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "PartnerID Emailed:",
            b.createElement("span", null, o.partner_eailed),
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "Attempted to email these Partenr however all users opted out of receiving communication.",
            },
            b.createElement(
              "div",
              { className: H().FlexRowWrapSpaceBetweenContainer },
              "PartnerID not Emails:",
              o.rg_partner_not_emailed.length,
            ),
          ),
          b.createElement("br", null),
          b.createElement(
            "div",
            null,
            "Emailed Apps based on Latest Refresh Stats",
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Eligible Apps:",
            b.createElement("span", null, u),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Opted In App:",
            b.createElement("span", null, _),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Opted Out App:",
            b.createElement("span", null, h),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Invited App:",
            b.createElement("span", null, g),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Pruned App:",
            b.createElement("span", null, E),
          ),
          b.createElement(
            "div",
            { className: H().FlexRowWrapSpaceBetweenContainer },
            "Featured App:",
            b.createElement("span", null, v),
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "These apps need investigation as they were emailed but are not in any known set of apps associated with the events. See the csv for list.",
            },
            b.createElement(
              "div",
              { className: H().FlexRowWrapSpaceBetweenContainer },
              "Not In Any Above List (?):",
              b.createElement("span", null, S),
            ),
          ),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "We did not email these invited apps. Either they were invited after the email OR we couldn't find a user to email",
            },
            b.createElement(
              "div",
              { className: H().FlexRowWrapSpaceBetweenContainer },
              "Invited App Not Emailed (?):",
              b.createElement("span", null, f.size),
            ),
          ),
          Boolean(f.size) &&
            b.createElement(
              b.Fragment,
              null,
              Boolean(m)
                ? b.createElement(Ca, {
                    strOptInName: a,
                    setInvitedAppMissingEmail: f,
                    serverDef: n,
                  })
                : b.createElement(j.ji, {
                    label: "Expand Invited Users Missing Emails",
                    checked: m,
                    onChange: p,
                  }),
            ),
          b.createElement("br", null),
          b.createElement(
            j.KM,
            {
              onClick: () =>
                (function (e, t, n) {
                  const a = e.map((e) => {
                      const n = ht.Z.Get().GetApp(e.appid);
                      let a;
                      switch (e.status) {
                        case 0:
                          a = "uninitialized";
                          break;
                        case 1:
                          a = "success";
                          break;
                        case 2:
                          a = "generic failed";
                          break;
                        default:
                          a = "error code: " + e.status;
                      }
                      return {
                        accountid: e.accountid,
                        appid: e.appid,
                        appName:
                          (null == n ? void 0 : n.GetName()) || "unknown",
                        bReleased: (null == n ? void 0 : n.BIsReleased()) || !1,
                        releaseDate: (null == n ? void 0 : n.BIsReleased())
                          ? (0, me.$1)(n.GetReleaseDateRTime())
                          : "",
                        timeNotified:
                          (0, me.$1)(e.rtime_notified) +
                          " " +
                          (0, un.Sc)(e.rtime_notified, {
                            bForce24HourClock: !1,
                          }),
                        status: a,
                        sentTime:
                          (0, me.$1)(e.rtime_notified) +
                          " " +
                          (0, un.Sc)(e.send_rtime, { bForce24HourClock: !1 }),
                        bSkipEmailingSinceEmailUnverified:
                          e.ignored_unverified_email,
                        bSkipEmailingAccountOptedOut: e.ignored_email_optout,
                        bEligible: t.eligible_appids.has(e.appid),
                        bOptedIn: t.opted_in_appids.has(e.appid),
                        bOptedOut: t.opted_out_appids.has(e.appid),
                        bInvited: t.invited_appids.has(e.appid),
                        bPruned: t.pruned_appids.has(e.appid),
                        bFeatured: t.featured_appids.has(e.appid),
                        bNotInAnyList: !(
                          t.eligible_appids.has(e.appid) ||
                          t.opted_in_appids.has(e.appid) ||
                          t.opted_out_appids.has(e.appid) ||
                          t.invited_appids.has(e.appid) ||
                          t.pruned_appids.has(e.appid) ||
                          t.featured_appids.has(e.appid)
                        ),
                      };
                    }),
                    i = new Set(e.map((e) => e.appid).filter(Boolean));
                  let l = t.invited_appids;
                  n.GetEmailTargeting() ==
                    d.KC.k_EOptInEmailTarget_CustomAppList &&
                    (l = new Set(n.GetCustomAppTargetList()));
                  null == l ||
                    l.forEach((e) => {
                      if (e && !i.has(e)) {
                        const n = ht.Z.Get().GetApp(e);
                        a.push({
                          appid: e,
                          appName:
                            (null == n ? void 0 : n.GetName()) || "unknown",
                          bReleased:
                            (null == n ? void 0 : n.BIsReleased()) || !1,
                          releaseDate: (null == n ? void 0 : n.BIsReleased())
                            ? (0, me.$1)(n.GetReleaseDateRTime())
                            : "",
                          status: "Not Emailed",
                          bEligible: t.eligible_appids.has(e),
                          bOptedIn: t.opted_in_appids.has(e),
                          bOptedOut: t.opted_out_appids.has(e),
                          bInvited: t.invited_appids.has(e),
                          bPruned: t.pruned_appids.has(e),
                          bFeatured: t.featured_appids.has(e),
                          bNotInAnyList: !1,
                        });
                      }
                    }),
                    In.K.WriteCSVToFile(a, "email_result_list.csv");
                })(i, c, t),
            },
            "Download CSV",
          ),
        );
      }
      function Ca(e) {
        const {
            setInvitedAppMissingEmail: t,
            strOptInName: n,
            serverDef: a,
          } = e,
          {
            rgAppInvitedAfterEmail: i,
            rgAppWithoutPromotionContact: l,
            rgAppUnknownReasons: o,
            strReason: r,
          } = (function (e, t, n) {
            const a = (0, b.useMemo)(() => Array.from(t || []), [t]),
              i = (0, ut.QQ)(e, a),
              l = (0, ya.lf)(a),
              o = (0, b.useMemo)(
                () =>
                  Array.from((null == l ? void 0 : l.values()) || [])
                    .filter((e) => (null == e ? void 0 : e.length) > 0)
                    .map((e) => e[0].partner_id),
                [l],
              ),
              r = (0, Da.j)(o),
              s = (0, b.useMemo)(
                () =>
                  l && r
                    ? a.filter((e) => {
                        const t = l.get(e);
                        if ((null == t ? void 0 : t.length) > 0) {
                          const e = r.get(t[0].partner_id);
                          if (
                            (null == e ? void 0 : e.length) > 0 &&
                            Boolean(e[0])
                          )
                            return !1;
                        }
                        return !0;
                      })
                    : null,
                [l, r, a],
              ),
              c = (0, b.useMemo)(
                () =>
                  a.filter((e) => {
                    var t;
                    return (
                      (null === (t = null == i ? void 0 : i.get(e)) ||
                      void 0 === t
                        ? void 0
                        : t.time_updated) > n
                    );
                  }),
                [i, a, n],
              ),
              m = (0, b.useMemo)(
                () =>
                  c && s
                    ? a.filter(
                        (e) =>
                          -1 == c.findIndex((t) => e == t) &&
                          -1 == s.findIndex((t) => e == t),
                      )
                    : null,
                [a, c, s],
              );
            let d = null;
            return (
              (l && r && s && i && c && m) ||
                (d = l
                  ? r
                    ? s
                      ? i
                        ? c
                          ? m
                            ? (0, me.Xx)("#Loading")
                            : "Computing Unexplained Apps"
                          : "Computing App Registrations"
                        : "Fetching Opt In Registrations per App"
                      : "computing games without comm"
                    : "Loading Contact info for Partners"
                  : "Loading Partner Info For Apps"),
              {
                rgAppInvitedAfterEmail: c,
                rgAppWithoutPromotionContact: s,
                rgAppUnknownReasons: m,
                strReason: d,
              }
            );
          })(n, t, a.last_update_time);
        return r
          ? b.createElement(de.V, {
              size: "small",
              string: r,
              position: "center",
            })
          : b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "div",
                { className: H().FlexRowWrapSpaceBetweenContainer },
                "** Apps Added After Email Sent:",
                b.createElement("span", null, i.length),
              ),
              b.createElement(
                we.HP,
                {
                  toolTipContent:
                    "We can only send emails to users who either took an optin action or is a memmber of the partner which permits emails. These app has neither.",
                },
                b.createElement(
                  "div",
                  { className: H().FlexRowWrapSpaceBetweenContainer },
                  "** Apps without comm users (?):",
                  b.createElement("span", null, l.length),
                ),
              ),
              b.createElement(
                "div",
                { className: H().FlexRowWrapSpaceBetweenContainer },
                "** Unknown Reason:",
                b.createElement("span", null, o.length),
              ),
            );
      }
      const ba = (e) => {
        const { closeModal: t, emailDef: n } = e,
          a = (0, rt.tx)();
        return a.bLoading
          ? b.createElement(rt.NT, {
              state: a,
              strDialogTitle: "Test Fire",
              closeModal: t,
            })
          : b.createElement(
              he.uH,
              {
                bAllowFullSize: !0,
                onCancel: t,
                closeModal: t,
                strTitle: "Test Email Fire to yourself?",
                strOKButtonText: "Test Email Now",
                onOK: () => {
                  a.fnSetLoading(!0),
                    re
                      .Get()
                      .TestFireEmailToSelf(n)
                      .then((e) => {
                        e != A.s.k_EResultOK
                          ? (a.fnSetError(!0),
                            a.fnSetStrError(
                              "Send Error: Failed to test the email from the Steam server: Eresult: " +
                                e,
                            ))
                          : (a.fnSetSuccess(!0),
                            a.fnSetStrSuccess(
                              "Test Email Completed. Check your inbox. You can close this dialog",
                            ));
                      });
                },
              },
              b.createElement(
                "div",
                null,
                "With a saved and published OptIn state, we can manually test fire this to myself, as verification of the final emails look and feel and content.\tOnce you click send, it may take a little while to process, so be patient.",
              ),
            );
      };
      const Aa = (0, Yn.EN)(
          (0, Ie.Pi)((e) => {
            const t = B.Get(),
              n = t.GetFullName(),
              { bLoading: a, rgEmailDefAndStats: i } = se(n);
            (0, b.useEffect)(
              () => (
                Hn.Get().SetSelectionFromQueryParams(e.history),
                () => Hn.Get().SetSelection(void 0, void 0, e.history)
              ),
              [n, e.history],
            );
            const l = new Map();
            let o = null;
            if (a)
              return b.createElement(de.V, {
                size: "medium",
                position: "center",
                string: (0, me.Xx)("#Loading"),
              });
            i
              ? i.forEach((e) => l.set(e.email_def_id, e))
              : (o = t.BIsOptInEnabled()
                  ? b.createElement(
                      "div",
                      { className: Ee.WarningStylesWithIcon },
                      "Warning: We failed to load Email Definitions and Stats from the server. This means we cannot determine which emalis have already been sent and thus we cannot fire an email in this state. However emails can be created, edited and localized.",
                    )
                  : b.createElement(
                      "div",
                      { className: Ee.WarningStylesWithIcon },
                      "Opt-in isn't enabled. You can create, edit and localized emalis. You canont stage or send emails on an inactive opt-in.",
                    ));
            const r = new Array(),
              s = new Array(),
              c = new Array();
            let m = null;
            return (
              (t.GetEmailDefinitions() || []).forEach((t) => {
                const n = t === Hn.Get().GetSelection();
                if (t.BIsDraftEmail())
                  c.push(
                    b.createElement(
                      Ga,
                      {
                        key: "draft" + t.GetUniqueID(),
                        emailEditModel: t,
                        bSelected: n,
                        history: e.history,
                      },
                      b.createElement(wa, { emailEditModel: t }),
                    ),
                  );
                else {
                  const a = t.GetServerEmailDefID(),
                    i = l.get(a);
                  i
                    ? i.stats && i.stats.completed
                      ? r.push(
                          b.createElement(
                            Ga,
                            {
                              key: "sent" + t.GetUniqueID(),
                              emailEditModel: t,
                              bSelected: n,
                              serverDef: i,
                              history: e.history,
                            },
                            b.createElement(Na, {
                              emailEditModel: t,
                              serverDef: i,
                            }),
                          ),
                        )
                      : s.push(
                          b.createElement(
                            Ga,
                            {
                              key: "staged" + t.GetUniqueID(),
                              emailEditModel: t,
                              bSelected: n,
                              serverDef: i,
                              history: e.history,
                            },
                            b.createElement(La, {
                              emailEditModel: t,
                              serverDef: i,
                            }),
                          ),
                        )
                    : (m || console.log(l), (m = t));
                }
              }),
              m
                ? b.createElement(
                    "div",
                    null,
                    "Error: Server has a different mapping for stage/sent email: ",
                    m.GetServerEmailDefID(),
                    " - ",
                    m.GetUniqueID(),
                    " - ",
                    typeof m.GetServerEmailDefID(),
                    ". Reach out to steam-events to investigate",
                  )
                : b.createElement(
                    "div",
                    { className: va.EmailAdmin },
                    o,
                    b.createElement("h1", null, "Email Dashboard"),
                    b.createElement(
                      "div",
                      null,
                      "This tool lets you create, send or schedule to send one or more emails to users who have opted-in to this specific event. This is useful for setting up reminders to take action or links to help them fully participate in an event.",
                    ),
                    r.length > 0 &&
                      b.createElement(
                        "div",
                        null,
                        b.createElement(
                          "h2",
                          null,
                          "Sent Emails (",
                          r.length,
                          ")",
                        ),
                        b.createElement(
                          "div",
                          { className: va.EmailsCtn },
                          b.createElement(
                            "table",
                            null,
                            b.createElement(
                              "tr",
                              null,
                              b.createElement("th", null, "Name"),
                              b.createElement("th", null, "Type"),
                              b.createElement(
                                "th",
                                null,
                                b.createElement(
                                  we.HP,
                                  {
                                    toolTipContent:
                                      "This is the number of unique accounts encountered; this can be less than email to send/sent as an account registering multiple opt-ins, will get separate emails for each app opted in.",
                                  },
                                  "Accounts",
                                  b.createElement("br", null),
                                  "Examined (?):",
                                ),
                              ),
                              b.createElement(
                                "th",
                                null,
                                b.createElement(
                                  we.HP,
                                  {
                                    toolTipContent:
                                      "Email sent can be higher than account examined if a user registered more than one app",
                                  },
                                  "Accounts",
                                  b.createElement("br", null),
                                  "Emailed (?):",
                                ),
                              ),
                              b.createElement(
                                "th",
                                null,
                                "Accounts",
                                b.createElement("br", null),
                                "opted out:",
                              ),
                              b.createElement(
                                "th",
                                null,
                                "Accounts",
                                b.createElement("br", null),
                                "Failed:",
                              ),
                              b.createElement("th", null, "Clone"),
                              b.createElement("th", null, "Preview"),
                              b.createElement("th", null, "Results"),
                              b.createElement("th", null, "Details"),
                            ),
                            r.length > 0
                              ? r
                              : b.createElement("span", null, "No sent email"),
                          ),
                        ),
                      ),
                    s.length > 0 &&
                      b.createElement(
                        "div",
                        null,
                        b.createElement(
                          "h2",
                          null,
                          "Staged/Scheduled Emails (",
                          s.length,
                          ")",
                        ),
                        b.createElement(
                          "div",
                          { className: va.EmailsCtn },
                          b.createElement(
                            "table",
                            null,
                            b.createElement(
                              "tr",
                              null,
                              b.createElement("th", null, "Name"),
                              b.createElement("th", null, "Type"),
                              b.createElement("th", null, "Type"),
                              b.createElement("th", null, "Estimated To Mail"),
                              b.createElement("th", null, "Estimated To Skip"),
                              b.createElement("th", null, "Send"),
                              b.createElement("th", null, "Schedule"),
                              b.createElement("th", null, "Test"),
                              b.createElement("th", null, "Preview"),
                              b.createElement("th", null, "Clone"),
                            ),
                            s.length > 0
                              ? s
                              : b.createElement(
                                  "span",
                                  null,
                                  "No staged Emails",
                                ),
                          ),
                        ),
                      ),
                    b.createElement(
                      "div",
                      { className: va.EmailTypesCtn },
                      b.createElement(
                        "h2",
                        null,
                        "Draft Emails (",
                        c.length,
                        ")",
                      ),
                      b.createElement(
                        "div",
                        { className: va.EmailsCtn },
                        b.createElement(
                          "table",
                          null,
                          b.createElement(
                            "tr",
                            null,
                            b.createElement("th", null, "Name"),
                            b.createElement("th", null, "Type"),
                            b.createElement("th", null, "Sections"),
                            b.createElement("th", null, "Targeting"),
                            b.createElement("th", null, "Stage"),
                          ),
                          Boolean(c.length > 0)
                            ? c
                            : b.createElement("div", null, "No Drafts"),
                        ),
                      ),
                      b.createElement(
                        j.zx,
                        {
                          className: xe().BasicButtonSize,
                          onClick: (t) =>
                            (0, W.AM)(
                              b.createElement(Ta, { history: e.history }),
                              (0, K.RA)(t),
                            ),
                        },
                        "Create New Email Draft",
                      ),
                    ),
                    b.createElement("hr", null),
                    Boolean(Hn.Get().BHasSelection())
                      ? b.createElement(ma, {
                          emailDef: Hn.Get().GetSelection(),
                          appid: 220,
                        })
                      : b.createElement(
                          "div",
                          null,
                          "No email selected for edit/viewing. Create or select an existing email",
                        ),
                  )
            );
          }),
        ),
        Ta = (e) => {
          const { closeModal: t } = e,
            [n, a] = b.useState(""),
            [i, l] = b.useState(E.k_RegistrationConfirmation),
            o = (0, b.useCallback)(() => {
              const a = {
                  unique_id: Ra(),
                  type: i,
                  internal_name: n,
                  sections: [],
                },
                l = B.Get().AddEmailDraft(a);
              Hn.Get().SetSelection(l, void 0, e.history), t();
            }, [t, i, n, e.history]);
          return b.createElement(
            he.RG,
            { bAllowFullSize: !0, onCancel: t, closeModal: t },
            b.createElement(j.h4, null, "Create New Email Draft"),
            b.createElement(
              j.uT,
              null,
              b.createElement(
                "div",
                null,
                "Enter an internal name for the email. This is only for us to see and differentiate emails.",
              ),
              b.createElement("input", {
                type: "text",
                value: n,
                placeholder: "Enter Internal Name",
                onFocus: (e) => e.target.select(),
                onChange: (e) => a(e.currentTarget.value),
                maxLength: 240,
              }),
              b.createElement(ka, { curValue: i, fnOnChange: l }),
            ),
            b.createElement(
              j.$_,
              null,
              b.createElement(j.o9, {
                bOKDisabled: 0 == n.trim().length,
                onCancel: t,
                onOK: o,
              }),
            ),
          );
        },
        ka = (e) => {
          const { curValue: t, fnOnChange: n } = e,
            a = v.map((e) => ({ label: S(e), data: e }));
          return b.createElement(j.ry, {
            label: "Email Type",
            strDropDownClassName: H().DropDownScroll,
            rgOptions: a,
            selectedOption: t,
            onChange: (e) => n(e.data),
            contextMenuPositionOptions: { bDisablePopTop: !0 },
          });
        },
        wa = (e) => {
          const { emailEditModel: t } = e,
            n = B.Get();
          return b.createElement(
            b.Fragment,
            null,
            b.createElement(
              "td",
              { className: va.EmailTitle },
              t.GetInternalName(),
            ),
            b.createElement("td", null, S(t.GetType())),
            b.createElement("td", null, t.GetNumberSections().toLocaleString()),
            b.createElement(
              "td",
              { className: va.EmailStatusTodo },
              Xn(t.GetEmailTargeting()),
            ),
            b.createElement(
              "td",
              null,
              b.createElement(
                j.zx,
                {
                  className: xe().BasicButtonSize,
                  disabled: re.Get().BHasEmailDefLoadFailure(n.GetFullName()),
                  onClick: (e) =>
                    (0, W.AM)(
                      b.createElement(Ea, { emailDef: t }),
                      (0, K.RA)(e),
                    ),
                },
                "Stage Email For Sending",
              ),
            ),
          );
        },
        Na = (e) => {
          var t, n, a, i;
          const { emailEditModel: l, serverDef: o } = e,
            [r, s] = (0, b.useState)(!1);
          return (
            (0, b.useEffect)(() => {
              l.SetReadOnly(!0);
            }, [l]),
            b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "td",
                { className: va.EmailTitle },
                l.GetInternalName(),
              ),
              b.createElement(
                "td",
                { className: va.EmailType },
                S(l.GetType()),
              ),
              b.createElement(
                "td",
                null,
                b.createElement(
                  "span",
                  null,
                  (null === (t = null == o ? void 0 : o.stats) || void 0 === t
                    ? void 0
                    : t.accounts_examined) || 0,
                ),
              ),
              b.createElement(
                "td",
                null,
                b.createElement(
                  "span",
                  null,
                  (null === (n = null == o ? void 0 : o.stats) || void 0 === n
                    ? void 0
                    : n.accounts_emailed) || 0,
                ),
              ),
              b.createElement(
                "td",
                null,
                b.createElement(
                  "span",
                  null,
                  (null === (a = null == o ? void 0 : o.stats) || void 0 === a
                    ? void 0
                    : a.accounts_not_emailed_opted_out) || 0,
                ),
              ),
              b.createElement(
                "td",
                null,
                b.createElement(
                  "span",
                  null,
                  (null === (i = null == o ? void 0 : o.stats) || void 0 === i
                    ? void 0
                    : i.accounts_email_failed) || 0,
                ),
              ),
              b.createElement(
                "td",
                null,
                b.createElement(
                  j.zx,
                  {
                    className: (0, Z.Z)(xe().BasicButtonSize, va.CloneBtn),
                    onClick: () => Ba(l),
                  },
                  "Clone",
                ),
              ),
              b.createElement(
                "td",
                { className: va.NoWrap },
                b.createElement(Oa, { emailEditModel: l }),
              ),
              b.createElement(
                "td",
                { className: va.NoWrap },
                b.createElement(Vn, { serverDef: o, emailEditModel: l }),
              ),
              b.createElement(
                "td",
                null,
                r
                  ? b.createElement(Ia, { emailEditModel: l, serverDef: o })
                  : b.createElement(j.ji, {
                      label: "Show Details",
                      checked: r,
                      onChange: s,
                    }),
              ),
            )
          );
        };
      function La(e) {
        const { emailEditModel: t, serverDef: n } = e,
          [a, i] = (function (e) {
            const [t, n] = b.useState(!re.Get().BHasReachEstimateLoaded(e));
            return (
              (0, b.useEffect)(() => {
                re.Get().BHasReachEstimateLoaded(e)
                  ? n(!1)
                  : re
                      .Get()
                      .LoadEstimateEmailReach(e)
                      .finally(() => n(!1));
              }, [e]),
              [t, re.Get().GetReachEstimate(e)]
            );
          })(n.email_def_id);
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "td",
            { className: va.EmailTitle },
            t.GetInternalName(),
          ),
          b.createElement(
            "td",
            { className: va.EmailType },
            "Type: ",
            S(t.GetType()),
          ),
          b.createElement(
            "td",
            null,
            Boolean(n.start_rtime)
              ? b.createElement(
                  "span",
                  null,
                  "Scheduled:",
                  (0, me.$1)(n.start_rtime),
                  b.createElement("span", null, " - "),
                  (0, un.Sc)(n.start_rtime, { bForce24HourClock: !1 }),
                )
              : "Manual Email",
          ),
          b.createElement(
            "td",
            null,
            a
              ? b.createElement(de.V, {
                  size: "small",
                  string: (0, me.Xx)("#Loading"),
                })
              : b.createElement(
                  "span",
                  null,
                  i ? i.accounts_emailed : "error loading estimate",
                ),
          ),
          b.createElement(
            "td",
            null,
            a
              ? b.createElement(de.V, {
                  size: "small",
                  string: (0, me.Xx)("#Loading"),
                })
              : b.createElement(
                  "span",
                  null,
                  i
                    ? i.accounts_not_emailed_opted_out
                    : "error loading estimate",
                ),
          ),
          b.createElement(
            "td",
            { className: va.NoWrap },
            b.createElement(
              j.zx,
              {
                className: xe().BasicButtonSize,
                onClick: (e) =>
                  (0, W.AM)(b.createElement(Sa, { emailDef: t }), (0, K.RA)(e)),
              },
              "Send ACTUAL Email Now",
            ),
          ),
          b.createElement(
            "td",
            { className: va.NoWrap },
            b.createElement(qn, { emailEditModel: t, serverDef: n }),
          ),
          b.createElement(xa, { emailEditModel: t }),
        );
      }
      function xa(e) {
        const { emailEditModel: t } = e;
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "td",
            { className: va.NoWrap },
            b.createElement(
              j.zx,
              {
                className: xe().BasicButtonSize,
                onClick: (e) =>
                  (0, W.AM)(b.createElement(ba, { emailDef: t }), (0, K.RA)(e)),
              },
              "Test Email fired To Myself",
            ),
          ),
          b.createElement(
            "td",
            { className: va.NoWrap },
            b.createElement(Oa, { emailEditModel: t }),
          ),
          b.createElement(
            "td",
            { className: va.NoWrap },
            b.createElement(
              j.zx,
              { className: xe().BasicButtonSize, onClick: () => Ba(t) },
              "Clone",
            ),
          ),
        );
      }
      function Oa(e) {
        const { emailEditModel: t } = e;
        let n = N.De.STORE_BASE_URL + "email/PartnerAppOptIn/?";
        return (
          t.GetType() == E.k_Invite
            ? (n += "partner_name=Valve%20Games&")
            : (n += "appid=220&"),
          (n += "optouttoken=aa&settingflag=0"),
          (n += "&optinname=" + B.Get().GetFullName()),
          (n += "&emailtemplateid=" + t.GetUniqueID()),
          (n += "&force_text_view=0"),
          b.createElement(
            we.HP,
            {
              toolTipContent:
                "You can update the URL using ?l=<language> to test the variousl localization",
            },
            b.createElement(
              j.zx,
              {
                className: xe().BasicButtonSize,
                onClick: (e) => (0, q.R6)(e, n),
              },
              "Web Preview",
            ),
          )
        );
      }
      const Ga = (0, Ie.Pi)((e) => {
        const { emailEditModel: t, bSelected: n, serverDef: a } = e;
        return b.createElement(
          "tr",
          {
            onClick: () => Hn.Get().SetSelection(t, a, e.history),
            className: (0, Z.Z)({ [va.TileContainer]: !0, [va.Selected]: n }),
          },
          e.children,
        );
      });
      function Ra() {
        const e = B.Get();
        let t = Math.floor(1 + 1e5 * Math.random());
        for (; e.GetEmailDefinitionByID(h + t); )
          t = Math.floor(1 + 1e5 * Math.random());
        return h + t;
      }
      function Ba(e) {
        const t = Object.assign(Object.assign({}, e.GetModel()), {
          unique_id: Ra(),
          email_def_id: void 0,
          internal_name: "Clone Of: " + e.GetInternalName(),
          sections: e.GetSections().map((e) => Object.assign({}, e.GetModel())),
        });
        B.Get().AddEmailDraft(t);
      }
      var Ma = n(41200),
        Pa = n(11170);
      function Fa(e) {
        return b.createElement(
          "div",
          {
            className: H().EditPreviewButton,
            onClick: (e) => {
              (0, W.AM)(b.createElement(Ua, null), (0, K.RA)(e));
            },
          },
          "Export Localization",
        );
      }
      function Ua(e) {
        var t;
        const { closeModal: n } = e,
          a = B.Get().GetModel(),
          [i, l] = b.useState(!0),
          [o, r] = b.useState(new Array());
        return b.createElement(
          he.uH,
          {
            strTitle: "Export Localizations",
            bAlertDialog: !0,
            onCancel: n,
            closeModal: n,
          },
          b.createElement(
            j.Ac,
            null,
            b.createElement(
              "p",
              null,
              "Choose sections of the opt-in to export for localization",
            ),
            b.createElement(j.ji, {
              label: "Export Event Body",
              onChange: l,
              checked: i,
            }),
            Boolean(
              (null === (t = a.emails) || void 0 === t ? void 0 : t.length) > 0,
            ) &&
              b.createElement(
                "div",
                null,
                b.createElement("p", null, "Choose from the emails to export:"),
                a.emails.map((e) =>
                  b.createElement(j.ji, {
                    label: e.internal_name + " (" + e.unique_id + ")",
                    key: "ckhbox" + e.unique_id,
                    onChange: (t) => {
                      const n = JSON.parse(JSON.stringify(o));
                      t
                        ? n.push(e.unique_id)
                        : n.splice(n.indexOf(e.unique_id), 1),
                        r(n);
                    },
                    checked: o.indexOf(e.unique_id) >= 0,
                  }),
                ),
              ),
          ),
          b.createElement(
            j.$_,
            null,
            b.createElement(Ma.Gp, {
              fnGetLocData: () =>
                (function (e, t, n) {
                  var a;
                  let i = new Pa.C();
                  for (let l = m.Df.k_Lang_English; l < m.Df.k_Lang_MAX; ++l)
                    t && mi(e, i, l),
                      null === (a = e.emails) ||
                        void 0 === a ||
                        a
                          .filter((e) => n.indexOf(e.unique_id) >= 0)
                          .forEach((e) => ci(e, i, l));
                  return i;
                })(a, i, o),
              bShowXML: !0,
              bShowCSV: !0,
              strFileNamePrefix: "optin",
              lang: p.U.Get().GetCurEditLanguage(),
            }),
          ),
        );
      }
      function ja(e) {
        const t = B.Get();
        return b.createElement(Ma.Q0, {
          fnOnImportLocData: (e, n) => {
            const a = (function (e, t, n) {
              let a = new Array();
              const i = t.GetSortedTokenList(),
                l = !0;
              return (
                (0, c.z)(() => {
                  n.forEach((n) => {
                    let o = !1,
                      r = (0, m.j_)(n);
                    i.forEach((i) => {
                      var s, c, m, d, p;
                      const u = t.GetLocalization(i, n) || "";
                      if (
                        (i === Xa &&
                          (u ||
                            (e.event_title[r] &&
                              e.event_title[r].length > 0)) &&
                          (e.event_title || (e.event_title = {}),
                          e.event_title[r] != u &&
                            ((e.event_title[r] = u), (o = !0))),
                        i === za &&
                          (u ||
                            (e.description[r] &&
                              e.description[r].length > 0)) &&
                          (e.description || (e.description = {}),
                          e.description[r] != u &&
                            ((e.description[r] = u), (o = !0))),
                        i === Qa &&
                          (u ||
                            (null ===
                              (c =
                                null === (s = e.opt_in_registration_title) ||
                                void 0 === s
                                  ? void 0
                                  : s[r]) || void 0 === c
                              ? void 0
                              : c.length) > 0) &&
                          (e.opt_in_registration_title ||
                            (e.opt_in_registration_title = {}),
                          e.opt_in_registration_title[r] != u &&
                            ((e.opt_in_registration_title[r] = u), (o = !0))),
                        i === $a &&
                          (u ||
                            (null ===
                              (d =
                                null === (m = e.opt_in_registration_checkbox) ||
                                void 0 === m
                                  ? void 0
                                  : m[r]) || void 0 === d
                              ? void 0
                              : d.length) > 0) &&
                          (e.opt_in_registration_checkbox ||
                            (e.opt_in_registration_checkbox = {}),
                          e.opt_in_registration_checkbox[r] != u &&
                            ((e.opt_in_registration_checkbox[r] = u),
                            (o = !0))),
                        i === Ha &&
                          (u ||
                            (e.help_text[r] && e.help_text[r].length > 0)) &&
                          (e.help_text || (e.help_text = {}),
                          e.help_text[r] != u &&
                            ((e.help_text[r] = u), (o = !0))),
                        i === Va &&
                          (u ||
                            (e.appeals_text[r] &&
                              e.appeals_text[r].length > 0)) &&
                          (e.appeals_text || (e.appeals_text = {}),
                          e.appeals_text[r] != u &&
                            ((e.appeals_text[r] = u), (o = !0))),
                        i === Za &&
                          (u ||
                            (e.special_event_name[r] &&
                              e.special_event_name[r].length > 0)) &&
                          (e.special_event_name || (e.special_event_name = {}),
                          e.special_event_name[r] != u &&
                            ((e.special_event_name[r] = u), (o = !0))),
                        i === Ka &&
                          (u ||
                            (e.special_event_description[r] &&
                              e.special_event_description[r].length > 0)) &&
                          (e.special_event_description ||
                            (e.special_event_description = {}),
                          e.special_event_description[r] != u &&
                            ((e.special_event_description[r] = u), (o = !0))),
                        null === (p = e.special_event_time_blocks) ||
                          void 0 === p ||
                          p.forEach((e, t) => {
                            var n, a;
                            i == Ya + t &&
                              (u ||
                                (null ===
                                  (a =
                                    null === (n = e.block_reason) ||
                                    void 0 === n
                                      ? void 0
                                      : n[r]) || void 0 === a
                                  ? void 0
                                  : a.length) > 0) &&
                              (e.block_reason || (e.block_reason = {}),
                              e.block_reason[r] != u &&
                                ((e.block_reason[r] = u), (o = !0)));
                          }),
                        i === Wa &&
                          (u ||
                            (e.artist_statement &&
                              e.artist_statement.description &&
                              e.artist_statement.description[r] &&
                              e.artist_statement.description[r].length > 0)) &&
                          (e.artist_statement
                            ? e.artist_statement.description ||
                              (e.artist_statement.description = {})
                            : (e.artist_statement = { description: {} }),
                          e.artist_statement.description[r] != u &&
                            ((e.artist_statement.description[r] = u),
                            (o = !0))),
                        i === qa &&
                          (u ||
                            (e.build_store_page &&
                              e.build_store_page.description &&
                              e.build_store_page.description[r] &&
                              e.build_store_page.description[r].length > 0)) &&
                          (e.build_store_page
                            ? e.build_store_page.description ||
                              (e.build_store_page.description = {})
                            : (e.build_store_page = { description: {} }),
                          e.build_store_page.description[r] != u &&
                            ((e.build_store_page.description[r] = u),
                            (o = !0))),
                        i.startsWith(Ja))
                      ) {
                        let t = !1;
                        if (
                          (e.dynamic_sections || (e.dynamic_sections = []),
                          e.dynamic_sections.forEach((e) => {
                            i === ei + e.unique_id &&
                              ((u ||
                                (e.name &&
                                  e.name[r] &&
                                  e.name[r].length > 0)) &&
                                (e.name || (e.name = {}),
                                e.name[r] != u && ((e.name[r] = u), (o = !0))),
                              (t = !0)),
                              i === ti + e.unique_id &&
                                ((u ||
                                  (e.description &&
                                    e.description[r] &&
                                    e.description[r].length > 0)) &&
                                  (e.description || (e.description = {}),
                                  e.description[r] != u &&
                                    ((e.description[r] = u), (o = !0))),
                                (t = !0)),
                              e.lists
                                ? e.lists.forEach((n) => {
                                    i == ni + e.unique_id + n.unique_id &&
                                      ((u ||
                                        (n.option_title &&
                                          n.option_title[r] &&
                                          n.option_title[r].length > 0)) &&
                                        (n.option_title ||
                                          (n.option_title = {}),
                                        n.option_title[r] != u &&
                                          ((n.option_title[r] = u), (o = !0))),
                                      (t = !0)),
                                      n.options
                                        ? n.options.forEach((a) => {
                                            i ==
                                              ai +
                                                e.unique_id +
                                                n.unique_id +
                                                a.unique_id &&
                                              ((u ||
                                                (a.text &&
                                                  a.text[r] &&
                                                  a.text[r].length > 0)) &&
                                                (a.text || (a.text = {}),
                                                a.text[r] != u &&
                                                  ((a.text[r] = u), (o = !0))),
                                              (t = !0)),
                                              i ==
                                                ii +
                                                  e.unique_id +
                                                  n.unique_id +
                                                  a.unique_id &&
                                                ((u ||
                                                  (a.tooltip &&
                                                    a.tooltip[r] &&
                                                    a.tooltip[r].length > 0)) &&
                                                  (a.tooltip ||
                                                    (a.tooltip = {}),
                                                  a.tooltip[r] != u &&
                                                    ((a.tooltip[r] = u),
                                                    (o = !0))),
                                                (t = !0));
                                          })
                                        : (n.options = []);
                                  })
                                : (e.lists = []);
                          }),
                          !t && l)
                        ) {
                          const n = i.startsWith(ei),
                            a = i.startsWith(ti),
                            l = i.startsWith(ai),
                            o = i.startsWith(ii);
                          if (n || a) {
                            let a = n
                                ? i.substr(ei.length)
                                : i.substr(ti.length),
                              l = B.CreateDefaultDynamicSection();
                            (l.lists = []),
                              (l.unique_id = a),
                              n
                                ? ((l.name = {}), (l.name[r] = u))
                                : ((l.description = {}),
                                  (l.description[r] = u)),
                              (t = !0),
                              e.dynamic_sections.push(l);
                          } else if (i.startsWith(ni)) {
                            let n = i.substr(ni.length),
                              a = n.indexOf(G),
                              l = n.substr(0, a),
                              o = n.substr(a),
                              s = e.dynamic_sections.findIndex(
                                (e) => e.unique_id == l,
                              );
                            if (-1 != s) {
                              let n = {
                                unique_id: o,
                                options: [],
                                option_title: {},
                              };
                              (n.option_title[r] = u),
                                e.dynamic_sections[s].lists.push(n),
                                (t = !0);
                            } else
                              console.log(
                                "Localization: Add missing: Could not find section: " +
                                  l,
                              );
                          } else if (l || o) {
                            let n = l
                                ? i.substr(ai.length)
                                : i.substr(ii.length),
                              a = n.indexOf(G),
                              o = n.substr(0, a),
                              s = n.substr(a),
                              c = s.indexOf(R),
                              m = s.substr(0, c),
                              d = s.substr(c),
                              p = e.dynamic_sections.findIndex(
                                (e) => e.unique_id == o,
                              );
                            if (-1 != p) {
                              let n = e.dynamic_sections[p].lists.findIndex(
                                (e) => e.unique_id == m,
                              );
                              if (-1 != n) {
                                let a = { unique_id: d, text: {} };
                                l
                                  ? (a.text[r] = u)
                                  : ((a.tooltip = {}), (a.tooltip[r] = u)),
                                  e.dynamic_sections[p].lists[n].options.push(
                                    a,
                                  ),
                                  (t = !0);
                              } else
                                console.log(
                                  "Localization: Add missing: Could not find list under section " +
                                    o +
                                    ":" +
                                    m,
                                  d,
                                );
                            } else
                              console.log(
                                "Localization: Add missing: Could not find section: " +
                                  o,
                                m,
                                d,
                              );
                          }
                        }
                      }
                      i.startsWith(li) &&
                        (e.emails || (e.emails = []),
                        e.emails.forEach((e) => {
                          i === oi + e.unique_id &&
                            (u ||
                              (e.subject &&
                                e.subject[r] &&
                                e.subject[r].length > 0)) &&
                            (e.subject || (e.subject = {}),
                            e.subject[r] != u &&
                              ((e.subject[r] = u), (o = !0))),
                            (i.startsWith(ri + e.unique_id) ||
                              i.startsWith(si + e.unique_id)) &&
                              e.sections.forEach((t) => {
                                t.type == f.k_Custom &&
                                  (i === ri + e.unique_id + t.unique_id &&
                                    (u ||
                                      (t.title &&
                                        t.title[r] &&
                                        t.title[r].length > 0)) &&
                                    (t.title || (t.title = {}),
                                    t.title[r] != u &&
                                      ((t.title[r] = u), (o = !0))),
                                  i === si + e.unique_id + t.unique_id &&
                                    (u ||
                                      (t.description &&
                                        t.description[r] &&
                                        t.description[r].length > 0)) &&
                                    (t.description || (t.description = {}),
                                    t.description[r] != u &&
                                      ((t.description[r] = u), (o = !0))));
                              });
                        })),
                        o && -1 == a.findIndex((e) => e == n) && a.push(n);
                    });
                  });
                }),
                a
              );
            })(t.GetModel(), e, n);
            return a && t.SetDirty(!0), a;
          },
        });
      }
      const Xa = "event_title",
        za = "event_description",
        Ha = "help_text",
        Va = "appeals_text",
        Wa = "artist_statement_desc",
        qa = "store_page_desc",
        Za = "special_event_name",
        Ka = "special_event_desc",
        Ya = "special_event_block_",
        Qa = "optin_reg_title",
        $a = "optin_reg_checkbox",
        Ja = "dynamic_section_",
        ei = Ja + "name_",
        ti = Ja + "desc_",
        ni = Ja + "list_name_",
        ai = Ja + "option_",
        ii = Ja + "tooltip_",
        li = "email_",
        oi = li + "subject_",
        ri = li + "title_",
        si = li + "desc_";
      function ci(e, t, n) {
        var a;
        let i = (0, m.j_)(n);
        const l = e.subject && e.subject[i] && e.subject[i].length > 0;
        (l || n == m.Df.k_Lang_English) &&
          t.SetLocalization(oi + e.unique_id, n, l ? e.subject[i] : ""),
          null === (a = e.sections) ||
            void 0 === a ||
            a.forEach((a) => {
              if (a.type == f.k_Custom) {
                const l = a.title && a.title[i] && a.title[i].length > 0;
                (l || n == m.Df.k_Lang_English) &&
                  t.SetLocalization(
                    ri + e.unique_id + a.unique_id,
                    n,
                    l ? a.title[i] : "",
                  );
                const o =
                  a.description &&
                  a.description[i] &&
                  a.description[i].length > 0;
                (o || n == m.Df.k_Lang_English) &&
                  t.SetLocalization(
                    si + e.unique_id + a.unique_id,
                    n,
                    o ? a.description[i] : "",
                  );
              }
            });
      }
      function mi(e, t, n) {
        var a, i, l, o, r;
        let s = (0, m.j_)(n);
        const c =
          e.event_title && e.event_title[s] && e.event_title[s].length > 0;
        (c || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Xa, n, c ? e.event_title[s] : "");
        const d =
          e.description && e.description[s] && e.description[s].length > 0;
        (d || n == m.Df.k_Lang_English) &&
          t.SetLocalization(za, n, d ? e.description[s] : "");
        const p =
          (null ===
            (i =
              null === (a = e.opt_in_registration_title) || void 0 === a
                ? void 0
                : a[s]) || void 0 === i
            ? void 0
            : i.length) > 0;
        (p || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Qa, n, p ? e.opt_in_registration_title[s] : "");
        const u =
          (null ===
            (o =
              null === (l = e.opt_in_registration_checkbox) || void 0 === l
                ? void 0
                : l[s]) || void 0 === o
            ? void 0
            : o.length) > 0;
        (u || n == m.Df.k_Lang_English) &&
          t.SetLocalization($a, n, u ? e.opt_in_registration_checkbox[s] : "");
        const _ = e.help_text && e.help_text[s] && e.help_text[s].length > 0;
        (_ || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Ha, n, _ ? e.help_text[s] : "");
        ((e.appeals_text &&
          e.appeals_text[s] &&
          e.appeals_text[s].length > 0) ||
          n == m.Df.k_Lang_English) &&
          t.SetLocalization(Va, n, _ ? e.appeals_text[s] : "");
        const h =
          e.special_event_name &&
          e.special_event_name[s] &&
          e.special_event_name[s].length > 0;
        (h || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Za, n, h ? e.special_event_name[s] : "");
        const g =
          e.special_event_description &&
          e.special_event_description[s] &&
          e.special_event_description[s].length > 0;
        (g || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Ka, n, g ? e.special_event_description[s] : ""),
          null === (r = e.special_event_time_blocks) ||
            void 0 === r ||
            r.forEach((e, a) => {
              var i, l;
              const o =
                (null ===
                  (l =
                    null === (i = e.block_reason) || void 0 === i
                      ? void 0
                      : i[s]) || void 0 === l
                  ? void 0
                  : l.length) > 0;
              (o || n == m.Df.k_Lang_English) &&
                t.SetLocalization(Ya + a, n, o ? e.block_reason[s] : "");
            });
        const E =
          e.artist_statement &&
          e.artist_statement.description &&
          e.artist_statement.description[s] &&
          e.artist_statement.description[s].length > 0;
        (E || n == m.Df.k_Lang_English) &&
          t.SetLocalization(Wa, n, E ? e.artist_statement.description[s] : "");
        const v =
          e.build_store_page &&
          e.build_store_page.description &&
          e.build_store_page.description[s] &&
          e.build_store_page.description[s].length > 0;
        (v || n == m.Df.k_Lang_English) &&
          t.SetLocalization(qa, n, v ? e.build_store_page.description[s] : ""),
          e.dynamic_sections &&
            e.dynamic_sections.forEach((e) => {
              const a = e.name && e.name[s] && e.name[s].length > 0;
              (a || n == m.Df.k_Lang_English) &&
                t.SetLocalization(ei + e.unique_id, n, a ? e.name[s] : "");
              const i =
                e.description &&
                e.description[s] &&
                e.description[s].length > 0;
              (i || n == m.Df.k_Lang_English) &&
                t.SetLocalization(
                  ti + e.unique_id,
                  n,
                  i ? e.description[s] : "",
                ),
                e.lists &&
                  e.lists.forEach((a) => {
                    const i =
                      a.option_title &&
                      a.option_title[s] &&
                      a.option_title[s].length > 0;
                    (i || n == m.Df.k_Lang_English) &&
                      t.SetLocalization(
                        ni + e.unique_id + a.unique_id,
                        n,
                        i ? a.option_title[s] : "",
                      ),
                      a.options &&
                        a.options.forEach((i) => {
                          const l = i.text && i.text[s] && i.text[s].length > 0;
                          (l || m.Df.k_Lang_English) &&
                            t.SetLocalization(
                              ai + e.unique_id + a.unique_id + i.unique_id,
                              n,
                              l ? i.text[s] : "",
                            );
                          const o =
                            i.tooltip &&
                            i.tooltip[s] &&
                            i.tooltip[s].length > 0;
                          (l || m.Df.k_Lang_English) &&
                            t.SetLocalization(
                              ii + e.unique_id + a.unique_id + i.unique_id,
                              n,
                              o ? i.tooltip[s] : "",
                            );
                        });
                  });
            });
      }
      function di(e) {
        const t = (function (e) {
          const t = (0, ae.useQuery)(
            ["getspecialeventinfo", e],
            () =>
              (0, l.mG)(this, void 0, void 0, function* () {
                return yield (function (e) {
                  var t, n;
                  return (0, l.mG)(this, void 0, void 0, function* () {
                    const a =
                        N.De.PARTNER_BASE_URL + "optin/ajaxgetspecialeventinfo",
                      i = { sessionid: N.De.SESSIONID, opt_in_name: e },
                      l = yield r().get(a, { params: i, withCredentials: !0 });
                    return 200 == (null == l ? void 0 : l.status) &&
                      (null === (t = null == l ? void 0 : l.data) ||
                      void 0 === t
                        ? void 0
                        : t.success) == A.s.k_EResultOK &&
                      (null === (n = null == l ? void 0 : l.data) ||
                      void 0 === n
                        ? void 0
                        : n.results)
                      ? l.data.results
                      : (console.error(
                          "Failed to fetch FetchSpecialEventInfo: ",
                          (0, k.l)(l),
                        ),
                        null);
                  });
                })(e);
              }),
            { staleTime: 60 * mn._H.PerMinute * 1e3 },
          );
          return t.isLoading ? null : t.data;
        })(B.Get().GetOptInPageID());
        return t
          ? b.createElement(pi, { rgEventInfo: t })
          : b.createElement(de.V, { string: (0, me.Xx)("#Loading") });
      }
      function pi(e) {
        const { rgEventInfo: t } = e,
          n = B.Get(),
          [a, i, l, o, r] = (0, b.useMemo)(
            () => [
              t.length,
              t.filter((e) => e.published).length,
              t.filter((e) => e.hidden && !e.published).length,
              t.filter((e) => !Boolean(e.appid)),
              t.filter(
                (e) =>
                  e.start_time < n.GetSpecialEventStartTime() ||
                  n.BIsInSpecialEventBlockedTime(e.start_time),
              ),
            ],
            [n, t],
          );
        return b.createElement(
          "div",
          null,
          b.createElement(
            "p",
            null,
            "A special event has been defined for this optin.  All events of this type include the opt-in page name (",
            n.GetOptInPageID(),
            ") as a annoucement tags with the event.",
            Boolean(n.GetPublicEventID())
              ? b.createElement(
                  "span",
                  null,
                  " To see all of the published and visible events you can visit the associated",
                  b.createElement(
                    "a",
                    {
                      href:
                        N.De.STORE_BASE_URL +
                        "news/sale/" +
                        n.GetPublicEventID(),
                    },
                    "sale pages new hub",
                  ),
                  ".",
                )
              : b.createElement(
                  "span",
                  null,
                  "Public Event hasn't been configured. We cannot see published events in the news until that is completed",
                ),
          ),
          b.createElement("div", null, "Total Events with Tags: ", a),
          b.createElement("div", null, "Published Events: ", i),
          b.createElement("div", null, "Draft Events: ", l),
          b.createElement("br", null),
          b.createElement("br", null),
          b.createElement("div", null, "Valve Events: ", o.length),
          o.map((e) => b.createElement(ui, { info: e, key: e.clan_event_gid })),
          b.createElement("br", null),
          b.createElement("br", null),
          b.createElement(
            "div",
            null,
            "Events In Blocked Out Time (needs to be moved): ",
            o.length,
          ),
          r.map((e) => b.createElement(ui, { info: e, key: e.clan_event_gid })),
        );
      }
      function ui(e) {
        const { info: t } = e;
        return t.appid
          ? b.createElement(_i, { info: t })
          : b.createElement(hi, { info: t });
      }
      function _i(e) {
        const { info: t } = e,
          [n] = (0, gt.vs)(t.appid, {}),
          a = t.appid;
        return b.createElement(
          "div",
          null,
          "Game: ",
          (null == n ? void 0 : n.GetName()) || "",
          " (",
          a,
          "), event state time - ",
          b.createElement(V.uv, { startDateAndTime: t.start_time }),
          b.createElement(
            "a",
            {
              href:
                N.De.COMMUNITY_BASE_URL +
                "gid/" +
                t.clan_accountid +
                "/partnerevents/view/" +
                t.clan_event_gid,
            },
            "event link",
          ),
          t.hidden ? " draft mode" : "",
        );
      }
      function hi(e) {
        const { info: t } = e;
        return b.createElement(
          "div",
          null,
          "ClanID: ",
          t.clan_accountid,
          " / ",
          t.clan_event_gid,
          b.createElement(
            "a",
            {
              href:
                N.De.COMMUNITY_BASE_URL +
                "gid/" +
                t.clan_accountid +
                "/partnerevents/view/" +
                t.clan_event_gid,
            },
            "event link",
          ),
        );
      }
      var gi = n(38139),
        Ei = n(27070);
      function vi(e) {
        const { editModel: t } = e,
          n = (0, Ve.SZ)(() => t.GetPointShopPriorityApps()),
          a = (0, Ve.SZ)(() => t.GetPointShopIncludedApps());
        return b.createElement(
          "div",
          { className: Ze().AdminPageCtn },
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement(
              "p",
              null,
              "Every opt-in Event will have its own point shops landing page by default. Its artwork can be customized in the cluster (see the publish path) and the items that are featured for registered games can be modified here.",
            ),
            b.createElement(
              "a",
              {
                href: `${
                  Je.De.STORE_BASE_URL
                }points/shop/event/${t.GetOptInPageID()}`,
              },
              "Point Shop Landing Page",
            ),
            b.createElement(
              "p",
              null,
              "The art assets for the point shop background are part of the cluster page's artwork.",
              b.createElement(
                "a",
                {
                  href: `${
                    Je.De.PARTNER_BASE_URL
                  }admin/store/page/${t.GetFullName()}`,
                },
                "Cluster Editor",
              ),
            ),
          ),
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement("h3", null, "Priority Apps"),
            b.createElement(
              "div",
              null,
              "These apps will have their items which are ALSO marked individually with the OptIn ID appear expliclty at the top of the landing page. This ensures our curated or personally created items get top billing.",
            ),
            b.createElement("br", null),
            b.createElement(Si, { editModel: t }),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(yi, {
                      rgAppIDs: n,
                      fnSetAppIDs: t.SetPointShopPriorityApps,
                    }),
                    (0, K.RA)(e),
                  ),
              },
              "Set Priority Apps",
            ),
          ),
          b.createElement(
            "div",
            { className: xe().Section },
            b.createElement("h3", null, "Included Apps"),
            b.createElement(
              "div",
              null,
              "These are selected list of top or important apps whose animated assets we want to appear in the both the explicit item type lists and the list of apps carousels.",
            ),
            b.createElement("br", null),
            b.createElement(fi, { editModel: t }),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(Ci, { editModel: t }),
                    (0, K.RA)(e),
                  ),
              },
              "Automatically Build App List",
            ),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(yi, {
                      rgAppIDs: a,
                      fnSetAppIDs: t.SetPointShopIncludedApps,
                    }),
                    (0, K.RA)(e),
                  ),
              },
              "Set Included Apps",
            ),
          ),
        );
      }
      function Si(e) {
        const { editModel: t } = e,
          n = (0, Ve.SZ)(() => t.GetPointShopPriorityApps());
        return n
          ? b.createElement(
              "div",
              null,
              n.map((e) => b.createElement(Di, { key: e, appid: e })),
            )
          : b.createElement("div", null, "No Priority Apps");
      }
      function fi(e) {
        const { editModel: t } = e,
          n = (0, Ve.SZ)(() => t.GetPointShopIncludedApps());
        return n
          ? b.createElement(
              "div",
              null,
              n.map((e) => b.createElement(Di, { key: e, appid: e })),
            )
          : b.createElement("div", null, "No Included Apps");
      }
      function Di(e) {
        const { appid: t } = e,
          [n, a] = (0, gt.vs)(t, {});
        return a == gt.Y0.k_EStoreItemCacheState_Unavailable
          ? b.createElement("div", null, "Appid ", t, " Not Found")
          : a == gt.Y0.k_EStoreItemCacheState_Loading
          ? b.createElement("div", null, "Appid ", t, " Loading")
          : b.createElement(
              "div",
              null,
              n.GetName(),
              " ( ",
              t,
              " )",
              b.createElement(
                "a",
                {
                  href: `${
                    Je.De.STORE_BASE_URL
                  }points/shop/app/${n.GetAppID()}`,
                  target: "_blank",
                },
                "Point Shop",
              ),
            );
      }
      function yi(e) {
        const { closeModal: t, rgAppIDs: n, fnSetAppIDs: a } = e,
          [i, l] = b.useState((null == n ? void 0 : n.join("\n")) || "");
        return b.createElement(
          he.uH,
          {
            strTitle: "Set App List",
            strDescription: "Provide the complete list of apps, one per line.",
            closeModal: t,
            onOK: () => {
              const e = i
                .replace(/\n/g, "|")
                .split("|")
                .filter(Boolean)
                .map((e) => Number.parseInt(e.trim()))
                .filter((e) => !isNaN(e));
              a(Array.from(new Set(e)));
            },
          },
          b.createElement("textarea", {
            cols: 120,
            rows: 5,
            onChange: (e) => l(e.currentTarget.value),
            value: i,
            autoFocus: !0,
          }),
        );
      }
      function Ii(e, t) {
        return (0, l.mG)(this, void 0, void 0, function* () {
          let n = null;
          try {
            const a = ie.gA.Init(gi.eQ);
            e.forEach((e) => a.Body().add_appids(e)),
              a.Body().set_language("english"),
              a.Body().set_count(1e3),
              a.Body().add_filters(gi.eY.k_ELoyaltyRewardQueryFilter_Animated);
            const i = yield gi.pQ.QueryRewardItems(t, a);
            if (i.BSuccess() && i.GetEResult() == A.s.k_EResultOK) {
              const t = i
                  .Body()
                  .definitions()
                  .map((e) => e.appid()),
                n = new Set(t);
              return e.filter((e) => n.has(e));
            }
            n = (0, k.l)(i);
          } catch (e) {
            n = (0, k.l)(e);
          }
          return (
            console.warn(
              "BYldFilterAppIDsWithAnimatedPointShopItems service request failed with error",
              n,
              e,
            ),
            null
          );
        });
      }
      function Ci(e) {
        const { closeModal: t, editModel: n } = e,
          [a, i] = (0, b.useState)(50),
          [o, r] = (0, b.useState)(!1),
          [s, c] = (0, b.useState)(!1),
          m = (0, Ve.SZ)(() => n.GetPointShopIncludedApps()),
          d = P(),
          p = (0, Ei.bY)(),
          u = (0, b.useMemo)(() => {
            if (d) {
              if (d.json_featured && s)
                return JSON.parse(d.json_featured).map((e) => e.appid);
              if (d.json_opted_in && !s)
                return JSON.parse(d.json_opted_in).map((e) => e.appid);
            }
            return [];
          }, [d, s]),
          {
            bLoading: _,
            fnGetLongTermSaleRankForApp: h,
            fnbHasSomeLongTermSaleRankForApp: g,
          } = (0, Kt.l)(u),
          E = (0, b.useMemo)(() => {
            if (!_ && (null == u ? void 0 : u.length) > 0) {
              return u
                .filter(g)
                .map((e) => ({ appid: e, nRank: h(e) }))
                .sort((e, t) => e.nRank - t.nRank)
                .map((e) => e.appid);
            }
            return [];
          }, [_, h, g, u]),
          v = (0, rt.tx)();
        if (v.bLoading)
          return b.createElement(rt.NT, {
            state: v,
            strDialogTitle: "Build App List",
            closeModal: t,
          });
        const S = !d || !d.json_opted_in || !d.json_featured;
        return b.createElement(
          he.uH,
          {
            strTitle: "Build App List",
            strDescription: `Will scan the opted in apps to find the top ${a} apps by long term sales rank with some animated point shop asset. This depends on the stats dashboard via 'manage', so should be run after a refresh completes.`,
            onCancel: t,
            onOK: () =>
              (0, l.mG)(this, void 0, void 0, function* () {
                v.fnSetLoading(!0);
                let e = 0;
                let t = new Array();
                const i = new Set(m),
                  l = o ? E : E.filter((e) => !i.has(e));
                do {
                  v.fnSetThrobber(
                    `Processing Apps from ${e + 1} to ${e + 25} looking for ${
                      a - t.length
                    } more...`,
                  );
                  const n = l.slice(e, e + 25),
                    i = yield Ii(n, p);
                  if (null == i)
                    return (
                      v.fnSetStrError(
                        "Fail processing the appids, check console",
                      ),
                      void v.fnSetError(!0)
                    );
                  for (; t.length < a && i.length > 0; ) {
                    const e = i.shift();
                    t.push(e);
                  }
                  e += 25;
                } while (t.length < a && e < l.length);
                const r = t.length,
                  s = o ? new Array() : Array.from(i);
                for (; t.length > 0; ) s.push(t.shift());
                n.SetPointShopIncludedApps(s),
                  v.fnSetSuccess(!0),
                  v.fnSetStrSuccess("Completing processing, added " + r);
              }),
            bOKDisabled: S || 0 == (null == d ? void 0 : d.count_opted_in),
          },
          b.createElement(j.II, {
            type: "number",
            value: a,
            onChange: (e) => i(Number.parseInt(e.currentTarget.value)),
            label: "Top Apps with Animated Assets to find",
            tooltip: "We will scan opted in apps to find these top apps",
          }),
          b.createElement(j.ji, {
            checked: o,
            onChange: r,
            label: `Overwrite existing list of ${
              (null == m ? void 0 : m.length) || 0
            } Apps?`,
          }),
          b.createElement(j.ji, {
            checked: s,
            onChange: c,
            label: "Use Featured Apps instead of opted in Apps?",
          }),
          Boolean(0 == (null == d ? void 0 : d.count_opted_in)) &&
            b.createElement("div", null, "Nothing to do, no apps opted in"),
          Boolean(S || _) &&
            b.createElement(de.V, {
              string: "Loading",
              size: "medium",
              position: "center",
            }),
        );
      }
      const bi = (0, Ie.Pi)((e) => {
          const t = B.Get(),
            n = (e) =>
              window.sessionStorage.setItem(
                "editorCurrentTab",
                `?tab=${e.key}`,
              ),
            a =
              N.De.PARTNER_BASE_URL +
              "optin/salepreview/" +
              t.GetName() +
              "/20",
            i = (t.GetEmailDefinitions() || [])
              .filter((e) => e.BIsDraftEmail())
              .filter((e) => {
                const t = (function (e) {
                  const t = pa(e),
                    n = Object.values(t).length,
                    a = [];
                  let i = 0;
                  return (
                    t.bNeedDemoTrailerRegLink &&
                      (e.GetDemoTrailerRegLink()
                        ? (i += 1)
                        : a.push("Missing Demo Trailer Reg Link")),
                    t.bNeedAssetKit &&
                      (e.GetAssetKitURL()
                        ? (i += 1)
                        : a.push("Missing Asset Kit")),
                    t.bNeedDemoPressPreviewDate &&
                      (e.GetDemoPressPreviewDate()
                        ? (i += 1)
                        : a.push("Missing Demo Preview Date")),
                    t.bNeedMaxItems &&
                      (e.GetScheduleMaxItems()
                        ? (i += 1)
                        : a.push("Missing Max Scheduled Events")),
                    t.bNeedSalePreview &&
                      (e.GetSalePreviewPage()
                        ? (i += 1)
                        : a.push("Missing Sale Preview Page")),
                    t.bNeedNextEditionDate &&
                      (e.GetNextEditionDate()
                        ? (i += 1)
                        : a.push("Missing Next Edition Date")),
                    t.bNeedQASessionDate &&
                      (e.GetQASessionDate()
                        ? (i += 1)
                        : a.push("Missing QA Session Date")),
                    t.bNeedQASessionLink &&
                      (e.GetQASessionLink()
                        ? (i += 1)
                        : a.push("Missing QA Session Link")),
                    t.bNeedRecordedQASessionLink &&
                      (e.GetRecordedQASessionLink()
                        ? (i += 1)
                        : a.push("Missing QA Recorded Session Link")),
                    t.bNeedCancelDate &&
                      (e.GetCancelDate()
                        ? (i += 1)
                        : a.push("Missing Cancel Date")),
                    t.bNeedPreviewDate &&
                      (e.GetPreviewDate()
                        ? (i += 1)
                        : a.push("Missing Preview Date")),
                    t.bNeedPermissionDate &&
                      (e.GetPermissionDate()
                        ? (i += 1)
                        : a.push("Missing Permissions Date")),
                    t.bNeedTrailerLaunchDate &&
                      (e.GetTrailerLaunchDate()
                        ? (i += 1)
                        : a.push("Missing Trailer Launch Date")),
                    t.bNeedLivestreamLaunchDate &&
                      (e.GetLivestreamLaunchDate()
                        ? (i += 1)
                        : a.push("Missing Livestream Launch Date")),
                    t.bNeedWikiDocumentation &&
                      (e.GetWikiDocURL()
                        ? (i += 1)
                        : a.push("Missing Wiki Doc Link")),
                    t.bNeedSurveyLink &&
                      (e.GetSurveyLinkURL()
                        ? (i += 1)
                        : a.push("Missing Survey Link")),
                    t.bNeedPressPreviewVisibleDate &&
                      (e.GetPressPreviewVisibleDate()
                        ? (i += 1)
                        : a.push("Missing Press Preview Visible Date")),
                    t.bNeedTrailerDemoDeadlineDate &&
                      (e.GetTrailerDemoDeadlineDate()
                        ? (i += 1)
                        : a.push("Missing Trailer Demo Deadline Date")),
                    { cNeeded: n, cCompleted: i, vecMissing: a }
                  );
                })(e);
                return t.cNeeded != t.cCompleted;
              }),
            l = t.BIsReleaseGamesEligible() || t.BIsUnreleaseGamesEligible(),
            o = [
              {
                name: "Editor",
                key: "editor",
                status: l
                  ? ""
                  : b.createElement(
                      we.HP,
                      {
                        toolTipContent:
                          "Must choose release or unrelease games in the requirement section",
                      },
                      "'Incomplete (0/1)'",
                    ),
                statusType: l ? "success" : "danger",
                contents: b.createElement(
                  X.SV,
                  null,
                  b.createElement(Ce.ko, { fnLangHasData: t.BHasLanguageData }),
                  b.createElement(Ut, null),
                ),
                onClick: n,
              },
              {
                name: "Preview",
                key: "preview",
                status: "",
                statusType: "success",
                contents: b.createElement("iframe", {
                  width: "100%",
                  height: "1200px",
                  style: { border: "none", paddingBottom: "20px" },
                  src: a,
                }),
                onClick: n,
              },
              {
                name: "Email",
                key: "email",
                status: i.length ? "Draft Incomplete" : "",
                statusType: i.length ? "danger" : "success",
                contents: b.createElement(
                  X.SV,
                  null,
                  b.createElement(Aa, null),
                ),
                onClick: n,
              },
              {
                name: "Manage",
                key: "manage",
                status: "",
                statusType: "success",
                contents: b.createElement(
                  X.SV,
                  null,
                  b.createElement(vn, { editModel: t }),
                  b.createElement(Pn, null),
                ),
                onClick: n,
              },
              {
                name: "Point Shop",
                key: "pointshop",
                status: "",
                statusType: "success",
                contents: b.createElement(
                  X.SV,
                  null,
                  b.createElement(vi, { editModel: t }),
                ),
                onClick: n,
              },
            ];
          return (
            t.BHasSpecialEventType() &&
              o.push({
                name: "Special Events",
                key: "events",
                status: "",
                statusType: "success",
                contents: b.createElement(
                  X.SV,
                  null,
                  b.createElement(di, null),
                ),
                onClick: n,
              }),
            o.push({
              name: "Debug",
              key: "debug",
              status: "",
              statusType: "success",
              contents: b.createElement(X.SV, null, b.createElement(He, null)),
              onClick: n,
            }),
            b.createElement(
              X.SV,
              null,
              b.createElement(
                "div",
                null,
                b.createElement(Ai, null),
                b.createElement(
                  "div",
                  { className: xe().EditorInputPaneContents },
                  L.Get().BHasUnpublishedChagnes(B.Get().GetFullName()) &&
                    b.createElement(
                      "div",
                      {
                        className: (0, Z.Z)(
                          Ee.WarningStylesBackground,
                          Ee.Stuck,
                        ),
                      },
                      "This Opt-In has unpublished changes",
                    ),
                  b.createElement(te.n, { tabs: o }),
                  b.createElement("div", { className: H().ClearThings }),
                ),
                b.createElement(Ti, null),
              ),
            )
          );
        }),
        Ai = (0, Ie.Pi)((e) =>
          b.createElement(
            "div",
            { className: (0, Z.Z)(xe().TopBarContainer) },
            b.createElement(
              j.zx,
              { className: xe().BasicButtonSize },
              b.createElement(
                U.rU,
                { to: fo.OptinAdminDashboard() },
                "Dashboard",
              ),
            ),
            b.createElement(Fa, null),
            b.createElement(ja, null),
            b.createElement(Ce.Pi, null),
          ),
        ),
        Ti = (0, Ie.Pi)((e) => {
          const t = B.Get();
          return b.createElement(
            "div",
            {
              className: (0, Z.Z)(
                xe().FlexRowWrapFlexStartContainer,
                xe().BottomBar,
              ),
            },
            b.createElement(
              j.KM,
              {
                className: xe().BasicButtonSize,
                onClick: (e) =>
                  (0, W.AM)(b.createElement(ki, null), (0, K.RA)(e)),
              },
              t.BIsDirty() ? "Save" : "Saved",
            ),
            b.createElement(
              j.zx,
              { className: xe().BasicButtonSize, onClick: je },
              "Re-order Dynamic Sections",
            ),
          );
        }),
        ki = (e) => {
          const { closeModal: t } = e,
            [n, a] = b.useState(!0),
            [i, l] = b.useState(new Array());
          return (
            (0, b.useEffect)(() => {
              const e = B.Get(),
                t = r().CancelToken.source();
              return (
                e
                  .Save(t.token)
                  .then((e) => {
                    if (e) {
                      const t = new Array();
                      t.push(e), l(t);
                    }
                  })
                  .finally(() => {
                    e.RefreshActiveStats(), a(!1);
                  }),
                () => t.cancel("OptInEditorSaveDialog unmounting")
              );
            }, []),
            b.createElement(
              he.RG,
              { bAllowFullSize: !0, onCancel: t, closeModal: t },
              b.createElement(j.h4, null, "Saving Opt-In Data"),
              b.createElement(
                j.uT,
                null,
                b.createElement(
                  "div",
                  null,
                  "We are saving the Opt-In Data, please be patient.\t",
                ),
                Boolean(i.length > 0) &&
                  b.createElement(
                    "div",
                    { className: Ee.ErrorStylesBackground },
                    i.map((e) =>
                      b.createElement("span", { key: "" + e.length }, e),
                    ),
                  ),
                n &&
                  b.createElement(de.V, {
                    size: "medium",
                    position: "center",
                    string: (0, me.Xx)("#Saving"),
                  }),
                Boolean(!n && 0 == i.length) &&
                  b.createElement("div", null, "Save Successful."),
              ),
              b.createElement(
                j.$_,
                null,
                b.createElement(
                  j.KM,
                  { onClick: t, disabled: n },
                  (0, me.Xx)("#Button_Close"),
                ),
              ),
            )
          );
        };
      function wi(e) {
        const { appid: t } = e,
          [n, a] = b.useState(!0);
        b.useEffect(() => {
          const e = L.Get()
            .GetActiveOptIn()
            .map((e) => ut.qh.Get().LoadOptInRegistration(e.pageid, t));
          Promise.all(e).finally(() => a(!1));
        }, [t]);
        const [i] = (0, gt.vs)(t, {
          include_assets: !0,
          include_basic_info: !0,
        });
        return b.createElement(
          X.SV,
          null,
          b.createElement(
            "div",
            { className: Ze().AdminPageCtn },
            b.createElement(
              "div",
              { className: Ze().PageTitle },
              "Opt-In Game Support Page: ",
              i ? i.GetName() : "Unknown",
              " (",
              t,
              ") ",
              b.createElement(
                "span",
                { className: Ze().ValveOnlyTitle },
                "Valve Only Page",
              ),
            ),
            b.createElement("hr", null),
            b.createElement(
              "p",
              null,
              "Valve-only - go to the event registration page for this game within any upcoming or active events.",
            ),
            b.createElement(
              "p",
              null,
              "Allows you to invite the game even if otherwise not eligible.",
            ),
            b.createElement(
              "div",
              null,
              b.createElement(
                "ol",
                null,
                L.Get()
                  .GetActiveOptIn()
                  .map((e) => {
                    if (!e.sale_optin_enabled) return null;
                    const n = ut.qh.Get().GetRegistration(t, e.pageid);
                    return b.createElement(
                      "li",
                      { key: e.pageid },
                      b.createElement(
                        "a",
                        {
                          href:
                            N.De.PARTNER_BASE_URL +
                            "optin/sale/" +
                            e.pageid +
                            "/" +
                            t,
                        },
                        e.event_title.english,
                        " ",
                        (null == n ? void 0 : n.opt_in) ? " - OptIn" : "",
                      ),
                    );
                  }),
              ),
            ),
            n &&
              b.createElement(de.V, {
                size: "medium",
                position: "center",
                string: (0, me.Xx)("#Loading"),
              }),
          ),
        );
      }
      class Ni {
        static Get() {
          return (
            Ni.s_OptInRegs ||
              ((Ni.s_OptInRegs = new Ni()),
              (window.COptInRegstationEditStore = Ni.s_OptInRegs)),
            Ni.s_OptInRegs
          );
        }
        constructor() {
          this.m_bDirty = !1;
        }
        BHasAdditionalFeaturing() {
          return this.m_registration.additional_featuring;
        }
        BHasCheckedTrailerUsage() {
          return this.m_registration.jsondata.trailer_permission;
        }
        SetCheckedTrailerUsage(e) {
          (this.m_registration.jsondata.trailer_permission = e),
            e
              ? ((this.m_registration.jsondata.rtime_granting_trailer =
                  Math.floor(new Date().getTime() / 1e3)),
                (this.m_registration.jsondata.accountid_granting_trailer =
                  N.L7.accountid))
              : ((this.m_registration.jsondata.rtime_granting_trailer = void 0),
                (this.m_registration.jsondata.accountid_granting_trailer =
                  void 0)),
            this.SetDirty(!0);
        }
        BHasCheckedDemoUsage() {
          return this.m_registration.jsondata.demo_permission;
        }
        SetCheckedDemorUsage(e) {
          (this.m_registration.jsondata.demo_permission = e),
            e
              ? ((this.m_registration.jsondata.rtime_granting_demo = Math.floor(
                  new Date().getTime() / 1e3,
                )),
                (this.m_registration.jsondata.accountid_granting_demo =
                  N.L7.accountid))
              : ((this.m_registration.jsondata.rtime_granting_demo = void 0),
                (this.m_registration.jsondata.accountid_granting_demo =
                  void 0)),
            this.SetDirty(!0);
        }
        BHasCheckedNoPlannedDiscounts() {
          return this.m_registration.no_planned_discount;
        }
        SetCheckedNoPlannedDiscounts(e) {
          this.m_registration.no_planned_discount != e &&
            ((this.m_registration.no_planned_discount = e), this.SetDirty(!0));
        }
        BHasGameProfileIntent() {
          return this.m_registration.jsondata.game_profile_intent;
        }
        SetGameProfileIntent(e) {
          (this.m_registration.jsondata.game_profile_intent = e),
            e
              ? ((this.m_registration.jsondata.rtime_granting_profile =
                  Math.floor(new Date().getTime() / 1e3)),
                (this.m_registration.jsondata.accountid_granting_profile =
                  N.L7.accountid))
              : ((this.m_registration.jsondata.rtime_granting_profile = void 0),
                (this.m_registration.jsondata.accountid_granting_profile =
                  void 0)),
            this.SetDirty(!0);
        }
        GetModel() {
          return this.m_registration;
        }
        GetFirstSelectedItem(e, t) {
          let n = this.GetSelectedItems(e, t);
          return n && n.length > 0 && null != n[0] ? n[0] : null;
        }
        GetSelectedItems(e, t) {
          if (
            this.m_registration &&
            this.m_registration.jsondata &&
            this.m_registration.jsondata.dynamic_selection
          ) {
            let n = this.m_registration.jsondata.dynamic_selection.findIndex(
              (t) => t.section_id == e,
            );
            if (
              -1 !== n &&
              this.m_registration.jsondata.dynamic_selection[n]
                .list_selection &&
              this.m_registration.jsondata.dynamic_selection[n].list_selection
                .findIndex
            ) {
              let e = this.m_registration.jsondata.dynamic_selection[
                n
              ].list_selection.findIndex((e) => e.list_id == t);
              if (-1 !== e) {
                let t =
                  this.m_registration.jsondata.dynamic_selection[n]
                    .list_selection[e].selected_item_id;
                if (t && t.length > 0 && null != t[0]) return t;
              }
            }
          } else
            console.log(
              "COptInRegstationEditStore: failed to find selected values for:",
              e,
              t,
            );
          return [];
        }
        Reset(e) {
          (this.m_registration = JSON.parse(JSON.stringify(e))),
            (this.m_registration.jsondata &&
              "" !== this.m_registration.jsondata) ||
              (this.m_registration.jsondata = {}),
            "string" == typeof this.m_registration.jsondata &&
              (this.m_registration.jsondata = JSON.parse(
                this.m_registration.jsondata,
              )),
            (this.m_bDirty = !1);
        }
        SetDirty(e) {
          this.m_bDirty != e && (this.m_bDirty = e);
        }
        BIsDirty() {
          return this.m_bDirty;
        }
      }
      (0, l.gn)([c.LO], Ni.prototype, "m_registration", void 0),
        (0, l.gn)([c.LO], Ni.prototype, "m_bDirty", void 0),
        (0, l.gn)([c.aD.bound], Ni.prototype, "SetCheckedTrailerUsage", null),
        (0, l.gn)([c.aD.bound], Ni.prototype, "SetCheckedDemorUsage", null),
        (0, l.gn)(
          [c.aD.bound],
          Ni.prototype,
          "SetCheckedNoPlannedDiscounts",
          null,
        ),
        (0, l.gn)([c.aD.bound], Ni.prototype, "SetGameProfileIntent", null);
      var Li = n(9663),
        xi = n(36041),
        Oi = n(96230);
      const Gi = (0, Ie.Pi)((e) =>
          e.sections && 0 != e.sections.length
            ? b.createElement(
                "div",
                null,
                b.createElement(
                  X.SV,
                  null,
                  e.sections.map((e, t) =>
                    !e.valve_only || N.L7.is_support
                      ? b.createElement(Ri, {
                          key: e.unique_id,
                          section: e,
                          sectionIndex: t,
                        })
                      : null,
                  ),
                ),
              )
            : null,
        ),
        Ri = (0, Ie.Pi)((e) => {
          const { section: t, sectionIndex: n } = e,
            a = (0, m.jM)(N.De.LANGUAGE),
            i = (0, s.Xj)(
              t.name,
              a,
              (0, me.Xx)("#OptIn_Registration_Title", n),
            ),
            l = (0, s.Xj)(t.description, a, ""),
            o = t.valve_only;
          return b.createElement(
            "div",
            {
              id: e.section.unique_id,
              className: (0, Z.Z)({
                [Oi.DynamicSection]: !0,
                [H().ValveOnlyBackground]: o,
              }),
            },
            b.createElement("h3", null, o && "(VO) ", i),
            b.createElement("div", null, b.createElement(Li.d, { text: l })),
            b.createElement(Bi, { section: t, sectionIndex: n }),
          );
        }),
        Bi = (0, Ie.Pi)((e) => {
          const { section: t, sectionIndex: n } = e;
          if ("text_input" === t.input_style)
            return b.createElement(
              Mi,
              Object.assign({}, e, { list: t.lists[0], listIndex: 0 }),
            );
          {
            const n = Boolean(
              "radio" == t.input_style || "checkbox" == t.input_style,
            );
            return b.createElement(
              "div",
              { className: n ? Oi.ListContainer : void 0 },
              t.lists.map((t, a) =>
                n
                  ? b.createElement(
                      Pi,
                      Object.assign({ key: t.unique_id }, e, {
                        list: t,
                        listIndex: a,
                      }),
                    )
                  : b.createElement(
                      Fi,
                      Object.assign({ key: t.unique_id }, e, {
                        list: t,
                        listIndex: a,
                      }),
                    ),
              ),
            );
          }
        }),
        Mi = (0, Ie.Pi)((e) => {
          const { section: t, list: n, listIndex: a } = e,
            i = Ni.Get().GetSelectedItems(t.unique_id, n.unique_id),
            [l, o] = (0, b.useState)(
              (null == i ? void 0 : i.length) > 0 ? i[0] : "",
            );
          return (
            (0, u.X)(0 == a, "expected list index to be zero"),
            b.createElement(
              "div",
              null,
              b.createElement("textarea", {
                className: Oi.TextArea,
                value: l,
                onChange: (e) => o(e.currentTarget.value || ""),
              }),
              b.createElement(
                Ui,
                Object.assign({}, e, {
                  list: n,
                  listIndex: a,
                  item_unique_ids: [l],
                }),
              ),
            )
          );
        }),
        Pi = (0, Ie.Pi)((e) => {
          const { section: t, list: n } = e,
            [a, i] = (0, b.useState)(
              Ni.Get().GetSelectedItems(t.unique_id, n.unique_id),
            ),
            l = (0, m.jM)(N.De.LANGUAGE),
            o = (0, s.Xj)(n.option_title, l),
            r = new Array(),
            c = xi.Lh(t.columns, 1, 3);
          for (let e = 0; e < c; ++e)
            r.push(
              b.createElement(
                "div",
                { key: "column" + e, className: Oi.Column },
                n.options
                  .filter((t, n) => n % c == e)
                  .map((e) => {
                    const n = (0, s.Xj)(e.text, l),
                      o = (0, s.Xj)(e.tooltip, l, void 0);
                    return "radio" == t.input_style
                      ? b.createElement(
                          j.EU,
                          { key: e.unique_id, value: e.unique_id },
                          b.createElement(
                            we.HP,
                            { toolTipContent: o, bDisabled: !o },
                            n,
                            " ",
                            Boolean(o) && "(?)",
                          ),
                        )
                      : b.createElement(j.ji, {
                          key: e.unique_id,
                          label: n,
                          tooltip: o,
                          checked: -1 !== a.findIndex((t) => t == e.unique_id),
                          onChange: (t) => {
                            let n = a.findIndex((t) => t == e.unique_id);
                            if (t && -1 == n) {
                              let t = JSON.parse(JSON.stringify(a));
                              t.push(e.unique_id), i(t);
                            } else if (!t && -1 != n) {
                              let e = JSON.parse(JSON.stringify(a));
                              e.splice(n, 1), i(e);
                            }
                          },
                        });
                  }),
              ),
            );
          return b.createElement(
            "div",
            null,
            Boolean(o) &&
              b.createElement("div", { className: Oi.ListTitle }, o),
            b.createElement(
              j.SY,
              { value: a.length > 0 ? a[0] : null, onChange: (e) => i([e]) },
              r,
            ),
            b.createElement(Ui, Object.assign({}, e, { item_unique_ids: a })),
          );
        }),
        Fi = (0, Ie.Pi)((e) => {
          const { section: t, list: n } = e,
            [a, i] = (0, b.useState)(
              Ni.Get().GetSelectedItems(t.unique_id, n.unique_id),
            ),
            l = (0, m.jM)(N.De.LANGUAGE),
            o = (0, s.Xj)(n.option_title, l),
            r = [],
            c = n.options.map((e) => {
              const t = (0, s.Xj)(e.text, l);
              let n = { value: e.unique_id, label: t };
              return -1 != a.findIndex((t) => t == e.unique_id) && r.push(n), n;
            });
          return b.createElement(
            "div",
            { className: Oi.SelectContianer },
            Boolean(o) &&
              b.createElement("div", { className: Oi.ListTitle }, o),
            b.createElement(We.ZP, {
              name: "searchField",
              backspaceRemovesValue: !0,
              isSearchable: !0,
              multi: Boolean("multi_select" == t.input_style),
              isMulti: Boolean("multi_select" == t.input_style),
              defaultMenuIsOpen: !1,
              isClearable: !0,
              placeholder: Boolean("multi_select" == t.input_style)
                ? (0, me.Xx)("#OptIn_Registration_Select_Placeholder_Plural")
                : (0, me.Xx)("#OptIn_Registration_Select_Placeholder"),
              value: r,
              options: c,
              getOptionLabel: (e) => e.label,
              getOptionValue: (e) => e.value,
              onChange: (e, { action: t }) => {
                i(e ? e.map((e) => e.value) : []);
              },
            }),
            b.createElement(Ui, Object.assign({}, e, { item_unique_ids: a })),
          );
        }),
        Ui = (0, Ie.Pi)((e) => {
          const {
            section: t,
            list: n,
            sectionIndex: a,
            listIndex: i,
            item_unique_ids: l,
          } = e;
          return !l || 0 == l.length || (1 == l.length && null == l[0])
            ? b.createElement(
                b.Fragment,
                null,
                b.createElement("input", {
                  type: "hidden",
                  name: `dynamic_selection[${a}][section_id]`,
                  value: t.unique_id,
                }),
                b.createElement("input", {
                  type: "hidden",
                  name: `dynamic_selection[${a}][list_selection][${i}][list_id]`,
                  value: n.unique_id,
                }),
              )
            : b.createElement(
                b.Fragment,
                null,
                b.createElement("input", {
                  type: "hidden",
                  name: `dynamic_selection[${a}][section_id]`,
                  value: t.unique_id,
                }),
                b.createElement("input", {
                  type: "hidden",
                  name: `dynamic_selection[${a}][list_selection][${i}][list_id]`,
                  value: n.unique_id,
                }),
                Boolean(l) &&
                  l.map((e, t) =>
                    b.createElement("input", {
                      key: "selected_" + e,
                      type: "hidden",
                      name: `dynamic_selection[${a}][list_selection][${i}][selected_item_id][${t}]`,
                      value: e,
                    }),
                  ),
              );
        });
      var ji = n(20790),
        Xi = n(45429);
      const zi = (0, Ie.Pi)((e) => {
        if (!e.eventdata) return null;
        const { appid: t, eventdata: n } = e,
          a = (0, me.Xx)("#OptIn_GameListing_Title");
        let i = (function (e, t) {
          var n, a, i;
          const l = Number.parseInt(e),
            o = (0, m.jM)(N.De.LANGUAGE),
            r = [];
          let s = null,
            c = [];
          for (const e of t.sale_sections)
            if (
              "tabs" === e.section_type &&
              (null === (n = e.tabs) || void 0 === n ? void 0 : n.length)
            ) {
              s = [];
              for (const t of e.tabs)
                s.push({ id: t.unique_id, label: (0, Xi.YK)(t, o) }),
                  ((null === (a = t.capsules) || void 0 === a
                    ? void 0
                    : a.length) &&
                    !t.capsules.some((e) => e.id === l)) ||
                    c.push(t.unique_id);
            }
          let d = !1;
          for (const e of t.sale_sections)
            if ("tabs" === e.section_type && e.tabs) d = !0;
            else if ("items" === e.section_type && e.capsules) {
              let t = e.capsules.some((e) => e.id === l);
              if (
                (e.smart_section && e.enable_faceted_browsing && (t = !0), !t)
              )
                continue;
              const n = (0, Xi._U)(e, o, 0, !0);
              if (null === s)
                r.push(b.createElement(Hi, { key: n, section: n, tab: "" }));
              else {
                let t = (
                  null === (i = e.show_on_tabs) || void 0 === i
                    ? void 0
                    : i.length
                )
                  ? e.show_on_tabs
                  : s.map((e) => e.id);
                d &&
                  !e.diable_tab_id_filtering &&
                  (t = t.filter((e) => c.includes(e)));
                for (const e of t) {
                  const t = s.find((t) => t.id === e);
                  t &&
                    r.push(
                      b.createElement(Hi, {
                        key: n + e,
                        section: n,
                        tab: t.label,
                      }),
                    );
                }
              }
            }
          return r;
        })(t, n.jsondata);
        return i.length > 0
          ? b.createElement(
              X.SV,
              null,
              b.createElement(
                "h1",
                null,
                (0, me.Xx)("#OptIn_OptInOut_CategorizationTitle"),
              ),
              b.createElement(
                "div",
                { className: (0, Z.Z)(Oi.DynamicSection, Oi.Categorization) },
                b.createElement("h3", null, a),
                (0, me.Xx)("#OptIn_GameListing_Detail"),
                b.createElement(
                  "div",
                  {
                    className: (0, Z.Z)(Oi.DynamicSection, Oi.VisibilityTable),
                  },
                  b.createElement(
                    "div",
                    { className: "landingTable blueish" },
                    b.createElement(
                      "div",
                      { className: "tr heading" },
                      b.createElement("div", { className: "th" }, "Tab"),
                      b.createElement("div", { className: "th" }, "Section"),
                    ),
                    i,
                  ),
                ),
                b.createElement(
                  "div",
                  { className: Oi.DynamicSection },
                  b.createElement(
                    ji.JW,
                    {
                      eventModel: e.eventdata,
                      route: ji.Ue.k_eStoreSalePage,
                      className: (0, Z.Z)(z.Button, z.Primary),
                    },
                    (0, me.Xx)("#Sale_Link_PreviewEvent"),
                  ),
                ),
              ),
            )
          : b.createElement(
              X.SV,
              null,
              b.createElement(
                "div",
                { className: Oi.DynamicSection },
                b.createElement("h3", null, a),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_GameListing_Detail_Empty"),
                ),
              ),
            );
      });
      const Hi = (e) =>
        b.createElement(
          X.SV,
          null,
          b.createElement(
            "div",
            { className: (0, Z.Z)("tr", "highlightHover") },
            b.createElement("a", { className: "td" }, e.tab),
            b.createElement("a", { className: "td" }, e.section),
          ),
        );
      var Vi = n(13141);
      function Wi(e) {
        const { optInDefinition: t, appid: n } = e,
          a = (0, N.ip)("optin_preview_mode", "application_config") || !1;
        return (Ni.Get().BHasAdditionalFeaturing() || a) &&
          t.additional_featuring_section_enabled &&
          (t.collect_trailer_permissions ||
            t.collect_demo_permissions ||
            t.collect_game_profile_intent)
          ? b.createElement(
              "div",
              null,
              Boolean(a) &&
                b.createElement(
                  "div",
                  { className: Ee.WarningStylesBackground },
                  "NOTE: Visibility, Demo, and Trailer use permissions sections below will only appear publicly for apps marked with featuring.",
                ),
              b.createElement(qi, { optInDefinition: t, appid: n }),
            )
          : null;
      }
      function qi(e) {
        const { optInDefinition: t, appid: n } = e,
          [a] = (0, ne.Ar)("focusmedia", !1);
        return (
          (0, b.useEffect)(() => {
            a &&
              (0, W.AM)(
                b.createElement(Zi, { optInDefinition: t, appid: n }),
                window,
              );
          }, [a, t, n]),
          b.createElement(
            Ki,
            Object.assign({}, e, { bShowVisibilityDetails: !0 }),
          )
        );
      }
      function Zi(e) {
        const { optInDefinition: t, appid: n, closeModal: a } = e,
          i = (0, rt.tx)();
        return i.bLoading
          ? b.createElement(rt.NT, {
              state: i,
              strDialogTitle: (0, me.Xx)("#OptIn_Collect_Dialog_Title"),
              strThrobber: (0, me.Xx)("#Saving"),
              closeModal: a,
            })
          : b.createElement(
              he.uH,
              {
                strTitle: (0, me.Xx)("#OptIn_Collect_Dialog_Title"),
                strDescription: (0, me.Xx)("#OptIn_Collect_Dialog_Desc"),
                onOK: () => {
                  i.fnSetLoading(!0),
                    ut.qh
                      .Get()
                      .UpdateOptInRegistrationJson(
                        n,
                        Ni.Get().GetModel().jsondata,
                      )
                      .then((e) => {
                        e
                          ? (i.fnSetError(!0), i.fnSetStrError(e))
                          : i.fnSetSuccess(!0);
                      })
                      .catch((e) => i.fnSetError(!0));
                },
                onCancel: a,
              },
              b.createElement(Ki, {
                optInDefinition: t,
                appid: n,
                bShowVisibilityDetails: !1,
              }),
            );
      }
      function Ki(e) {
        const { optInDefinition: t, appid: n, bShowVisibilityDetails: a } = e;
        return b.createElement(
          b.Fragment,
          null,
          Boolean(a) &&
            b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "div",
                { className: "sub_category" },
                b.createElement(
                  "h3",
                  null,
                  (0, me.Xx)("#OptIn_Collect_Dialog_Title"),
                ),
              ),
              b.createElement(
                "p",
                null,
                (0, me.Xx)("#OptIn_Collect_Dialog_Desc"),
              ),
            ),
          Boolean(t.collect_trailer_permissions) &&
            b.createElement(Yi, { optInDefinition: t }),
          Boolean(t.collect_demo_permissions) &&
            b.createElement(Qi, { optInDefinition: t }),
          Boolean(t.collect_game_profile_intent) &&
            b.createElement($i, { optInDefinition: t, appid: n }),
        );
      }
      function Yi(e) {
        var t;
        const { optInDefinition: n } = e,
          a = n.event_title[N.De.LANGUAGE] || n.event_title.english,
          i = n.do_anytime.enter_discounts,
          l = null === (t = n.launch_demo) || void 0 === t ? void 0 : t.enabled,
          [o, r, s] = (0, Ve.SZ)(() => [
            Ni.Get().GetModel().jsondata.trailer_permission,
            Ni.Get().GetModel().jsondata.rtime_granting_trailer,
            Ni.Get().GetModel().jsondata.accountid_granting_trailer,
          ]);
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            { className: "sub_category" },
            b.createElement(
              "h3",
              null,
              (0, me.Xx)("#OptIn_Collect_Trailer"),
              " ",
              b.createElement(
                "span",
                { className: "required_optional1" },
                Boolean(n.collect_demo_deadline)
                  ? b.createElement(
                      b.Fragment,
                      null,
                      "(",
                      (0, me.Xx)(
                        "#OptIn_Collect_SuggestedBy",
                        (0, me.vX)(n.collect_demo_deadline),
                      ),
                      ")",
                    )
                  : b.createElement(
                      b.Fragment,
                      null,
                      "(",
                      (0, me.Xx)("#OptIn_Collect_Optional"),
                      ")",
                    ),
              ),
            ),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Trailer_check", a),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Permission_DocReminder"),
          ),
          b.createElement(
            "ul",
            null,
            Boolean(i && n.collect_demo_deadline) &&
              b.createElement(
                "li",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Trailer_check_req_discount",
                  (0, me.vX)(n.collect_demo_deadline),
                ),
              ),
            Boolean(l && n.collect_demo_deadline) &&
              b.createElement(
                "li",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Trailer_deadline_1",
                  (0, me.vX)(n.collect_demo_deadline),
                ),
              ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherTrailerPermission",
              onChange: () => Ni.Get().SetCheckedTrailerUsage(!0),
              checked: Boolean(o && r),
              value: "1",
              name: "trailer_permission",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherTrailerPermission" },
              (0, me.Xx)("#OptIn_Collect_Trailer_check_label"),
            ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherTrailerNoPermission",
              onChange: () => Ni.Get().SetCheckedTrailerUsage(!1),
              checked: Boolean(!o && !r),
              value: "0",
              name: "trailer_permission",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherTrailerNoPermission" },
              (0, me.Xx)("#OptIn_Collect_Trailer_nocheck_label"),
            ),
          ),
          Boolean(r) &&
            b.createElement("input", {
              type: "hidden",
              value: r,
              name: "rtime_granting_trailer",
            }),
          Boolean(s) &&
            b.createElement("input", {
              type: "hidden",
              value: s,
              name: "accountid_granting_trailer",
            }),
          b.createElement("br", null),
          b.createElement("br", null),
        );
      }
      function Qi(e) {
        const { optInDefinition: t } = e,
          n = t.event_title[N.De.LANGUAGE] || t.event_title.english,
          a = t.do_anytime.enter_discounts,
          [i, l, o] = (0, Ve.SZ)(() => [
            Ni.Get().GetModel().jsondata.demo_permission,
            Ni.Get().GetModel().jsondata.rtime_granting_demo,
            Ni.Get().GetModel().jsondata.accountid_granting_demo,
          ]);
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            { className: "sub_category" },
            b.createElement(
              "h3",
              null,
              (0, me.Xx)("#OptIn_Collect_Demo"),
              " ",
              b.createElement(
                "span",
                { className: "required_optional1" },
                Boolean(t.collect_demo_deadline)
                  ? b.createElement(
                      b.Fragment,
                      null,
                      "(",
                      (0, me.Xx)(
                        "#OptIn_Collect_SuggestedBy",
                        (0, me.vX)(t.collect_demo_deadline),
                      ),
                      ")",
                    )
                  : b.createElement(
                      b.Fragment,
                      null,
                      "(",
                      (0, me.Xx)("#OptIn_Collect_Optional"),
                      ")",
                    ),
              ),
            ),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Demo_check", n),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Permission_DocReminder"),
          ),
          b.createElement(
            "ul",
            null,
            Boolean(a && t.collect_demo_deadline) &&
              b.createElement(
                "li",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Trailer_check_req_discount",
                  (0, me.vX)(t.collect_demo_deadline),
                ),
              ),
            Boolean(t.collect_demo_deadline) &&
              b.createElement(
                "li",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Demo_deadline_1",
                  (0, me.vX)(t.collect_demo_deadline),
                ),
              ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherDemoPermission",
              onChange: () => Ni.Get().SetCheckedDemorUsage(!0),
              checked: Boolean(i && l),
              value: "1",
              name: "demo_permission",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherDemoPermission" },
              (0, me.Xx)("#OptIn_Collect_Demo_check_label"),
            ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherNoDemoPermission",
              onChange: () => Ni.Get().SetCheckedDemorUsage(!1),
              checked: Boolean(!i && !l),
              value: "0",
              name: "demo_permission",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherNoDemoPermission" },
              (0, me.Xx)("#OptIn_Collect_Demo_nocheck_label"),
            ),
          ),
          Boolean(l) &&
            b.createElement("input", {
              type: "hidden",
              value: l,
              name: "rtime_granting_demo",
            }),
          Boolean(o) &&
            b.createElement("input", {
              type: "hidden",
              value: o,
              name: "accountid_granting_demo",
            }),
          b.createElement("br", null),
          b.createElement("br", null),
        );
      }
      function $i(e) {
        const { optInDefinition: t, appid: n } = e,
          a = t.event_title[N.De.LANGUAGE] || t.event_title.english,
          i = t.do_anytime.enter_discounts,
          l = t.pageid,
          [o, r, s] = (0, Ve.SZ)(() => [
            Ni.Get().BHasGameProfileIntent(),
            Ni.Get().GetModel().jsondata.accountid_granting_profile,
            Ni.Get().GetModel().jsondata.rtime_granting_profile,
          ]);
        return b.createElement(
          "div",
          null,
          b.createElement(
            "div",
            { className: "sub_category" },
            b.createElement(
              "h3",
              null,
              (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent"),
              " ",
              b.createElement(
                "span",
                { className: "required_optional1" },
                "(",
                (0, me.Xx)("#OptIn_Collect_Optional"),
                ")",
              ),
            ),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_main", a),
            "  ",
            Boolean(i) &&
              b.createElement(
                "span",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Game_Profile_Intent_requirediscount",
                ),
              ),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_detail_1", a),
          ),
          b.createElement(
            "p",
            null,
            (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_detail_2", a),
          ),
          b.createElement(
            "ul",
            null,
            b.createElement(
              "li",
              null,
              (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_requirement"),
            ),
            b.createElement(
              "ul",
              null,
              b.createElement(
                "li",
                null,
                (0, me.Xx)(
                  "#OptIn_Collect_Game_Profile_Intent_requirement_1",
                  a,
                ),
              ),
              Boolean(i) &&
                b.createElement(
                  "li",
                  null,
                  (0, me.Xx)(
                    "#OptIn_Collect_Game_Profile_Intent_requirement_2",
                  ),
                ),
            ),
          ),
          b.createElement(
            "ul",
            null,
            b.createElement(
              "li",
              null,
              (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset"),
            ),
            b.createElement(
              "ul",
              null,
              b.createElement(
                "li",
                null,
                (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_1"),
              ),
              b.createElement(
                "ul",
                null,
                b.createElement(
                  "li",
                  null,
                  (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_1b", l),
                ),
              ),
              b.createElement(
                "li",
                null,
                (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_2"),
              ),
              b.createElement(
                "li",
                null,
                (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_3"),
              ),
              b.createElement(
                "li",
                null,
                (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_4"),
              ),
              b.createElement(
                "li",
                null,
                (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_asset_5"),
              ),
            ),
          ),
          b.createElement(
            "p",
            null,
            (0, me.yu)(
              "#OptIn_Collect_Game_Profile_Intent_learnmore",
              b.createElement("a", {
                href: "https://partner.steamgames.com/doc/marketing/pointsshopitems#gameprofile",
                target: "_blank",
              }),
            ),
            b.createElement(
              "span",
              null,
              (0, me.yu)(
                "#OptIn_Collect_Game_Profile_Intent_goto",
                b.createElement("a", {
                  href: `${N.De.PARTNER_BASE_URL}apps/communityitems/${n}`,
                  target: "_blank",
                }),
              ),
            ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherGameProfileIntent",
              onChange: () => Ni.Get().SetGameProfileIntent(!0),
              checked: Boolean(o && r),
              value: "1",
              name: "game_profile_intent",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherGameProfileIntent" },
              (0, me.Xx)("#OptIn_Collect_Game_Profile_Intent_label"),
            ),
          ),
          b.createElement(
            "div",
            null,
            b.createElement("input", {
              type: "radio",
              id: "GatherGameProfileNoIntent",
              onChange: () => Ni.Get().SetGameProfileIntent(!1),
              checked: Boolean(!o && !r),
              value: "0",
              name: "game_profile_intent",
            }),
            b.createElement(
              "label",
              { htmlFor: "GatherGameProfileNoIntent" },
              (0, me.Xx)("#OptIn_Collect_Game_Profile_NoIntent_label"),
            ),
          ),
          Boolean(r) &&
            b.createElement("input", {
              type: "hidden",
              value: r,
              name: "accountid_granting_profile",
            }),
          Boolean(s) &&
            b.createElement("input", {
              type: "hidden",
              value: s,
              name: "rtime_granting_profile",
            }),
          b.createElement("br", null),
          b.createElement("br", null),
        );
      }
      function Ji(e) {
        const { optInDefinition: t } = e,
          n = Ni.Get(),
          a = t.event_title[N.De.LANGUAGE] || t.event_title.english,
          i = t.do_anytime.enter_discounts,
          [l, o] = (0, Ve.SZ)(() => [
            n.BHasCheckedNoPlannedDiscounts(),
            n.GetModel().appid,
          ]),
          [r] = (0, gt.vs)(o, { include_release: !0 });
        return !i ||
          (null == r ? void 0 : r.BIsComingSoon()) ||
          (null == r ? void 0 : r.BIsFree())
          ? null
          : r
          ? b.createElement(
              "div",
              { className: "sub_category" },
              b.createElement("h3", null, (0, me.Xx)("#OptIn_Discount_Intent")),
              b.createElement(
                we.HP,
                {
                  className: (0, Z.Z)(H().HelperTooltip, "HelperTooltip"),
                  toolTipContent: (0, me.Xx)(
                    "#OptIn_Discount_Intent_Desc_ttip",
                  ),
                },
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)("#OptIn_Discount_Intent_Desc"),
                ),
                b.createElement(ke.WWB, null),
              ),
              b.createElement(
                "div",
                { className: (0, Z.Z)(H().FlexRowContainer, H().RadioOption) },
                b.createElement("input", {
                  type: "radio",
                  name: "no_planned_discount",
                  id: "DiscountOptions_Yes",
                  value: "0",
                  checked: !l,
                  onChange: () => n.SetCheckedNoPlannedDiscounts(!1),
                }),
                b.createElement(
                  "label",
                  { htmlFor: "DiscountOptions_Yes" },
                  b.createElement(
                    "span",
                    null,
                    (0, me.Xx)(
                      "#OptIn_Discount_Intent_Desc_radio_yes",
                      r.GetName(),
                      a,
                    ),
                  ),
                ),
              ),
              b.createElement(
                "div",
                { className: (0, Z.Z)(H().FlexRowContainer, H().RadioOption) },
                b.createElement("input", {
                  type: "radio",
                  name: "no_planned_discount",
                  id: "DiscountOptions_No",
                  value: "1",
                  checked: l,
                  onChange: () => n.SetCheckedNoPlannedDiscounts(!0),
                }),
                b.createElement(
                  "label",
                  { htmlFor: "DiscountOptions_No" },
                  b.createElement(
                    "span",
                    null,
                    (0, me.Xx)(
                      "#OptIn_Discount_Intent_Desc_radio_no",
                      r.GetName(),
                      a,
                    ),
                  ),
                ),
              ),
            )
          : b.createElement(de.V, { size: "small", position: "center" });
      }
      const el = (e) => {
          let { pageid: t, appid: n } = e;
          t.startsWith("sale_sale_") && (t = t.substring(5));
          const a = L.Get().GetDefinition(t),
            [i, o] = (0, b.useState)(!1),
            [r, s] = (0, b.useState)(null);
          if (
            ((0, b.useEffect)(() => {
              o(!1);
              const e = ut.qh
                .Get()
                .CreateOrGetRegistration(Number.parseInt(n), t);
              Ni.Get().Reset(e),
                (0, l.mG)(void 0, void 0, void 0, function* () {
                  if (a.public_event_id && a.public_event_clan_id)
                    try {
                      const e = _t.K.InitFromClanID(
                          Number.parseInt(a.public_event_clan_id),
                        ),
                        t =
                          yield Vi.j1.LoadPartnerEventFromClanEventGIDAndClanSteamID(
                            e,
                            a.public_event_id,
                            0,
                          );
                      s(t);
                    } catch (e) {
                      const t = (0, k.l)(e);
                      console.error(
                        "LoadPartnerEvent : failed with " + t.strErrorMsg,
                        t,
                      );
                    }
                  o(!0);
                });
            }, [t, n, a.public_event_id, a.public_event_clan_id]),
            !a)
          )
            return (
              console.error("Definition is missing: " + n + " - " + t, a), null
            );
          if (!i)
            return b.createElement(de.V, {
              size: "medium",
              string: (0, me.Xx)("#Loading"),
            });
          return b.createElement(
            "div",
            null,
            b.createElement(
              "div",
              { className: "indent_section" },
              b.createElement("a", { id: "GameListing" }),
              b.createElement(zi, { appid: n, eventdata: r }),
              b.createElement("br", null),
              b.createElement("br", null),
              b.createElement("h1", null, (0, me.Xx)("#OptIn_OptInOut_Title")),
              (0, me.Xx)("#OptIn_OptInOut_Desc"),
              b.createElement(Gi, { sections: a.dynamic_sections }),
              b.createElement(Wi, {
                optInDefinition: a,
                appid: Number.parseInt(n),
              }),
              b.createElement(Ji, { optInDefinition: a }),
              Boolean(N.L7.is_support) &&
                b.createElement(
                  "div",
                  { className: H().ValveOnlyBackground },
                  b.createElement(
                    j.zx,
                    {
                      onClick: () => {
                        const e = Ni.Get().GetModel();
                        (0, W.AM)(
                          b.createElement(
                            he.uH,
                            {
                              strTitle: (0, me.Xx)("#OptIn_Debug"),
                              bAlertDialog: !0,
                            },
                            b.createElement(ze.G, { data: e }),
                          ),
                          window,
                        );
                      },
                    },
                    "(VO) " + (0, me.Xx)("#OptIn_Debug"),
                  ),
                ),
            ),
          );
        },
        tl = (e) =>
          b.createElement(Yn.NL, {
            message: (e) =>
              !B.Get().BIsDirty() ||
              e.pathname != fo.OptinAdminDashboard() ||
              "Do you want to discard unsaved changes?",
          });
      class nl {
        GetAsConsolidatedList() {
          return {
            invited_appids: this.m_nInvitedAppIDs,
            pruned_appids: this.m_nPrunedAppIDs,
            pending_review_appids: this.m_nPendingReviewAppIDs,
            additionally_featured_appids: this.m_nAdditionalFeaturedppIDs,
          };
        }
        GetConsolidatedListCallback() {
          return this.m_listCallback;
        }
        GetStateForAppCallback(e) {
          return (
            this.m_mapReviewCallback.has(e) ||
              this.m_mapReviewCallback.set(e, new w.pB()),
            this.m_mapReviewCallback.get(e)
          );
        }
        GetStateForApp(e) {
          return {
            invited: this.m_nInvitedAppIDs.includes(e),
            pruned: this.m_nPrunedAppIDs.includes(e),
            additionally_featured: this.m_nAdditionalFeaturedppIDs.includes(e),
            pending_review: this.m_nPendingReviewAppIDs.includes(e),
          };
        }
        ChangeAppPruneState(e, t, n) {
          var a;
          return (0, l.mG)(this, void 0, void 0, function* () {
            let i = null;
            try {
              const l = new FormData();
              l.append("sessionid", N.De.SESSIONID),
                l.append("appids", JSON.stringify(t)),
                l.append("opt_in_name", e),
                l.append("prune", n ? "0" : "1");
              const o = N.De.PARTNER_BASE_URL + "optin/ajaxpruneapp",
                s = yield r().post(o, l, { withCredentials: !0 });
              if (
                200 == (null == s ? void 0 : s.status) &&
                (null === (a = s.data) || void 0 === a ? void 0 : a.success) ==
                  A.s.k_EResultOK
              )
                return (
                  t.forEach((e) => {
                    if (this.m_nPendingReviewAppIDs.includes(e)) {
                      const t = this.m_nPendingReviewAppIDs.findIndex(
                        (t) => t == e,
                      );
                      this.m_nPendingReviewAppIDs.splice(t, 1),
                        (this.m_nPendingReviewAppIDs = [
                          ...this.m_nPendingReviewAppIDs,
                        ]);
                    }
                    if (n) {
                      if (this.m_nInvitedAppIDs.includes(e)) {
                        const t = this.m_nInvitedAppIDs.findIndex(
                          (t) => t == e,
                        );
                        this.m_nInvitedAppIDs.splice(t, 1),
                          (this.m_nInvitedAppIDs = [...this.m_nInvitedAppIDs]);
                      }
                      if (
                        ((this.m_nPrunedAppIDs = [...this.m_nPrunedAppIDs, e]),
                        this.m_nAdditionalFeaturedppIDs.includes(e))
                      ) {
                        const t = this.m_nAdditionalFeaturedppIDs.findIndex(
                          (t) => t == e,
                        );
                        this.m_nAdditionalFeaturedppIDs.splice(t, 1),
                          (this.m_nAdditionalFeaturedppIDs = [
                            ...this.m_nAdditionalFeaturedppIDs,
                          ]);
                      }
                    } else {
                      if (this.m_nPrunedAppIDs.includes(e)) {
                        const t = this.m_nPrunedAppIDs.findIndex((t) => t == e);
                        this.m_nPrunedAppIDs.splice(t, 1),
                          (this.m_nPrunedAppIDs = [...this.m_nPrunedAppIDs]);
                      }
                      this.m_nInvitedAppIDs = [...this.m_nInvitedAppIDs, e];
                    }
                    this.GetStateForAppCallback(e).Dispatch(
                      this.GetStateForApp(e),
                    );
                  }),
                  this.m_listCallback.Dispatch(this.GetAsConsolidatedList()),
                  !0
                );
              i = (0, k.l)(s);
            } catch (e) {
              i = (0, k.l)(e);
            }
            return (
              console.error(
                "COptInAppReviewStore.ChangeAppPruneState failed: " +
                  (null == i ? void 0 : i.strErrorMsg),
                i,
              ),
              !1
            );
          });
        }
        ChangeAppAdditionalFeaturingState(e, t, n, a) {
          var i;
          return (0, l.mG)(this, void 0, void 0, function* () {
            let l = null;
            if (!a) {
              const e = t.filter((e) => this.m_nInvitedAppIDs.includes(e));
              if (e.length != t.length)
                return (
                  console.error(
                    "ChangeAppAdditionalFeaturingState: Not all app are already invited. Cannot change to featuring.",
                    t,
                    e,
                    this.m_nInvitedAppIDs,
                  ),
                  A.s.k_EResultInvalidState
                );
            }
            try {
              const a = new FormData();
              a.append("sessionid", N.De.SESSIONID),
                a.append("appids", JSON.stringify(t)),
                a.append("opt_in_name", e),
                a.append("feature", n ? "1" : "0");
              const o =
                  N.De.PARTNER_BASE_URL +
                  "optin/ajaxupdateadditionalfeaturingapps",
                s = yield r().post(o, a, { withCredentials: !0 });
              if (
                200 == (null == s ? void 0 : s.status) &&
                (null === (i = s.data) || void 0 === i ? void 0 : i.success) ==
                  A.s.k_EResultOK
              )
                return (
                  t.forEach((e) => {
                    if (n)
                      this.m_nAdditionalFeaturedppIDs.includes(e) ||
                        (this.m_nAdditionalFeaturedppIDs.push(e),
                        this.GetStateForAppCallback(e).Dispatch(
                          this.GetStateForApp(e),
                        ));
                    else {
                      const t = this.m_nAdditionalFeaturedppIDs.findIndex(
                        (t) => t == e,
                      );
                      this.m_nAdditionalFeaturedppIDs.splice(t, 1),
                        this.GetStateForAppCallback(e).Dispatch(
                          this.GetStateForApp(e),
                        );
                    }
                  }),
                  this.m_listCallback.Dispatch(this.GetAsConsolidatedList()),
                  A.s.k_EResultOK
                );
              l = (0, k.l)(s);
            } catch (e) {
              l = (0, k.l)(e);
            }
            return (
              console.error(
                "COptInAppReviewStore.ChangeAppAdditionalFeaturingState failed: " +
                  (null == l ? void 0 : l.strErrorMsg),
                l,
              ),
              A.s.k_EResultFail
            );
          });
        }
        static Get() {
          return (
            nl.s_Singleton ||
              ((nl.s_Singleton = new nl()),
              ("dev" != N.De.WEB_UNIVERSE && "beta" != N.De.WEB_UNIVERSE) ||
                (window.g_OptInAppReviewStores = nl.s_Singleton)),
            nl.s_Singleton
          );
        }
        constructor() {
          var e, t, n, a;
          (this.m_nInvitedAppIDs = []),
            (this.m_nPrunedAppIDs = []),
            (this.m_nAdditionalFeaturedppIDs = []),
            (this.m_nPendingReviewAppIDs = []),
            (this.m_listCallback = new w.pB()),
            (this.m_mapReviewCallback = new Map());
          let i = JSON.parse(
            JSON.stringify(
              (0, N.kQ)("optin_invite_prune_list", "application_config"),
            ),
          );
          this.ValidateStoreDefault(i) &&
            ((this.m_nInvitedAppIDs =
              (null === (e = i.invited_appids) || void 0 === e
                ? void 0
                : e.map((e) =>
                    "string" == typeof e ? Number.parseInt(e) : e,
                  )) || []),
            (this.m_nPrunedAppIDs =
              (null === (t = i.pruned_appids) || void 0 === t
                ? void 0
                : t.map((e) =>
                    "string" == typeof e ? Number.parseInt(e) : e,
                  )) || []),
            (this.m_nAdditionalFeaturedppIDs =
              (null === (n = i.additionally_featured_appids) || void 0 === n
                ? void 0
                : n.map((e) =>
                    "string" == typeof e ? Number.parseInt(e) : e,
                  )) || []),
            (this.m_nPendingReviewAppIDs =
              (null === (a = i.pending_review_appids) || void 0 === a
                ? void 0
                : a.map((e) =>
                    "string" == typeof e ? Number.parseInt(e) : e,
                  )) || []));
        }
        ValidateStoreDefault(e) {
          const t = e;
          return (
            t &&
            "object" == typeof t &&
            (Array.isArray(t.invited_appids) || Array.isArray(t.pruned_appids))
          );
        }
      }
      function al() {
        return { fnChangeAppPruneState: nl.Get().ChangeAppPruneState };
      }
      (0, l.gn)([lt.a], nl.prototype, "ChangeAppPruneState", null),
        (0, l.gn)(
          [lt.a],
          nl.prototype,
          "ChangeAppAdditionalFeaturingState",
          null,
        );
      var il = n(70903),
        ll = n(95408),
        ol = n(51441),
        rl = n(46294),
        sl = n(19525);
      const cl = {
        include_basic_info: !0,
        include_assets: !0,
        include_tag_count: 10,
        include_release: !0,
      };
      function ml(e) {
        const {
            rgOrderedAppIDs: t,
            fnSetFilteredAppID: n,
            rgNotToPruneList: a,
            pageid: i,
          } = e,
          [l, o] = b.useState(!0),
          r = (0, Ln.T)("OptInAppReviewFilter");
        b.useEffect(() => {
          ht.Z.Get()
            .QueueMultipleAppRequests(
              (null == t ? void 0 : t.slice(0, 100)) || [],
              cl,
            )
            .then(() => {
              ht.Z.Get()
                .QueueMultipleAppRequests(
                  (null == t ? void 0 : t.slice(100)) || [],
                  cl,
                )
                .then(() => {
                  o(!1);
                });
            });
        }, [r.token.reason, i, t]);
        const [s, c] = b.useState(new Set()),
          [m, d] = b.useState(""),
          [p, u] = b.useState(0),
          [_, h] = b.useState(!1),
          [g, E] = b.useState(0);
        return (
          b.useEffect(() => {
            const e = (null == m ? void 0 : m.trim().length) > 2,
              i = null == m ? void 0 : m.toLocaleLowerCase(),
              l = Array.from(s),
              o = new Set(a || []);
            if (t.length > 0 && (s.size > 0 || e || p || g)) {
              const a = t
                .filter((t) => {
                  var n, a, l, o, r;
                  if (e) {
                    const e = ht.Z.Get().GetApp(t);
                    return (
                      (null === (n = null == e ? void 0 : e.GetName()) ||
                      void 0 === n
                        ? void 0
                        : n.toLocaleLowerCase().indexOf(i)) >= 0 ||
                      (null ===
                        (a = null == e ? void 0 : e.GetDeveloperNames()) ||
                      void 0 === a
                        ? void 0
                        : a.some(
                            (e) => e.toLocaleLowerCase().indexOf(i) >= 0,
                          )) ||
                      (null ===
                        (l = null == e ? void 0 : e.GetPublisherNames()) ||
                      void 0 === l
                        ? void 0
                        : l.some(
                            (e) => e.toLocaleLowerCase().indexOf(i) >= 0,
                          )) ||
                      (null ===
                        (o = null == e ? void 0 : e.GetFranchiseNames()) ||
                      void 0 === o
                        ? void 0
                        : o.some(
                            (e) => e.toLocaleLowerCase().indexOf(i) >= 0,
                          )) ||
                      (null ===
                        (r = null == e ? void 0 : e.GetShortDescription()) ||
                      void 0 === r
                        ? void 0
                        : r.toLocaleLowerCase().indexOf(i)) >= 0
                    );
                  }
                  return !0;
                })
                .filter((e) => {
                  if (l.length > 0) {
                    const t = ht.Z.Get().GetApp(e);
                    return l.every((e) =>
                      null == t ? void 0 : t.GetTagIDs().includes(e),
                    );
                  }
                  return !0;
                })
                .filter((e) => {
                  if (p > 0) {
                    const t = ht.Z.Get().GetApp(e);
                    return (
                      t &&
                      ((null == t ? void 0 : t.BIsComingSoon()) ||
                        (null == t ? void 0 : t.GetOriginalReleaseDateRTime()) >
                          p)
                    );
                  }
                  return !0;
                })
                .filter((e) => !(_ && o.size > 0) || !o.has(e));
              r.token.reason || n(a);
            }
          }, [_, r.token.reason, n, g, p, a, t, s, m]),
          b.createElement(
            Oe.ug,
            { title: "Filter Options", bStartMinimized: !0 },
            Boolean(l)
              ? b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(
                    j.__,
                    null,
                    (0, me.Xx)("#EventCalendar_UniversalSearch"),
                  ),
                  b.createElement(de.V, {
                    size: "small",
                    string: `Loading ${
                      (null == t ? void 0 : t.length) || 0
                    } Apps`,
                  }),
                )
              : b.createElement(
                  b.Fragment,
                  null,
                  b.createElement(j.II, {
                    type: "text",
                    label: (0, me.Xx)("#EventCalendar_UniversalSearch"),
                    placeholder: "search by app name, description",
                    value: m,
                    onChange: (e) => {
                      d(e.target.value), E(1);
                    },
                  }),
                  b.createElement(dl, {
                    setFilterTagIDs: s,
                    fnUpdateSetFilterTagIDs: (e) => {
                      c(e), E(1);
                    },
                    rgAppIDs: t,
                    bLoading: l,
                  }),
                  b.createElement(Ke.A, {
                    strDescription: "Filter to games Released After:",
                    strDescToolTip:
                      "Allow us to review upcoming games and games that have released (or released into Early Access) after a point. This is useful when re-running a previously pruned event in a new year.",
                    nEarliestTime: 0,
                    fnGetTimeToUpdate: () => p,
                    fnSetTimeToUpdate: (e) => {
                      u(e), E(1);
                    },
                  }),
                  Boolean((null == a ? void 0 : a.length) > 0) &&
                    b.createElement(j.ji, {
                      checked: _,
                      onChange: (e) => {
                        h(e), E(1);
                      },
                      tooltip:
                        "This is a filter we only want to use in pruning that is done after we have notified partners about their inclusion. So if we communicated with a partner about the event, we don't want to be able to filter them out during a second round of pruning",
                      label: "Filter out previously emailed apps from pruning",
                    }),
                ),
          )
        );
      }
      function dl(e) {
        const {
            setFilterTagIDs: t,
            fnUpdateSetFilterTagIDs: n,
            rgAppIDs: a,
            bLoading: i,
          } = e,
          { data: l } = (0, ll.NH)(),
          o = b.useMemo(
            () =>
              i
                ? []
                : (function (e) {
                    const t = new Map();
                    return (
                      e.forEach((e) => {
                        const n = ht.Z.Get().GetApp(e);
                        null == n ||
                          n.GetTagIDs().forEach((e) => {
                            t.has(e)
                              ? (t.get(e).count += 1)
                              : t.set(e, { tagid: e, count: 1 });
                          });
                      }),
                      Array.from(t.values())
                    );
                  })(a).sort((e, t) => (e.count < t.count ? 1 : -1)),
            [a, i],
          ),
          r = b.useMemo(
            () =>
              o.map((e) => {
                var t;
                return {
                  label:
                    ((null === (t = null == l ? void 0 : l.get(e.tagid)) ||
                    void 0 === t
                      ? void 0
                      : t.name) || "tagid: " + e.tagid) +
                    " (count: " +
                    e.count +
                    ")",
                  value: e.tagid,
                };
              }),
            [l, o],
          ),
          s = {
            option: (e) =>
              Object.assign(Object.assign({}, e), { color: "#444444" }),
          };
        return b.createElement(
          "div",
          { className: sl.TagFilterBar },
          b.createElement(j.__, null, "Filter by Tag:"),
          b.createElement(We.ZP, {
            isSearchable: !0,
            isLoading: i,
            isMulti: !0,
            isClearable: !0,
            value: r.filter((e) => t.has(e.value)),
            options: r,
            styles: s,
            onChange: (e) => {
              const t = new Set();
              null == e || e.forEach((e) => t.add(e.value)), n(t);
            },
          }),
        );
      }
      var pl = n(59954);
      const ul = (e) => null != e;
      class _l {
        constructor() {
          this.m_mapChangeCallback = new Map();
        }
        GetLocalStoreChangeCallback(e) {
          return (
            this.m_mapChangeCallback.has(e) ||
              this.m_mapChangeCallback.set(e, new w.pB()),
            this.m_mapChangeCallback.get(e)
          );
        }
        static Get() {
          return _l.s_Singleton || (_l.s_Singleton = new _l()), _l.s_Singleton;
        }
      }
      var hl = n(4323);
      function gl(e) {
        const { rgAppealReviewReg: t, pageid: n } = e,
          a = b.useMemo(
            () =>
              t.sort(
                (e, t) =>
                  e.jsondata.rtime_appeal_created -
                  t.jsondata.rtime_appeal_created,
              ),
            [t],
          );
        return b.createElement(
          "div",
          null,
          b.createElement(vl, { bShowPruningCriteria: !0 }),
          Boolean(a.length > 0)
            ? b.createElement(
                b.Fragment,
                null,
                a.map((e, t) =>
                  b.createElement(Sl, {
                    key: "appeal" + e.appid,
                    pageid: n,
                    registration: e,
                    index: t,
                  }),
                ),
              )
            : b.createElement(
                "span",
                null,
                (0, me.Xx)("#OptIn_AppReview_EmptyList"),
              ),
        );
      }
      const El = "app_review_elig_crit";
      function vl(e) {
        const { bShowPruningCriteria: t } = e,
          n = (0, pl.kQ)("optin_eligibility_criteria", "application_config"),
          [a, i] = (function (e, t) {
            const [n, a] = b.useState(window.localStorage.getItem(e)),
              i = b.useRef(e);
            b.useEffect(() => {
              e != i.current &&
                (a(window.localStorage.getItem(e)), (i.current = e));
            }, [e]);
            const l = e == i.current ? n : window.localStorage.getItem(e);
            let o = t;
            return (
              ul(l) &&
                (o = ul(t)
                  ? "boolean" == typeof t
                    ? t.constructor("false" !== l)
                    : t.constructor(l)
                  : l),
              (0, _.Qg)(_l.Get().GetLocalStoreChangeCallback(e), a),
              [
                o,
                (t) => {
                  const n = ul(t) ? String(t) : null;
                  window.localStorage.setItem(e, n),
                    a(n),
                    _l.Get().GetLocalStoreChangeCallback(e).Dispatch(n);
                },
              ]
            );
          })(El, !1);
        return t && (null == n ? void 0 : n.length) > 1
          ? b.createElement(
              Oe.mY,
              {
                title: "Pruning Eligibility Criteria",
                getMinimized: () => a,
                toggleMinimized: () => i(!a),
                className: hl.CollapseableTitle,
              },
              b.createElement(Li.d, { text: n }),
            )
          : null;
      }
      function Sl(e) {
        return b.createElement(
          rl.Y,
          { placeholderHeight: "160px", rootMargin: "0px 0px 200px 0px" },
          b.createElement(
            fl,
            Object.assign({}, e, { appid: e.registration.appid }),
          ),
        );
      }
      function fl(e) {
        const { appid: t, pageid: n, index: a } = e,
          i = (0, ut._l)(t, n),
          [l, o] = (0, gt.vs)(t, cl),
          r = b.useMemo(() => ({ type: "game", id: t }), [t]);
        if (!i)
          return b.createElement("div", null, "Error: Missing registration");
        switch (o) {
          case gt.Y0.k_EStoreItemCacheState_Loading:
            return b.createElement(
              "div",
              null,
              b.createElement(de.V, {
                position: "center",
                size: "small",
                string: (0, me.Xx)("#OptIn_AppReview_LoadingApp", t),
              }),
            );
          case gt.Y0.k_EStoreItemCacheState_Unavailable:
            return b.createElement(
              "div",
              null,
              (0, me.Xx)("#OptIn_AppReview_FailedToLoadApp", t),
            );
        }
        return b.createElement(
          "div",
          { className: (0, Z.Z)(sl.Row) },
          b.createElement(
            ol.ll,
            { item: r },
            b.createElement("img", {
              className: sl.CapsuleImg,
              src: l.GetAssets().GetMainCapsuleURL(),
            }),
          ),
          b.createElement(
            "div",
            { className: (0, Z.Z)(sl.Column) },
            b.createElement(
              "div",
              { className: sl.TopSection },
              b.createElement(
                "div",
                { className: sl.GameInfo },
                b.createElement(
                  "a",
                  { href: l.GetStorePageURL() },
                  b.createElement("div", { className: sl.Title }, l.GetName()),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_AppReview_Developers",
                    l.GetDeveloperNames().join(","),
                  ),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_AppReview_Publishers",
                    l.GetPublisherNames().join(","),
                  ),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    l.BIsComingSoon()
                      ? "#OptIn_AppReview_Comingsooon"
                      : "#OptIn_AppReview_Release",
                    l.GetFormattedSteamReleaseDate(),
                  ),
                ),
                b.createElement(
                  "div",
                  { className: sl.Desc },
                  l.GetShortDescription(),
                ),
              ),
              b.createElement(
                "div",
                { className: sl.ActionsCtn },
                Boolean(
                  i.appeal_state == d.JL.k_EPartnerAppOptInAppealState_Approved,
                )
                  ? b.createElement("div", null, "Marked Approved")
                  : b.createElement(
                      j.zx,
                      {
                        onClick: (e) =>
                          (0, W.AM)(
                            b.createElement(Dl, {
                              appid: t,
                              registration: i,
                              bAcceptAppeal: !0,
                            }),
                            (0, K.RA)(e),
                          ),
                      },
                      (0, me.Xx)("#OptIn_AppReview_Appeal_Accept"),
                    ),
                Boolean(
                  i.appeal_state == d.JL.k_EPartnerAppOptInAppealState_Denied,
                )
                  ? b.createElement("div", null, "Marked Denied")
                  : b.createElement(
                      j.zx,
                      {
                        onClick: (e) =>
                          (0, W.AM)(
                            b.createElement(Dl, {
                              appid: t,
                              registration: i,
                              bAcceptAppeal: !1,
                            }),
                            (0, K.RA)(e),
                          ),
                      },
                      (0, me.Xx)("#OptIn_AppReview_Appeal_Deny"),
                    ),
                Boolean(Je.L7.is_support) &&
                  b.createElement(
                    j.zx,
                    {
                      onClick: (e) =>
                        (0, W.AM)(
                          b.createElement(
                            he.uH,
                            {
                              strTitle: (0, me.Xx)("#OptIn_Debug"),
                              bAlertDialog: !0,
                            },
                            b.createElement(ze.G, { data: i }),
                          ),
                          (0, K.RA)(e),
                        ),
                    },
                    "(VO) " + (0, me.Xx)("#OptIn_Debug"),
                  ),
              ),
            ),
            b.createElement(
              "div",
              { className: sl.GameInfo },
              b.createElement(wl, { storeItem: l }),
              b.createElement(
                "div",
                { className: sl.AppealWordsCtn },
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)("#OptIn_AppReview_Appeal_text"),
                ),
                b.createElement("p", null, i.jsondata.appeal_message),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)("#OptIn_AppReview_Appeal_createtime"),
                  " ",
                  (0, me.$1)(i.jsondata.rtime_appeal_created),
                ),
              ),
            ),
          ),
          b.createElement(
            "div",
            { className: sl.RowNumber },
            (a + 1).toLocaleString(),
          ),
        );
      }
      function Dl(e) {
        const {
            appid: t,
            registration: n,
            bAcceptAppeal: a,
            closeModal: i,
          } = e,
          [o] = (0, gt.vs)(t, cl),
          { fnUpdateAppealState: r } = (0, ut.du)(),
          s = (0, rt.tx)();
        return s.bLoading
          ? b.createElement(rt.NT, {
              state: s,
              strDialogTitle: (0, me.Xx)("#SalePage_Quiz_SubmitResponse"),
              closeModal: i,
            })
          : b.createElement(he.uH, {
              strTitle: a
                ? (0, me.Xx)("#OptIn_AppReview_Appeal_Accept")
                : (0, me.Xx)("#OptIn_AppReview_Appeal_Deny"),
              strDescription: (0, me.Xx)(
                "#OptIn_AppReview_Appeal_DialogVerify",
                (null == o ? void 0 : o.GetName()) || "" + t,
              ),
              onCancel: i,
              onOK: () =>
                (0, l.mG)(this, void 0, void 0, function* () {
                  s.fnSetLoading(!0);
                  (yield r(t, n, a))
                    ? s.fnSetSuccess(!0)
                    : (s.fnSetError(!0),
                      s.fnSetStrError(
                        "Check console or network tab for details.",
                      ));
                }),
            });
      }
      function yl(e) {
        return b.createElement(
          "div",
          null,
          b.createElement(
            j.zx,
            {
              onClick: (t) =>
                (0, W.AM)(
                  b.createElement(Il, Object.assign({}, e, { bInvite: !0 })),
                  (0, K.RA)(t),
                ),
            },
            (0, me.Xx)("#OptIn_AppReview_InviteAll"),
          ),
          b.createElement(
            j.zx,
            {
              onClick: (t) =>
                (0, W.AM)(
                  b.createElement(Il, Object.assign({}, e, { bInvite: !1 })),
                  (0, K.RA)(t),
                ),
            },
            (0, me.Xx)("#OptIn_AppReview_PruneAll"),
          ),
        );
      }
      function Il(e) {
        const { closeModal: t, rgAppIDs: n, strOptInName: a, bInvite: i } = e,
          { fnChangeAppPruneState: o } = al(),
          [r, s] = (0, b.useState)(void 0),
          [c, m] = (0, b.useState)(void 0),
          [d, p] = (0, b.useState)(void 0),
          u = (0, b.useCallback)(
            () =>
              (0, l.mG)(this, void 0, void 0, function* () {
                m(!0),
                  o(a, n, !i)
                    .then((e) => {
                      e || s((0, me.Xx)("#OptIn_AppReview_ErrorBatch"));
                    })
                    .finally(() => p(!0));
              }),
            [i, o, n, a],
          );
        return b.createElement(
          he.uH,
          {
            strTitle: (0, me.Xx)(
              i
                ? "#OptIn_AppReview_BatchInvite_Title"
                : "$OptIn_AppReview_BatchPrune_Title",
            ),
            strDescription: (0, me.Xx)("#OptIn_AppReview_Batch_Description"),
            bDisableBackgroundDismiss: !0,
            onCancel: t,
            bOKDisabled: c,
            onOK: u,
            strOKButtonText: (0, me.Xx)("#Update"),
          },
          Boolean(c && !d) &&
            b.createElement(de.V, {
              string: (0, me.Xx)("#Saving"),
              size: "medium",
            }),
          Boolean(r) &&
            b.createElement("div", { className: Ee.ErrorStylesBackground }, r),
          Boolean(d && !r) &&
            b.createElement(
              "div",
              null,
              (0, me.Xx)("#OptIn_AppReview_Batch_Success"),
            ),
        );
      }
      function Cl(e) {
        const { pageid: t } = e,
          n = (0, N.kQ)("optin_title", "application_config"),
          {
            rgInvitedAppIDs: a,
            rgPrunedAppIDs: i,
            rgPendingReviewAppIDs: o,
          } = (function () {
            const [e, t] = b.useState(nl.Get().GetAsConsolidatedList());
            return (
              (0, _.Qg)(nl.Get().GetConsolidatedListCallback(), t),
              {
                rgInvitedAppIDs: e.invited_appids,
                rgPrunedAppIDs: e.pruned_appids,
                rgPendingReviewAppIDs: e.pending_review_appids,
              }
            );
          })(),
          { rgPendingReviewRegistrations: s, bIsInError: c } = (0, ut.nw)(t),
          { rgAppToNotPrune: m, bIsLoadError: d } = (function (e) {
            const t = (0, ae.useQuery)({
              queryKey: ["usePartnerOptInEmailedApps", e],
              queryFn: () =>
                (function (e) {
                  var t;
                  return (0, l.mG)(this, void 0, void 0, function* () {
                    const n = { sessionid: N.De.SESSIONID, opt_in_name: e },
                      a =
                        N.De.PARTNER_BASE_URL +
                        "optin/ajaxgetapplisttonotprune",
                      i = yield r().get(a, { params: n, withCredentials: !0 });
                    return (
                      (null === (t = null == i ? void 0 : i.data) ||
                      void 0 === t
                        ? void 0
                        : t.appids) || []
                    );
                  });
                })(e),
              retry: !1,
            });
            return {
              rgAppToNotPrune: t.isLoading ? null : t.data,
              bIsLoadError: t.isError,
            };
          })(t);
        b.useEffect(() => {
          (0, N.kQ)("optin_webapi_token", "application_config")
            ? (0, il.a)(!0)
            : console.error("OptInAppReviewLanding missing API token");
        }, []);
        const p = b.useMemo(() => {
            if (s) {
              const e = new Map();
              return s.forEach((t) => e.set(t.appid, t)), e;
            }
            return null;
          }, [s]),
          u = b.useMemo(
            () =>
              p
                ? o.filter((e) => {
                    if (!p.has(e)) return !0;
                    const t = p.get(e);
                    return Boolean(
                      !t.jsondata || !t.jsondata.accountid_appealing,
                    );
                  })
                : null,
            [p, o],
          ),
          h = b.useMemo(
            () =>
              null == s
                ? void 0
                : s.filter((e) => {
                    var t;
                    return null === (t = e.jsondata) || void 0 === t
                      ? void 0
                      : t.accountid_appealing;
                  }),
            [s],
          );
        if (c || d)
          return (
            console.log(`OptInAppReviewLanding Review: ${c} NotPrune: ${d}`),
            b.createElement(
              "div",
              null,
              "Failed to loading pending review data.  User likely does not have sufficient permissions.",
            )
          );
        if (!(m && (o || a || i) && s && u))
          return b.createElement(de.V, {
            string: "Loading",
            size: "medium",
            position: "center",
          });
        const g = (e) =>
            window.sessionStorage.setItem("appreviewtab", `?tab=${e.key}`),
          E = [
            {
              name: (0, me.Xx)(
                "#OptIn_AppReview_PendingReviewApps",
                (null == u ? void 0 : u.length) || 0,
              ),
              key: "review",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(bl, {
                  key: "reviewapp",
                  rgOrderedAppIDs: u,
                  pageid: t,
                  bPruned: !1,
                  bPendingReview: !0,
                  bShowPruningCriteria: !0,
                }),
              ),
              onClick: g,
            },
            {
              name: (0, me.Xx)(
                "#OptIn_AppReview_InvitedApps",
                (null == a ? void 0 : a.length) || 0,
              ),
              key: "invited",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(bl, {
                  key: "invitedapps",
                  rgOrderedAppIDs: a,
                  pageid: t,
                  bPruned: !1,
                  bPendingReview: !1,
                  rgNotToPruneList: m,
                }),
              ),
              onClick: g,
            },
            {
              name: (0, me.Xx)(
                "#OptIn_AppReview_PrunedApps",
                (null == i ? void 0 : i.length) || 0,
              ),
              key: "pruned",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(bl, {
                  key: "prunedapps",
                  rgOrderedAppIDs: i,
                  pageid: t,
                  bPruned: !0,
                  bPendingReview: !1,
                }),
              ),
              onClick: g,
            },
          ];
        return (
          N.L7.is_support &&
            E.splice(1, 0, {
              name: (0, me.Xx)(
                "#OptIn_AppReview_PendingAppealReview",
                (null == h ? void 0 : h.length) || 0,
              ),
              key: "appeal",
              contents: b.createElement(
                X.SV,
                null,
                b.createElement(gl, {
                  key: "appealmap",
                  rgAppealReviewReg: h,
                  pageid: t,
                }),
              ),
              onClick: g,
            }),
          b.createElement(
            "div",
            { className: Ze().AdminPageCtn },
            b.createElement(
              "div",
              { className: Ze().PageTitle },
              (0, me.Xx)("#OptIn_AppReview", n),
            ),
            b.createElement(
              "div",
              { className: Ze().PageSubTitle },
              "Use the 'Prune' option to remove eligibility for that game. Pruned titles will not be eligible, invited, or receive any communication about this event.",
            ),
            b.createElement(te.n, { tabs: E }),
          )
        );
      }
      function bl(e) {
        const {
            rgOrderedAppIDs: t,
            pageid: n,
            bPruned: a,
            rgNotToPruneList: i,
            bPendingReview: l,
            bShowPruningCriteria: o,
          } = e,
          [r, s] = b.useState(null),
          c = null != r ? r : t;
        return b.createElement(
          "div",
          null,
          Boolean(l) && b.createElement(yl, { strOptInName: n, rgAppIDs: c }),
          b.createElement(vl, { bShowPruningCriteria: o }),
          b.createElement(ml, {
            pageid: n,
            rgOrderedAppIDs: t,
            fnSetFilteredAppID: s,
            rgNotToPruneList: i,
          }),
          (null == c ? void 0 : c.length) > 0
            ? b.createElement(
                b.Fragment,
                null,
                c.map((e, t) =>
                  b.createElement(Al, {
                    key: (a ? "prune" : "invited") + e,
                    pageid: n,
                    appid: e,
                    bInvited: !a && !l,
                    bPendingReview: l,
                    index: t,
                  }),
                ),
              )
            : b.createElement(
                "span",
                null,
                (0, me.Xx)("#OptIn_AppReview_EmptyList"),
              ),
        );
      }
      function Al(e) {
        return b.createElement(
          rl.Y,
          { placeholderHeight: "160px", rootMargin: "0px 0px 200px 0px" },
          b.createElement(Tl, Object.assign({}, e)),
        );
      }
      function Tl(e) {
        const {
            appid: t,
            bInvited: n,
            pageid: a,
            index: i,
            bPendingReview: l,
          } = e,
          [o, r] = (0, gt.vs)(t, cl),
          { fnChangeAppPruneState: s } = al(),
          c = b.useMemo(() => ({ type: "game", id: t }), [t]);
        switch (r) {
          case gt.Y0.k_EStoreItemCacheState_Loading:
            return b.createElement(
              "div",
              null,
              b.createElement(de.V, {
                position: "center",
                size: "small",
                string: (0, me.Xx)("#OptIn_AppReview_LoadingApp", t),
              }),
            );
          case gt.Y0.k_EStoreItemCacheState_Unavailable:
            return b.createElement(
              "div",
              null,
              (0, me.Xx)("#OptIn_AppReview_FailedToLoadApp", t),
            );
        }
        return b.createElement(
          "div",
          { className: (0, Z.Z)(sl.Row, n ? sl.Invited : sl.Pruned) },
          b.createElement(
            ol.ll,
            { item: c },
            b.createElement("img", {
              className: sl.CapsuleImg,
              src: o.GetAssets().GetMainCapsuleURL(),
            }),
          ),
          b.createElement(
            "div",
            { className: (0, Z.Z)(sl.Column) },
            b.createElement(
              "div",
              { className: sl.TopSection },
              b.createElement(
                "div",
                { className: sl.GameInfo },
                b.createElement(
                  "a",
                  { href: o.GetStorePageURL() },
                  b.createElement("div", { className: sl.Title }, o.GetName()),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_AppReview_Developers",
                    o.GetDeveloperNames().join(","),
                  ),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_AppReview_Publishers",
                    o.GetPublisherNames().join(","),
                  ),
                ),
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    o.BIsComingSoon()
                      ? "#OptIn_AppReview_Comingsooon"
                      : "#OptIn_AppReview_Release",
                    o.GetFormattedSteamReleaseDate(),
                  ),
                ),
              ),
              b.createElement(
                "div",
                { className: sl.ActionsCtn },
                b.createElement(
                  j.zx,
                  { onClick: () => s(a, [t], n || l) },
                  (0, me.Xx)(
                    n || l
                      ? "#OptIn_AppReview_Prune"
                      : "#OptIn_AppReview_Unprune",
                  ),
                ),
                Boolean(l) &&
                  b.createElement(
                    j.zx,
                    { onClick: () => s(a, [t], !1) },
                    (0, me.Xx)("#OptIn_AppReview_Invite"),
                  ),
                Boolean(N.L7.is_support && n) &&
                  b.createElement(kl, { appid: t, pageid: a }),
              ),
            ),
            b.createElement(
              "div",
              { className: sl.GameInfo },
              b.createElement(
                "div",
                { className: sl.Desc },
                o.GetShortDescription(),
              ),
              b.createElement(wl, { storeItem: o }),
            ),
          ),
          b.createElement(
            "div",
            { className: sl.RowNumber },
            (i + 1).toLocaleString(),
          ),
        );
      }
      function kl(e) {
        const { appid: t, pageid: n } = e,
          a = (function (e) {
            const [t, n] = (0, b.useState)(nl.Get().GetStateForApp(e));
            return (0, _.Qg)(nl.Get().GetStateForAppCallback(e), n), t;
          })(t),
          { fnChangeAppAdditionalFeaturingState: i } = {
            fnChangeAppAdditionalFeaturingState:
              nl.Get().ChangeAppAdditionalFeaturingState,
          };
        return b.createElement(
          "div",
          { className: Ze().ValveOnlyBackground },
          b.createElement(
            j.zx,
            {
              onClick: () => {
                i(n, [t], !a.additionally_featured)
                  .then((e) => {
                    e != A.s.k_EResultOK &&
                      (0, W.AM)(
                        b.createElement(he.JX, {
                          strDescription:
                            "Check the console for error messages",
                        }),
                        window,
                      );
                  })
                  .catch(() =>
                    (0, W.AM)(
                      b.createElement(he.JX, {
                        strDescription: "Check the console for error messages",
                      }),
                      window,
                    ),
                  );
              },
            },
            (0, me.Xx)(
              a.additionally_featured
                ? "Remove App Featuring"
                : "Add App Featuring",
            ),
          ),
        );
      }
      function wl(e) {
        const { storeItem: t } = e,
          n = b.useMemo(
            () => (null == t ? void 0 : t.GetTags().map((e) => e.tagid)),
            [t],
          ),
          a = (0, ll.Eq)(n);
        return b.createElement(
          "div",
          { className: sl.StoreTags },
          (0, me.kQ)(
            "#OptIn_AppReview_Tags",
            b.createElement(
              b.Fragment,
              null,
              a.map((e) =>
                b.createElement("span", { key: "tag" + e.tagid }, e.name),
              ),
            ),
          ),
        );
      }
      var Nl = n(26032),
        Ll = n.n(Nl),
        xl = n(91946),
        Ol = n.n(xl);
      function Gl(e) {
        const {
            storeItem: t,
            closeModal: n,
            optInDef: a,
            optInRegistration: i,
          } = e,
          [o, r] = (0, b.useState)(""),
          { fnUpdateOptInRegistrationJson: c } = (0, ut.dS)(),
          d = (0, s.Xj)(a.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          p = (0, rt.tx)();
        return p.bLoading
          ? b.createElement(rt.NT, {
              state: p,
              strDialogTitle: (0, me.Xx)(
                "#OptIn_Appeals_Control_Title",
                t.GetName(),
              ),
              closeModal: n,
            })
          : b.createElement(
              he.uH,
              {
                strTitle: (0, me.Xx)(
                  "#OptIn_Appeals_Control_Title",
                  t.GetName(),
                ),
                strOKButtonText: (0, me.Xx)("#OptIn_Appeals_Dialog_Submit"),
                bDisableBackgroundDismiss: !0,
                onCancel: n,
                onOK: () =>
                  (0, l.mG)(this, void 0, void 0, function* () {
                    p.fnSetLoading(!0);
                    try {
                      const e = JSON.parse(
                        JSON.stringify(
                          "" !== i.jsondata && i.jsondata ? i.jsondata : {},
                        ),
                      );
                      (e.accountid_appealing = Je.L7.accountid),
                        (e.rtime_appeal_created = Math.floor(Date.now() / 1e3)),
                        (e.appeal_message = o),
                        (e.opt_in_name = a.pageid);
                      null == (yield c(t.GetAppID(), e, !0))
                        ? (p.fnSetSuccess(!0),
                          p.fnSetStrSuccess(
                            (0, me.Xx)("#OptIn_Appeals_Control_Submitted"),
                          ))
                        : (p.fnSetError(!0),
                          p.fnSetStrError(
                            (0, me.Xx)("#OptIn_Appeals_Dialog_Failed"),
                          ));
                    } catch (e) {
                      const t = (0, k.l)(e);
                      console.error(
                        "OptInAppealsCreateDialog error " + t.strErrorMsg,
                        t,
                        e,
                      ),
                        p.fnSetError(!0),
                        p.fnSetStrError(
                          (0, me.Xx)("#OptIn_Appeals_Dialog_Failed"),
                        );
                    }
                  }),
              },
              b.createElement(
                "div",
                { className: Ol().AppealsEntryForm },
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Dialog_Desc"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.yu)(
                    "#OptIn_Appeals_Dialog_Desc2",
                    b.createElement("a", { href: t.GetStorePageURL() }),
                    b.createElement("a", {
                      href: `${
                        Je.De.PARTNER_BASE_URL
                      }taxonomy/tagwizard/${t.GetAppID()}`,
                    }),
                  ),
                ),
                b.createElement(
                  "h3",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Dialog_InputTitle"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Dialog_InputDesc"),
                ),
                b.createElement("textarea", {
                  value: o,
                  className: Ol().AppealTextInput,
                  onChange: (e) => {
                    r(e.currentTarget.value);
                  },
                  ref: (e) => e && e.focus(),
                }),
                b.createElement(
                  "h3",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_ReviewProcessTitle"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_Submitted_Desc", d),
                ),
              ),
            );
      }
      function Rl(e) {
        const {
            optInDef: t,
            optInRegistration: n,
            storeItem: a,
            closeModal: i,
            bReject: o,
          } = e,
          { fnUpdateOptInRegistrationJson: r } = (0, ut.dS)(),
          s = (0, rt.tx)();
        return s.bLoading
          ? b.createElement(rt.NT, {
              state: s,
              strDialogTitle: (0, me.Xx)(
                o ? "Rejecting Appeal Data" : "Clearing Appeal Data",
                a.GetName(),
              ),
              closeModal: i,
            })
          : b.createElement(he.uH, {
              strTitle: o ? "Reject Appear" : "Clear Appeal data?",
              strDescription: "Are you sure?",
              bDisableBackgroundDismiss: !0,
              onCancel: i,
              onOK: () =>
                (0, l.mG)(this, void 0, void 0, function* () {
                  s.fnSetLoading(!0);
                  try {
                    const e = JSON.parse(
                      JSON.stringify(
                        "" !== n.jsondata && n.jsondata ? n.jsondata : {},
                      ),
                    );
                    (e.accountid_appealing = void 0),
                      (e.rtime_appeal_created = void 0),
                      (e.appeal_message = void 0),
                      (e.opt_in_name = t.pageid),
                      (e.appeal_rejected = void 0),
                      (e.reject_accountid = void 0);
                    null == (yield r(a.GetAppID(), e, !1))
                      ? (s.fnSetSuccess(!0),
                        s.fnSetStrSuccess(
                          (0, me.Xx)("#OptIn_Appeals_Control_Submitted"),
                        ))
                      : (s.fnSetError(!0),
                        s.fnSetStrError(
                          (0, me.Xx)("#OptIn_Appeals_Dialog_Failed"),
                        ));
                  } catch (e) {
                    const t = (0, k.l)(e);
                    console.error(
                      "ClearAppealDialog error " + t.strErrorMsg,
                      t,
                      e,
                    ),
                      s.fnSetError(!0),
                      s.fnSetStrError(
                        (0, me.Xx)("#OptIn_Appeals_Dialog_Failed"),
                      );
                  }
                }),
            });
      }
      function Bl(e) {
        const { optInDef: t } = e,
          n = nt(t);
        return b.createElement(
          "div",
          { className: Ze().RightCol },
          b.createElement(
            "div",
            { className: Ze().ColHeader },
            Boolean(n) &&
              b.createElement("div", {
                className: Ze().ColHeaderImg,
                style: { backgroundImage: `url( '${n}' )` },
              }),
          ),
          b.createElement(
            "div",
            { className: Ze().SectionCtn },
            b.createElement(Ml, Object.assign({}, e)),
            Boolean(Je.L7.is_support) &&
              b.createElement(Pl, Object.assign({}, e)),
          ),
        );
      }
      function Ml(e) {
        const { optInDef: t } = e;
        return b.createElement(Vl, { optInDef: t });
      }
      function Pl(e) {
        const { optInDef: t, optInRegistration: n } = e,
          { fnUpdateAppToInvitation: a } = pt();
        return b.createElement(
          b.Fragment,
          null,
          b.createElement("br", null),
          b.createElement("br", null),
          b.createElement(
            "div",
            { className: H().ValveOnlyBackground },
            b.createElement(
              "ul",
              null,
              b.createElement(
                "li",
                null,
                b.createElement(
                  "a",
                  {
                    href: `${Je.De.PARTNER_BASE_URL}optin/admin/edit/${t.pageid}`,
                  },
                  "Edit OptIn Definition",
                ),
              ),
              b.createElement(
                "li",
                null,
                b.createElement(
                  "a",
                  {
                    href: `${Je.De.PARTNER_BASE_URL}optin/appreview/${t.pageid}?tab=appeal`,
                  },
                  "Go to Appeals Review Page",
                ),
              ),
            ),
            b.createElement("br", null),
            b.createElement(
              j.zx,
              {
                onClick: (t) =>
                  (0, W.AM)(
                    b.createElement(Fl, Object.assign({}, e)),
                    (0, K.RA)(t),
                  ),
              },
              "(VO) Invite App to Participate",
            ),
            b.createElement("br", null),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(
                      he.uH,
                      {
                        strTitle: (0, me.Xx)("#OptIn_Debug"),
                        bAlertDialog: !0,
                      },
                      b.createElement(ze.G, { data: n }),
                    ),
                    (0, K.RA)(e),
                  ),
              },
              "(VO) " + (0, me.Xx)("#OptIn_Debug"),
            ),
            b.createElement(
              j.zx,
              {
                onClick: (e) =>
                  (0, W.AM)(
                    b.createElement(
                      he.uH,
                      {
                        strTitle: (0, me.Xx)("#OptIn_Def_Debug"),
                        bAlertDialog: !0,
                      },
                      b.createElement(ze.G, { data: t }),
                    ),
                    (0, K.RA)(e),
                  ),
              },
              "(VO) " + (0, me.Xx)("#OptIn_Def_Debug"),
            ),
            Boolean(n.jsondata.accountid_appealing) &&
              b.createElement(
                b.Fragment,
                null,
                b.createElement(
                  j.zx,
                  {
                    onClick: (t) =>
                      (0, W.AM)(
                        b.createElement(Rl, Object.assign({ bReject: !1 }, e)),
                        (0, K.RA)(t),
                      ),
                  },
                  "Clear Appeal Data",
                ),
                b.createElement(
                  j.zx,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(Dl, {
                          appid: n.appid,
                          registration: n,
                          bAcceptAppeal: !0,
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "Accept Appeal and Email Requested",
                ),
                b.createElement(
                  j.zx,
                  {
                    onClick: (e) =>
                      (0, W.AM)(
                        b.createElement(Dl, {
                          appid: n.appid,
                          registration: n,
                          bAcceptAppeal: !1,
                        }),
                        (0, K.RA)(e),
                      ),
                  },
                  "REJECT Appeal and Email Requested",
                ),
              ),
          ),
        );
      }
      function Fl(e) {
        var t;
        const { optInDef: n, optInRegistration: a, closeModal: i } = e,
          { fnUpdateAppToInvitation: l } = pt(),
          o = (0, rt.tx)();
        return o.bLoading
          ? b.createElement(rt.NT, {
              state: o,
              strDialogTitle: "Inviting App to Participate",
              closeModal: i,
            })
          : b.createElement(
              he.uH,
              {
                strTitle: "Invite App to Participate",
                onCancel: i,
                onOK: () => {
                  o.fnSetLoading(!0),
                    l(n.pageid, [a.appid], !0, !1, !1)
                      .then((e) => {
                        e == A.s.k_EResultOK
                          ? o.fnSetElSuccess(
                              b.createElement(
                                "div",
                                null,
                                b.createElement(
                                  "span",
                                  null,
                                  "Success. Please reload the page to verify.",
                                ),
                                b.createElement("br", null),
                                b.createElement(
                                  "a",
                                  {
                                    href: `${Je.De.PARTNER_BASE_URL}optin/sale/${n.pageid}/${a.appid}`,
                                  },
                                  "Or go to registration Page.",
                                ),
                              ),
                            )
                          : o.fnSetStrError("Failed with error code: " + e);
                      })
                      .catch(() =>
                        o.fnSetStrError(
                          "failed with exception, check console ouput.",
                        ),
                      );
                },
              },
              b.createElement(
                "div",
                null,
                "Confirm we want to invite this appear to register for ",
                null === (t = n.event_title) || void 0 === t
                  ? void 0
                  : t.english,
                "? They will need to perform the registration after you invite completes",
              ),
            );
      }
      function Ul(e) {
        const { appid: t, pageid: n } = e,
          [a] = (0, gt.vs)(t, { include_release: !0 }),
          i = (0, N.kQ)("eligible_due_optin_def", "application_config"),
          l = x(n),
          o = (0, ut.Rz)(t, n);
        if (!l)
          return b.createElement(
            "div",
            null,
            (0, me.Xx)("#OptIn_Appeals_DoesNotExist", n),
          );
        const r = (0, s.Xj)(l.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          c = Math.floor(Date.now() / 1e3);
        return l.event_end_date < c
          ? b.createElement("div", null, (0, me.Xx)("#OptIn_Appeals_IsOver"))
          : a
          ? o.invited || o.opt_in || o.time_opted_out || i
            ? b.createElement(
                "div",
                null,
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)(
                    "#OptIn_Appeals_AlreadyPartOfEvent",
                    a.GetName(),
                    r,
                  ),
                ),
                b.createElement(
                  "a",
                  { href: `${Je.De.PARTNER_BASE_URL}optin/sale/${n}/${t}` },
                  (0, me.Xx)("#OptIn_Appeals_RegistrationPage"),
                ),
              )
            : b.createElement(
                "div",
                { className: Ze().AdminPageCtn },
                b.createElement(
                  "div",
                  { className: Ze().PageTitle },
                  a.GetName(),
                  " (",
                  t,
                  ")",
                  b.createElement(
                    "span",
                    null,
                    (0, me.Xx)("#OptIn_Appeals_Title", r),
                  ),
                ),
                b.createElement("hr", null),
                b.createElement(jl, {
                  optInDef: l,
                  optInRegistration: o,
                  storeItem: a,
                }),
              )
          : b.createElement(de.V, {
              position: "center",
              string: (0, me.Xx)("#Loading"),
            });
      }
      function jl(e) {
        const { optInDef: t, optInRegistration: n } = e,
          a = (0, s.Xj)(t.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          i = nt(t);
        let l = "#OptIn_Appeals_Title_Pruned";
        return (
          n.accountid_appeal &&
          n.appeal_state != d.JL.k_EPartnerAppOptInAppealState_Approved &&
          n.appeal_state != d.JL.k_EPartnerAppOptInAppealState_Denied
            ? (l = "#OptIn_Appeals_Title_AppealProcess")
            : (!n.pending_review && n.pruned) ||
              (l = "#OptIn_Appeals_Title_NotReviewed"),
          b.createElement(
            "div",
            { className: Ze().ColumnCtn },
            b.createElement(
              "div",
              { className: Ze().LeftCol },
              b.createElement(
                "div",
                { className: Ze().ColHeader },
                Boolean(i)
                  ? b.createElement("div", {
                      className: Ze().ColHeaderImg,
                      style: { backgroundImage: `url( '${i}' )` },
                    })
                  : Boolean(a) && b.createElement("div", null, a),
              ),
              b.createElement(
                "div",
                { className: Ze().SectionCtn },
                b.createElement(
                  "h1",
                  { className: Ll().AppealTitle },
                  (0, me.Xx)(l),
                ),
              ),
              b.createElement(Xl, Object.assign({}, e)),
              b.createElement(zl, Object.assign({}, e)),
            ),
            b.createElement(Bl, Object.assign({}, e)),
          )
        );
      }
      function Xl(e) {
        const { optInDef: t, storeItem: n, optInRegistration: a } = e;
        let i = "#OptIn_Appeals_ReviewLine";
        (!a.pending_review && a.pruned) ||
          (i = "#OptIn_Appears_NotReviewed_ReviewLine");
        const l = (0, s.Xj)(t.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          o = (0, s.Xj)(t.appeals_text, (0, m.jM)(Je.De.LANGUAGE), null);
        return b.createElement(
          "div",
          { className: Ze().SectionCtn },
          b.createElement("h1", null, (0, me.Xx)(i, n.GetName())),
          b.createElement("p", null, (0, me.Xx)("#OptIn_Appeals_ReviewLine_1")),
          b.createElement(
            "p",
            null,
            (0, me.yu)(
              "#OptIn_Appeals_ReviewLine_2",
              b.createElement("a", {
                href: `${
                  Je.De.PARTNER_BASE_URL
                }taxonomy/tagwizard/${n.GetAppID()}`,
              }),
            ),
          ),
          Boolean(o) &&
            b.createElement(
              b.Fragment,
              null,
              b.createElement(
                "h1",
                null,
                (0, me.Xx)("#OptIn_Appeals_EligibilityTitle", l),
              ),
              b.createElement(Li.d, { text: o }),
            ),
        );
      }
      function zl(e) {
        var t;
        const { optInDef: n, optInRegistration: a, storeItem: i } = e;
        let l = !1;
        if (
          (null === (t = n.release_date_eligibility) || void 0 === t
            ? void 0
            : t.include_unreleased_games) &&
          n.release_date_eligibility.release_after_date
        )
          if (i.BIsComingSoon()) {
            const e = (0, N.kQ)("rt_steam_release_date", "application_config");
            if (e < n.release_date_eligibility.release_after_date) {
              if (e > Math.floor(Date.now() / 1e3))
                return b.createElement(
                  "div",
                  { className: Ze().SectionCtn },
                  b.createElement(
                    "h1",
                    null,
                    (0, me.Xx)("#OptIn_Appeals_NotPossible_Title"),
                  ),
                  b.createElement(
                    "div",
                    { className: Ze().warning },
                    b.createElement(
                      "p",
                      null,
                      (0, me.Xx)(
                        "#OptIn_Appeals_NotPossible_Desc1",
                        (0, me.$1)(
                          n.release_date_eligibility.release_after_date,
                        ),
                      ),
                      " ",
                      (0, me.Xx)("#OptIn_Appeals_NotPossible_Desc2"),
                    ),
                    b.createElement(
                      "p",
                      null,
                      (0, me.yu)(
                        "#OptIn_Appeals_NotPossible_Desc3",
                        b.createElement("a", {
                          href:
                            Je.De.PARTNER_BASE_URL + "doc/store/release_dates",
                        }),
                      ),
                    ),
                  ),
                );
              l = !0;
            }
          } else if (
            !n.release_date_eligibility.include_released_games &&
            i.BIsReleased()
          )
            return b.createElement(
              "div",
              { className: Ze().SectionCtn },
              b.createElement(
                "h1",
                null,
                (0, me.Xx)("#OptIn_Appeals_NotPossible_Title"),
              ),
              b.createElement(
                "div",
                { className: Ze().warning },
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_NotPossible_Desc4"),
                ),
              ),
            );
        return b.createElement(
          Hl,
          Object.assign({}, e, { bShowReleaseDatePassed: l }),
        );
      }
      function Hl(e) {
        var t;
        const {
            optInDef: n,
            optInRegistration: a,
            storeItem: i,
            bShowReleaseDatePassed: l,
          } = e,
          o = Boolean(
            null === (t = a.jsondata) || void 0 === t
              ? void 0
              : t.rtime_appeal_created,
          ),
          r = Boolean(
            a.appeal_state === d.JL.k_EPartnerAppOptInAppealState_Denied,
          ),
          c = (0, s.Xj)(n.event_title, (0, m.jM)(Je.De.LANGUAGE));
        let p = "#OptIn_Appeals_Control_Title",
          u = "#OptIn_Appeals_Control_Desc";
        return (
          a.appeal_state == d.JL.k_EPartnerAppOptInAppealState_Denied
            ? ((p = "#OptIn_Appeals_Control_Rejected_Title"),
              (u = "#OptIn_Appeals_Control_Rejected_Desc"))
            : (!a.pending_review && a.pruned) ||
              (p = "#OptIn_Appeals_Control_NotReviewed_Title"),
          b.createElement(
            "div",
            { className: Ze().SectionCtn },
            b.createElement("h1", null, (0, me.Xx)(p, i.GetName())),
            b.createElement("p", null, (0, me.Xx)(u)),
            Boolean(l) &&
              b.createElement(
                "div",
                { className: Ze().warning },
                b.createElement(
                  "h3",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Possible_WarningTitle"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Possible_warning"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.yu)(
                    "#OptIn_Appeals_NotPossible_Desc3",
                    b.createElement("a", {
                      href: Je.De.PARTNER_BASE_URL + "doc/store/release_dates",
                    }),
                  ),
                ),
              ),
            Boolean(!o) &&
              b.createElement(
                "div",
                { className: Ll().ButtonCtn },
                b.createElement(
                  j.zx,
                  {
                    onClick: (t) =>
                      (0, W.AM)(
                        b.createElement(Gl, Object.assign({}, e)),
                        (0, K.RA)(t),
                      ),
                  },
                  (0, me.Xx)("#OptIn_Appeals_Control_Button"),
                ),
              ),
            Boolean(o && !r) &&
              b.createElement(
                "div",
                { className: Ll().AppealResults },
                b.createElement(
                  "h2",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_Submitted_Title"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_Submitted_Desc", c),
                ),
              ),
            Boolean(r) &&
              b.createElement(
                "div",
                { className: (0, Z.Z)(Ll().AppealResults, Ll().Declined) },
                b.createElement(
                  "h2",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_Declined"),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.Xx)("#OptIn_Appeals_Control_Declined_Desc1", c),
                ),
                b.createElement(
                  "p",
                  null,
                  (0, me.yu)(
                    "#OptIn_Appeals_Control_Declined_Desc2",
                    b.createElement("a", {
                      href: "https://partner.steamgames.com/doc/marketing/upcoming_events",
                    }),
                  ),
                ),
              ),
          )
        );
      }
      function Vl(e) {
        const { optInDef: t } = e,
          n = (0, s.Xj)(t.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          a = t.public_doc_wiki_url,
          i = (0, s.Xj)(t.help_text, (0, m.jM)(Je.De.LANGUAGE), null);
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "div",
            { className: Ze().TitleSmall },
            (0, me.Xx)("#DiscountDashboard_HelpAreaText"),
          ),
          Boolean(a) &&
            b.createElement(
              "div",
              null,
              (0, me.kQ)(
                "#OptIn_Appeals_HelpDoc",
                b.createElement(
                  "a",
                  { href: a },
                  (0, me.Xx)("#OptIn_Appeals_HelpDoc_link", n),
                ),
              ),
            ),
          Boolean(i)
            ? b.createElement("div", null, b.createElement(Li.d, { text: i }))
            : b.createElement(
                "p",
                null,
                (0, me.yu)(
                  "#OptIn_Appeals_HelpDoc_General",
                  b.createElement("a", {
                    href: "https://partner.steamgames.com/doc/marketing/upcoming_events/themed_sales",
                  }),
                ),
              ),
          b.createElement(
            "div",
            { className: Ze().TitleSmall },
            (0, me.Xx)("#OptIn_Appeals_HelpDoc_NeedHelp"),
          ),
          b.createElement(
            "a",
            {
              href:
                Je.De.HELP_BASE_URL +
                "en/wizard/HelpWithPublishing?issueid=933",
            },
            (0, me.Xx)("#PricingDashboard_ContactUsButton"),
          ),
        );
      }
      function Wl(e) {
        const t = e;
        return (
          t &&
          Array.isArray(t) &&
          t.length > 0 &&
          "number" == typeof t[0].appid &&
          "string" == typeof t[0].app_name
        );
      }
      function ql() {
        const [e, t] = (0, b.useState)(null);
        return (
          (0, b.useEffect)(() => {
            const e = (0, N.ip)("optin_registered", "application_config");
            Wl(e) &&
              ("dev" === N.De.WEB_UNIVERSE &&
                console.log(
                  "useOptInRegistrationForDashboardNotPruned has " + e.length,
                ),
              t(
                e
                  .map((e) =>
                    e.jsondata && "" !== e.jsondata
                      ? Object.assign(Object.assign({}, e), {
                          jsondata: JSON.parse(e.jsondata),
                        })
                      : Object.assign(Object.assign({}, e), { jsondata: {} }),
                  )
                  .filter((e) => {
                    var t;
                    return null === (t = e.jsondata) || void 0 === t
                      ? void 0
                      : t.opt_in;
                  }),
              ));
          }, []),
          e
        );
      }
      var Zl = n(68562),
        Kl = n(85886),
        Yl = n(21963);
      function Ql(e) {
        const { pageid: t } = e,
          n = x(t),
          a = (0, b.useMemo)(
            () => (0, N.kQ)("partner_id", "application_config"),
            [],
          ),
          [i] = (0, Qn.DV)(a);
        if (!n)
          return b.createElement(
            "div",
            null,
            (0, me.Xx)("#OptIn_Appeals_DoesNotExist", t),
          );
        const l = (0, s.Xj)(n.event_title, (0, m.jM)(Je.De.LANGUAGE));
        return b.createElement(
          "div",
          { className: Ze().AdminPageCtn },
          b.createElement(
            "div",
            { className: Ze().PageTitle },
            (0, me.Xx)("#OptIn_Title", l),
          ),
          b.createElement(
            "div",
            null,
            (0, me.Xx)("#OptIn_DashBoard", i.name || "", a),
          ),
          b.createElement("hr", null),
          b.createElement($l, { optInDef: n }),
        );
      }
      function $l(e) {
        const { optInDef: t } = e,
          n = Math.floor(Date.now() / 1e3);
        return t.event_end_date < n
          ? b.createElement("div", null, (0, me.Xx)("#OptIn_Appeals_IsOver"))
          : b.createElement(
              "div",
              { className: Ze().ColumnCtn },
              b.createElement(
                "div",
                { className: Ze().LeftCol },
                t.event_end_date < n
                  ? b.createElement("div", null, (0, me.Xx)("#OptIn_IsOver"))
                  : b.createElement(
                      b.Fragment,
                      null,
                      b.createElement(to, { optInDef: t }),
                      b.createElement(no, { optInDef: t }),
                      b.createElement(ao, { optInDef: t }),
                      b.createElement(lo, { optInDef: t }),
                    ),
              ),
              b.createElement(
                "div",
                { className: Ze().RightCol },
                b.createElement(Jl, { optInDef: t }),
                b.createElement(eo, { optInDef: t }),
                b.createElement(ro, { optInDef: t }),
              ),
            );
      }
      function Jl(e) {
        const { optInDef: t } = e,
          n = ((0, s.Xj)(t.event_title, (0, m.jM)(Je.De.LANGUAGE)), nt(t));
        return b.createElement(
          "div",
          { className: Ze().ColHeader },
          Boolean(n) &&
            b.createElement("div", {
              className: Ze().ColHeaderImg,
              style: { backgroundImage: `url( '${n}' )` },
            }),
          b.createElement(
            "div",
            { className: Ze().SmallText },
            (0, me.Xx)("#DiscountDashboard_DetailView_StartTimeLabel"),
            " ",
            b.createElement("span", null, (0, un.$1)(t.event_start_date), " "),
          ),
          b.createElement(
            "div",
            { className: Ze().SmallText },
            (0, me.Xx)("#DiscountDashboard_DetailView_EndTimeLabel"),
            " ",
            b.createElement("span", null, (0, un.$1)(t.event_end_date), " "),
          ),
        );
      }
      function eo(e) {
        var t, n;
        const { optInDef: a } = e;
        return (
          null === (t = a.do_anytime) || void 0 === t
            ? void 0
            : t.discount_event_id
        )
          ? b.createElement(
              "div",
              { className: Ze().SectionCtn },
              b.createElement(
                "div",
                { className: Ze().TitleSmall },
                (0, me.Xx)("#OptIn_EnterDiscount"),
              ),
              b.createElement(
                "p",
                null,
                b.createElement(
                  "a",
                  {
                    href: `${
                      Je.De.PARTNER_BASE_URL
                    }promotion/discounts/dashboard/?de=${
                      null === (n = a.do_anytime) || void 0 === n
                        ? void 0
                        : n.discount_event_id
                    }`,
                  },
                  (0, me.Xx)("#OptIn_EnterDiscount_Button"),
                ),
              ),
            )
          : null;
      }
      function to(e) {
        const { optInDef: t } = e,
          n = (0, s.Xj)(t.event_title, (0, m.jM)(Je.De.LANGUAGE)),
          a = nt(t),
          i = (0, s.Xj)(t.description, (0, m.jM)(Je.De.LANGUAGE), null);
        return b.createElement(
          b.Fragment,
          null,
          b.createElement(
            "div",
            { className: Ze().ColHeader },
            Boolean(a)
              ? b.createElement("div", {
                  className: Ze().ColHeaderImg,
                  style: { backgroundImage: `url( '${a}' )` },
                })
              : Boolean(n) && b.createElement("div", null, n),
          ),
          b.createElement(
            "div",
            { className: Ze().SectionCtn },
            Boolean(t.optin_deadline_date) &&
              b.createElement(
                "h1",
                null,
                (0, me.Xx)("#OptIn_Submission_Deadline"),
                " ",
                (0, un.$1)(t.optin_deadline_date),
              ),
            Boolean(i) && b.createElement(Li.d, { text: i }),
          ),
        );
      }
      function no(e) {
        const { optInDef: t } = e,
          n = ql();
        return n && 0 != n.length
          ? b.createElement(
              "div",
              { className: Ze().SectionCtn },
              b.createElement(
                "div",
                null,
                (0, me.Xx)("#OptIn_Registered_Games"),
              ),
              b.createElement(
                "table",
                null,
                b.createElement(
                  "thead",
                  null,
                  b.createElement(
                    "tr",
                    null,
                    b.createElement(
                      "th",
                      null,
                      (0, me.Xx)("#OptIn_Table_Col_Game"),
                    ),
                    b.createElement(
                      "th",
                      null,
                      (0, me.Xx)("#OptIn_Table_Col_AppID"),
                    ),
                    b.createElement("th", null),
                  ),
                ),
                b.createElement(
                  "tbody",
                  null,
                  n.map((e) =>
                    b.createElement(io, {
                      key: "registered_" + e.appid,
                      bReview: !0,
                      appid: e.appid,
                      appName: e.app_name,
                      optInDef: t,
                    }),
                  ),
                ),
              ),
            )
          : null;
      }
      function ao(e) {
        const { optInDef: t } = e,
          n = (function () {
            const [e, t] = (0, b.useState)(null);
            return (
              (0, b.useEffect)(() => {
                const e = (0, N.ip)(
                  "optin_opportunities",
                  "application_config",
                );
                Wl(e) &&
                  ("dev" === N.De.WEB_UNIVERSE &&
                    console.log(
                      "useOptInOpportunitiesForDashboard has " + e.length,
                    ),
                  t(
                    e.map((e) =>
                      e.jsondata && "" !== e.jsondata
                        ? Object.assign(Object.assign({}, e), {
                            jsondata: JSON.parse(e.jsondata),
                          })
                        : Object.assign(Object.assign({}, e), { jsondata: {} }),
                    ),
                  ));
              }, []),
              e
            );
          })(),
          a = ql();
        return (!n || 0 == n.length) && (null == a ? void 0 : a.length) > 0
          ? null
          : b.createElement(
              "div",
              { className: Ze().SectionCtn },
              b.createElement("h1", null, (0, me.Xx)("#OptIn_Eligible_Games")),
              Boolean(!n || 0 == n.length)
                ? b.createElement(
                    "div",
                    null,
                    (0, me.Xx)("#OptIn_NoEligible_Games_Found"),
                  )
                : b.createElement(
                    "table",
                    { className: xe().EligibleGamesTable },
                    b.createElement(
                      "thead",
                      null,
                      b.createElement(
                        "tr",
                        null,
                        b.createElement(
                          "th",
                          null,
                          (0, me.Xx)("#OptIn_Table_Col_AppID"),
                        ),
                        b.createElement(
                          "th",
                          null,
                          (0, me.Xx)("#OptIn_Table_Col_Game"),
                        ),
                        b.createElement("th", null),
                      ),
                    ),
                    b.createElement(
                      "tbody",
                      null,
                      n.map((e) =>
                        b.createElement(io, {
                          key: "opportunity_" + e.appid,
                          appid: e.appid,
                          appName: e.app_name,
                          optInDef: t,
                        }),
                      ),
                    ),
                  ),
            );
      }
      function io(e) {
        const { appid: t, appName: n, optInDef: a, bReview: i } = e;
        return b.createElement(
          "tr",
          null,
          b.createElement("td", null, t),
          b.createElement("td", null, n),
          b.createElement(
            "td",
            null,
            b.createElement(
              "a",
              { href: `${Je.De.PARTNER_BASE_URL}optin/sale/${a.pageid}/${t}` },
              (0, me.Xx)(i ? "#OptIn_ReviewReg" : "#OptIn_OptIn"),
            ),
          ),
        );
      }
      function lo(e) {
        const { optInDef: t } = e,
          [n, a] = (0, b.useState)(null),
          [i] = (0, gt.jk)((0, Kl.u$)(n), (0, Kl.D3)(n), {
            include_assets: !0,
          }),
          l =
            (null == n ? void 0 : n.appid) &&
            (null == i ? void 0 : i.GetAppType()) == Zl.Ac.k_EStoreAppType_Game;
        return b.createElement(
          "div",
          { className: Ze().SectionCtn },
          b.createElement(
            "h1",
            null,
            (0, me.Xx)("#OptIn_EligibleMissed_Title"),
          ),
          b.createElement("p", null, (0, me.Xx)("#OptIn_NoEligible_Desc1")),
          b.createElement(
            "div",
            { className: Nl.AppealsEntryPointCtn },
            b.createElement(
              "h3",
              null,
              (0, me.Xx)("#OptIn_EligibleMissed_GetStarted"),
            ),
            b.createElement("p", null, (0, me.Xx)("#OptIn_NoEligible_Desc2")),
            b.createElement(Yl.u, {
              itemType: Zl.vn.k_EStoreItemType_App,
              strLabel: (0, me.Xx)("#OptIn_SearchGame"),
              fnSetItemID: (e) => {
                (n && n.appid == e) || a({ appid: e });
              },
            }),
            b.createElement(
              "div",
              { className: Nl.AppealSelectedApp },
              b.createElement(oo, { oFeaturedItem: n, oStoreItem: i }),
              b.createElement(
                j.zx,
                {
                  disabled: !l,
                  onClick: (e) =>
                    (0, q.b8)(
                      e,
                      `${Je.De.PARTNER_BASE_URL}optin/appeal/${t.pageid}/${
                        null == n ? void 0 : n.appid
                      }`,
                    ),
                },
                (0, me.Xx)(
                  l
                    ? "#OptIn_Appeals_Begin_Button"
                    : "#OptIn_SelectGameToAppeal",
                  null == i ? void 0 : i.GetName(),
                ),
              ),
            ),
          ),
        );
      }
      function oo(e) {
        const { oFeaturedItem: t, oStoreItem: n } = e;
        return t && !n
          ? b.createElement(
              "div",
              null,
              (0, me.Xx)("#OptIn_LoadingAppDetails", t.appid),
            )
          : n
          ? b.createElement(
              "div",
              { className: Nl.SelectedApp },
              b.createElement("img", { src: n.GetAssets().GetHeaderURL() }),
              b.createElement("div", null, n.GetName(), " ", "(", t.appid, ")"),
              Boolean(n.GetAppType() != Zl.Ac.k_EStoreAppType_Game) &&
                b.createElement(
                  "div",
                  null,
                  (0, me.Xx)("#OptIn_Dashbroad_NotSupportType"),
                ),
            )
          : null;
      }
      function ro(e) {
        const { optInDef: t } = e;
        return b.createElement(
          "div",
          { className: Ze().SectionCtn },
          b.createElement(Vl, { optInDef: t }),
          Boolean(Je.L7.is_support) &&
            b.createElement(
              "div",
              { className: H().ValveOnlyBackground },
              b.createElement(
                "a",
                {
                  href: `${Je.De.PARTNER_BASE_URL}optin/admin/edit/${t.pageid}`,
                },
                "Edit OptIn Definition",
              ),
            ),
        );
      }
      var so = n(78227);
      function co(e) {
        const t = B.Get(),
          n = F(),
          a = (0, Y.zD)(),
          i = (0, b.useMemo)(() => {
            const { jsonOptedIn: e, jsonInvited: t } = n;
            return [...e.map((e) => e.appid), ...t.map((e) => e.appid)];
          }, [n]),
          l = t.GetEventStartTime(),
          o = t.GetEventEndTime(),
          r = o - l,
          s = l - r,
          c = o + r;
        return b.createElement(
          X.SV,
          null,
          b.createElement(
            "div",
            { className: Ze().AdminPageCtn },
            b.createElement(
              "div",
              { className: Ze().PageTitle },
              "OptIn Admin Analysis: ",
              t.GetName(),
            ),
            b.createElement(
              "div",
              { className: Ze().PageSubTitle },
              "Sales stats will only work on opt-in that were setup as invite only as we build the stats for opted in and invted apps",
            ),
            b.createElement(
              "div",
              null,
              b.createElement($t, { ctnOverride: " " }),
              b.createElement(
                j.zx,
                null,
                b.createElement(
                  U.rU,
                  { to: fo.OptinAdminDashboard() },
                  "Dashboard",
                ),
              ),
            ),
            b.createElement("br", null),
            b.createElement("hr", null),
            b.createElement(
              "div",
              null,
              Boolean(0 == i.length)
                ? b.createElement(de.V, {
                    string: "Loading App Opt In / Invites",
                    size: "medium",
                    position: "center",
                  })
                : b.createElement(
                    "div",
                    { className: Ze().SectionCtn },
                    b.createElement(ho, {
                      rtBaselineStart: s,
                      rtBaselineEnd: l,
                      rtCompareStart: l,
                      rtCompareEnd: o,
                      rtPostlineStart: c < a ? o : void 0,
                      rtPostlineEnd: c < a ? c : void 0,
                      rgAppIDs: i,
                      strComparisonName: t.GetName(),
                    }),
                  ),
            ),
          ),
        );
      }
      const mo = { minimumFractionDigits: 0, maximumFractionDigits: 0 },
        po = { minimumFractionDigits: 1, maximumFractionDigits: 1 };
      function uo(e) {
        return `$${e.toLocaleString(void 0, mo)}`;
      }
      function _o(e) {
        return `${(100 * e).toLocaleString(void 0, po)} %`;
      }
      function ho(e) {
        var t;
        const {
            rtBaselineStart: n,
            rtBaselineEnd: a,
            rtCompareStart: i,
            rtCompareEnd: l,
            rgAppIDs: o,
            strComparisonName: r,
            rtPostlineStart: s,
            rtPostlineEnd: c,
          } = e,
          m = (0, so.dI)(n, a, o),
          d = (0, so.dI)(i, l, o),
          p = (0, so.dI)(s, c, o),
          [u, _] = (0, b.useState)(20),
          h = (0, b.useMemo)(
            () => (null == d ? void 0 : d.GetTopNApps(u)) || [],
            [d, u],
          );
        if (!m || !d || (!p && c))
          return b.createElement(de.V, {
            string: `Loading Packages Stats for ${o.length} apps`,
            size: "medium",
            position: "center",
          });
        const g = Math.max(1, Math.ceil((a - n) / 86400)),
          E = m.GetTotalSummary().gross_sales_usd / g / 100,
          v = m.GetTotalSummary().gross_sales_usd / 100,
          S = Math.max(1, Math.ceil((l - i) / 86400)),
          f = d.GetTotalSummary().gross_sales_usd / S / 100,
          D = d.GetTotalSummary().gross_sales_usd / 100,
          y = E > 0 ? f / E : 0;
        let I, C, A, T;
        p &&
          ((I = Math.max(1, Math.ceil((c - s) / 86400))),
          (C = p.GetTotalSummary().gross_sales_usd / S / 100),
          (A = p.GetTotalSummary().gross_sales_usd / 100),
          (T = E > 0 ? C / E : 0));
        const k =
            m.GetTotalSummary().gross_sales_usd +
            d.GetTotalSummary().gross_sales_usd +
            ((null === (t = null == p ? void 0 : p.GetTotalSummary()) ||
            void 0 === t
              ? void 0
              : t.gross_sales_usd) || 0),
          w = m.GetTotalSummary().gross_sales_usd / k,
          N = d.GetTotalSummary().gross_sales_usd / k;
        let L;
        return (
          p && (L = p.GetTotalSummary().gross_sales_usd / k),
          b.createElement(
            "div",
            null,
            b.createElement(
              "div",
              { className: $().TopStatsCtn },
              b.createElement(
                "div",
                { className: $().FeaturedApps },
                b.createElement(
                  "div",
                  { className: $().BigNumber },
                  o.length.toLocaleString(),
                ),
                b.createElement("span", null, "Included Apps"),
              ),
              b.createElement(
                "div",
                { className: $().FeaturedApps },
                b.createElement("div", { className: $().BigNumber }, uo(D)),
                b.createElement("span", null, "Total Revenue"),
              ),
              b.createElement(
                "div",
                { className: $().FeaturedApps },
                b.createElement("div", { className: $().BigNumber }, _o(y)),
                b.createElement("span", null, "Revenue Lift"),
              ),
            ),
            b.createElement("br", null),
            b.createElement(
              "div",
              { className: $().ComparisonRichTable },
              b.createElement(
                "table",
                null,
                b.createElement(
                  "tr",
                  null,
                  b.createElement("th", null, "Period"),
                  b.createElement("th", null, "Length"),
                  b.createElement("th", null, "Dates"),
                  b.createElement(
                    "th",
                    { style: { textAlign: "right" } },
                    "Total $",
                  ),
                  b.createElement("th", null, "Visual"),
                  b.createElement(
                    "th",
                    { style: { textAlign: "right" } },
                    "Daily Avg. $",
                  ),
                  b.createElement(
                    "th",
                    { style: { textAlign: "right" } },
                    "Revenue change vs. base",
                  ),
                ),
                b.createElement(
                  "tr",
                  null,
                  b.createElement("td", null, "Baseline"),
                  b.createElement("td", null, g, " days"),
                  b.createElement(
                    "td",
                    null,
                    b.createElement(V.Sw, { rtStartDate: n, rtEndDate: a }),
                  ),
                  b.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    uo(v),
                  ),
                  b.createElement(
                    "td",
                    null,
                    b.createElement("div", {
                      style: { width: 300 * w + "px" },
                      className: $().VisualBar,
                    }),
                  ),
                  b.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    uo(E),
                  ),
                  b.createElement("td", { style: { textAlign: "right" } }),
                ),
                b.createElement(
                  "tr",
                  null,
                  b.createElement("td", null, r || "Comparison"),
                  b.createElement("td", null, S, " days"),
                  b.createElement(
                    "td",
                    null,
                    b.createElement(V.Sw, { rtStartDate: i, rtEndDate: l }),
                  ),
                  b.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    uo(D),
                  ),
                  b.createElement(
                    "td",
                    null,
                    b.createElement("div", {
                      style: { width: 300 * N + "px" },
                      className: $().VisualBar,
                    }),
                  ),
                  b.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    uo(f),
                  ),
                  b.createElement(
                    "td",
                    { style: { textAlign: "right" } },
                    _o(y),
                  ),
                ),
                Boolean(p) &&
                  b.createElement(
                    "tr",
                    null,
                    b.createElement("td", null, "Following"),
                    b.createElement("td", null, I, " days"),
                    b.createElement(
                      "td",
                      null,
                      b.createElement(V.Sw, { rtStartDate: s, rtEndDate: c }),
                    ),
                    b.createElement(
                      "td",
                      { style: { textAlign: "right" } },
                      uo(A),
                    ),
                    b.createElement(
                      "td",
                      null,
                      b.createElement("div", {
                        style: { width: 300 * L + "px" },
                        className: $().VisualBar,
                      }),
                    ),
                    b.createElement(
                      "td",
                      { style: { textAlign: "right" } },
                      uo(C),
                    ),
                    b.createElement(
                      "td",
                      { style: { textAlign: "right" } },
                      _o(T),
                    ),
                  ),
              ),
            ),
            b.createElement("br", null),
            b.createElement("br", null),
            b.createElement(
              "div",
              null,
              b.createElement(go, {
                rgAppSummaries: h,
                nDays: S,
                strToken: r || "Comparison",
                oPriorSummary: m,
                nPriorDays: g,
                oPostSummary: p,
                nPostDays: I,
              }),
            ),
            b.createElement("br", null),
            b.createElement(
              j.zx,
              { onClick: () => _(u + 20) },
              "Show 20 More Top Apps",
            ),
          )
        );
      }
      function go(e) {
        const {
          rgAppSummaries: t,
          strToken: n,
          oPriorSummary: a,
          nDays: i,
          nPriorDays: l,
          oPostSummary: o,
          nPostDays: r,
        } = e;
        return b.createElement(
          "div",
          { className: $().ComparisonRichTable },
          b.createElement("h3", null, "Top ", t.length, " ", n, " Apps:"),
          b.createElement(
            "table",
            null,
            b.createElement(
              "thead",
              null,
              b.createElement(
                "tr",
                null,
                b.createElement("th", null, "#"),
                b.createElement("th", null, "AppID"),
                b.createElement("th", null, "Name"),
                b.createElement(
                  "th",
                  { style: { textAlign: "right" } },
                  "Total Revenue",
                ),
                b.createElement(
                  "th",
                  { style: { textAlign: "right" } },
                  "Daily Avg",
                ),
                b.createElement(
                  "th",
                  { style: { textAlign: "right" } },
                  "Prior Daily Avg",
                ),
                b.createElement(
                  "th",
                  { style: { textAlign: "right" } },
                  "Lift",
                ),
                Boolean(o) &&
                  b.createElement(
                    b.Fragment,
                    null,
                    b.createElement("th", null, "Post Daily Avg"),
                    b.createElement("th", null, "Post Revenue Change vs Base"),
                  ),
                b.createElement(
                  "th",
                  { style: { textAlign: "right" } },
                  "Total Units",
                ),
              ),
            ),
            t.map((e, t) =>
              b.createElement(vo, {
                key: n + e.appid,
                index: t,
                summary: e,
                nDays: i,
                priorSummary: a.GetAppSaleSummary(e.appid),
                nPriorDays: l,
                postSummary: null == o ? void 0 : o.GetAppSaleSummary(e.appid),
                nPostDays: r,
              }),
            ),
          ),
        );
      }
      const Eo = {};
      function vo(e) {
        const {
            summary: t,
            nDays: n,
            index: a,
            priorSummary: i,
            nPriorDays: l,
            postSummary: o,
            nPostDays: r,
          } = e,
          [s] = (0, gt.vs)(t.appid, Eo),
          c = t.gross_sales_usd / n / 100,
          m = i.gross_sales_usd / l / 100,
          d = m > 0 ? c / m : 0;
        let p, u;
        return (
          o && ((p = o.gross_sales_usd / r / 100), (u = m > 0 ? p / m : 0)),
          b.createElement(
            "tr",
            null,
            b.createElement("td", null, a + 1),
            b.createElement("td", null, t.appid),
            b.createElement(
              "td",
              null,
              b.createElement(
                "a",
                { href: null == s ? void 0 : s.GetStorePageURL() },
                (null == s ? void 0 : s.GetName()) || "loading",
              ),
            ),
            b.createElement(
              "td",
              { style: { textAlign: "right" } },
              uo(t.gross_sales_usd / 100),
            ),
            b.createElement("td", { style: { textAlign: "right" } }, uo(c)),
            b.createElement("td", { style: { textAlign: "right" } }, uo(m)),
            b.createElement("td", { style: { textAlign: "right" } }, _o(d)),
            Boolean(o) &&
              b.createElement(
                b.Fragment,
                null,
                b.createElement("td", { style: { textAlign: "right" } }, uo(p)),
                b.createElement("td", { style: { textAlign: "right" } }, _o(u)),
              ),
            b.createElement(
              "td",
              { style: { textAlign: "right" } },
              t.gross_units_sold.toLocaleString(),
            ),
          )
        );
      }
      function So(e) {
        const [t, n] = (0, b.useState)(null);
        return (
          (0, b.useEffect)(() => {
            let t = L.Get().GetDefinition(e.pageid),
              a = L.Get().GetOptInStats()[e.pageid];
            B.Get().Reset(t, a), n(B.Get());
          }, [e.pageid]),
          t && t.BInitialized()
            ? b.createElement(b.Fragment, null, e.children)
            : b.createElement(de.V, null)
        );
      }
      const fo = {
          OptinAdminDashboard: () => "/admin/",
          OptinAdminEdit: (e) => `/admin/edit/${e}`,
          OptinAdminAnalysis: (e) => `/admin/analysis/${e}`,
          OptinAdminSupport: (e) => `/admin/support/${e}`,
          OptInPartnerDashboard: (e) => `/sale*/${e}`,
          OptInApp: (e, t) => `/sale*/${e}/${t}`,
          OptInAppAppeal: (e, t) => `/appeal/${e}/${t}`,
          OptInAppReview: (e) => `/appreview/${e}`,
        },
        Do = "sale_";
      function yo(e) {
        return (null == e ? void 0 : e.startsWith(Do)) ? e : Do + e;
      }
      function Io(e) {
        return (0, il.N)()
          ? b.createElement(
              U.VK,
              { basename: (0, a.l)() + "optin/" },
              b.createElement(tl, null),
              b.createElement(
                Yn.rs,
                null,
                b.createElement(Yn.AW, {
                  exact: !0,
                  path: a.Z.DiagData(),
                  render: (e) =>
                    b.createElement(
                      ze.m,
                      Object.assign({}, e, {
                        strConfigID: "application_config",
                      }),
                    ),
                }),
                b.createElement(Yn.AW, {
                  exact: !0,
                  path: fo.OptinAdminDashboard(),
                  component: fe,
                }),
                b.createElement(Yn.AW, {
                  exact: !0,
                  path: fo.OptinAdminEdit(":pageid"),
                  render: (e) =>
                    b.createElement(
                      So,
                      { pageid: e.match.params.pageid },
                      b.createElement(bi, null),
                    ),
                }),
                b.createElement(Yn.AW, {
                  exact: !0,
                  path: fo.OptinAdminAnalysis(":pageid"),
                  render: (e) =>
                    b.createElement(
                      So,
                      { pageid: e.match.params.pageid },
                      b.createElement(co, null),
                    ),
                }),
                b.createElement(Yn.AW, {
                  exact: !0,
                  path: fo.OptinAdminSupport(":appid"),
                  render: (e) =>
                    b.createElement(wi, {
                      appid: Number.parseInt(e.match.params.appid),
                    }),
                }),
                b.createElement(Yn.AW, {
                  path: fo.OptInApp(":partialpageid", ":appid"),
                  render: (e) =>
                    b.createElement(el, {
                      appid: e.match.params.appid,
                      pageid: yo(e.match.params.partialpageid),
                    }),
                }),
                b.createElement(Yn.AW, {
                  path: fo.OptInAppReview(":pageid"),
                  render: (e) =>
                    b.createElement(Cl, { pageid: e.match.params.pageid }),
                }),
                b.createElement(Yn.AW, {
                  path: fo.OptInAppAppeal(":partialpageid", ":appid"),
                  render: (e) =>
                    b.createElement(Ul, {
                      appid: Number.parseInt(e.match.params.appid),
                      pageid: yo(e.match.params.partialpageid),
                    }),
                }),
                b.createElement(Yn.AW, {
                  path: fo.OptInPartnerDashboard(":partialpageid"),
                  render: (e) =>
                    b.createElement(Ql, {
                      pageid: yo(e.match.params.partialpageid),
                    }),
                }),
                b.createElement(Yn.AW, { component: i.R }),
              ),
            )
          : null;
      }
    },
    94835: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { SaleRoutes: () => v, default: () => S });
      var a = n(71209),
        i = n(96927),
        l = n(89526),
        o = n(565),
        r = n(59934),
        s = n(82988),
        c = n(32765);
      class m {
        constructor() {
          (this.m_mapSalePage = new Map()),
            (this.m_rgUnmigratedSalesPage = new Array());
        }
        GetUnmigratedSalesPages() {
          return this.m_rgUnmigratedSalesPage;
        }
        GetAllSalePages() {
          return Array.from(this.m_mapSalePage.values());
        }
        GetPageByID(e) {
          return this.m_mapSalePage.get(e);
        }
        static Get() {
          return (
            m.s_PageStore || ((m.s_PageStore = new m()), m.s_PageStore.Init()),
            m.s_PageStore
          );
        }
        Init() {
          let e = (0, c.kQ)("old_sale_pages", "application_config");
          this.ValidateStoreDefault(e) &&
            e.forEach((e) => {
              this.m_mapSalePage.set(e.pageid, e),
                e.migrated_clan_account_id ||
                  this.m_rgUnmigratedSalesPage.push(e);
            });
        }
        ValidateStoreDefault(e) {
          const t = e;
          return (
            !!(
              t &&
              Array.isArray(t) &&
              t.length > 0 &&
              "object" == typeof t[0]
            ) && "string" == typeof t[0].pageid
          );
        }
      }
      var d = n(21904),
        p = n(3301),
        u = n(10441);
      function _(e) {
        return l.createElement(
          "div",
          null,
          l.createElement("h2", null, "Unmigrated Sales Pages"),
          l.createElement("hr", null),
          m
            .Get()
            .GetUnmigratedSalesPages()
            .map((e) =>
              l.createElement(h, { key: e.pageid, pageid: e.pageid }),
            ),
        );
      }
      function h(e) {
        let t = m.Get().GetPageByID(e.pageid);
        return l.createElement(
          "div",
          null,
          l.createElement("div", null, t.pageid),
          l.createElement(
            o.rU,
            { to: v.SaleMigrationPageDebug(t.pageid) },
            "Debug Data",
          ),
        );
      }
      function g(e) {
        const { pageid: t } = e,
          n = m.Get().GetPageByID(t),
          a = (0, u.cm)(n.accountid);
        return a
          ? l.createElement(
              "div",
              null,
              l.createElement(
                o.rU,
                { to: v.SaleMigrationTool() },
                "< Return to Migration Toolset",
              ),
              l.createElement("h2", null, "Debug: ", e.pageid),
              l.createElement("hr", null),
              l.createElement("div", null, "Name: ", n.display_name),
              l.createElement(
                "div",
                null,
                "Creator: ",
                n.accountid,
                " - ",
                a.persona,
              ),
              l.createElement(
                "div",
                null,
                "Last Modified: ",
                n.last_modified,
                Boolean(0 != n.last_modified) &&
                  l.createElement(d.H6, {
                    dateAndTime: n.last_modified,
                    bSingleLine: !0,
                  }),
              ),
              l.createElement("h1", null, "Sale Page Body Raw"),
              l.createElement(s.G, { data: n }),
            )
          : l.createElement(p.V, { string: "Loading User Info" });
      }
      var E = n(39116);
      const v = {
        SaleDashboardView: () => "/(dashboard)?/",
        SaleMigrationTool: () => "/migration/",
        SaleMigrationPageDebug: (e) => `/migration/debug/${e}/`,
      };
      function S(e) {
        return l.createElement(
          o.VK,
          { basename: (0, i.l)() + "sales/" },
          l.createElement(
            r.rs,
            null,
            l.createElement(r.AW, {
              exact: !0,
              path: i.Z.DiagData(),
              render: (e) =>
                l.createElement(
                  s.m,
                  Object.assign({}, e, { strConfigID: "application_config" }),
                ),
            }),
            l.createElement(r.AW, {
              exact: !0,
              path: v.SaleDashboardView(),
              component: E.n,
            }),
            l.createElement(r.AW, {
              exact: !0,
              path: v.SaleMigrationTool(),
              component: _,
            }),
            l.createElement(r.AW, {
              exact: !0,
              path: v.SaleMigrationPageDebug(":pageid"),
              render: (e) =>
                l.createElement(g, { pageid: e.match.params.pageid }),
            }),
            l.createElement(r.AW, { component: a.R }),
          ),
        );
      }
    },
    76672: (e, t, n) => {
      "use strict";
      n.d(t, { Z: () => a });
      const a =
        "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTQwMHB4IiBoZWlnaHQ9IjE0MDlweCIgdmlld0JveD0iMCAxODAxLjUgMTQwMCAxNDA5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMTgwMS41IDE0MDAgMTQwOSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iaWNvbm1vbnN0ci1saW5rLTFfMV8iIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zNjIuMzUzLDIzMTAuNTg4YzE0OC4yMzUtMTQ4LjIzNSwzODcuMDYtMTQ4LjIzNSw1MjcuMDYsMA0KCWMxNi40NzEsMTYuNDcxLDMyLjk0MSw0MS4xNzcsNDkuNDExLDU3LjY0N0w4MDcuMDU5LDI1MDBjLTQxLjE3Ni04Mi4zNTMtMTMxLjc2NS0xMzEuNzY1LTIyMi4zNTMtMTE1LjI5NA0KCWMtNDEuMTc3LDguMjM1LTc0LjExOCwyNC43MDYtOTguODIzLDQ5LjQxMWwtMjQ3LjA1OSwyNDcuMDZjLTc0LjExOCw3NC4xMTctNzQuMTE4LDE5Ny42NDYsMCwyODANCgljNzQuMTE4LDc0LjExNywxOTcuNjQ3LDc0LjExNywyODAsMGwwLDBsNzQuMTE4LTc0LjExOGM3NC4xMTcsMjQuNzA2LDE0OC4yMzUsNDEuMTc3LDIyMi4zNTMsMzIuOTQxbC0xNzIuOTQsMTcyLjk0MQ0KCWMtMTQ4LjIzNSwxNDguMjM1LTM4Ny4wNiwxNDguMjM1LTUyNy4wNiwwcy0xNDguMjM1LTM4Ny4wNTksMC01MjcuMDU5QzEwNy4wNTksMjU1Ny42NDcsMzYyLjM1MywyMzEwLjU4OCwzNjIuMzUzLDIzMTAuNTg4eg0KCSBNNzU3LjY0NiwxOTA3LjA1OUw1OTIuOTQxLDIwODBjNzQuMTE3LTguMjM1LDE0OC4yMzUsOC4yMzUsMjE0LjExNywzMi45NDFsNzQuMTE4LTc0LjExOGM3NC4xMTctNzQuMTE3LDE5Ny42NDYtNzQuMTE3LDI4MCwwDQoJYzgyLjM1Myw3NC4xMTgsNzQuMTE3LDE5Ny42NDcsMCwyODBsLTI1NS4yOTQsMjQ3LjA2Yy03NC4xMTgsNzQuMTE3LTE5Ny42NDcsNzQuMTE3LTI4MCwwDQoJYy04LjIzNS0xNi40NzEtMjQuNzA2LTQxLjE3Ny0zMi45NDEtNjUuODgzbC0xMzEuNzY1LDEzMS43NjVjMTYuNDcxLDI0LjcwNiwzMi45NCw0MS4xNzcsNDkuNDExLDU3LjY0Nw0KCWMxNDguMjM1LDE0OC4yMzUsMzg3LjA1OSwxNDguMjM1LDUyNy4wNiwwbDAsMGwyNDcuMDU5LTI0Ny4wNmMxNDguMjM1LTE0OC4yMzUsMTQ4LjIzNS0zODcuMDU5LDAtNTI3LjA1OQ0KCVM5MDUuODgzLDE3NjcuMDU5LDc1Ny42NDYsMTkwNy4wNTlMNzU3LjY0NiwxOTA3LjA1OUw3NTcuNjQ2LDE5MDcuMDU5eiIvPg0KPC9zdmc+DQo=";
    },
    7787: (e, t, n) => {
      "use strict";
      n.d(t, { Z: () => a });
      const a =
        n.p +
        "images/applications/appmgmt/reddit_large.png?v=valveisgoodatcaching";
    },
  },
]);
